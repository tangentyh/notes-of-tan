<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring Framework | Notes of Tan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://v1.vuepress.vuejs.org/hero.png">
    <meta name="description" content="Tan&#39;s notes.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/notes-of-tan/assets/css/0.styles.0a6bd042.css" as="style"><link rel="preload" href="/notes-of-tan/assets/js/app.4583dc19.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/2.56609c80.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/19.12213b74.js" as="script"><link rel="prefetch" href="/notes-of-tan/assets/js/10.6961b553.js"><link rel="prefetch" href="/notes-of-tan/assets/js/11.bbb6ea24.js"><link rel="prefetch" href="/notes-of-tan/assets/js/12.db860052.js"><link rel="prefetch" href="/notes-of-tan/assets/js/13.779ab4ef.js"><link rel="prefetch" href="/notes-of-tan/assets/js/14.758f3090.js"><link rel="prefetch" href="/notes-of-tan/assets/js/15.58c6e088.js"><link rel="prefetch" href="/notes-of-tan/assets/js/16.a01fd7b3.js"><link rel="prefetch" href="/notes-of-tan/assets/js/17.a0047c0f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/18.9dd4cc77.js"><link rel="prefetch" href="/notes-of-tan/assets/js/20.acc010ce.js"><link rel="prefetch" href="/notes-of-tan/assets/js/21.82c004a6.js"><link rel="prefetch" href="/notes-of-tan/assets/js/22.dd12db86.js"><link rel="prefetch" href="/notes-of-tan/assets/js/23.2c65e4c4.js"><link rel="prefetch" href="/notes-of-tan/assets/js/24.40c9232c.js"><link rel="prefetch" href="/notes-of-tan/assets/js/25.b5ad4240.js"><link rel="prefetch" href="/notes-of-tan/assets/js/26.26b5e4b2.js"><link rel="prefetch" href="/notes-of-tan/assets/js/27.c8efa304.js"><link rel="prefetch" href="/notes-of-tan/assets/js/28.2ccf3821.js"><link rel="prefetch" href="/notes-of-tan/assets/js/29.fa7b4513.js"><link rel="prefetch" href="/notes-of-tan/assets/js/3.565b7101.js"><link rel="prefetch" href="/notes-of-tan/assets/js/30.ae22c2fb.js"><link rel="prefetch" href="/notes-of-tan/assets/js/31.b9ade7f0.js"><link rel="prefetch" href="/notes-of-tan/assets/js/32.9ff84837.js"><link rel="prefetch" href="/notes-of-tan/assets/js/33.5d420b01.js"><link rel="prefetch" href="/notes-of-tan/assets/js/34.2a02cb4f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/35.081a6025.js"><link rel="prefetch" href="/notes-of-tan/assets/js/36.6b57f3ff.js"><link rel="prefetch" href="/notes-of-tan/assets/js/37.185689b4.js"><link rel="prefetch" href="/notes-of-tan/assets/js/4.ea586b04.js"><link rel="prefetch" href="/notes-of-tan/assets/js/5.0096d329.js"><link rel="prefetch" href="/notes-of-tan/assets/js/6.254eb4c9.js"><link rel="prefetch" href="/notes-of-tan/assets/js/7.1b486bac.js"><link rel="prefetch" href="/notes-of-tan/assets/js/8.09d51994.js"><link rel="prefetch" href="/notes-of-tan/assets/js/9.5d8277ff.js">
    <link rel="stylesheet" href="/notes-of-tan/assets/css/0.styles.0a6bd042.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes-of-tan/" class="home-link router-link-active"><!----> <span class="site-name">Notes of Tan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java Basics
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaUtils.html" class="nav-link">
  Java Utilities
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="nav-link">
  Java Concurrency
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaIO.html" class="nav-link">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaMisc.html" class="nav-link">
  Java Miscellanea
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/JVM.html" class="nav-link">
  Java Virtual Machine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SpringNotes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/OS-notes.html" class="nav-link">
  OS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/database.html" class="nav-link">
  Database
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SQL_notes.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/distributed.html" class="nav-link">
  Distributed System
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/redis-notes.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/CSS-notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/html-notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/jsNotes.html" class="nav-link">
  JS, TS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/BOM_DOM_notes.html" class="nav-link">
  BOM, DOM, Web API
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/react_notes.html" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/algo_notes.html" class="nav-link">
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/git_notes.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/DesignPatternNotes.html" class="nav-link">
  Design Pattern
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/HTTP.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/mac-notes.html" class="nav-link">
  MacOS
</a></li></ul></div></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java Basics
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaUtils.html" class="nav-link">
  Java Utilities
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="nav-link">
  Java Concurrency
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaIO.html" class="nav-link">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaMisc.html" class="nav-link">
  Java Miscellanea
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/JVM.html" class="nav-link">
  Java Virtual Machine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SpringNotes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/OS-notes.html" class="nav-link">
  OS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/database.html" class="nav-link">
  Database
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SQL_notes.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/distributed.html" class="nav-link">
  Distributed System
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/redis-notes.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/CSS-notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/html-notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/jsNotes.html" class="nav-link">
  JS, TS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/BOM_DOM_notes.html" class="nav-link">
  BOM, DOM, Web API
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/react_notes.html" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/algo_notes.html" class="nav-link">
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/git_notes.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/DesignPatternNotes.html" class="nav-link">
  Design Pattern
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/HTTP.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/mac-notes.html" class="nav-link">
  MacOS
</a></li></ul></div></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Spring Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-of-tan/backend/SpringNotes.html#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#utils" class="sidebar-link">Utils</a></li></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#servlet" class="sidebar-link">Servlet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#http-servlet-servletconfig-and-servletcontext" class="sidebar-link">HTTP Servlet, ServletConfig and ServletContext</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#http-servlet-request-and-response" class="sidebar-link">HTTP Servlet Request and Response</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#servlet-listeners" class="sidebar-link">Servlet Listeners</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#servlet-filters" class="sidebar-link">Servlet Filters</a></li></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#application-context" class="sidebar-link">Application Context</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#spring-container" class="sidebar-link">Spring Container</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#configure-contexts" class="sidebar-link">Configure Contexts</a></li></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#beans" class="sidebar-link">Beans</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#bean-attributes" class="sidebar-link">Bean Attributes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#bean-resolve-attributes" class="sidebar-link" style="padding-left:3rem;">Bean Resolve Attributes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#bean-on-off-attributes" class="sidebar-link" style="padding-left:3rem;">Bean On-Off Attributes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#bean-loading-attributes" class="sidebar-link" style="padding-left:3rem;">Bean Loading Attributes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#bean-definitions" class="sidebar-link">Bean Definitions</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#bean-lifecycle" class="sidebar-link">Bean Lifecycle</a></li></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#dependency-injection" class="sidebar-link">Dependency Injection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#externalized-configuration" class="sidebar-link">Externalized Configuration</a></li></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#spel" class="sidebar-link">SpEL</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#aspects" class="sidebar-link">Aspects</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#springmvc" class="sidebar-link">SpringMVC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#enable-mvc" class="sidebar-link">Enable MVC</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#dispatcherservlet" class="sidebar-link">DispatcherServlet</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#controller" class="sidebar-link">Controller</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#validation" class="sidebar-link">Validation</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#interceptor" class="sidebar-link">Interceptor</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#web-client" class="sidebar-link">Web Client</a></li></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#data" class="sidebar-link">Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/SpringNotes.html#jackson" class="sidebar-link">Jackson</a></li></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#integration" class="sidebar-link">Integration</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#security" class="sidebar-link">Security</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#spring-boot" class="sidebar-link">Spring Boot</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/backend/SpringNotes.html#junit-5" class="sidebar-link">JUnit 5</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="spring-framework"><a href="#spring-framework" class="header-anchor">#</a> Spring Framework</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <ol><li><p>docs</p> <ul><li>Spring Framework
<ul><li><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/index.html" target="_blank" rel="noopener noreferrer">Spring Framework Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring/docs/current/javadoc-api/" target="_blank" rel="noopener noreferrer">Overview (Spring Framework current API)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>AOP
<ul><li><a href="https://www.eclipse.org/aspectj/doc/released/aspectj5rt-api/overview-summary.html" target="_blank" rel="noopener noreferrer">Overview (AspectJ(tm) aspectj5rt API)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://javadoc.io/doc/org.aspectj/aspectjweaver/1.9.4" target="_blank" rel="noopener noreferrer">org.aspectj:aspectjweaver:1.9.4 API Doc :: Javadoc.IO<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>Spring Boot
<ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html" target="_blank" rel="noopener noreferrer">Appendix A. Common application properties<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/" target="_blank" rel="noopener noreferrer">Spring Boot Reference Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/" target="_blank" rel="noopener noreferrer">Spring Boot Reference Guide single page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-boot/docs/current/api/" target="_blank" rel="noopener noreferrer">Overview (Spring Boot RELEASE API)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li><p>philosophy</p> <ul><li>beans — Java objects that perform business logic, execute tasks, persist and retrieve persisted data, respond to HTTP requests, and more</li> <li>config — XML-based, annotations, and JavaConfig-based approaches for configuring beans
<ul><li>can used as meta annotation — for example any annotation that is annotated with <code>@Component</code> becomes a component annotation, and so forth</li></ul></li> <li><code>-Aware</code> — <code>set-</code> methods for callbacks
<ul><li><code>org.springframework.context.EnvironmentAware</code> — <code>void setEnvironment(Environment environment)</code></li></ul></li> <li><code>-Capable</code>, <code>-edBean</code> — <code>get-</code> methods
<ul><li><code>org.springframework.core.env.EnvironmentCapable</code> — <code>Environment getEnvironment()</code></li></ul></li> <li><code>Configurable-</code>: <code>ConfigurableApplicationContext</code>, <code>ConfigurableBeanFactory</code> — typically implement to configure</li> <li><code>Listable-</code>: <code>ListableBeanFactory</code> — can enumerate, rather than attempting bean lookup by name one by one</li> <li>parameters
<ul><li><code>boolean required</code> in annotation parameter — <code>Exception</code> or <code>null</code></li> <li><code>java.util.Optional</code> as method parameter — equivalent to <code>required</code> set <code>false</code></li></ul></li> <li>AOP — JDK proxy or CGLIB subclassing; CGLIB proxy instance is created through Objenesis, so constructor is not called twice since 4.0</li></ul></li></ol> <h3 id="utils"><a href="#utils" class="header-anchor">#</a> Utils</h3> <ol><li><p>create a new Spring project</p> <ul><li><a href="https://spring.io/guides/gs/rest-service/" target="_blank" rel="noopener noreferrer">official docs: Getting Started · Building a RESTful Web Service<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">Spring Initializr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>metadata
<ul><li><code>groupId</code> — Java package like</li> <li><code>artifactId</code> — use hyphen as delimiters</li></ul></li> <li>create a project using maven<div class="language-shell extra-class"><pre class="language-shell"><code>mvn archetype:generate <span class="token parameter variable">-DgroupId</span><span class="token operator">=</span>com<span class="token punctuation">..</span>todo <span class="token parameter variable">-DartifactId</span><span class="token operator">=</span>todo <span class="token parameter variable">-Dversion</span><span class="token operator">=</span><span class="token number">0.0</span>.1-SNAPSHOT <span class="token parameter variable">-DinteractiveMode</span><span class="token operator">=</span>false <span class="token parameter variable">-DarchetypeArtifactId</span><span class="token operator">=</span>maven-archetype-webapp
</code></pre></div></li> <li>maven configuration
<ul><li><a href="https://github.com/spring-projects/spring-boot/blob/bf9dc2f25c035803d54c1bfa4b5986a88122d5b2/spring-boot-project/spring-boot-dependencies/pom.xml#L34-L245" target="_blank" rel="noopener noreferrer">properties for dependencies versions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-build-systems.html#using-boot-starter" target="_blank" rel="noopener noreferrer">starters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li><p><a href="https://projectlombok.org/features/all" target="_blank" rel="noopener noreferrer">lombok<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ol> <h2 id="servlet"><a href="#servlet" class="header-anchor">#</a> Servlet</h2> <ol><li><p>maven artifact</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>docs
<ul><li><a href="https://javadoc.io/static/javax.servlet/javax.servlet-api/4.0.1/javax/servlet/http/package-summary.html" target="_blank" rel="noopener noreferrer">javax.servlet.http (Java Servlet 4.0)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://wiki.metawerx.net/wiki/Web.xml" target="_blank" rel="noopener noreferrer">web.xml Reference Guide for Tomcat - Metawerx Java Wiki<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://download.oracle.com/otndocs/jcp/servlet-4-final-spec/index.html" target="_blank" rel="noopener noreferrer">JSR-000369 Java Servlet 4.0 Specification Final Release<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jcp.org/en/jsr/detail?id=369" target="_blank" rel="noopener noreferrer">The Java Community Process(SM) Program - JSRs: Java Specification Requests - detail JSR# 369<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li><p><code>web.xml</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Hello World Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file-list</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file</span><span class="token punctuation">&gt;</span></span>index.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file</span><span class="token punctuation">&gt;</span></span>index.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file-list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">&gt;</span></span>500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/errors/servererror.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><code>interface javax.servlet.ServletContainerInitializer</code> — support code-based configuration of the servlet container using Spring's WebApplicationInitializer SPI as opposed to (or possibly in combination with) the traditional <code>web.xml</code>-based approach</p> <ul><li><code>void onStartup(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx)</code> — on the startup of the application
<ul><li><code>c</code> — classes in <code>@javax.servlet.annotation.HandlesTypes::value</code> annotated on the implementation, <code>null</code> if not annotated with <code>@HandlesTypes</code> or <code>value</code> is empty</li></ul></li> <li>SPI — implementations as service provider in <code>META-INF/services</code> inside JAR files</li> <li><code>org.springframework.web.SpringServletContainerInitializer</code> — Spring's implementation, defaults to delegating to all <code>WebApplicationInitializer::onStartup</code> with <code>servletContext</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@HandlesTypes</span><span class="token punctuation">(</span><span class="token class-name">WebApplicationInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringServletContainerInitializer</span>
<span class="token keyword">implements</span> <span class="token class-name">ServletContainerInitializer</span>
</code></pre></div></li></ul></li></ol> <h3 id="http-servlet-servletconfig-and-servletcontext"><a href="#http-servlet-servletconfig-and-servletcontext" class="header-anchor">#</a> HTTP Servlet, ServletConfig and ServletContext</h3> <ol><li><p><code>javax.servlet.http.HttpServlet</code> — an abstract class to be subclassed to create an HTTP servlet</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">HttpServlet</span> <span class="token keyword">extends</span> <span class="token class-name">GenericServlet</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">GenericServlet</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Servlet</span><span class="token punctuation">,</span> <span class="token class-name">ServletConfig</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>dispatch
<ul><li><code>void service(ServletRequest req, ServletResponse res)</code> — dispatches client requests to the protected one</li> <li><code>protected void service(HttpServletRequest req, HttpServletResponse resp)</code> — dispatches HTTP requests to the <code>doXXX</code> methods</li></ul></li> <li>HTTP methods, <code>throws ServletException, IOException</code> <ul><li><code>protected void doDelete(HttpServletRequest req, HttpServletResponse resp)</code></li> <li><code>protected void doGet(HttpServletRequest req, HttpServletResponse resp)</code> <ul><li><code>protected long getLastModified(HttpServletRequest req)</code></li></ul></li> <li><code>doHead</code>, <code>doOptions</code>, <code>doPost</code>, <code>doPut</code>, <code>doTrace</code></li></ul></li> <li>lifecycle, for override
<ul><li><code>void init()</code> — called when the first request arrives for this servlet if the order is not specified in <code>&lt;load-on-startup&gt;</code>; called in <code>void init(ServletConfig config)</code>, <code>ServletConfig</code> and <code>ServletContext</code> are already available</li> <li><code>void destroy()</code></li></ul></li> <li>get config
<ul><li><code>ServletConfig getServletConfig()</code></li> <li><code>ServletContext getServletContext()</code></li> <li><code>interface javax.servlet.ServletConfig</code> — configures in <code>web.xml</code> <ul><li><code>String getInitParameter(String name)</code></li> <li><code>Enumeration&lt;String&gt; getInitParameterNames()</code></li> <li><code>ServletContext getServletContext()</code></li> <li><code>String getServletName()</code></li></ul></li></ul></li></ul></li> <li><p>config <code>HttpServlet</code> — in <code>web.xml</code> or by annotations</p> <ul><li><code>@javax.servlet.annotation.WebServlet</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">WebServlet</span>
</code></pre></div><ul><li><code>boolean asyncSupported</code>, <code>String description</code>, <code>String displayName</code>, <code>WebInitParam[] initParams</code>, <code>String largeIcon</code>, <code>int loadOnStartup</code>, <code>String name</code>, <code>String smallIcon</code>, <code>String[] urlPatterns</code>, <code>String[] value</code></li></ul></li> <li><code>@MultipartConfig</code>, see after</li> <li>in <code>web.xml</code> — the same class can have multiple instances with different names<div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>comingsoon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>mysite.server.ComingSoonServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>teamColor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>red<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>bgColor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>#CC0000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>comingsoon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>&lt;url-pattern&gt;/&lt;/url-pattern&gt;</code> — when mapping to the application root, use <code>/</code> instead of <code>/*</code>, avoiding sending even internal JSP requests to the Servlet</li> <li><code>&lt;multipart-config&gt;</code>, see after</li> <li>static server — use the <code>default</code> servlet, implementation is <code>org.apache.catalina.servlets.DefaultServlet</code> for Tomcat<div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/resources/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.css<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.js<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.gif<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.jpg<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ul></li> <li><p><code>interface javax.servlet.ServletContext</code> — a set of methods that a servlet uses to communicate with its servlet container, one context per &quot;web application&quot; per JVM</p> <ul><li>context parameter<div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>settingOne<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>foo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>settingTwo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>bar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>String getInitParameter(String name)</code>, <code>Enumeration&lt;String&gt; getInitParameterNames()</code></li> <li><code>boolean setInitParameter(String name, String value)</code></li></ul></li> <li>registration
<ul><li><code>addFilter</code></li> <li><code>addListener</code></li> <li><code>addServlet</code></li></ul></li></ul></li> <li><p><code>interface javax.servlet.AsyncContext</code> — initialized by <code>ServletRequest::startAsync</code></p> <ul><li><code>void start(Runnable run)</code></li> <li><code>boolean hasOriginalRequestAndResponse()</code></li></ul></li></ol> <h3 id="http-servlet-request-and-response"><a href="#http-servlet-request-and-response" class="header-anchor">#</a> HTTP Servlet Request and Response</h3> <ol><li><p><code>javax.servlet.http.HttpServletRequest</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">HttpServletRequest</span> <span class="token keyword">extends</span> <span class="token class-name">ServletRequest</span>
</code></pre></div><ul><li>get request info — headers, URL and URL segments, sessions and cookies and more
<ul><li><code>String getParameter(String name)</code> and more — query string or posted form data; when latter, <code>getInputStream()</code> used internally, later call to <code>getInputStream()</code> or <code>getReader</code> will throw <code>IllegalStateException</code></li> <li><code>BufferedReader getReader()</code>, <code>ServletInputStream getInputStream()</code> <ul><li><code>javax.servlet.ServletInputStream</code> — can have <code>ReadListener</code> to notify when possible to read</li></ul></li></ul></li> <li>file upload, or the <code>multipart/form-data</code> MIME type
<ul><li><code>Part getPart(String name)</code>, <code>Collection&lt;Part&gt; getParts()</code></li> <li><code>@javax.servlet.annotation.MultipartConfig</code> — annotated instances of the <code>Servlet</code> expect requests that conform to the <code>multipart/form-data</code> MIME type
<ul><li><code>int fileSizeThreshold</code> - <code>long maxFileSize</code> - <code>long maxRequestSize</code></li> <li><code>String location</code> — file store location, can leave to container to determine</li></ul></li></ul></li> <li>serve HTML files, JSP files — include or forward to another resource (servlet, JSP file, or HTML file) from a request
<ul><li><code>RequestDispatcher getRequestDispatcher(String path)</code></li> <li><code>RequestDispatcher::forward</code>, <code>RequestDispatcher::include</code></li></ul></li> <li>async
<ul><li><code>startAsync</code> — can wrap original request and response</li> <li><code>isAsyncStarted</code> - <code>isAsyncSupported</code> - <code>getAsyncContext</code></li></ul></li> <li>customized implementation — <code>javax.servlet.ServletRequestWrapper</code>, <code>javax.servlet.http.HttpServletRequestWrapper</code> for extending</li></ul></li> <li><p>sessions</p> <ul><li><code>interface javax.servlet.http.HttpSession</code> — attribute getters, setters and more</li> <li>session types
<ul><li>session in URL path, insecure and obsolete — <code>HttpServletResponse::encodeURL</code>, <code>HttpServletResponse::encodeRedirectURL</code></li> <li>cookie session</li> <li>SSL session ID as HTTP session ID, unreliable</li></ul></li> <li><code>HttpServletRequest::getSession</code> — get or create</li> <li>in clustered environment — use sticky sessions or session replication</li> <li>session config in <code>web.xml</code><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cookie-config</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>JSESSIONID<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>domain</span><span class="token punctuation">&gt;</span></span>example.org<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>domain</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>/shop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comment</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[Keeps you logged in. See our privacy policy for
    more information.]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comment</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>http-only</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>http-only</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>secure</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>secure</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>max-age</span><span class="token punctuation">&gt;</span></span>1800<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>max-age</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cookie-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tracking-mode</span><span class="token punctuation">&gt;</span></span>COOKIE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tracking-mode</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tracking-mode</span><span class="token punctuation">&gt;</span></span>URL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tracking-mode</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tracking-mode</span><span class="token punctuation">&gt;</span></span>SSL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tracking-mode</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>distributable</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- enabling session replication --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li> <li><p><code>javax.servlet.http.HttpServletResponse</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">HttpServletResponse</span> <span class="token keyword">extends</span> <span class="token class-name">ServletResponse</span>
</code></pre></div><ul><li><code>boolean isCommitted()</code> — a committed response has already had its status code and headers written</li> <li>status code and redirect
<ul><li><code>static int</code> fields</li> <li>status code setter and getter
<ul><li><code>sendError</code> — can optionally specify an error message</li></ul></li> <li><code>sendRedirect</code></li></ul></li> <li>response body
<ul><li><code>ServletOutputStream getOutputStream()</code>, <code>PrintWriter getWriter()</code></li> <li>buffer related methods</li> <li><code>javax.servlet.ServletOutputStream</code> <ul><li><code>abstract void setWriteListener(WriteListener writeListener)</code></li></ul></li></ul></li> <li>response headers
<ul><li>MIME type related methods</li> <li>charset and locale getters and setters</li> <li><code>void addCookie(Cookie cookie)</code></li> <li>header setters, adders — call before response body stream getter
<ul><li><code>setContentLength</code>, <code>setContentLengthLong</code> — should leave to container</li></ul></li></ul></li> <li>customized implementation — <code>javax.servlet.ServletResponseWrapper</code>, <code>javax.servlet.http.HttpServletResponseWrapper</code> for extending</li></ul></li></ol> <h3 id="servlet-listeners"><a href="#servlet-listeners" class="header-anchor">#</a> Servlet Listeners</h3> <ol><li><p>config listeners</p> <ul><li>in <code>web.xml</code> — <code>&lt;listener&gt;</code></li> <li><code>ServletContext::addListener</code> — called within a registered <code>ServletContextListener::contextInitialized</code> or <code>ServletContainerInitializer::onStartup</code></li> <li><code>@javax.servlet.annotation.WebListener</code> — any annotated class must implement one or more of the <code>ServletContextListener</code>, <code>ServletContextAttributeListener</code>, <code>ServletRequestListener</code>, <code>ServletRequestAttributeListener</code>, <code>HttpSessionListener</code>, <code>HttpSessionAttributeListener</code>, or <code>HttpSessionIdListener</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">WebListener</span>
</code></pre></div></li></ul></li> <li><p>listeners — interfaces to be implemented, extending <code>java.util.EventListener</code></p> <ul><li><code>javax.servlet.ServletContextListener</code> <ul><li><code>default void contextDestroyed(ServletContextEvent sce)</code></li> <li><code>default void contextInitialized(ServletContextEvent sce)</code></li></ul></li> <li><code>javax.servlet.http.HttpSessionAttributeListener</code></li> <li><code>javax.servlet.http.HttpSessionBindingListener</code> — no config required, event triggered when set or removed from a <code>HttpSession</code> or session expiring</li> <li>more</li></ul></li></ol> <h3 id="servlet-filters"><a href="#servlet-filters" class="header-anchor">#</a> Servlet Filters</h3> <ol><li><p><code>javax.servlet.Filter</code> — acts on a request like a servlet, but can allow the handling of the request to continue with other filters or servlets</p> <ul><li>use case — Authentication Filters, Logging and Auditing Filters, Data compression Filters, Encryption Filters, Tokenizing Filters, Mime-type chain Filter, error handling filters</li> <li>lifecycle
<ul><li><code>default void init(FilterConfig filterConfig)</code> — called on application startup, after initialization of <code>ServletContextListener</code>s</li> <li><code>default void destroy()</code></li></ul></li> <li>filter chain
<ul><li>when request come in — container -&gt; filter 1 -&gt; filter 2 -&gt; ... -&gt; filter n -&gt; container -&gt; servlet</li> <li>when returning response — container &lt;- filter 1 &lt;- filter 2 &lt;- ... &lt;- filter n &lt;- container &lt;- servlet</li> <li><code>void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)</code></li> <li><code>FilterChain::doFilter</code> — call next filter in the chain, otherwise the chain is interrupted</li></ul></li> <li>mapping
<ul><li>to URL — ordered before servlet mapping</li> <li>to servlets</li></ul></li> <li>specify request types
<ul><li>normal requests</li> <li><code>RequestDispatcher::forward</code>ed and <code>RequestDispatcher::include</code>ed requests — handled internally as a separate request</li> <li>error requests</li> <li><code>AsyncContext</code> dispatched requests</li></ul></li></ul></li> <li><p>filter config</p> <ul><li><code>@javax.servlet.annotation.WebFilter</code> — cannot determine order; alternatively use <code>ServletContext::addListener</code> in <code>ServletContextListener::contextInitialized</code> or <code>ServletContainerInitializer::onStartup</code> and the order depends on the call<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">WebFilter</span>
</code></pre></div><ul><li><code>description</code>, <code>displayName</code>, <code>filterName</code>, <code>smallIcon</code>, <code>largeIcon</code></li> <li><code>String[] servletNames</code></li> <li><code>String[] urlPatterns</code></li> <li><code>DispatcherType[] dispatcherTypes</code> — <code>ASYNC</code>, <code>ERROR</code>, <code>FORWARD</code>, <code>INCLUDE</code>, <code>REQUEST</code></li> <li><code>WebInitParam[] initParams</code></li> <li><code>boolean asyncSupported</code></li></ul></li> <li><code>interface javax.servlet.FilterConfig</code> — <code>getFilterName</code>, <code>getServletContext</code>, <code>getInitParameter</code>, <code>getInitParameterNames</code></li> <li>in <code>web.xml</code>, in the order of presence<div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>logSpecial<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>mysite.server.LogFilterImpl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>logType<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>special<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>logSpecial<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.special<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dispatcher</span><span class="token punctuation">&gt;</span></span>REQUEST<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dispatcher</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dispatcher</span><span class="token punctuation">&gt;</span></span>ASYNC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dispatcher</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>logSpecial<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>comingsoon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ol> <h2 id="application-context"><a href="#application-context" class="header-anchor">#</a> Application Context</h2> <h3 id="spring-container"><a href="#spring-container" class="header-anchor">#</a> Spring Container</h3> <ol><li><p>spring container</p> <ul><li><code>interface org.springframework.beans.factory.BeanFactory</code> - root interface for accessing a Spring bean container
<ul><li><code>getBean</code> method — get a bean with type, name and/or other args as parameter(s)</li> <li><code>getBeanProvider</code> method — lazy load a bean, see <code>@Lazy</code></li> <li>other methods</li></ul></li> <li><code>interface org.springframework.context.ApplicationContext</code> — application context, manages a set of beans, which are eligible for dependency injection, message notification, scheduled method execution, bean validation, and other crucial Spring services<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationContext</span>
<span class="token keyword">extends</span> <span class="token class-name">EnvironmentCapable</span><span class="token punctuation">,</span> <span class="token class-name">ListableBeanFactory</span><span class="token punctuation">,</span> <span class="token class-name">HierarchicalBeanFactory</span><span class="token punctuation">,</span> <span class="token class-name">MessageSource</span><span class="token punctuation">,</span> <span class="token class-name">ApplicationEventPublisher</span><span class="token punctuation">,</span> <span class="token class-name">ResourcePatternResolver</span>
</code></pre></div><ul><li><code>org.springframework.beans.factory.ListableBeanFactory</code> — <code>BeanFactory</code> but return iterable objects containing beans</li> <li><code>org.springframework.context.ApplicationEventPublisher</code> — the ability to <code>publishEvent</code> to registered listeners</li> <li><code>org.springframework.core.io.ResourceLoader</code> — the ability to load file or URL resources in a generic fashion
<ul><li><code>org.springframework.core.io.support.ResourcePatternResolver</code> — get <code>Resource</code> for location patterns</li></ul></li> <li><code>org.springframework.context.MessageSource</code> — the ability to resolve messages, supporting internationalization</li> <li><code>org.springframework.beans.factory.HierarchicalBeanFactory</code> — can have inheritance hierarchy</li></ul></li></ul></li> <li><p>application context derivations</p> <ul><li><code>org.springframework.context.ConfigurableApplicationContext</code> — <code>ApplicationContext</code> but configurable<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ConfigurableApplicationContext</span>
<span class="token keyword">extends</span> <span class="token class-name">ApplicationContext</span><span class="token punctuation">,</span> <span class="token class-name">Lifecycle</span><span class="token punctuation">,</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li><code>org.springframework.context.Lifecycle</code> — with <code>start()</code>, <code>stop()</code>, <code>isRunning()</code></li> <li><code>void setParent(ApplicationContext parent)</code></li> <li><code>void registerShutdownHook()</code></li> <li>more</li></ul></li> <li><code>org.springframework.web.context.WebApplicationContext</code> — with <code>getServletContext()</code> <ul><li><code>org.springframework.web.context.ConfigurableWebApplicationContext</code></li></ul></li></ul></li> <li><p>application context implementations</p> <ul><li><code>org.springframework.context.annotation.AnnotationConfigRegistry</code> — annotation config application contexts
<ul><li><code>org.springframework.context.annotation.AnnotationConfigApplicationContext</code></li> <li><code>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</code></li></ul></li> <li><code>org.springframework.context.support.AbstractRefreshableConfigApplicationContext</code> — base class for XML-based application context implementations
<ul><li><code>org.springframework.context.support.ClassPathXmlApplicationContext</code></li> <li><code>org.springframework.context.support.FileSystemXmlApplicationContext</code></li> <li><code>org.springframework.context.support.XmlWebApplicationContext</code></li></ul></li></ul></li></ol> <h3 id="configure-contexts"><a href="#configure-contexts" class="header-anchor">#</a> Configure Contexts</h3> <ol><li><p>bootstrap application context</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;scripting/beans.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Messenger</span> messenger <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;messenger&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Messenger</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>messenger<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">MyServiceImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Dependency1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Dependency2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MyService</span> myService <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">MyService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myService<span class="token punctuation">.</span><span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">AnnotationConfigApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">AppConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">OtherConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">AdditionalConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MyService</span> myService <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">MyService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myService<span class="token punctuation">.</span><span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>programmatic configuration</p> <ul><li><code>AnnotationConfigApplicationContext</code> <ul><li>post processors — when using <code>AnnotationConfigApplicationContext</code>, annotation config processors are always registered</li> <li>constructors with parameters — methods combined
<ul><li><code>AnnotationConfigApplicationContext(Class&lt;?&gt;... componentClasses)</code></li> <li><code>AnnotationConfigApplicationContext(DefaultListableBeanFactory beanFactory)</code></li> <li><code>AnnotationConfigApplicationContext(String... basePackages)</code></li></ul></li> <li><code>void register(Class&lt;?&gt;... componentClasses)</code> — register one or more component classes (typically <code>@Configurable</code>) to be processed</li> <li><code>void scan(String... basePackages)</code></li></ul></li> <li><code>ConfigurableApplicationContext::refresh</code> — load or refresh the persistent representation of the configuration, required to be called after above two methods</li> <li>see <code>@Configuration</code> for configuration classes</li></ul></li> <li><p>configure beans in application context XML configurations, like <code>/WEB-INF/servlet-context.xml</code></p> <ul><li>example<div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- namespace definitions omitted --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>greetingServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.GreetingServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>helloController<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.HelloController<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>greetingService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>greetingServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><code>&lt;beans&gt;</code> — containing beans
<ul><li><code>&lt;bean&gt;</code> — construct a bean of a given class
<ul><li>sub-elements — constructor arguments and properties</li></ul></li> <li><code>&lt;mvc:annotation-driven&gt;</code> — enable MVC related post processors to facilitate mapping requests to controller methods to support <code>@RequestMapping</code> etc.
<ul><li>URL patterns are relative to the <code>DispatcherServlet</code>’s URL pattern</li></ul></li> <li><code>&lt;context:annotation-config/&gt;</code> or <code>&lt;context:component-scan/&gt;</code> — see <code>@Configuration</code></li></ul></li></ul></li></ol> <h2 id="beans"><a href="#beans" class="header-anchor">#</a> Beans</h2> <ol><li><code>org.springframework.beans.BeanUtils</code> — for instantiating beans, checking bean property types, copying bean properties, etc.
<ul><li><code>static void copyProperties(Object source, Object target)</code></li></ul></li></ol> <h3 id="bean-attributes"><a href="#bean-attributes" class="header-anchor">#</a> Bean Attributes</h3> <h4 id="bean-resolve-attributes"><a href="#bean-resolve-attributes" class="header-anchor">#</a> Bean Resolve Attributes</h4> <ol><li><p>bean name — defaults to the defining class or method in camelCase</p></li> <li><p><code>@org.springframework.beans.factory.annotation.Qualifier</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">FIELD</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token constant">PARAMETER</span><span class="token punctuation">,</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Qualifier</span>
</code></pre></div><ul><li><code>String value()</code> — defaults to class name in camelCase</li> <li>use: categorization — constitute filtering criteria. For example, you can define multiple <code>MovieCatalog</code> beans with the same qualifier value “action”, all of which are injected into a <code>Set&lt;MovieCatalog&gt;</code> annotated with <code>@Qualifier(&quot;action&quot;)</code></li> <li>specify qualifier when autowiring — use with <code>@Autowired</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">public</span> <span class="token class-name">MailController</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;smtp&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MailSender</span> mailSender<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mailSender <span class="token operator">=</span> mailSender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>in XML — <code>&lt;bean qualifier=&quot;&quot;&gt;</code></li> <li>in Java EE — <code>@javax.inject.Named</code></li></ul></li> <li><p><code>@org.springframework.context.annotation.Primary</code> — a bean should be given preference when multiple candidates are qualified to autowire a single-valued dependency</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Primary</span>
</code></pre></div><ul><li>in XML — <code>&lt;bean primary&gt;</code></li></ul></li> <li><p><code>@org.springframework.core.annotation.Order</code> — the order after qualifier: determine the order of resolved elements in case of collection injection points (with several target beans matching by type and qualifier)</p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token constant">FIELD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Order</span>
</code></pre></div><ul><li><code>int value</code> — defaults to <code>Ordered.LOWEST_PRECEDENCE</code> (<code>Integer.MAX_VALUE</code>)</li> <li><code>interface org.springframework.core.Ordered</code> — implemented by objects that should be orderable
<ul><li><code>int getOrder()</code></li> <li><code>org.springframework.core.PriorityOrdered</code> — always applied before plain <code>Ordered</code> objects</li> <li>compared by <code>org.springframework.core.OrderComparator</code></li></ul></li></ul></li></ol> <h4 id="bean-on-off-attributes"><a href="#bean-on-off-attributes" class="header-anchor">#</a> Bean On-Off Attributes</h4> <ol><li><p><code>@org.springframework.context.annotation.Profile</code> — a bean is eligible for registration when one or more specified profiles are active</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>ProfileCondition</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Profile</span>
</code></pre></div><ul><li>set active profiles
<ul><li><code>ConfigurableEnvironment.setActiveProfiles</code></li> <li>property <code>spring.profiles.active</code> — as <code>List&lt;String&gt;</code>, for example <code>book,dev</code> <ul><li>property <code>spring.profiles.default</code> — fallback</li></ul></li> <li><code>@ActiveProfiles</code> — for test</li></ul></li> <li><code>String[] value</code> — used in <code>Profiles::of</code> to create a predicate, any style, <code>!</code>, <code>&amp;</code>, <code>|</code> supported in profile expressions</li> <li>in XML — <code>&lt;bean profile=&quot;&quot;&gt;</code>, or in <code>&lt;beans&gt;</code></li></ul></li> <li><p>conditions — a component is only eligible for registration when all specified conditions match</p> <ul><li><code>@org.springframework.context.annotation.Conditional</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Conditional</span>
</code></pre></div><ul><li><code>Class&lt;? extends Condition&gt;[] value</code></li> <li><code>org.springframework.context.annotation.Condition</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span> <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Condition</span>
</code></pre></div><ul><li><code>boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata)</code></li> <li>see also sub-interface <code>ConfigurationCondition</code></li></ul></li></ul></li> <li><code>org.springframework.boot.autoconfigure.condition</code> — <code>@ConditionalOnClass</code>, <code>@ConditionalOnProperty</code> and <code>@ConditionalOnMissingBean</code> and more<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;spring.mail.host&quot;</span><span class="token punctuation">,</span> havingValue<span class="token operator">=</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> matchIfMissing<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ol> <h4 id="bean-loading-attributes"><a href="#bean-loading-attributes" class="header-anchor">#</a> Bean Loading Attributes</h4> <ol><li><p><code>@org.springframework.context.annotation.DependsOn</code> — initialization-time dependency, and, in the case of singleton beans only, a corresponding destruction-time dependency</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DependsOn</span>
</code></pre></div><ul><li><code>String[] value</code></li> <li>in XML — <code>&lt;bean depends-on=&quot;&quot;&gt;</code></li></ul></li> <li><p><code>@org.springframework.context.annotation.Lazy</code> — a bean is to be lazily initialized</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token constant">CONSTRUCTOR</span><span class="token punctuation">,</span><span class="token constant">PARAMETER</span><span class="token punctuation">,</span><span class="token constant">FIELD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Lazy</span>
</code></pre></div><ul><li>use on definitions — specify component initialization</li> <li>use when autowiring — leads to the creation of a lazy-resolution proxy for all affected dependencies, as an alternative to using <code>ObjectFactory</code> or <code>Provider</code></li> <li><code>org.springframework.beans.factory.ObjectFactory</code> — <code>T getObject()</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span> <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ObjectFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>org.springframework.beans.factory.ObjectProvider</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">ObjectFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ul></li> <li><p><code>@org.springframework.context.annotation.Scope</code> — the lifecycle of an instance</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Scope</span>
</code></pre></div><ul><li><code>String value()</code>, <code>String scopeName()</code> <ul><li><code>ConfigurableBeanFactory.SCOPE_SINGLETON</code> — <code>&quot;singleton&quot;</code>, default</li> <li><code>ConfigurableBeanFactory.SCOPE_PROTOTYPE</code> — <code>&quot;prototype&quot;</code>, one instance of the bean is created every time the bean is injected into or retrieved from application context</li> <li><code>WebApplicationContext.SCOPE_SESSION</code> — <code>&quot;session&quot;</code>, one instance of the bean is created for each session, <code>proxyMode</code> required
<ul><li>shortcut — <code>@org.springframework.web.context.annotation.SessionScope</code></li> <li>implementation — <code>org.springframework.web.context.request.SessionScope</code></li></ul></li> <li><code>WebApplicationContext.SCOPE_REQUEST</code> — <code>&quot;request&quot;</code>, one instance of the bean is created for each request, <code>proxyMode</code> required
<ul><li>shortcut — <code>@org.springframework.web.context.annotation.RequestScope</code></li> <li>implementation — <code>org.springframework.web.context.request.RequestScope</code></li></ul></li> <li><code>WebApplicationContext.SCOPE_APPLICATION</code> — <code>&quot;application&quot;</code>, one instance for one <code>ServletContext</code> (<code>ApplicationContext</code> for <code>&quot;singleton&quot;</code>)
<ul><li>shortcut — <code>@org.springframework.web.context.annotation.ApplicationScope</code></li></ul></li> <li><code>CustomScopeConfigurer</code>-- class for configuring custom scope</li></ul></li> <li><code>ScopedProxyMode proxyMode()</code> — <code>default ScopedProxyMode.DEFAULT</code>, inject proxy as dependency, and instantiate the target bean when request or session incoming
<ul><li><code>enum ScopedProxyMode</code> <ul><li><code>DEFAULT</code>, <code>NO</code></li> <li><code>INTERFACES</code> — preferred, create a JDK dynamic proxy implementing all interfaces exposed by the class of the target object, no proxy created if the target does not implement any interface</li> <li><code>TARGET_CLASS</code> — create a class-based proxy (uses CGLIB)</li></ul></li></ul></li></ul></li></ol> <h3 id="bean-definitions"><a href="#bean-definitions" class="header-anchor">#</a> Bean Definitions</h3> <ol><li><p><code>@org.springframework.context.annotation.Bean</code> — indicates that a method produces a bean</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Bean</span>
</code></pre></div><ul><li><code>String[] value</code>, <code>String[] name</code> — defaults to the method name</li> <li>dependencies — an arbitrary number of parameters that describe the dependencies</li> <li><code>boolean autowireCandidate</code></li> <li><code>String destroyMethod</code> <code>String initMethod</code></li> <li>in XML — <code>&lt;bean&gt;</code></li> <li>mode when declared within <code>@Configuration</code> <ul><li>inter-bean references — bean methods may reference other <code>@Bean</code> methods in the same class by calling them directly. This ensures that references between beans are strongly typed and navigable, guaranteed to respect scoping and AOP semantics</li> <li>inter-bean references requirement — CGLIB subclassing of each such configuration class at runtime, thus no <code>final</code> or <code>private</code> for bean factory methods</li></ul></li> <li>lite mode — when not annotated within <code>@Configuration</code>, but <code>@Component</code> or whatever
<ul><li>in XML — <code>&lt;factory-method&gt;</code></li> <li>'inter-bean references' are not supported — when one <code>@Bean</code>-method invokes another <code>@Bean</code>-method in lite mode, the invocation is a standard Java method invocation; Spring does not intercept the invocation via a CGLIB proxy</li></ul></li> <li>static <code>@Bean</code> methods for <code>BeanFactoryPostProcessor</code> — should be declared as a static method to be instantiated early in the container lifecycle, scoping and AOP semantics as trade off</li></ul></li> <li><p><code>@org.springframework.context.annotation.Configuration</code> — indicates that a class declares one or more <code>@Bean</code> methods, and/or property sources, feature switches</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Configuration</span>
</code></pre></div><ul><li><code>String value</code> — <code>@AliasFor(annotation=Component.class)</code></li> <li><code>boolean proxyBeanMethods</code> — see modes in <code>@Bean</code></li> <li>bootstrapping
<ul><li><code>AnnotationConfigApplicationContext::register</code>, see <a href="#configure-contexts">Configure Contexts</a></li> <li>use <code>&lt;context:component-scan/&gt;</code>, which has an <code>annotation-config</code> attribute
<ul><li><code>&lt;context:annotation-config/&gt;</code> — enable <code>org.springframework.context.annotation.ConfigurationClassPostProcessor</code> and other annotation-related post processors for bootstrapping processing of <code>@Configuration</code> classes<div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>annotation-config</span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.acme.AppConfig<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ul></li> <li>compose configurations — <code>@org.springframework.context.annotation.Import</code>, <code>@ImportResource</code> (for XLM), <code>&lt;import&gt;</code>, or static inner <code>@Configuration</code> classes</li> <li><code>@org.springframework.context.annotation.PropertySource</code> — a convenient and declarative mechanism for adding a <code>PropertySource</code> to Spring's <code>Environment</code>, used in conjunction with <code>@Configuration</code> classes<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Repeatable</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name">PropertySources</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">PropertySource</span>
</code></pre></div></li> <li>in conjunction with <code>@Enable-</code> — <code>@EnableAsync</code>, <code>@EnableScheduling</code>, <code>@EnableTransactionManagement</code>, <code>@EnableAspectJAutoProxy</code>, <code>@EnableCaching</code>, <code>@EnableLoadTimeWeaving</code>, <code>@EnableWebMvc</code>, <code>@EnableMBeanExport</code>, <code>@EnableSpringConfigured</code>, <code>@EnableTransactionManagement</code></li> <li>in conjunction with <code>@org.springframework.context.annotation.ComponentScan</code> — configures component scanning directives, default annotation config processors assumed and no <code>annotation-config</code> attribute like <code>&lt;context:component-scan&gt;</code><div class="language-java extra-class"><pre class="language-java"><code> <span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Repeatable</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name">ComponentScans</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ComponentScan</span>
</code></pre></div><ul><li><code>String[] value</code>, <code>String[] basePackages</code> — defaults to declaring package, sub-packages also scanned</li> <li>filters — defaults to include <code>@Component</code></li> <li>more</li></ul></li> <li>ensure singleton scope if scope is singleton — <code>@Configuration</code> classes are subclassed at startup-time with CGLIB. In the subclass, the child method checks the container first for any cached (scoped) beans before it calls the parent method and creates a new instance</li></ul></li> <li><p><code>@org.springframework.stereotype.Component</code> — annotated classes are considered as candidates for auto-detection when using annotation-based configuration and classpath scanning</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Indexed</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Component</span>
</code></pre></div><ul><li><code>String value</code> bean name, defaults to class name in camelCase</li> <li>in Java EE — <code>@javax.inject.Named</code>, but with a few subtle differences</li> <li>special kind components, <code>@Component</code> meta annotated
<ul><li><code>@org.aspectj.lang.annotation.Aspect</code> — component but not meta annotated by <code>@Component</code></li> <li><code>@Controller</code> <ul><li><code>@RestController</code> — <code>@Controller</code> with <code>@ResponseBody</code></li></ul></li> <li><code>@org.springframework.stereotype.Service</code> — &quot;an operation offered as an interface that stands alone in the model, with no encapsulated state.&quot;</li> <li><code>@org.springframework.stereotype.Repository</code> — &quot;a mechanism for encapsulating storage, retrieval, and search behavior which emulates a collection of objects&quot;, also for DAO</li></ul></li></ul></li></ol> <h3 id="bean-lifecycle"><a href="#bean-lifecycle" class="header-anchor">#</a> Bean Lifecycle</h3> <ol><li><p><code>org.springframework.context.Lifecycle</code> — tbd</p> <ul><li><code>SmartLifecycle</code></li></ul></li> <li><p>bean lifecycle — see javadoc of <code>BeanFactory</code></p> <ul><li>before ready to use
<ul><li>instantiate</li> <li>populate properties</li> <li><code>BeanNameAware</code>’s <code>setBeanName()</code></li> <li><code>BeanFactoryAware</code>’s <code>setBeanFactory()</code></li> <li><code>ApplicationContextAware</code>’s <code>setApplicationContext()</code></li> <li>Pre-initialization <code>BeanPostProcessor</code>s, <code>postProcessBeforeInitialization()</code></li> <li><code>InitializingBean</code>’s <code>afterPropertiesSet()</code></li> <li>Call custom init-method</li> <li>Post-initialization <code>BeanPostProcessor</code>s, <code>postProcessAfterInitialization()</code></li></ul></li> <li>after container shutdown
<ul><li><code>DisposableBean</code>’s <code>destroy()</code></li> <li>Call custom destroy-method</li></ul></li></ul></li> <li><p>lifecycle hooks</p> <ul><li>lifecycle, in <code>org.springframework.beans.factory</code> <ul><li><code>FactoryBean&lt;T&gt;</code> — interface to be implemented by objects used within a <code>BeanFactory</code> which are themselves factories for individual objects</li> <li><code>InitializingBean</code> — interface to be implemented by beans that need to react once all their properties have been</li> <li><code>DisposableBean</code> — interface to be implemented by beans that want to release resources on destruction</li></ul></li> <li><code>org.springframework.beans.factory.Aware</code> — a marker super interface for <code>*Aware</code> indicating that a bean is eligible to be notified by the Spring container of a particular framework object through a callback-style method
<ul><li>processing — processing done in a <code>BeanPostProcessor</code>: <code>ApplicationContextAwareProcessor</code></li> <li><code>org.springframework.beans.factory</code> <ul><li><code>BeanFactoryAware</code> — interface to be implemented by beans that wish to be aware of their owning <code>BeanFactory</code></li> <li><code>BeanNameAware</code> — interface to be implemented by beans that want to be aware of their bean name in a bean factory</li></ul></li> <li><code>org.springframework.context</code> <ul><li><code>EnvironmentAware</code> — <code>setEnvironment(Environment environment)</code></li> <li><code>ApplicationContextAware</code> — <code>setApplicationContext(ApplicationContext applicationContext)</code></li></ul></li> <li><code>ApplicationEventPublisherAware</code></li> <li><code>MessageSourceAware</code></li> <li><code>ServletContextAware</code>, <code>ServletConfigAware</code></li></ul></li></ul></li></ol> <h2 id="dependency-injection"><a href="#dependency-injection" class="header-anchor">#</a> Dependency Injection</h2> <ol><li><p>DI</p> <ul><li>inject beans into application context</li> <li>inject initialized beans into dependencies on them</li> <li>injection preference — constructor &gt; field &gt; setter</li></ul></li> <li><p><code>@org.springframework.beans.factory.annotation.Autowired</code> — marks a constructor, field, setter method, or config method as to be autowired, public or not</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">CONSTRUCTOR</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token constant">PARAMETER</span><span class="token punctuation">,</span><span class="token constant">FIELD</span><span class="token punctuation">,</span><span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Autowired</span>
</code></pre></div><ul><li><code>boolean required</code> — defaults to <code>true</code>, unwired when no matching
<ul><li>override for individual parameters — <code>Optional</code>, <code>@Nullable</code></li></ul></li> <li>single constructor and multiple constructors
<ul><li>implicitly if single constructor — if a class only declares a single constructor, it is always used and autowired</li> <li>inject as many dependencies as possible if multiple constructors annotated — if multiple non-required constructors declare the annotation, the one with the greatest number of dependencies that can be satisfied by matching beans in the Spring container will be chosen</li> <li>fallback — use the primary/default constructor</li></ul></li> <li>other autowire target
<ul><li>autowired parameters — supported by the JUnit Jupiter in the <code>spring-test</code> module</li> <li>Arrays, Collections, and Maps — if no bean itself is of match Collections or Map types, the container autowires all beans matching the declared value type, taking into account Ordered and <code>@Order</code> values</li></ul></li> <li>injection is performed through a <code>AutowiredAnnotationBeanPostProcessor</code> — cannot use <code>@Autowired</code> to inject references into <code>BeanPostProcessor</code> or <code>BeanFactoryPostProcessor</code></li> <li>order when injecting — Matches by Type - Restricts by Qualifiers - Matches by Name</li> <li>in Java EE — <code>@javax.inject.Inject</code>, but without required-vs-optional semantics; <code>@javax.annotation.Resource</code>, but with subtle differences</li></ul></li></ol> <h3 id="externalized-configuration"><a href="#externalized-configuration" class="header-anchor">#</a> Externalized Configuration</h3> <ol><li><p>externalized values</p> <ul><li>syntax — see SpEL</li> <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html" target="_blank" rel="noopener noreferrer">Appendix A. Common application properties<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>relaxed binding — name bindings take following forms
<ul><li><code>message.destinationName</code></li> <li><code>message.destination-name</code></li> <li><code>MESSAGE_DESTINATION_NAME</code></li></ul></li> <li>add property files — use <code>@PropertySource</code> to inject property files into <code>Environment</code></li> <li>resolving <code>${...}</code> placeholders in <code>&lt;bean&gt;</code> and <code>@Value</code>, <code>@PropertySource</code> annotations — must ensure that an appropriate embedded value resolver bean is registered
<ul><li>use <code>&lt;context:property-placeholder&gt;</code> in XML</li> <li>use a static <code>@Bean</code> method returning <code>PropertySourcesPlaceholderConfigurer</code></li></ul></li> <li>injection
<ul><li><code>@org.springframework.beans.factory.annotation.Value</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">FIELD</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token constant">PARAMETER</span><span class="token punctuation">,</span><span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Value</span>
</code></pre></div></li> <li><code>@Autowired Environment env;</code></li> <li>implement <code>org.springframework.context.EnvironmentAware</code></li> <li><code>@org.springframework.boot.context.properties.ConfigurationProperties</code> — bind and validate some external Properties with common prefix<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ConfigurationProperties</span>
</code></pre></div><ul><li>dependency for code completion — <code>org.springframework.boot:spring-boot-configuration-processor</code></li> <li>example<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix<span class="token operator">=</span><span class="token string">&quot;myapp&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyAppProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// myapp.name</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></li></ul></li> <li><p>property related classes</p> <ul><li><code>org.springframework.core.env.PropertySources</code> — holder containing one or more <code>PropertySource</code> objects<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PropertySources</span> <span class="token keyword">extends</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertySource</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>org.springframework.core.env.PropertySource&lt;T&gt;</code> — name/value property pairs from a source (<code>T</code>), which can be <code>Map</code>, <code>ServletContext</code> etc.</li></ul></li> <li><code>interface org.springframework.core.env.PropertyResolver</code> — for resolving properties against any underlying source
<ul><li><code>getProperty</code> methods</li> <li><code>org.springframework.core.env.PropertySourcesPropertyResolver</code> — resolves property values against an underlying set of <code>PropertySources</code></li> <li><code>org.springframework.core.env.Environment</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Environment</span> <span class="token keyword">extends</span> <span class="token class-name">PropertyResolver</span>
</code></pre></div></li></ul></li></ul></li> <li><p><code>PropertySource</code> resolve order — <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config" target="_blank" rel="noopener noreferrer">4.2. Externalized Configuration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> — former ones override later ones</p> <ol><li>devtools global settings properties in the <code>$HOME/.config/spring-boot</code> directory when devtools is active</li> <li>test related</li> <li>command line arguments — see arguments passing before<div class="language-shell extra-class"><pre class="language-shell"><code>./mvnw spring-boot:run <span class="token parameter variable">-Dserver.ip</span><span class="token operator">=</span><span class="token number">192.168</span>.12.1
<span class="token comment"># or after `./mvnw package`</span>
<span class="token function">java</span> <span class="token parameter variable">-jar</span> target/myapp.jar <span class="token parameter variable">--data.server</span><span class="token operator">=</span>remoteserver:3030
</code></pre></div></li> <li><code>SPRING_APPLICATION_JSON</code> environment variable — <code>spring.application.json</code> in <code>application.properties</code><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">SPRING_APPLICATION_JSON</span><span class="token operator">=</span><span class="token string">'{ &quot;data&quot;:{&quot;server&quot;:&quot;remoteserver:3030&quot;}}'</span>
<span class="token function">java</span> <span class="token parameter variable">-Dspring.application.json</span><span class="token operator">=</span><span class="token string">'{&quot;acme&quot;:{&quot;name&quot;:&quot;test&quot;}}'</span> <span class="token parameter variable">-jar</span> myapp.jar
<span class="token function">java</span> <span class="token parameter variable">-jar</span> myapp.jar <span class="token parameter variable">--spring.application.json</span><span class="token operator">=</span><span class="token string">'{&quot;acme&quot;:{&quot;name&quot;:&quot;test&quot;}}'</span>
</code></pre></div></li> <li>servlet
<ol><li><code>ServletConfig</code> init parameters</li> <li><code>ServletContext</code> init parameters</li></ol></li> <li>JNDI attributes from <code>java:comp/env</code></li> <li>system properties</li> <li>OS Environment variables</li> <li>a <code>RandomValuePropertySource</code> that has properties only in <code>random.*</code></li> <li>application properties
<ol><li>outside the package jar
<ol><li>profile-specific application properties (<code>application-{profile}.properties</code> and YAML variants)</li> <li>plain <code>application.properties</code> and YAML variants</li></ol></li> <li>inside the package jar
<ol><li>profile-specific application properties</li> <li>plain application properties</li></ol></li></ol></li> <li><code>@PropertySource</code></li> <li><code>SpringApplication::setDefaultProperties</code></li></ol></li> <li><p>profile files — <code>application-{profile}.properties</code> and YAML variants</p> <ul><li>customize
<ul><li><code>spring.config.name</code> — defaults to <code>application</code>, for customized config filename</li> <li><code>spring.config.location</code> — for customized location</li> <li><code>spring.config.additional-location</code></li> <li><code>spring.config.import</code></li></ul></li> <li>set activate profiles
<ul><li><code>@org.springframework.test.context.ActiveProfiles</code></li> <li><code>ConfigurableEnvironment::setActiveProfiles</code></li> <li><code>spring.profiles.active</code>, use <code>spring.profiles.default</code> if not specified — defaults to <code>application-default.properties</code>; <code>application.properties</code> always used</li> <li><code>spring.profiles</code> — <code>List&lt;String&gt;</code> that at least one should match for the document to be included, kind similar to the <code>@Conditional</code> <ul><li>use new and less confusing <code>spring.config.activate.on-cloud-platform</code>, <code>spring.config.activate.on-profile</code> (cannot be used with <code>spring.profiles.active</code>)</li></ul></li> <li><code>spring.profiles.include</code> — <code>List&lt;String&gt;</code> to unconditionally activate</li></ul></li></ul></li></ol> <h2 id="spel"><a href="#spel" class="header-anchor">#</a> SpEL</h2> <ol><li><p>SpEL basics</p> <ul><li><code>#{}</code> — can be nested
<ul><li><code>${}</code> for <code>Environment</code> variables</li> <li><code>${...}</code> placeholder default value syntax — <code>${...:val}</code></li></ul></li> <li>literals — int, float, String (single or double quote), boolean</li> <li>bean reference — can refer to other beans with bean name, properties of beans, call methods</li> <li>get <code>Class</code> or invoke static — <code>T()</code>, <code>T(java.lang.Math).PI</code></li> <li>optional chaining — <code>#{artistSelector.selectArtist()?.toUpperCase()}</code></li> <li>refer to system properties — <code>#{systemProperties['disc.title']}</code></li></ul></li> <li><p>operators</p> <ul><li>arithmetic and relation operators — also be specified as a purely alphabetic equivalent, for compatibility in XML</li> <li><code>instanceof</code></li> <li><code>matches</code> — regular expression based, <code>'5.0067' matches '^-?\\d+(\\.\\d{2})?$'</code></li> <li>logical — <code>and</code>, <code>or</code>, <code>not</code> (<code>!</code>), <code>|</code></li> <li>conditional — <code>?:</code> (ternary), <code>?:</code> (Elvis operator, null coalescing, <code>??</code> in JS)</li> <li>collection — <code>[]</code> accessor, also for String
<ul><li><code>.?[expression]</code> — filter according to expression
<ul><li><code>#{jukebox.songs.?[artist eq 'Aerosmith']}</code>, <code>artist</code> is equivalent to <code>#this.artist</code></li></ul></li> <li><code>.^[expression]</code> — first match</li> <li><code>.^[expression]</code> — last match</li> <li><code>.![property]</code> — properties projection
<ul><li><code>#{jukebox.songs.![title]}</code></li></ul></li></ul></li></ul></li> <li><p>Java interface</p> <ul><li>package — <code>org.springframework.expression</code> and sub-packages</li> <li>example<div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ExpressionParser</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpelExpressionParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Expression</span> exp <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parseExpression</span><span class="token punctuation">(</span><span class="token string">&quot;'Hello World'.concat('!')&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> exp<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ol> <h2 id="aspects"><a href="#aspects" class="header-anchor">#</a> Aspects</h2> <ol><li><p>AOP — addresses cross-cutting concerns</p> <ul><li>aspect <code>@Aspect</code> — the merger of advice and pointcuts</li> <li>advice — the job of an aspect, what and when
<ul><li><code>@Before</code> — The advice functionality takes place before the advised method is invoked.</li> <li><code>@After</code> — The advice functionality takes place after the advised method completes, regardless of the outcome.</li> <li><code>@AfterReturning</code> — The advice functionality takes place after the advised method successfully completes.</li> <li><code>@AfterThrowing</code> — The advice functionality takes place after the advised method throws an exception.</li> <li><code>@Around</code> — The advice wraps the advised method, providing some functionality before and after the advised method is invoked.
<ul><li>take <code>ProceedingJoinPoint</code> as a parameter to <code>proceed()</code></li></ul></li></ul></li> <li>join points — all the points within the execution flow of the application that are candidates to have advice applied</li> <li>pointcuts <code>@Pointcut</code> — where, one or more join points at which advice should be woven</li> <li>introduction — allows you to add new methods or attributes to existing classes</li> <li>weaving — the process of applying aspects to a target object to create a new proxied object
<ul><li>Compile time — Aspects are woven in when the target class is compiled. This requires a special compiler. AspectJ’s weaving compiler weaves aspects this way.</li> <li>Class load time — Aspects are woven in when the target class is loaded into the JVM . This requires a special ClassLoader that enhances the target class’s byte- code before the class is introduced into the application. AspectJ 5’s load-time weaving ( LTW ) support weaves aspects this way.</li> <li>Runtime — Aspects are woven in sometime during the execution of the application. Typically, an AOP container dynamically generates a proxy object that delegates to the target object while weaving in the aspects. This is how Spring AOP aspects are woven.</li></ul></li></ul></li> <li><p>aspects in Spring</p> <ul><li>woven into beans — wrapping with a proxy class</li> <li>if using an <code>ApplicationContext</code>, the proxied objects will be created when it loads all the beans from the <code>BeanFactory</code></li> <li>Spring only supports method join points</li> <li>package — <code>org.aspectj.lang.annotation</code></li> <li>enable AspectJ — <code>aspectjweaver.jar</code> (<code>org.aspectj:aspectjweaver</code>) library is on the classpath and <code>@EnableAspectJAutoProxy</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>AspectJAutoProxyRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAspectJAutoProxy</span>
</code></pre></div><ul><li>auto-proxying — uses the <code>@Aspect</code> annotated bean to create a proxy around any other beans for which the aspect’s pointcuts are a match</li></ul></li> <li><code>@EnableLoadTimeWeaving</code> — tbd</li></ul></li> <li><p>pointcut expression Language</p> <ul><li><code>args()</code> — Limits join-point matches to the execution of methods whose arguments are instances of the given types</li> <li><code>@args()</code> — Limits join-point matches to the execution of methods whose arguments are annotated with the given annotation types</li> <li><code>execution()</code> — Matches join points that are method executions<div class="language- extra-class"><pre class="language-text"><code>execution(modifiers-pattern? ret-type-pattern declaring-type-pattern?name-pattern(param-pattern)
       throws-pattern?)
</code></pre></div><ul><li><code>execution(* concert.Performance.perform(..))</code> — matches <code>concert.Performance.perform</code> method with any return type (<code>*</code>) and any arguments (<code>..</code>)</li></ul></li> <li><code>this()</code> — Limits join-point matches to those where the bean reference of the AOP proxy is of a given type</li> <li><code>target()</code> — Limits join-point matches to those where the target object is of a given type</li> <li><code>@target()</code> — Limits matching to join points where the class of the executing object has an annotation of the given type</li> <li><code>within()</code> — Limits matching to join points within certain types
<ul><li><code>within(concert.*)</code> — When the method is called from within any class in the <code>concert</code> package</li></ul></li> <li><code>@within()</code> — Limits matching to join points within types that have the given annotation (the execution of methods declared in types with the given annotation when using Spring AOP)</li> <li><code>@annotation</code> — Limits join-point matches to those where the subject of the join point has the given annotation</li> <li><code>bean()</code> — limits the pointcut’s effect to that specific bean
<ul><li><code>bean('woodstock')</code></li></ul></li> <li>logical — <code>||</code>, <code>&amp;&amp;</code>, <code>!</code></li> <li><code>+</code> — any subtypes</li> <li><code>*</code>, <code>..</code>, <code>*Name</code> (wildcard)</li></ul></li> <li><p>binding form — use a parameter name in place of a type name in an args expression, the value of the corresponding argument is passed as the parameter value when the advice is invoked</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;com.xyz.myapp.SystemArchitecture.dataAccessOperation() &amp;&amp; args(account,..)&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">validateAccount</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>supports — <code>arg</code>, the proxy object (<code>this</code>), target object (<code>target</code>), and annotations (<code>@within</code>, <code>@target</code>, <code>@annotation</code>, and <code>@args</code>)</li></ul></li> <li><p>example using AOP</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Audience</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* concert.Performance.perform(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;performance()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">silenceCellPhones</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Silencing cell phones&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.xyz.myapp.dao.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAccessCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;performance()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">watchPerformance</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> jp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Silencing cell phones&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Taking seats&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;CLAP CLAP CLAP!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Demanding a refund&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>aspect introduction — add new functionality (methods)</p> <ul><li>add interface with default implementation — enable an aspect to declare that advised objects implement a given interface, and to provide an implementation of that interface on behalf of those objects</li> <li>example — all implementors of service interfaces also implement the <code>UsageTracked</code> interface, the implementation is <code>DefaultUsageTracked</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UsageTracking</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@DeclareParents</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;com.xzy.myapp.service.*+&quot;</span><span class="token punctuation">,</span> defaultImpl<span class="token operator">=</span><span class="token class-name">DefaultUsageTracked</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">UsageTracked</span> mixin<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;com.xyz.myapp.SystemArchitecture.businessService() &amp;&amp; this(usageTracked)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recordUsage</span><span class="token punctuation">(</span><span class="token class-name">UsageTracked</span> usageTracked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        usageTracked<span class="token punctuation">.</span><span class="token function">incrementUseCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ol> <h2 id="springmvc"><a href="#springmvc" class="header-anchor">#</a> SpringMVC</h2> <h3 id="enable-mvc"><a href="#enable-mvc" class="header-anchor">#</a> Enable MVC</h3> <ol><li><p><code>@org.springframework.web.servlet.config.annotation.EnableWebMvc</code> — imports the Spring MVC configuration from <code>WebMvcConfigurationSupport</code></p></li> <li><p><code>org.springframework.web.servlet.config.annotation.WebMvcConfigurer</code> — callback methods to customize the Java-based configuration for Spring MVC enabled via <code>@EnableWebMvc</code></p> <ul><li><code>default void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; resolvers)</code></li> <li><code>default void addCorsMappings(CorsRegistry registry)</code></li> <li><code>default void addFormatters(FormatterRegistry registry)</code></li> <li><code>default void addInterceptors(InterceptorRegistry registry)</code></li> <li><code>default void addResourceHandlers(ResourceHandlerRegistry registry)</code></li> <li><code>default void addReturnValueHandlers(List&lt;HandlerMethodReturnValueHandler&gt; handlers)</code></li> <li><code>default void addViewControllers(ViewControllerRegistry registry)</code></li> <li><code>default void configureAsyncSupport(AsyncSupportConfigurer configurer)</code></li> <li><code>default void configureContentNegotiation(ContentNegotiationConfigurer configurer)</code></li> <li><code>default void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer)</code></li> <li><code>default void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers)</code></li> <li><code>default void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</code></li> <li><code>default void configurePathMatch(PathMatchConfigurer configurer)</code></li> <li><code>default void configureViewResolvers(ViewResolverRegistry registry)</code></li> <li><code>default void extendHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers)</code></li> <li><code>default void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</code></li> <li><code>default MessageCodesResolver getMessageCodesResolver()</code></li> <li><code>default Validator getValidator()</code></li></ul></li></ol> <h3 id="dispatcherservlet"><a href="#dispatcherservlet" class="header-anchor">#</a> DispatcherServlet</h3> <ol><li><p><code>org.springframework.web.servlet.DispatcherServlet</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DispatcherServlet</span> <span class="token keyword">extends</span> <span class="token class-name">FrameworkServlet</span>
</code></pre></div><ul><li><code>org.springframework.web.servlet.FrameworkServlet</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FrameworkServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServletBean</span>
<span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span>
</code></pre></div><ul><li><code>org.springframework.web.servlet.HttpServletBean</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">HttpServletBean</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span>
<span class="token keyword">implements</span> <span class="token class-name">EnvironmentCapable</span><span class="token punctuation">,</span> <span class="token class-name">EnvironmentAware</span>
</code></pre></div></li></ul></li> <li>creation
<ul><li><code>DispatcherServlet(WebApplicationContext webApplicationContext)</code></li> <li><code>DispatcherServlet()</code> — create own web application context based on defaults and servlet init-params</li></ul></li></ul></li> <li><p>dispatch targets — tbd</p> <ul><li><code>HandlerMapping</code></li> <li><code>HandlerAdapter</code></li> <li><code>HandlerExceptionResolver</code></li> <li><code>ViewResolver</code></li> <li><code>LocaleResolver</code></li> <li><code>ThemeResolver</code></li> <li><code>MultipartResolver</code></li> <li><code>FlashMapManager</code></li> <li>defaults — tbd</li> <li>processing — tbd</li></ul></li> <li><p><code>org.springframework.web.servlet.support.RequestContextUtils</code> — lookup of current <code>WebApplicationContext</code>, <code>LocaleResolver</code>, <code>Locale</code>, <code>ThemeResolver</code>, <code>Theme</code>, and <code>MultipartResolver</code> etc. which has been set by the <code>DispatcherServlet</code></p></li> <li><p>bootstrap web application contexts</p> <ul><li>example — see docs of <code>WebApplicationInitializer</code> and SpringMVC</li> <li><code>org.springframework.web.context.ContextLoaderListener</code> — bootstrap listener to start up and shut down Spring's root <code>WebApplicationContext</code>. Simply delegates to <code>ContextLoader</code> as well as to <code>ContextCleanupListener</code>.<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContextLoaderListener</span> <span class="token keyword">extends</span> <span class="token class-name">ContextLoader</span>
<span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span>
</code></pre></div></li> <li>initializers — extending <code>AbstractAnnotationConfigDispatcherServletInitializer</code> for hierarchy web application contexts
<ul><li><code>org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer</code> — with abstract methods specifying bean classes for root and non-root application contexts
<ul><li><code>protected abstract Class&lt;?&gt;[] getRootConfigClasses()</code> — delegated by <code>createRootApplicationContext()</code></li> <li><code>protected abstract Class&lt;?&gt;[] getServletConfigClasses()</code> — delegated by <code>createServletApplicationContext()</code></li> <li>parents
<ul><li><code>interface org.springframework.web.WebApplicationInitializer</code> — <code>void onStartup(ServletContext servletContext)</code> to configure the <code>ServletContext</code> programmatically</li> <li><code>org.springframework.web.context.AbstractContextLoaderInitializer</code> — register a <code>ContextLoaderListener</code> when <code>onStartup</code>, only abstract method <code>createRootApplicationContext()</code></li> <li><code>org.springframework.web.servlet.support.AbstractDispatcherServletInitializer</code> — with abstract methods for HTTP servlet configs like filters, mappings, etc.</li></ul></li></ul></li> <li><code>org.springframework.web.SpringServletContainerInitializer</code> — see <a href="#servlet">Servlet</a></li></ul></li> <li><code>&lt;init-param&gt;</code>s of <code>DispatcherServlet</code> <ul><li><code>contextClass</code>, defaults to <code>XmlWebApplicationContext</code></li> <li><code>contextConfigLocation</code></li> <li><code>namespace</code> — defaults to <code>[servlet-name]-servlet</code></li> <li><code>throwExceptionIfNoHandlerFound</code> — whether to throw a <code>NoHandlerFoundException</code> when no handler was found for a request, which can then be caught with a <code>HandlerExceptionResolver</code>; defaults to <code>false</code>, return 404 and no <code>Exception</code></li></ul></li> <li>filter
<ul><li><code>org.springframework.boot.web.servlet.FilterRegistrationBean</code> — a <code>ServletContextInitializer</code> to register Filters
<ul><li><code>void setOrder(int order)</code></li></ul></li> <li><code>@org.springframework.boot.web.servlet.ServletComponentScan</code> — Enables scanning for Servlet components (filters, servlets, and listeners annotations in <code>javax.servlet.annotation</code>). Scanning is only performed when using an embedded web server.</li></ul></li></ul></li></ol> <h3 id="controller"><a href="#controller" class="header-anchor">#</a> Controller</h3> <ol><li><p><code>@Controller</code>, <code>@RestController</code> — controller, work in coordination with <code>@RequestMapping</code></p> <ul><li><code>org.springframework.stereotype.Controller</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Controller</span>
</code></pre></div></li> <li><code>@org.springframework.web.bind.annotation.RestController</code> — <code>@Controller</code> with <code>@ResponseBody</code>, which means <code>@RequestMapping</code> methods assume <code>@ResponseBody</code> semantics by default<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Controller</span>
 <span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RestController</span>
</code></pre></div></li> <li><code>@org.springframework.web.bind.annotation.ResponseBody</code> — indicates a method or methods of a class return value that should be bound to the web response body, instead of view resolution or rendering with an HTML template<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ResponseBody</span>
</code></pre></div><ul><li><code>@Inherited</code> — this annotation is not annotated with <code>@Inherited</code> but is inherited</li></ul></li> <li>AOP proxying — use class-based proxying or controller interface
<ul><li>controller interface — make sure to put all mapping annotations on the controller interface rather than on the implementation class</li></ul></li></ul></li> <li><p><code>@org.springframework.web.bind.annotation.RequestMapping</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RequestMapping</span>
</code></pre></div><ul><li>method level inherit from type level — type level checked before method level</li> <li><code>String[] path</code>, <code>String[] value</code> <ul><li>patterns — <code>?</code>, <code>*</code>, <code>**</code>, <code>{name}</code>, <code>{name:regex}</code>, SpEL property placeholders; use <code>@PathVariable</code> to captured <code>name</code></li> <li>matcher implementation — <code>AntPathMatcher</code>, can be customized</li> <li>multiple match — when multiple patterns match a URL, the most specific one will be used, compared by <code>AntPathMatcher::getPatternComparator</code></li></ul></li> <li><code>String[] params</code> — <code>&quot;myParam=myValue&quot;</code>, <code>&quot;myParam!=myValue&quot;</code>, <code>&quot;myParam&quot;</code>, <code>&quot;!myParam&quot;</code></li> <li><code>String[] headers</code> — <code>&quot;My-Header=myValue&quot;</code>, <code>&quot;My-Header!=myValue&quot;</code>, <code>&quot;!My-Header&quot;</code>, <code>&quot;content-type=text/*&quot;</code> <ul><li><code>String[] consumes</code> — <code>&quot;text/plain&quot;</code>, <code>{&quot;text/plain&quot;, &quot;application/*&quot;}</code>, <code>MediaType.TEXT_PLAIN_VALUE</code></li> <li><code>String[] produces</code> — like the above, but also parameters like <code>&quot;text/plain;charset=UTF-8&quot;</code></li></ul></li> <li><code>RequestMethod[] method</code> <ul><li><code>@GetMapping</code></li> <li><code>@PostMapping</code></li> <li><code>@PutMapping</code></li> <li><code>@DeleteMapping</code></li> <li><code>@PatchMapping</code></li></ul></li></ul></li> <li><p>handler method parameters — <a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/web.html#mvc-ann-arguments" target="_blank" rel="noopener noreferrer">docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>HandlerMethodArgumentResolver</code></li> <li>standard servlet type parameters
<ul><li><code>HttpServletRequest</code>, <code>InputStream</code> or <code>Reader</code></li> <li><code>HttpServletResponse</code>, <code>OutputStream</code> or <code>Writer</code></li> <li><code>HttpSession</code>, <code>Locale</code></li> <li><code>org.springframework.web.context.request.WebRequest</code> — <code>HttpServletRequest</code>, <code>HttpServletResponse</code>, <code>HttpSession</code> in one</li></ul></li> <li><code>org.springframework.web.bind.annotation</code> <ul><li>common properties
<ul><li><code>String name</code>, <code>String value</code> — defaults to parameter name, but code is required to be compiled with debugging information or with the <code>-parameters</code> compiler flag
<ul><li>automatic type conversion — automatically converted to the appropriate type, or <code>TypeMismatchException</code>; use <code>DataBinder</code> to register custom type support, tbd</li> <li>kv map — if the method parameter is <code>Map&lt;String, String&gt;</code>, <code>MultiValueMap&lt;String, String&gt;</code> then the map is populated with all path variable names and values</li></ul></li> <li><code>boolean required</code> — <code>Exception</code>, or <code>null</code> / <code>Optional</code></li> <li><code>String defaultValue</code> — defaults to <code>ValueConstants.DEFAULT_NONE</code> to serve as nil</li></ul></li> <li><code>@PathVariable</code> — captured URI template variable; no <code>defaultValue</code></li> <li><code>@RequestParam</code> — query parameters, also form data, and parts in multipart when SpringMVC</li> <li><code>@RequestHeader</code></li> <li><code>@RequestPart</code> — for multipart, tbd</li> <li><code>@MatrixVariable</code> — RFC 3986 URI path parameters, parameters but in path segments, removed from the URL prior to matching it to a Servlet mapping<div class="language- extra-class"><pre class="language-text"><code>http://www.example.com/hotel/43;floor=8;room=15/guest
/hotel/43/guest
</code></pre></div><ul><li><code>String pathVar</code> — for disambiguation when the same parameter persistent in different path segments; <code>43</code> in above case</li></ul></li></ul></li> <li>POJO
<ul><li><code>@ModelAttribute</code> — for access to an existing attribute in the model</li> <li>plain POJO, called form object, aka. command object — if <code>BeanUtils::isSimpleProperty</code>, <code>@RequestParam</code> but use a POJO, <code>set-</code> methods examined; otherwise <code>@ModelAttribute</code></li> <li><code>@RequestBody</code> — a method parameter should be bound to the body of the web request, converted by <code>HttpMessageConverter</code></li> <li>validate<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;join&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token class-name">UserRegistrationForm</span> form<span class="token punctuation">,</span> <span class="token class-name">BindingResult</span> validation<span class="token punctuation">)</span>
</code></pre></div><ul><li><code>BindingResult</code> — can be <code>Errors</code>, or omit and throw <code>MethodArgumentNotValidException</code> when validation failed</li></ul></li></ul></li> <li><code>HttpEntity&lt;T&gt;</code>, <code>RequestEntity&lt;T&gt;</code> — header and body</li> <li><code>@org.springframework.security.core.annotation.AuthenticationPrincipal</code> — resolve <code>Authentication.getPrincipal()</code> to a method argument, usually of type <code>UserDetails</code></li> <li>more</li></ul></li> <li><p><code>@ResponseStatus</code></p></li> <li><p>handler method return</p> <ul><li><code>void</code></li> <li>model and view
<ul><li>model — <code>Map&lt;String, Object&gt;</code>, <code>ModelMap</code>, <code>Model</code></li> <li><code>View</code>, <code>String</code> <ul><li><code>UrlBasedViewResolver</code> for <code>String</code> return type special view names
<ul><li><code>redirect:</code> — <code>RedirectView</code></li> <li><code>forward:</code> — <code>InternalResourceView</code></li></ul></li></ul></li> <li><code>ModelAndView</code></li></ul></li> <li><code>HttpEntity&lt;T&gt;</code>, <code>ResponseEntity&lt;T&gt;</code></li> <li>POJO
<ul><li><code>@ResponseBody</code></li> <li>plain POJO — as <code>@ModelAttribute</code></li></ul></li> <li>async
<ul><li><code>DeferredResult&lt;V&gt;</code></li> <li><code>Callable&lt;V&gt;</code></li></ul></li></ul></li> <li><p>error handling</p> <ul><li><code>@org.springframework.web.bind.annotation.ExceptionHandler</code> — handling exceptions in specific handler classes and/or handler methods<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>Class&lt;? extends Throwable&gt;[] value</code> — Exceptions handled by the annotated method. If empty, will default to any exceptions listed in the method argument list.</li></ul></li> <li><code>@org.springframework.web.bind.annotation.ControllerAdvice</code> — declare <code>@ExceptionHandler</code>, <code>@InitBinder</code>, or <code>@ModelAttribute</code> methods to be shared across multiple <code>@Controller</code> classes<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Component</span>
</code></pre></div><ul><li><code>String[] basePackages</code>, <code>String[] value</code> — the packages and sub-packages in which to select controllers to be advised</li> <li>more</li></ul></li> <li><code>org.springframework.web.server.ResponseStatusException</code> — for exceptions associated with specific HTTP response status codes</li></ul></li> <li><p><code>org.springframework.web.servlet.mvc.method.annotation.ResponseBodyAdvice</code> — customizing the response after the execution of an <code>@ResponseBody</code> or a <code>ResponseEntity</code> controller method but before the body is written with an <code>HttpMessageConverter</code></p></li></ol> <h3 id="validation"><a href="#validation" class="header-anchor">#</a> Validation</h3> <ol><li><p>validation</p> <ul><li><a href="https://docs.spring.io/spring/docs/5.2.7.RELEASE/spring-framework-reference/core.html#validation-beanvalidation" target="_blank" rel="noopener noreferrer">Bean Validation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> — <code>javax.validation</code> package and sub-packages</li> <li><a href="https://docs.spring.io/spring/docs/5.2.7.RELEASE/spring-framework-reference/core.html#validation" target="_blank" rel="noopener noreferrer">Spring Validation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>validate</p> <ul><li>cause validation to be applied — <code>MethodArgumentNotValidException</code> and 400 if not passed, can be used on handler methods arguments
<ul><li><code>@javax.validation.Valid</code></li> <li><code>@org.springframework.validation.annotation.Validated</code></li> <li>self define such annotations — <code>@javax.validation.Constraint</code></li></ul></li> <li>configuration — <code>WebMvcConfigurer::WebMvcConfigurer</code> for <code>Validator</code>, which defaults to <code>LocalValidatorFactoryBean</code></li> <li><code>org.springframework.validation.Validator</code></li></ul></li></ol> <h3 id="interceptor"><a href="#interceptor" class="header-anchor">#</a> Interceptor</h3> <ol><li><p><code>HandlerMapping</code> — define a mapping between requests and handler objects, along with a list of interceptors for pre- and post-processing</p> <ul><li><code>RequestMappingHandlerMapping</code> — for <code>@RequestMapping</code></li></ul></li> <li><p><code>org.springframework.web.servlet.HandlerInterceptor</code> — add common preprocessing behavior without needing to modify each handler implementation</p> <ul><li>async version — <code>org.springframework.web.servlet.AsyncHandlerInterceptor</code></li> <li>register — <code>WebMvcConfigurer::addInterceptors</code></li> <li><code>boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)</code> — return <code>true</code> so the handler execution chain continues</li> <li><code>postHandle</code> — less useful with <code>@ResponseBody</code> and <code>ResponseEntity</code> methods for which the response is written and committed within the <code>HandlerAdapter</code> and before <code>postHandle</code></li> <li><code>afterCompletion</code></li></ul></li></ol> <h3 id="web-client"><a href="#web-client" class="header-anchor">#</a> Web Client</h3> <ol><li><p><code>org.springframework.web.client.RestTemplate</code> — synchronous client to perform HTTP requests, exposing a simple, template method API over underlying HTTP client libraries such as the JDK <code>HttpURLConnection</code>, Apache HttpComponents, and others</p> <ul><li><code>exchange</code> method</li> <li><code>execute</code> method</li> <li>more</li> <li>can <code>@LoadBalance</code></li></ul></li> <li><p><code>org.springframework.web.reactive.function.client.WebClient</code> — non-blocking, reactive client to perform HTTP requests, exposing a fluent, reactive API over underlying HTTP client libraries such as Reactor Netty</p></li></ol> <h2 id="data"><a href="#data" class="header-anchor">#</a> Data</h2> <ol><li><p>transaction</p> <ul><li><code>org.springframework.transaction.PlatformTransactionManager</code> — bean to configure for implementation of this interface as transaction infrastructure
<ul><li><code>org.springframework.jdbc.datasource.DataSourceTransactionManager</code> — <code>PlatformTransactionManager</code> implementation for a single JDBC <code>DataSource</code></li> <li><code>java.sql.Connection</code>-like not thread-safe — thread bound and transaction linked, like <code>javax.persistency.EntityManager</code></li></ul></li> <li>configure
<ul><li><code>@org.springframework.transaction.annotation.EnableTransactionManagement</code> — <code>&lt;tx:annotation-driven/&gt;</code>, enables Spring's annotation-driven transaction management capability
<ul><li><code>AdviceMode mode</code> — <code>AdviceMode.PROXY</code>, <code>AdviceMode.ASPECTJ</code></li> <li><code>boolean proxyTargetClass</code> — CGLIB or JDK proxy, <code>true</code> will affect all Spring-managed beans requiring proxying, for example <code>@Async</code></li></ul></li> <li><code>org.springframework.transaction.annotation.TransactionManagementConfigurer</code></li></ul></li> <li><code>@org.springframework.transaction.annotation.Transactional</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Inherited</span> <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Transactional</span>
</code></pre></div><ul><li><code>String transactionManager</code>, <code>String value</code> — optional, the qualifier value (or the bean name) of a specific <code>TransactionManager</code></li> <li><code>String[] rollbackForClassName</code>, <code>Class&lt;? extends Throwable&gt;[] rollbackFor</code> — which exception types must cause a transaction rollback, defaults to <code>RuntimeException</code> and <code>Error</code></li> <li><code>Isolation isolation</code></li> <li><code>Propagation propagation</code> — defaults to <code>Propagation.REQUIRED</code>, use current transaction or create anew if none exists; <code>Propagation.NESTED</code>, a single physical transaction with multiple savepoints</li> <li><code>boolean readOnly</code></li> <li>more</li></ul></li></ul></li> <li><p>exception translation — unite error code and exceptions that extended <code>SQLException</code> from JDBC vendors</p> <ul><li>translator — configure translator implementation beans
<ul><li><code>org.springframework.dao.support.PersistenceExceptionTranslator</code></li> <li><code>org.springframework.dao.support.ChainedPersistenceExceptionTranslator</code></li></ul></li> <li>translation target — <code>@Repository</code> methods; catch <code>DataAccessException</code> not in from the repository itself but callers</li> <li><code>org.springframework.dao.DataAccessException</code> <ul><li><code>org.springframework.dao.NonTransientDataAccessException</code></li> <li><code>org.springframework.dao.RecoverableDataAccessException</code></li> <li><code>org.springframework.dao.TransientDataAccessException</code></li> <li>more</li></ul></li></ul></li> <li><p><code>javax.sql.DataSource</code> — factory for connections, configure as beans for data sources</p> <ul><li><code>org.springframework.jdbc.datasource.DriverManagerDataSource</code> — property setters</li> <li><code>org.springframework.jdbc.datasource.lookup.JndiDataSourceLookup</code></li></ul></li> <li><p>Spring Data</p> <ul><li><code>org.springframework.data.repository.Repository&lt;T, ID&gt;</code> <ul><li><code>org.springframework.data.repository.CrudRepository&lt;T, ID&gt;</code> <ul><li><code>org.springframework.data.repository.PagingAndSortingRepository&lt;T,ID&gt;</code></li></ul></li></ul></li></ul></li> <li><p>MyBatis</p> <ul><li>DAO example<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM user WHERE name = #{name}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">User</span> <span class="token function">findUserByName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM user&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO user(name, age,money) VALUES(#{name}, #{age}, #{money})&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;UPDATE  user SET name = #{name},age = #{age},money= #{money} WHERE id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Double</span> money<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;DELETE from user WHERE id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>multiple data source example<div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8335</span>
<span class="token comment"># 配置第一个数据源</span>
<span class="token key attr-name">spring.datasource.hikari.db1.jdbc-url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://127.0.0.1:3306/erp?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span>
<span class="token key attr-name">spring.datasource.hikari.db1.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">spring.datasource.hikari.db1.password</span><span class="token punctuation">=</span><span class="token value attr-value">153963</span>
<span class="token key attr-name">spring.datasource.hikari.db1.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;top.snailclimb.db1.dao&quot;</span><span class="token punctuation">,</span> sqlSessionTemplateRef <span class="token operator">=</span> <span class="token string">&quot;db1SqlSessionTemplate&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataSource1Config</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;db1DataSource&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.hikari.db1&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Primary</span>
    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">testDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">DataSourceBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;db1SqlSessionFactory&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Primary</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">testSqlSessionFactory</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;db1DataSource&quot;</span><span class="token punctuation">)</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">SqlSessionFactoryBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//  bean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(&quot;classpath:mybatis/mapper/db1/*.xml&quot;));</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;db1TransactionManager&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Primary</span>
    <span class="token keyword">public</span> <span class="token class-name">DataSourceTransactionManager</span> <span class="token function">testTransactionManager</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;db1DataSource&quot;</span><span class="token punctuation">)</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceTransactionManager</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;db1SqlSessionTemplate&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Primary</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSessionTemplate</span> <span class="token function">testSqlSessionTemplate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;db1SqlSessionFactory&quot;</span><span class="token punctuation">)</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionTemplate</span><span class="token punctuation">(</span>sqlSessionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ol> <h3 id="jackson"><a href="#jackson" class="header-anchor">#</a> Jackson</h3> <ol><li><p><code>com.fasterxml.jackson.annotation</code></p></li> <li><p>ignore</p> <ul><li><code>@JsonIgnoreProperties</code></li> <li><code>@JsonIgnore</code></li></ul></li> <li><p><code>@JsonFormat</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>shape<span class="token operator">=</span><span class="token class-name">JsonFormat<span class="token punctuation">.</span>Shape</span><span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span> pattern<span class="token operator">=</span><span class="token string">&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;</span><span class="token punctuation">,</span> timezone<span class="token operator">=</span><span class="token string">&quot;GMT&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Date</span> date<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>@JsonUnwrapped</code> — flatten</p></li></ol> <h2 id="integration"><a href="#integration" class="header-anchor">#</a> Integration</h2> <ol><li><p><code>org.springframework.core.task.TaskExecutor</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TaskExecutor</span> <span class="token keyword">extends</span> <span class="token class-name">Executor</span>
</code></pre></div><ul><li><code>void execute(Runnable task)</code></li></ul></li> <li><p>async</p> <ul><li>configuration
<ul><li><code>@EnableAsync</code> <ul><li>executor — <code>TaskExecutor</code> bean, or an <code>Executor</code> bean named <code>&quot;taskExecutor&quot;</code>, <code>SimpleAsyncTaskExecutor</code> if none found</li></ul></li> <li><code>org.springframework.scheduling.annotation.AsyncConfigurer</code> — for <code>@Configuration</code>, <code>@EnableAsync</code> classes
<ul><li><code>default Executor getAsyncExecutor()</code></li> <li><code>default AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler()</code> — uncaught exceptions are only logged by default</li></ul></li></ul></li> <li><code>@org.springframework.scheduling.annotation.Async</code> — the return type is constrained to either <code>void</code> or <code>Future</code></li> <li><code>TaskExecutor</code> <ul><li><code>org.springframework.core.task.AsyncTaskExecutor</code> — with methods supporting <code>Future</code> <ul><li><code>org.springframework.core.task.SimpleAsyncTaskExecutor</code> — fires up a new Thread for each task, use <code>ThreadPoolTaskExecutor</code> for thread pools
<ul><li><code>void setConcurrencyLimit(int concurrencyLimit)</code> — defaults to unlimited</li></ul></li> <li><code>org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor</code> <ul><li><code>setCorePoolSize</code></li> <li><code>setMaxPoolSize</code></li> <li><code>setQueueCapacity</code></li> <li><code>setRejectedExecutionHandler</code> — defaults to <code>ThreadPoolExecutor.AbortPolicy</code></li></ul></li></ul></li></ul></li></ul></li> <li><p>scheduling</p> <ul><li>scheduled
<ul><li><code>@org.springframework.scheduling.annotation.Scheduled</code> — must expect no arguments
<ul><li><code>String cron</code> — cron expressions, see javadoc of <code>CronSequenceGenerator</code></li></ul></li> <li><code>org.springframework.scheduling.TaskScheduler</code> — the scheduling of <code>Runnable</code>s; the 'default' implementation is <code>ThreadPoolTaskScheduler</code></li> <li><code>org.springframework.scheduling.Trigger</code> — can be used in <code>TaskScheduler::schedule</code> <ul><li><code>org.springframework.scheduling.support.CronTrigger</code></li> <li><code>org.springframework.scheduling.support.PeriodicTrigger</code></li></ul></li></ul></li> <li><code>TaskExecutor</code>, <code>org.springframework.scheduling.TaskScheduler</code> <ul><li><code>org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler</code> — <code>TaskScheduler</code> interface wrapping a native <code>ScheduledThreadPoolExecutor</code> <ul><li><code>void setPoolSize(int poolSize)</code> — pool size defaults to 1</li></ul></li></ul></li> <li>configuration
<ul><li><code>@EnableScheduling</code></li> <li><code>org.springframework.scheduling.annotation.SchedulingConfigurer</code></li> <li><code>org.springframework.scheduling.config.ScheduledTaskRegistrar</code> — <code>set-</code>, <code>add-</code>, <code>get-</code> methods
<ul><li><code>void setTaskScheduler(TaskScheduler taskScheduler)</code></li></ul></li></ul></li></ul></li> <li><p>events</p> <ul><li><code>org.springframework.context.ApplicationEvent</code></li> <li><code>org.springframework.context.ApplicationListener&lt;E extends ApplicationEvent&gt;</code> — only singleton beans</li> <li><code>@org.springframework.context.event.EventListener</code></li> <li><code>org.springframework.context.ApplicationEventPublisher</code> <ul><li><code>org.springframework.context.ApplicationEventPublisherAware</code></li></ul></li> <li><code>org.springframework.context.event.ApplicationEventMulticaster</code></li></ul></li> <li><p>method cache</p> <ul><li>enable and config — <code>@org.springframework.cache.annotation.EnableCaching</code>, <code>org.springframework.cache.annotation.CachingConfigurer</code></li> <li>interface <code>org.springframework.cache.Cache</code> — common cache operations</li> <li>interface <code>org.springframework.cache.CacheManager</code> — cache manager SPI, allow for retrieving named Cache regions</li> <li>implementations — JDK <code>java.util.concurrent.ConcurrentMap</code> based caches, Ehcache 2.x, Gemfire cache, Caffeine, and JSR-107 compliant caches (such as Ehcache 3.x)</li> <li><code>org.springframework.cache.annotation</code> <ul><li><code>@Cacheable</code> — Triggers cache population.</li> <li><code>@CacheEvict</code> — Triggers cache eviction.</li> <li><code>@CachePut</code> — Updates the cache without interfering with the method execution.</li> <li><code>@Caching</code> — Regroups multiple cache operations to be applied on a method.</li> <li><code>@CacheConfig</code> — Shares some common cache-related settings at class-level.</li></ul></li></ul></li></ol> <h2 id="security"><a href="#security" class="header-anchor">#</a> Security</h2> <ol><li><p>security concepts</p> <ul><li>authentication
<ul><li><code>Authorization: Digest</code></li> <li>client certificates</li> <li>claims-based authentication — OAuth and SAML</li></ul></li> <li>security related headers, configurable by <code>HttpSecurity::headers</code> <ul><li><code>Cache-Control: no-cache, no-store, max-age=0, must-revalidate</code>, <code>Pragma: no-cache</code></li> <li><code>X-Content-Type-Options: nosniff</code> — no MIME-sniffing</li> <li><code>Strict-Transport-Security: max-age=31536000; includeSubDomains</code> — only use HTTPS</li> <li><code>X-Frame-Options</code></li> <li><code>X-XSS-Protection: 1; mode=block</code></li></ul></li></ul></li> <li><p>roles, activities, identities</p> <ul><li><code>org.springframework.security.core.context.SecurityContext</code> — the minimum security information associated with the current thread of execution
<ul><li><code>Authentication getAuthentication()</code></li> <li><code>void setAuthentication(Authentication authentication)</code></li> <li><code>org.springframework.security.core.context.SecurityContextHolder</code> — a series of static methods related to <code>SecurityContext</code> <ul><li><code>static SecurityContext getContext()</code></li></ul></li></ul></li> <li><code>org.springframework.security.core.Authentication</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Authentication</span> <span class="token keyword">extends</span> <span class="token class-name">Principal</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li><code>Collection&lt;? extends GrantedAuthority&gt; getAuthorities()</code></li> <li><code>Object getCredentials()</code></li> <li><code>Object getDetails()</code></li> <li><code>Object getPrincipal()</code></li> <li><code>boolean isAuthenticated()</code></li> <li><code>void setAuthenticated(boolean isAuthenticated)</code></li> <li><code>java.security.Principal</code> — represent any entity, such as an individual, a corporation, and a login id</li> <li><code>org.springframework.security.authentication.UsernamePasswordAuthenticationToken</code> — an <code>Authentication</code> implementation that is designed for simple presentation of a username and password</li></ul></li> <li><code>org.springframework.security.core.GrantedAuthority</code> — an authority granted to an <code>Authentication</code> object</li> <li><code>org.springframework.security.authentication.AuthenticationManager</code> — processes an <code>Authentication</code> request, default implementation <code>ProviderManager</code> delegates to <code>AuthenticationProvider</code> implementations
<ul><li><code>Authentication authenticate(Authentication authentication)</code></li> <li><code>org.springframework.security.authentication.AuthenticationProvider</code> — can process a specific <code>Authentication</code> implementation
<ul><li><code>Authentication authenticate(Authentication authentication)</code></li> <li><code>boolean supports(java.lang.Class&lt;?&gt; authentication)</code></li> <li><code>org.springframework.security.authentication.dao.DaoAuthenticationProvider</code> — an <code>AuthenticationProvider</code> implementation that retrieves user details from a <code>UserDetailsService</code></li></ul></li></ul></li> <li><code>org.springframework.security.core.userdetails.UserDetails</code> — store user information, such as the username and password, <code>GrantedAuthority</code>s, and whether the user is enabled, expired, and locked out; which is later encapsulated into <code>Authentication</code> objects, e.g. by authentication providers
<ul><li><code>UserDetailsService::loadUserByUsername</code></li></ul></li> <li><code>org.springframework.security.core.AuthenticationException</code> — authentication fail, <code>RuntimeException</code></li> <li><code>org.springframework.security.access.AccessDeniedException</code> — an <code>Authentication</code> object does not hold a required authority</li></ul></li> <li><p>configure</p> <ul><li><code>org.springframework.web.filter.DelegatingFilterProxy</code> — proxy for a standard Servlet Filter, delegating to a Spring-managed bean that implements the <code>Filter</code> interface
<ul><li><code>FilterChainProxy</code> — register security filters</li> <li><code>org.springframework.security.web.SecurityFilterChain</code> — used by <code>FilterChainProxy</code> to determine which Spring Security Filters should be invoked for this request</li></ul></li> <li><code>org.springframework.security.web.context.AbstractSecurityWebApplicationInitializer</code> — registers the <code>DelegatingFilterProxy</code> to use the <code>springSecurityFilterChain</code> before any other registered <code>Filter</code></li> <li><code>@org.springframework.security.config.annotation.web.configuration.EnableWebSecurity</code> — add this annotation to an <code>@Configuration</code> class to have the Spring Security configuration defined in any <code>WebSecurityConfigurer</code> or more likely by extending the <code>WebSecurityConfigurerAdapter</code> base class and overriding individual methods
<ul><li><code>org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter</code> — a convenient base class for creating a <code>WebSecurityConfigurer</code> instance
<ul><li><code>protected void configure(AuthenticationManagerBuilder auth)</code> — used by the default implementation of <code>authenticationManager()</code> to attempt to obtain an <code>AuthenticationManager</code> <ul><li><code>AuthenticationManager authenticationManagerBean()</code> — to be exposed as a <code>@Bean</code></li></ul></li> <li><code>protected void configure(HttpSecurity http)</code></li> <li><code>void configure(WebSecurity web)</code></li></ul></li></ul></li> <li>example — see javadoc of <code>@EnableWebSecurity</code></li></ul></li> <li><p>builders in configurations</p> <ul><li><code>org.springframework.security.config.annotation.web.builders.HttpSecurity</code> — configuring web based security for specific http requests<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">HttpSecurity</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractConfiguredSecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DefaultSecurityFilterChain</span><span class="token punctuation">,</span><span class="token class-name">HttpSecurity</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">SecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DefaultSecurityFilterChain</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">HttpSecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpSecurity</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><code>org.springframework.security.config.annotation.web.builders.WebSecurity</code> — to create the <code>FilterChainProxy</code> known as the Spring Security Filter Chain (<code>springSecurityFilterChain</code>)<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurity</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractConfiguredSecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">,</span><span class="token class-name">WebSecurity</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">SecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">ApplicationContextAware</span>
</code></pre></div></li> <li><code>org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder</code> — used to create an <code>AuthenticationManager</code>. Allows for easily building in memory authentication, LDAP authentication, JDBC based authentication, adding <code>UserDetailsService</code>, and adding <code>AuthenticationProvider</code>s<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationManagerBuilder</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractConfiguredSecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticationManager</span><span class="token punctuation">,</span><span class="token class-name">AuthenticationManagerBuilder</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">ProviderManagerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticationManagerBuilder</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>JdbcUserDetailsManagerConfigurer&lt;AuthenticationManagerBuilder&gt; jdbcAuthentication()</code></li> <li><code>InMemoryUserDetailsManagerConfigurer&lt;AuthenticationManagerBuilder&gt; inMemoryAuthentication()</code></li> <li><code>LdapAuthenticationProviderConfigurer&lt;AuthenticationManagerBuilder&gt; ldapAuthentication()</code></li> <li><code>&lt;T extends UserDetailsService&gt; DaoAuthenticationConfigurer&lt;AuthenticationManagerBuilder,T&gt; userDetailsService(T userDetailsService)</code></li></ul></li></ul></li> <li><p>security events in <code>org.springframework.security.authentication.event</code></p> <ul><li><code>AbstractAuthenticationFailureEvent</code> — subclasses indicate more detailed reasons for failure</li> <li><code>AuthenticationSuccessEvent</code> — also remember-me authentication
<ul><li><code>InteractiveAuthenticationSuccessEvent</code></li></ul></li> <li><code>org.springframework.security.web.authentication.session.SessionFixationProtectionEvent</code></li> <li><code>org.springframework.security.core.session.SessionDestroyedEvent</code></li></ul></li> <li><p>method security</p> <ul><li>imperative — <code>SecurityContextHolder</code></li> <li><code>@AuthenticationPrincipal</code> — binds a method parameter or method return value to the <code>Authentication.getPrincipal()</code></li> <li><code>@org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity</code> <ul><li><code>boolean jsr250Enabled</code></li> <li><code>boolean securedEnabled</code></li> <li><code>boolean prePostEnabled</code></li> <li><code>org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration</code></li></ul></li> <li><code>jsr250Enabled</code>: <code>javax.annotation.security</code> annotations — <code>@RolesAllowed</code> - <code>@PermitAll</code> - more</li> <li><code>securedEnabled</code>: <code>@org.springframework.security.access.annotation.Secured</code> — attributes, like <code>&quot;ROLE_USER&quot;</code>, <code>&quot;IS_AUTHENTICATED_REMEMBERED&quot;</code></li> <li><code>prePostEnabled</code>: in <code>org.springframework.security.access.prepost</code>, <code>pre-</code> for parameters, <code>post-</code> for returns
<ul><li><code>@PreAuthorize</code></li> <li><code>@PostAuthorize</code></li> <li><code>@PreFilter</code> — filtering of collections and arrays</li> <li><code>@PostFilter</code></li></ul></li> <li>URL — <code>HttpSecurity::authorizeRequests</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    http
        <span class="token comment">// ...</span>
        <span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span>authorize <span class="token operator">-&gt;</span> authorize
            <span class="token punctuation">.</span><span class="token function">mvcMatchers</span><span class="token punctuation">(</span><span class="token string">&quot;/resources/**&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/signup&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/about&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">mvcMatchers</span><span class="token punctuation">(</span><span class="token string">&quot;/admin/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">&quot;ADMIN&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">mvcMatchers</span><span class="token punctuation">(</span><span class="token string">&quot;/db/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">&quot;hasRole('ADMIN') and hasRole('DBA')&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">denyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>org.springframework.security.config.annotation.web.configurers.ExpressionUrlAuthorizationConfigurer.ExpressionInterceptUrlRegistry</code> — matchers, order sensitive
<ul><li><code>anyRequest</code></li> <li><code>antMatchers</code> — <code>AntPathMatcher</code></li> <li><code>requestMatchers</code> — <code>RequestMatcher</code>, simple strategy to match an <code>HttpServletRequest</code> <ul><li><code>mvcMatchers</code> — <code>MvcRequestMatcher</code>, e.g. for <code>/secured</code> as well as <code>/secured/</code>, <code>/secured.html</code>, <code>/secured.xyz</code></li> <li><code>regexMatchers</code> — <code>RegexRequestMatcher</code></li></ul></li></ul></li> <li><code>org.springframework.security.config.annotation.web.configurers.ExpressionUrlAuthorizationConfigurer.AuthorizedUrl</code> <ul><li><code>not()</code></li> <li><code>permitAll()</code></li> <li><code>denyAll()</code></li> <li>authorization requirement
<ul><li><code>authenticated()</code></li> <li><code>anonymous()</code></li></ul></li> <li>attributes
<ul><li><code>access(String attribute)</code> — SpEL</li> <li><code>hasAuthority(String authority)</code> — <code>&quot;ROLE_&quot;</code> not automatically inserted<br> <code>hasAnyAuthority(String... authorities)</code></li> <li><code>hasRole(String role)</code> — <code>&quot;ROLE_&quot;</code> automatically inserted<br> <code>hasAnyRole(String... roles)</code></li> <li><code>hasIpAddress(String ipaddressExpression)</code></li></ul></li> <li>remember
<ul><li><code>rememberMe()</code></li> <li><code>fullyAuthenticated()</code></li></ul></li></ul></li></ul></li></ul></li> <li><p>authorization decisions behind scenes</p> <ul><li><code>org.springframework.security.access.AccessDecisionVoter</code> <ul><li>decisions — <code>static int</code>, <code>ACCESS_ABSTAIN</code>, <code>ACCESS_DENIED</code>, <code>ACCESS_GRANTED</code></li> <li><code>org.springframework.security.acls.AclEntryVoter</code> — access control lists based</li> <li><code>org.springframework.security.access.vote.AuthenticatedVoter</code> — for special-case roles <code>IS_AUTHENTICATED_ANONYMOUSLY</code>, <code>IS_AUTHENTICATED_REMEMBERED</code>, and <code>IS_AUTHENTICATED_FULLY</code></li> <li>method security
<ul><li><code>org.springframework.security.access.annotation.Jsr250Voter</code></li> <li><code>org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter</code></li></ul></li> <li>role
<ul><li><code>org.springframework.security.access.vote.RoleHierarchyVoter</code></li> <li><code>org.springframework.security.access.vote.RoleVoter</code></li></ul></li> <li><code>org.springframework.security.web.access.expression.WebExpressionVoter</code> — <code>HttpSecurity</code></li></ul></li> <li><code>org.springframework.security.access.AccessDecisionManager</code> — final decisions
<ul><li><code>org.springframework.security.access.vote.AffirmativeBased</code>, default</li> <li><code>org.springframework.security.access.vote.ConsensusBased</code></li> <li><code>org.springframework.security.access.vote.UnanimousBased</code></li></ul></li></ul></li> <li><p>access control list (or ACL) — tbd</p></li> <li><p>OAuth 2 — tbd</p> <ul><li>provider end point — <code>org.springframework.security.oauth2.provider.endpoint</code> <ul><li><code>AuthorizationEndpoint</code> — for authorization. Default URL: <code>/oauth/authorize</code></li> <li><code>TokenEndpoint</code> — for access tokens. Default URL: <code>/oauth/token</code></li></ul></li> <li>authorization server configuration
<ul><li><code>@EnableAuthorizationServer</code></li> <li><code>AuthorizationServerConfigurer</code></li></ul></li> <li>resource server filter — <code>OAuth2AuthenticationProcessingFilter</code></li></ul></li></ol> <h2 id="spring-boot"><a href="#spring-boot" class="header-anchor">#</a> Spring Boot</h2> <ol><li><p><code>@org.springframework.boot.autoconfigure.SpringBootApplication</code> — singleton with a <code>run</code> method which executes the application</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Inherited</span>
 <span class="token annotation punctuation">@SpringBootConfiguration</span>
 <span class="token annotation punctuation">@EnableAutoConfiguration</span>
 <span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>excludeFilters<span class="token operator">=</span><span class="token punctuation">{</span><span class="token annotation punctuation">@ComponentScan.Filter</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span>classes<span class="token operator">=</span><span class="token class-name">TypeExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span>
</code></pre></div><ul><li>equivalent — <code>@Configuration</code>, <code>@ComponentScan</code>, and <code>@EnableAutoConfiguration</code> combined</li> <li><code>Class&lt;?&gt;[] exclude</code> — <code>exclude</code> in <code>@EnableAutoConfiguration</code></li></ul></li> <li><p><code>@org.springframework.boot.autoconfigure.EnableAutoConfiguration</code> — handle <code>@Enable&lt;Technology&gt;</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Inherited</span>
 <span class="token annotation punctuation">@AutoConfigurationPackage</span>
 <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span>
</code></pre></div><ul><li><code>AutoConfigurationImportSelector</code> uses classpath to find all the necessary configuration classes
<ul><li><code>AutoConfigurationImportSelector::getCandidateConfigurations</code> looks for the <code>META-INF/spring.factories</code> defined in the <code>spring-boot-autoconfigure</code> jar, which defines all the auto-configuration classes needed</li></ul></li> <li>Disabling Specific Auto-configuration Classes<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span><span class="token punctuation">(</span>exclude<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// or excludeName with fully qualified name</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfiguration</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><ul><li>also <code>spring.autoconfigure.exclude</code> property</li> <li><code>Class&lt;?&gt;[] exclude</code></li> <li><code>String[] excludeName</code></li></ul></li></ul></li> <li><p><code>SpringApplication</code> — bootstrap and launch a Spring application from a Java main method, have control over the main <code>ApplicationContext</code></p> <ul><li>run
<ul><li><code>static ConfigurableApplicationContext run(Class&lt;?&gt;[] primarySources, String[] args)</code><br> <code>static ConfigurableApplicationContext run(Class&lt;?&gt; primarySource, String... args)</code></li> <li><code>ConfigurableApplicationContext run(String... args)</code></li></ul></li> <li>builder style — <code>org.springframework.boot.builder.SpringApplicationBuilder</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">SpringApplicationBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">bannerMode</span><span class="token punctuation">(</span><span class="token class-name">Banner<span class="token punctuation">.</span>Mode</span><span class="token punctuation">.</span><span class="token constant">OFF</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">sources</span><span class="token punctuation">(</span><span class="token class-name">SpringBootSimpleApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>tbd</li></ul></li> <li><p><code>ApplicationArguments</code> — <code>args</code> from <code>SpringApplication::run</code> are accessible for beans</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MyComponent</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span><span class="token class-name">ApplicationArguments</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> enable <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">containsOption</span><span class="token punctuation">(</span><span class="token string">&quot;enable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>enable<span class="token punctuation">)</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;## &gt; You are enabled!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> _args <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">getNonOptionArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;## &gt; extra args ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>_args<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        _args<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>file <span class="token operator">-&gt;</span> log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>args</code> format
<ul><li><code>--option_name=value</code></li> <li><code>non_option_args1, non_option_args2</code></li></ul></li> <li>pass <code>args</code> from CLI<div class="language-shell extra-class"><pre class="language-shell"><code>./mvnw spring-boot:run -Dspring-boot.run.arguments<span class="token operator">=</span><span class="token string">&quot;--enable&quot;</span>
</code></pre></div></li> <li>pass <code>args</code> from JAR<div class="language-shell extra-class"><pre class="language-shell"><code>./mvnw package
<span class="token function">java</span> <span class="token parameter variable">-jar</span> spring-boot-simple-0.0.1-SNAPSHOT.jar <span class="token parameter variable">--enable</span> arg1 arg2
</code></pre></div></li></ul></li> <li><p>run code after <code>SpringApplication::run</code> — <code>ApplicationRunner</code> and <code>CommandLineRunner</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token class-name">CommandLineRunner</span> <span class="token function">myMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> args <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;## &gt; CommandLineRunner Implementation...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Accessing the Info bean: &quot;</span> <span class="token operator">+</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> arg<span class="token operator">:</span>args<span class="token punctuation">)</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="junit-5"><a href="#junit-5" class="header-anchor">#</a> JUnit 5</h2> <ol><li><p>docs</p> <ul><li><a href="https://junit.org/junit5/docs/5.0.1/api/index.html" target="_blank" rel="noopener noreferrer">Overview (JUnit 5.0.1 API)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://junit.org/junit5/docs/current/user-guide/" target="_blank" rel="noopener noreferrer">JUnit 5 User Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>maven config for integration with spring</p> <div class="language-XML extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.jupiter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-jupiter-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><a href="https://docs.spring.io/spring/docs/5.1.9.RELEASE/spring-framework-reference/testing.html#integration-testing-annotations-junit-jupiter" target="_blank" rel="noopener noreferrer">Spring JUnit Jupiter Testing Annotations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>@SpringJUnitConfig</code> — extends JUnit Jupiter with Spring test framework (<code>@ExtendWith</code>) and configures <code>ApplicationContext</code> (<code>@ContextConfiguration</code>)<div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name">SpringExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@ContextConfiguration</span>
 <span class="token annotation punctuation">@Inherited</span>
 <span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringJUnitConfig</span>
</code></pre></div><ul><li><code>Class&lt;?&gt;[] value</code> — Alias for <code>ContextConfiguration.classes()</code>, classes to use for loading an <code>ApplicationContext</code></li></ul></li> <li><code>@SpringJUnitWebConfig</code></li> <li><code>@EnabledIf</code> — signal that the annotated JUnit Jupiter test class or test method is enabled and should be run if the supplied <code>expression</code> evaluates to <code>true</code> <ul><li><code>expression</code> can be — SpEL, <code>Environment</code> properties, text literals</li></ul></li> <li><code>@DisabledIf</code></li> <li><code>@SpringBootTest</code> — works by creating the <code>ApplicationContext</code> used in your tests through <code>SpringApplication</code>, an alternative to <code>@SpringJUnitConfig</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Inherited</span>
 <span class="token annotation punctuation">@BootstrapWith</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name">SpringBootTestContextBootstrapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span></span>SpringExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootTest</span>
</code></pre></div></li></ul></li> <li><p>other test related annotations in Spring</p> <ul><li><code>@BootstrapWith</code></li> <li><code>@ContextConfiguration</code></li> <li><code>@ContextHierarchy</code></li> <li><code>@ActiveProfiles</code></li> <li><code>@TestPropertySource</code></li> <li><code>@DirtiesContext</code></li> <li><code>@WebAppConfiguration</code></li> <li><code>@TestExecutionListeners</code></li> <li><code>@Transactional</code></li> <li><code>@BeforeTransaction</code></li> <li><code>@AfterTransaction</code></li> <li><code>@Commit</code></li> <li><code>@Rollback</code></li> <li><code>@Sql</code></li> <li><code>@SqlConfig</code></li> <li><code>@SqlGroup</code></li></ul></li> <li><p><a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations" target="_blank" rel="noopener noreferrer">JUnit Annotations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>define a test method
<ul><li><code>@Test</code> — plain test method</li> <li><code>@RepeatedTest</code></li> <li><code>@ParameterizedTest</code></li> <li><code>@TestFactory</code></li></ul></li> <li>test method name
<ul><li><code>@DisplayName</code></li> <li><code>@DisplayNameGeneration</code></li></ul></li> <li>test instance lifecycle
<ul><li><code>@TestInstance</code> — configure the test instance lifecycle
<ul><li><code>TestInstance.Lifecycle.PER_CLASS</code> — a new test instance will be created once per test class</li> <li><code>TestInstance.Lifecycle.PER_METHOD</code> — default, a new test instance will be created for each test method or test factory method</li> <li>condition when <code>PER_METHOD</code> — the test class will still be instantiated if a given test method is disabled via a condition (e.g., @Disabled, @DisabledOnOs, etc.)</li></ul></li> <li><code>@BeforeAll</code> — Denotes that the annotated method should be executed before all test methods</li> <li><code>@BeforeEach</code> — the annotated method should be executed before each test method</li> <li><code>@AfterEach</code> — Denotes that the annotated method should be executed after each test method</li> <li><code>@AfterAll</code> — Denotes that the annotated method should be executed after all test methods</li></ul></li></ul></li> <li><p>test console output</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ByteArrayOutputStream</span> outContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ByteArrayOutputStream</span> errContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PrintStream</span> originalOut <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PrintStream</span> originalErr <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">;</span>

<span class="token annotation punctuation">@BeforeEach</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUpStreams</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setOut</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>outContent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setErr</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>errContent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@AfterEach</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">restoreStreams</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setOut</span><span class="token punctuation">(</span>originalOut<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setErr</span><span class="token punctuation">(</span>originalErr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>JUnit 4 example for comparaison</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ContextConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringJUnit4ClassRunner</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes<span class="token operator">=</span><span class="token class-name">CDPlayerConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CDPlayerTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CompactDisc</span> cd<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cdShouldNotBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">assertNotNull</span><span class="token punctuation">(</span>cd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tangentyh/notes-of-tan/edit/master/docs/backend/SpringNotes.md" target="_blank" rel="noopener noreferrer">Edit This Page On GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/22/2024, 5:40:56 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notes-of-tan/assets/js/app.4583dc19.js" defer></script><script src="/notes-of-tan/assets/js/2.56609c80.js" defer></script><script src="/notes-of-tan/assets/js/19.12213b74.js" defer></script>
  </body>
</html>
