<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Utils | Notes of Tan</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="https://v1.vuepress.vuejs.org/hero.png">
    <meta name="description" content="Tan's notes.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/notes-of-tan/assets/css/0.styles.97d02fe2.css" as="style"><link rel="preload" href="/notes-of-tan/assets/js/app.acedf45c.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/2.6e9b9b6e.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/25.5076b5b7.js" as="script"><link rel="prefetch" href="/notes-of-tan/assets/js/10.3ac90657.js"><link rel="prefetch" href="/notes-of-tan/assets/js/11.b4b15fad.js"><link rel="prefetch" href="/notes-of-tan/assets/js/12.4c468334.js"><link rel="prefetch" href="/notes-of-tan/assets/js/13.1ca85e47.js"><link rel="prefetch" href="/notes-of-tan/assets/js/14.bdf3ad30.js"><link rel="prefetch" href="/notes-of-tan/assets/js/15.b6c89420.js"><link rel="prefetch" href="/notes-of-tan/assets/js/16.28a94835.js"><link rel="prefetch" href="/notes-of-tan/assets/js/17.a57bca96.js"><link rel="prefetch" href="/notes-of-tan/assets/js/18.4d0ca1e4.js"><link rel="prefetch" href="/notes-of-tan/assets/js/19.332e23e7.js"><link rel="prefetch" href="/notes-of-tan/assets/js/20.b768a339.js"><link rel="prefetch" href="/notes-of-tan/assets/js/21.4c95b9d4.js"><link rel="prefetch" href="/notes-of-tan/assets/js/22.ec13f01b.js"><link rel="prefetch" href="/notes-of-tan/assets/js/23.b5e6c2d1.js"><link rel="prefetch" href="/notes-of-tan/assets/js/24.7ed079be.js"><link rel="prefetch" href="/notes-of-tan/assets/js/26.97f56e92.js"><link rel="prefetch" href="/notes-of-tan/assets/js/27.f312f90b.js"><link rel="prefetch" href="/notes-of-tan/assets/js/28.c395e567.js"><link rel="prefetch" href="/notes-of-tan/assets/js/29.c13a5cfd.js"><link rel="prefetch" href="/notes-of-tan/assets/js/3.3aa69193.js"><link rel="prefetch" href="/notes-of-tan/assets/js/30.ef6826a1.js"><link rel="prefetch" href="/notes-of-tan/assets/js/31.286f3c19.js"><link rel="prefetch" href="/notes-of-tan/assets/js/32.448fa4b4.js"><link rel="prefetch" href="/notes-of-tan/assets/js/33.e1951d30.js"><link rel="prefetch" href="/notes-of-tan/assets/js/34.f8513120.js"><link rel="prefetch" href="/notes-of-tan/assets/js/35.9a7eca25.js"><link rel="prefetch" href="/notes-of-tan/assets/js/36.02f32aba.js"><link rel="prefetch" href="/notes-of-tan/assets/js/37.5a951d16.js"><link rel="prefetch" href="/notes-of-tan/assets/js/4.92aae019.js"><link rel="prefetch" href="/notes-of-tan/assets/js/5.06cb9765.js"><link rel="prefetch" href="/notes-of-tan/assets/js/6.b7149d78.js"><link rel="prefetch" href="/notes-of-tan/assets/js/7.25994859.js"><link rel="prefetch" href="/notes-of-tan/assets/js/8.a5076060.js"><link rel="prefetch" href="/notes-of-tan/assets/js/9.efe87989.js">
    <link rel="stylesheet" href="/notes-of-tan/assets/css/0.styles.97d02fe2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes-of-tan/" class="home-link router-link-active"><!----> <span class="site-name">Notes of Tan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java
</a></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java
</a></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-of-tan/backend/java/javaBasics.html" class="sidebar-link">Java Basics</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#docs" class="sidebar-link">Docs</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#cli" class="sidebar-link">CLI</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#jar" class="sidebar-link">JAR</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#philosophy" class="sidebar-link">Philosophy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#control-flow" class="sidebar-link">Control Flow</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#package" class="sidebar-link">Package</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#fundamentals" class="sidebar-link">Fundamentals</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#data-types" class="sidebar-link">Data Types</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#classes-and-modifiers" class="sidebar-link">Classes and Modifiers</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#math" class="sidebar-link">Math</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#built-in-classes" class="sidebar-link">Built-In Classes</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#inheritance" class="sidebar-link">Inheritance</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#interfaces-lambdas-and-inner-classes" class="sidebar-link">Interfaces, Lambdas and Inner Classes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#interfaces" class="sidebar-link">Interfaces</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#lambdas" class="sidebar-link">Lambdas</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#inner-class" class="sidebar-link">Inner Class</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#reflection" class="sidebar-link">Reflection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#proxy" class="sidebar-link">Proxy</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#error-handling" class="sidebar-link">Error Handling</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#debugging" class="sidebar-link">Debugging</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#exceptions" class="sidebar-link">Exceptions</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#exception-handling" class="sidebar-link">Exception Handling</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#assertion" class="sidebar-link">Assertion</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#logging" class="sidebar-link">Logging</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#generics" class="sidebar-link">Generics</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#annotations" class="sidebar-link">Annotations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#standard-annotations" class="sidebar-link">Standard Annotations</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaBasics.html#source-level-annotation-processing" class="sidebar-link">Source-Level Annotation Processing</a></li></ul></li></ul></li><li><a href="/notes-of-tan/backend/java/javaConcurrency.html" class="sidebar-link">Concurrency</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#thread" class="sidebar-link">Thread</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#synchronization-and-locks" class="sidebar-link">Synchronization and Locks</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#volatile-and-atomics" class="sidebar-link">volatile and Atomics</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#thread-safe-collections" class="sidebar-link">Thread-Safe Collections</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#blocking-queues" class="sidebar-link">Blocking Queues</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#concurrent-collections" class="sidebar-link">Concurrent Collections</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#copy-on-write-collections" class="sidebar-link">Copy on Write Collections</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#callable-and-future" class="sidebar-link">Callable and Future</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#executors" class="sidebar-link">Executors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#fork-join" class="sidebar-link">Fork-Join</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#synchronizers" class="sidebar-link">Synchronizers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#count-synchronizers" class="sidebar-link">Count Synchronizers</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaConcurrency.html#data-exchange-synchronizers" class="sidebar-link">Data Exchange Synchronizers</a></li></ul></li></ul></li><li><a href="/notes-of-tan/backend/java/javaIO.html" class="sidebar-link">IO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#os-i-o" class="sidebar-link">OS I/O</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#java-io" class="sidebar-link">Java IO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#console" class="sidebar-link">Console</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#basic-io-stream" class="sidebar-link">Basic IO Stream</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#filter-stream" class="sidebar-link">Filter Stream</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#print-stream" class="sidebar-link">Print Stream</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#other-streams" class="sidebar-link">Other Streams</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#serialization" class="sidebar-link">Serialization</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#files" class="sidebar-link">Files</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#nio" class="sidebar-link">NIO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#nio-buffers" class="sidebar-link">NIO Buffers</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#nio-channels" class="sidebar-link">NIO Channels</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#network" class="sidebar-link">Network</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#address" class="sidebar-link">Address</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#sockets" class="sidebar-link">Sockets</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#uri-and-url" class="sidebar-link">URI and URL</a></li></ul></li></ul></li><li><a href="/notes-of-tan/backend/java/javaMisc.html" class="sidebar-link">Java Miscellanea</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#text" class="sidebar-link">Text</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#regex" class="sidebar-link">Regex</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#format" class="sidebar-link">Format</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#logging" class="sidebar-link">Logging</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#logger" class="sidebar-link">Logger</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#log-levels-and-records" class="sidebar-link">Log Levels and Records</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#handlers" class="sidebar-link">Handlers</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#jdbc" class="sidebar-link">JDBC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#jdbc-properties" class="sidebar-link">JDBC Properties</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#jdbc-classes" class="sidebar-link">JDBC Classes</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#time" class="sidebar-link">Time</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#i18n" class="sidebar-link">i18n</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#number-format" class="sidebar-link">Number Format</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#collator-and-normalizer" class="sidebar-link">Collator and Normalizer</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#resource-bundles" class="sidebar-link">Resource Bundles</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#security" class="sidebar-link">Security</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaMisc.html#other-java-apis" class="sidebar-link">Other Java APIs</a></li></ul></li><li><a href="/notes-of-tan/backend/java/javaUtils.html" aria-current="page" class="active sidebar-link">Utils</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#arrays" class="sidebar-link">Arrays</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#event-handling" class="sidebar-link">Event Handling</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#collections-and-maps" class="sidebar-link">Collections and Maps</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#list" class="sidebar-link">List</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#queue" class="sidebar-link">Queue</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#set" class="sidebar-link">Set</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#maps" class="sidebar-link">Maps</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#views-and-wrappers" class="sidebar-link">Views and Wrappers</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#legacy-collections" class="sidebar-link">Legacy Collections</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#preferences" class="sidebar-link">Preferences</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#stream" class="sidebar-link">Stream</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#spi-service-loader" class="sidebar-link">SPI (Service Loader)</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#other-utils" class="sidebar-link">Other Utils</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaUtils.html#zip-checksum-and-encryption" class="sidebar-link">ZIP, Checksum and Encryption</a></li></ul></li><li><a href="/notes-of-tan/backend/java/JVM.html" class="sidebar-link">JVM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/JVM.html#memory" class="sidebar-link">Memory</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/JVM.html#gc" class="sidebar-link">GC</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/JVM.html#reference" class="sidebar-link">Reference</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/JVM.html#class-loading" class="sidebar-link">Class Loading</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="utils"><a href="#utils" class="header-anchor">#</a> Utils</h1> <h2 id="arrays"><a href="#arrays" class="header-anchor">#</a> Arrays</h2> <ol><li><code>java.util.Arrays</code> <ul><li>conversion
<ul><li><code>static String toString(type[] a)</code></li> <li><code>static String deepToString(Object[] a)</code></li> <li><code>static &lt;T&gt; List&lt;T&gt; asList(T... a)</code> — <code>return new ArrayList&lt;&gt;(a);</code> <ul><li><code>ArrayList</code> here is <code>Arrays$ArrayList</code> which implements <code>List</code>, a view on the original array with fixed size</li> <li>if real <code>ArrayList</code> is desired — use this <code>Arrays$ArrayList</code> to construct</li></ul></li> <li>stream methods</li></ul></li> <li><code>static int binarySearch(type[] a, type v)</code><br> <code>static int binarySearch(type[] a, int start, int end, type v)</code> <ul><li><code>Object[]</code> actually needs to be <code>Comparable[]</code></li></ul></li> <li>copy
<ul><li><code>static type[] copyOf(type[] original, int newLength)</code> — uses <code>System::arraycopy</code> behind the scenes</li> <li><code>static type[] copyOfRange(type[] a, int start, int end)</code></li> <li><code>System::arraycopy</code></li> <li><code>T[]::clone</code></li></ul></li> <li>initialization and modifications
<ul><li><code>static void fill(type[] a, type v)</code></li> <li><code>static void setAll(double[] array, IntToDoubleFunction generator)</code> — generator takes indices as parameter<br> <code>static void setAll(int[] array, IntUnaryOperator generator)</code><br> <code>static void setAll(long[] array, IntToLongFunction generator)</code><br> <code>static &lt;T&gt; void setAll(T[] array, IntFunction&lt;? extends T&gt; generator)</code></li> <li><code>parallelSetAll</code> — parallel version of <code>setAll</code></li> <li><code>parallelPrefix</code> — prefix operators, like prefix sum</li></ul></li> <li><code>Object</code> methods
<ul><li><code>static boolean equals(type[] a, type[] b)</code></li> <li><code>static int hashCode(Object[] a)</code></li> <li><code>static boolean deepEquals(Object[] a1, Object[] a2)</code></li> <li><code>static int deepHashCode(Object[] a)</code></li> <li><code>static String deepToString(Object[] a)</code></li> <li><code>compare</code> — since JDK 9</li></ul></li> <li>sort
<ul><li><code>static void sort(type[] a)</code><br> <code>static void sort(type[] a, int fromIndex, int toIndex)</code><br> <code>static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c)</code><br> <code>static &lt;T&gt; void sort(T[] a, int fromIndex, int toIndex, Comparator&lt;? super T&gt; c)</code> <ul><li><code>Object[]</code> actually needs to be <code>Comparable[]</code></li> <li><code>java.util.DualPivotQuickSort::sort</code> for primitive type arrays</li> <li><code>java.util.TimSort::sort</code> for <code>T[]</code></li></ul></li> <li><code>static void parallelSort(type[] a)</code><br> <code>static void parallelSort(type[] a, int fromIndex, int toIndex)</code> (no <code>Object[]</code>)<br> <code>static &lt;T extends Comparable&lt;? super T&gt;&gt; void parallelSort(T[] a, int fromIndex, int toIndex)</code><br> <code>static &lt;T&gt; void parallelSort(T[] a, Comparator&lt;? super T&gt; cmp)</code><br> <code>static &lt;T&gt; void parallelSort(T[] a, int fromIndex, int toIndex, Comparator&lt;? super T&gt; cmp)</code> <ul><li>granularity — <code>private static final int MIN_ARRAY_SORT_GRAN = 1 &lt;&lt; 13;</code></li> <li>sequential sort (as <code>Arrays::sort</code>) when<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> MIN_ARRAY_SORT_GRAN <span class="token operator">||</span> <span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token class-name">ForkJoinPool</span><span class="token punctuation">.</span><span class="token function">getCommonPoolParallelism</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div></li> <li>else parallel sort — uses threading (each thread gets a chunk of the list and sorts it in parallel. Later these sorted chunks are merged into a result)</li> <li><code>java.util.DualPivotQuickSort::sort</code> for primitive type arrays</li> <li><code>java.util.TimSort::sort</code> for <code>T[]</code></li></ul></li></ul></li></ul></li></ol> <h2 id="event-handling"><a href="#event-handling" class="header-anchor">#</a> Event Handling</h2> <ol><li><p><code>java.util.EventListener</code> — A tagging interface that all event listener interfaces must extend</p></li> <li><p><code>java.util.EventListenerProxy</code> — An abstract wrapper class for an EventListener class which associates a set of additional parameters with the listener</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">EventListenerProxy</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">EventListener</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">EventListener</span>
</code></pre></div></li> <li><p><code>java.util.EventObject</code> — The root class from which all event state objects shall be derived</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EventObject</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Serializable</span>
</code></pre></div></li> <li><p>MVC</p> <ul><li><code>java.util.Observable</code></li> <li><code>interface java.util.Observer</code></li></ul></li></ol> <h2 id="collections-and-maps"><a href="#collections-and-maps" class="header-anchor">#</a> Collections and Maps</h2> <ol><li><p>concurrent collections — see <a href="./javaConcurrency#Thread-Safe-Collections">Thread-Safe Collections</a>, and <a href="./javaConcurrency#Data-Exchange-Synchronizers"><code>SynchronousQueue</code></a></p></li> <li><p><code>Iterable</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>default void forEach(Consumer&lt;? super T&gt; action)</code></li> <li><code>Iterator&lt;T&gt; iterator()</code></li> <li><code>default Spliterator&lt;T&gt; spliterator()</code></li> <li>foreach loop — needs to implement <code>Iterable</code> <ul><li>behind the scenes — a loop with an iterator</li></ul></li></ul></li> <li><p><code>java.util.Iterator&lt;E&gt;</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>fail fast — multiple readers, or a single reader and writer, otherwise <code>ConcurrentModificationException</code> <ul><li>detection scheme — the count of modifications is keep in both the collection and the iterator</li> <li>exception — <code>LinkedList::set</code> is not counted</li></ul></li> <li><code>E next()</code> — possibly <code>NoSuchElementException</code></li> <li><code>boolean hasNext()</code></li> <li><code>void remove()</code> — remove the element last returned by <code>next()</code></li> <li><code>default void forEachRemaining(Consumer&lt;? super E&gt; action)</code></li> <li><code>Collections::emptyIterator</code></li></ul></li> <li><p><code>java.util.Spliterator</code> — both sequential and parallel data processing, the parallel analogue of an <code>Iterator</code></p> <ul><li>fail fast</li> <li>late-binding — binds to the source of elements at the point of first traversal, first split, or first query for estimated size, rather than at the time the <code>Spliterator</code> is created</li></ul></li> <li><p><code>java.util.Collection</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>add
<ul><li><code>boolean add(E e)</code> — <code>true</code> when success</li> <li><code>boolean addAll(Collection&lt;? extends E&gt; c)</code></li></ul></li> <li>test
<ul><li><code>boolean equals(Object o)</code></li> <li><code>boolean contains(Object o)</code></li> <li><code>boolean containsAll(Collection&lt;?&gt; c)</code></li> <li><code>boolean isEmpty()</code></li></ul></li> <li>modify
<ul><li><code>void clear()</code></li> <li><code>boolean removeIf(Predicate&lt;? super E&gt; filter)</code></li> <li><code>boolean removeAll(Collection&lt;?&gt; c)</code></li> <li><code>boolean remove(Object o)</code></li> <li><code>boolean retainAll(Collection&lt;?&gt; c)</code></li></ul></li> <li>conversion
<ul><li><code>&lt;T&gt; T[] toArray(T[] a)</code> — no new array created if <code>a</code> is of the correct size</li> <li><code>default Stream&lt;E&gt; stream()</code></li> <li><code>default Stream&lt;E&gt; parallelStream()</code></li></ul></li> <li>get collection information
<ul><li><code>int size()</code></li> <li><code>Iterator&lt;E&gt; iterator()</code></li> <li><code>default Spliterator&lt;E&gt; spliterator()</code></li></ul></li> <li><code>java.util.AbstractCollection</code> — a skeletal implementation of the <code>Collection</code> interface, to minimize the effort required to implement this interface<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>should have been replaced by default methods, but only new methods have default implementation</li> <li>extends the abstract class and simultaneously implement the interface — only make a difference to clarity and reflection</li></ul></li></ul></li> <li><p><code>java.util.Collections</code> — static helper</p> <ul><li><code>static &lt;T&gt; boolean addAll(Collection&lt;? super T&gt; c, T... elements)</code></li> <li><code>static boolean disjoint(Collection&lt;?&gt; c1, Collection&lt;?&gt; c2)</code> — <code>true</code> if the two specified collections have no elements in common</li> <li><code>static int frequency(Collection&lt;?&gt; c, Object o)</code></li> <li><code>static &lt;T extends Object &amp; Comparable&lt;? super T&gt;&gt; T max(Collection&lt;? extends T&gt; coll)</code><br> <code>static &lt;T&gt; T max(Collection&lt;? extends T&gt; coll, Comparator&lt;? super T&gt; comp)</code><br> <code>static &lt;T extends Object &amp; Comparable&lt;? super T&gt;&gt; T min(Collection&lt;? extends T&gt; coll)</code><br> <code>static &lt;T&gt; T min(Collection&lt;? extends T&gt; coll, Comparator&lt;? super T&gt; comp)</code></li> <li><code>static &lt;T&gt; Comparator&lt;T&gt; reverseOrder()</code><br> <code>static &lt;T&gt; Comparator&lt;T&gt; reverseOrder(Comparator&lt;T&gt; cmp)</code> <ul><li>called by <code>Comparator::reverseOrder</code> and <code>Comparator::reversed</code></li></ul></li> <li>list related — see <a href="#List">List</a></li> <li>views and wrappers — see <a href="#Views-and-Wrappers">Views and Wrappers</a> <ul><li><code>Collections::unmodifiableCollection</code></li> <li><code>Collections::synchronizedCollection</code></li> <li><code>Collections::checkedCollection</code></li></ul></li></ul></li></ol> <h3 id="list"><a href="#list" class="header-anchor">#</a> List</h3> <ol><li><p><code>interface java.util.RandomAccess</code> — marker interface used by <code>List</code> implementations to indicate that they support fast (generally constant time) random access</p></li> <li><p><code>java.util.List</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>java.util.AbstractList&lt;E&gt;</code> — This class provides a skeletal implementation of the <code>List</code> interface to minimize the effort required to implement this interface backed by a &quot;random access&quot; data store (such as an array)<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li>add — with indexed version
<ul><li><code>void add(int index, E element)</code></li> <li><code>boolean addAll(int index, Collection&lt;? extends E&gt; c)</code></li></ul></li> <li>element
<ul><li><code>E get(int index)</code></li> <li><code>int indexOf()</code></li> <li><code>int lastIndexOf(Object o)</code></li></ul></li> <li>list information
<ul><li><code>ListIterator&lt;E&gt; listIterator()</code></li> <li><code>ListIterator&lt;E&gt; listIterator(int index)</code></li> <li><code>default Spliterator&lt;E&gt; spliterator()</code></li> <li><code>List&lt;E&gt; subList(int fromIndex, int toIndex)</code> — a view</li></ul></li> <li>modify and converse
<ul><li><code>E set(int index, E element)</code></li> <li><code>E remove(int index)</code></li> <li><code>default void sort(Comparator&lt;? super E&gt; c)</code> — uses <code>Arrays::sort</code> after <code>toArray()</code></li></ul></li></ul></li> <li><p><code>java.util.ListIterator</code> — has <code>previous</code> in addition to <code>next</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>void add(E e)</code></li> <li><code>boolean hasPrevious()</code></li> <li><code>int nextIndex()</code></li> <li><code>E previous()</code></li> <li><code>int previousIndex()</code></li> <li><code>void set(E e)</code></li> <li><code>Collections::emptyListIterator</code></li></ul></li> <li><p><code>List</code> related methods in <code>Collections</code></p> <ul><li>find
<ul><li><code>static &lt;T&gt; int binarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key)</code> — return <code>(-(insertion point) - 1)</code> if no matching<br> <code>static &lt;T&gt; int binarySearch(List&lt;? extends T&gt; list, T key, Comparator&lt;? super T&gt; c)</code> <ul><li>whether <code>indexedBinarySearch</code> or <code>iteratorBinarySearch</code> — checks <code>RandomAccess</code> or <code>BINARYSEARCH_THRESHOLD</code> to determine</li></ul></li> <li><code>static int indexOfSubList(List&lt;?&gt; source, List&lt;?&gt; target)</code></li> <li><code>static int lastIndexOfSubList(List&lt;?&gt; source, List&lt;?&gt; target)</code></li></ul></li> <li>modify
<ul><li><code>static &lt;T&gt; void copy(List&lt;? super T&gt; dest, List&lt;? extends T&gt; src)</code></li> <li><code>static &lt;T&gt; void fill(List&lt;? super T&gt; list, T obj)</code></li> <li><code>static &lt;T&gt; boolean replaceAll(List&lt;T&gt; list, T oldVal, T newVal)</code></li> <li><code>static void reverse(List&lt;?&gt; list)</code></li> <li><code>static void rotate(List&lt;?&gt; list, int distance)</code></li> <li><code>static void shuffle(List&lt;?&gt; list)</code> — checks whether <code>RandomAccess</code> otherwise <code>toArray()</code><br> <code>static void shuffle(List&lt;?&gt; list, Random rnd)</code></li> <li><code>static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list)</code></li> <li><code>static &lt;T&gt; void sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c)</code> — uses <code>List::sort</code></li> <li><code>static void swap(List&lt;?&gt; list, int i, int j)</code></li></ul></li> <li>views
<ul><li><code>Arrays::asList</code></li> <li><code>nCopies</code></li> <li><code>singletonList</code></li> <li><code>emptyList</code></li> <li><code>unmodifiableList</code></li> <li><code>synchronizedList</code></li> <li><code>checkedList</code></li> <li><code>List::subList</code></li></ul></li></ul></li> <li><p><code>java.util.ArrayList</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li><code>private static final int DEFAULT_CAPACITY = 10</code></li> <li>constructors
<ul><li><code>ArrayList()</code> — constructs an empty list with an initial capacity of 10</li> <li><code>ArrayList(Collection&lt;? extends E&gt; c)</code></li> <li><code>ArrayList(int initialCapacity)</code></li> <li>anonymous <code>ArrayList</code> — double brace initialization, actually a inner subclass<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;Harry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;Tony&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>int[]</code> to <code>ArrayList&lt;Integer&gt;</code> without loop — for large arrays with sparse access patterns<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> is<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> is<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> is<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li>capacity
<ul><li><code>void ensureCapacity(int minCapacity)</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>void trimToSize()</code></li></ul></li></ul></li> <li><p><code>java.util.LinkedList</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractSequentialList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>use with <code>ListIterator</code></li> <li><code>LinkedList</code> vs <code>ArrayDeque</code> — see <code>ArrayDeque</code> below</li></ul></li></ol> <h3 id="queue"><a href="#queue" class="header-anchor">#</a> Queue</h3> <ol><li><p><code>java.util.Queue</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>IllegalStateException</code> or <code>NoSuchElementException</code> when failure
<ul><li><code>boolean add(E e)</code> — returning <code>true</code> upon success and throwing an <code>IllegalStateException</code> if no space is currently available</li> <li><code>E remove()</code></li> <li><code>E element()</code> — peek the head</li></ul></li> <li>return <code>null</code> when failure
<ul><li><code>boolean offer(E e)</code></li> <li><code>E poll()</code></li> <li><code>E peek()</code></li></ul></li> <li><code>java.util.AbstractQueue</code> — skeletal implementations of some <code>Queue</code> operations<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li> <li><p><code>java.util.Deque</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><table><thead><tr><th></th> <th>First Element (Head)</th> <th></th> <th>Last Element (Tail)</th> <th></th></tr></thead> <tbody><tr><td></td> <td>Throws exception</td> <td>return special value</td> <td>Throws exception</td> <td>return special value</td></tr> <tr><td>Insert</td> <td><code>addFirst(e)</code>, <code>push(e)</code></td> <td><code>offerFirst(e)</code></td> <td><code>addLast(e)</code>, <code>add(e)</code></td> <td><code>offerLast(e)</code>, <code>offer(e)</code></td></tr> <tr><td>Remove</td> <td><code>removeFirst()</code>, <code>remove()</code>, <code>pop()</code></td> <td><code>pollFirst()</code>, <code>poll()</code></td> <td><code>removeLast()</code></td> <td><code>pollLast()</code></td></tr> <tr><td>Examine</td> <td><code>getFirst()</code>, <code>element()</code></td> <td><code>peekFirst()</code>, <code>peek()</code></td> <td><code>getLast()</code></td> <td><code>peekLast()</code></td></tr></tbody></table> <ul><li>usage — double ended queue, also should be used in preference to the legacy <code>Stack</code> class</li></ul></li> <li><p><code>LinkedList</code></p></li> <li><p><code>java.util.ArrayDeque</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>underlying implementation — circular array, no <code>null</code> elements</li> <li>not implementing <code>List</code> and extends <code>AbstractCollection</code> but not <code>AbstractQueue</code> — <a href="https://bugs.openjdk.java.net/browse/JDK-8143850" target="_blank" rel="noopener noreferrer">retrofit <code>ArrayDeque</code> to implement <code>List</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>no <code>null</code> support — <code>NullPointerException</code> for <code>null</code> elements</li> <li>capacity
<ul><li>default initial capacity — 16</li> <li>capacity grow policy — double capacity if small; else grow by 50%<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> jump <span class="token operator">=</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&lt;</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><code>ArrayDeque</code> vs <code>LinkedList</code> — <code>LinkedList</code>s iterate with more CPU cache miss, have the overhead of node allocations, and consume more memory, but supports <code>List</code>, <code>null</code> elements, and better remove-while-iterate</li></ul></li> <li><p><code>java.util.PriorityQueue</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li><code>private static final int DEFAULT_INITIAL_CAPACITY = 11</code></li> <li>capacity grow policy — as <code>ArrayDeque</code></li></ul></li> <li><p>views</p> <ul><li>as stack — <code>Collections::asLifoQueue</code></li></ul></li></ol> <h3 id="set"><a href="#set" class="header-anchor">#</a> Set</h3> <ol><li><p><code>java.util.Set</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>java.util.AbstractSet&lt;E&gt;</code></li></ul></li> <li><p><code>java.util.NavigableSet</code> — adds methods for locating and backward traversal</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">NavigableSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>locating
<ul><li><code>E lower(E e)</code></li> <li><code>E pollFirst()</code></li> <li><code>E pollLast()</code></li> <li><code>E higher(E e)</code></li> <li><code>E ceiling(E e)</code></li> <li><code>E floor(E e)</code></li></ul></li> <li>backward traversal
<ul><li><code>Iterator&lt;E&gt; descendingIterator()</code></li> <li><code>NavigableSet&lt;E&gt; descendingSet()</code></li></ul></li> <li><code>java.util.SortedSet</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>Comparator&lt;? super E&gt; comparator()</code></li> <li><code>E first()</code></li> <li><code>E last()</code></li> <li><code>default Spliterator&lt;E&gt; spliterator()</code></li> <li><code>SortedSet&lt;E&gt; headSet(E toElement)</code></li> <li><code>SortedSet&lt;E&gt; subSet(E fromElement, E toElement)</code></li> <li><code>SortedSet&lt;E&gt; tailSet(E fromElement)</code></li></ul></li></ul></li> <li><p><code>java.util.HashSet</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>underlying data structure — <code>private transient HashMap&lt;E,Object&gt; map</code></li> <li>dummy value for the value of <code>Map.Entry</code> — <code>private static final Object PRESENT = new Object()</code></li> <li>iteration performance — proportional to capability</li></ul></li> <li><p><code>java.util.TreeSet</code> — red-black tree</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">NavigableSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>underlying data structure — <code>private transient NavigableMap&lt;E,Object&gt; m</code>, initialized with <code>TreeMap</code></li> <li>dummy value — see <code>HashSet</code></li></ul></li> <li><p><code>java.util.EnumSet</code> — for use with enum types</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">EnumSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span> <span class="token keyword">extends</span> <span class="token class-name">Enum</span><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>underlying data — represented internally as bit vectors</li> <li>no <code>null</code> support — <code>NullPointerException</code> for <code>null</code> elements</li> <li>usage — a high-quality, typesafe alternative to traditional int-based &quot;bit flags&quot;</li> <li>underlying implementation — <code>RegularEnumSet</code> with a <code>long</code>, <code>JumboEnumSet</code> with a <code>long[]</code>, non-public in <code>java.util</code></li> <li>helper class — the abstract class itself acts as a static helper</li></ul></li> <li><p><code>java.util.LinkedHashSet</code> — ordered <code>HashSet</code> with underlying linked list, have no control over <code>removeEldestEntry</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div></li> <li><p>views</p> <ul><li><code>Map::keySet</code> etc.</li> <li>set from map — <code>Collections::newSetFromMap</code> (for maps without corresponding sets, like <code>WeakHashMap</code> but not <code>HashMap</code>)</li> <li><code>Collections::singleton</code></li> <li>empty views — <code>Collections::emptySet</code>, <code>Collections::emptyNavigableSet</code>, <code>Collections::emptySortedSet</code></li> <li>unmodifiable views — <code>Collections::unmodifiableSet</code>, <code>Collections::unmodifiableNavigableSet</code>, <code>Collections::unmodifiableSortedSet</code></li> <li>synchronized views</li> <li>checked views</li> <li>subset methods</li></ul></li> <li><p><code>BitSet</code> — see <a href="#Legacy-Collections">Legacy Collections</a></p></li></ol> <h3 id="maps"><a href="#maps" class="header-anchor">#</a> Maps</h3> <ol><li><p><code>java.util.Map</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>modify
<ul><li><code>void clear()</code></li> <li>return old value if not <code>void</code> <ul><li><code>V remove(Object key)</code> — returns the previous value or <code>null</code></li> <li><code>default boolean remove(Object key, Object value)</code> — remove if <code>get(key)</code> equals <code>value</code></li> <li><code>V put(K key, V value)</code> — returns as <code>remove</code> method</li> <li><code>default V putIfAbsent(K key, V value)</code> — <code>null</code> value is also absent</li> <li><code>void putAll(Map&lt;? extends K,? extends V&gt; m)</code></li> <li><code>default V replace(K key, V value)</code></li> <li><code>default boolean replace(K key, V oldValue, V newValue)</code></li> <li><code>default void replaceAll(BiFunction&lt;? super K,? super V,? extends V&gt; function)</code></li></ul></li> <li>return new value if not <code>void</code> <ul><li><code>default V compute(K key, BiFunction&lt;? super K,? super V,? extends V&gt; remappingFunction)</code></li> <li><code>default V computeIfAbsent(K key, Function&lt;? super K,? extends V&gt; mappingFunction)</code> — <code>null</code> value is also absent</li> <li><code>default V computeIfPresent(K key, BiFunction&lt;? super K,? super V,? extends V&gt; remappingFunction)</code></li> <li><code>default V merge(K key, V value, BiFunction&lt;? super V,? super V,? extends V&gt; remappingFunction)</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">V</span> newValue <span class="token operator">=</span> <span class="token punctuation">(</span>oldValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> value <span class="token operator">:</span> remappingFunction<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// example</span>
counts<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> counts<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
counts<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul></li> <li>test
<ul><li><code>boolean isEmpty()</code></li> <li><code>boolean containsKey(Object key)</code></li> <li><code>boolean containsValue(Object value)</code></li> <li><code>boolean equals(Object o)</code></li></ul></li> <li>loop or views
<ul><li><code>default void forEach(BiConsumer&lt;? super K,? super V&gt; action)</code></li> <li><code>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()</code></li> <li><code>Set&lt;K&gt; keySet()</code></li> <li><code>Collection&lt;V&gt; values()</code></li></ul></li> <li>get
<ul><li><code>V get(Object key)</code> — <code>null</code> if absent, can be confused with <code>null</code> values</li> <li><code>default V getOrDefault(Object key, V defaultValue)</code></li></ul></li> <li><code>int size()</code></li> <li><code>interface Entry&lt;K, V&gt;</code> — key-value pair</li> <li><code>java.util.AbstractMap&lt;K,V&gt;</code> — This class provides a skeletal implementation of the <code>Map</code> interface, to minimize the effort required to implement this interface<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>should have been replaced by default methods, but only new methods have default implementation</li> <li>extends the abstract class and simultaneously implement the interface — only make a difference to clarity and reflection</li> <li><code>AbstractMap.SimpleEntry</code>, <code>AbstractMap.SimpleImmutableEntry</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AbstractMap</span><span class="token punctuation">.</span><span class="token class-name">SimpleEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div></li></ul></li></ul></li> <li><p><code>java.util.NavigableMap</code> — refer to <code>NavigableSet</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><code>java.util.HashMap</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>schema — hash code modulo the number of buckets, or red-black tree if a hash collision</li> <li>constants
<ul><li><code>static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4</code> — initial capacity will be converted to the power of 2</li> <li><code>static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30</code></li> <li><code>static final float DEFAULT_LOAD_FACTOR = 0.75f</code></li> <li><code>static final int TREEIFY_THRESHOLD = 8</code></li> <li><code>static final int UNTREEIFY_THRESHOLD = 6</code></li> <li><code>static final int MIN_TREEIFY_CAPACITY = 64</code> — smallest capability to permit treeify</li></ul></li> <li><code>static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt;</code> — permits <code>null</code> values and keys</li> <li>iteration performance — proportional to capability</li></ul></li> <li><p><code>java.util.TreeMap</code> — red-black tree</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>do not support the <code>Entry::setValue</code> method — <code>Map.Entry</code> returned by methods in this class and its views represent snapshots of mappings at the time they were produced</li></ul></li> <li><p><code>java.util.EnumMap</code> — for use with enum types</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EnumMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span> <span class="token keyword">extends</span> <span class="token class-name">Enum</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span>
</code></pre></div><ul><li>underlying data — represented internally as arrays, ordinals as indices</li> <li>weakly consistent iterators — never throw <code>ConcurrentModificationException</code>, may or may not show the effects of any modifications to the map that occur while the iteration is in progress</li> <li><code>null</code> support — no <code>null</code> keys but values</li></ul></li> <li><p><code>java.util.LinkedHashMap</code> — ordered <code>HashMap</code> with underlying doubly-linked list</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)</code> <ul><li><code>final boolean accessOrder</code> — <code>true</code> for access order, <code>false</code> for insertion order (default)</li></ul></li> <li>insertion order — the order is not affected if a key is re-inserted, even the value changes</li> <li>access order — get methods and modify methods make corresponding entries place at the last position: <code>put</code>, <code>putIfAbsent</code>, <code>get</code>, <code>getOrDefault</code>, <code>compute</code>, <code>computeIfAbsent</code>, <code>computeIfPresent</code>, or <code>merge</code> <ul><li><code>Map::replace</code> — results an access only when the value is replaced</li> <li>operations on views — no effect on order</li></ul></li> <li><code>protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest)</code> — invoked by <code>put</code> and <code>putAll</code> after inserting a new entry into the map, returns <code>true</code> if this map should remove its eldest entry</li></ul></li> <li><p><code>java.util.WeakHashMap</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeakHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>underlying implementation — <code>Entry</code> extends <code>WeakReference</code> and registered to a <code>ReferenceQueue</code> upon construction</li> <li>not count for gc — the presence of a mapping for a given key will not prevent the key from being discarded by the garbage collector
<ul><li><code>private final ReferenceQueue&lt;Object&gt; queue</code> -- <code>WeakReference</code> keys are registered with a <code>queue</code> when created; when the referent of <code>WeakReference</code> is reclaimed by GC, <code>WeakReference::enqueue</code> is called at the same time or at some later time</li> <li><code>expungeStaleEntries()</code> -- private method that scan <code>WeakReference</code> keys in <code>queue</code> and set corresponding values to <code>null</code>; called every time in access methods, <code>size()</code>, and internal resize method</li></ul></li> <li><code>null</code> support — both keys and values</li> <li>values with strong reference to the keys — prevent keys from gc, can be alleviated by wrapping values with <code>new WeakReference(value)</code></li></ul></li> <li><p><code>java.util.IdentityHashMap</code> — <code>HashMap</code> with keys (and values) that are compared by <code>==</code>, not <code>equals</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IdentityHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span>
</code></pre></div><ul><li>constant-time performance for the basic operations (<code>get</code> and <code>put</code>) — assuming the system identity hash function (<code>System.identityHashCode(Object)</code>) disperses elements properly among the buckets</li> <li>rehashing may be fairly expensive — initialize with large expected capacity</li></ul></li> <li><p>views</p> <ul><li><code>Collections::singletonMap</code></li> <li>empty views — <code>Collections::emptyMap</code>, <code>Collections::emptyNavigableMap</code>, <code>Collections::emptySortedMap</code></li> <li>unmodifiable views — <code>Collections::unmodifiableMap</code>, <code>Collections::unmodifiableNavigableMap</code>, <code>Collections::unmodifiableSortedMap</code></li> <li>synchronized views</li> <li>checked views</li> <li>sub map methods</li></ul></li></ol> <h3 id="views-and-wrappers"><a href="#views-and-wrappers" class="header-anchor">#</a> Views and Wrappers</h3> <ol><li><p><code>Map::keySet</code> etc.</p></li> <li><p><code>Arrays::asList</code></p></li> <li><p><code>Collections</code></p> <ul><li>one for n wrapper — <code>static &lt;T&gt; List&lt;T&gt; nCopies(int n, T o)</code> <ul><li>returns an immutable list consisting of n copies of the specified object, <code>o</code> is stored only once</li></ul></li> <li>stack view — <code>static &lt;T&gt; Queue&lt;T&gt; asLifoQueue(Deque&lt;T&gt; deque)</code></li> <li>set view from map, see <a href="#Set">Set</a> — <code>static &lt;E&gt; Set&lt;E&gt; newSetFromMap(Map&lt;E,Boolean&gt; map)</code></li> <li>wrappers containing only one element — immutable, instance of inner class in <code>Collections</code>, containing only one element
<ul><li><code>static &lt;T&gt; Set&lt;T&gt; singleton(T o)</code></li> <li><code>static &lt;T&gt; List&lt;T&gt; singletonList(T o)</code></li> <li><code>static &lt;K,V&gt; Map&lt;K,V&gt; singletonMap(K key, V value)</code></li></ul></li> <li>empty wrapper — immutable, instance of inner class in <code>Collections</code>, singleton
<ul><li><code>static &lt;T&gt; Iterator&lt;T&gt; emptyIterator()</code></li> <li><code>static &lt;T&gt; List&lt;T&gt; emptyList()</code></li> <li><code>static &lt;T&gt; ListIterator&lt;T&gt; emptyListIterator()</code></li> <li><code>static &lt;K,V&gt; Map&lt;K,V&gt; emptyMap()</code></li> <li><code>static &lt;K,V&gt; NavigableMap&lt;K,V&gt; emptyNavigableMap()</code></li> <li><code>static &lt;E&gt; NavigableSet&lt;E&gt; emptyNavigableSet()</code></li> <li><code>static &lt;T&gt; Set&lt;T&gt; emptySet()</code></li> <li><code>static &lt;K,V&gt; SortedMap&lt;K,V&gt; emptySortedMap()</code></li> <li><code>static &lt;E&gt; SortedSet&lt;E&gt; emptySortedSet()</code></li></ul></li> <li>unmodifiable view — <code>UnsupportedOperationException</code> when try modifying, instance of inner class in <code>Collections</code> <ul><li><code>static &lt;T&gt; Collection&lt;T&gt; unmodifiableCollection(Collection&lt;? extends T&gt; c)</code></li> <li><code>static &lt;T&gt; List&lt;T&gt; unmodifiableList(List&lt;? extends T&gt; list)</code></li> <li><code>static &lt;K,V&gt; Map&lt;K,V&gt; unmodifiableMap(Map&lt;? extends K,? extends V&gt; m)</code></li> <li><code>static &lt;K,V&gt; NavigableMap&lt;K,V&gt; unmodifiableNavigableMap(NavigableMap&lt;K,? extends V&gt; m)</code></li> <li><code>static &lt;T&gt; NavigableSet&lt;T&gt; unmodifiableNavigableSet(NavigableSet&lt;T&gt; s)</code></li> <li><code>static &lt;T&gt; Set&lt;T&gt; unmodifiableSet(Set&lt;? extends T&gt; s)</code></li> <li><code>static &lt;K,V&gt; SortedMap&lt;K,V&gt; unmodifiableSortedMap(SortedMap&lt;K,? extends V&gt; m)</code></li> <li><code>static &lt;T&gt; SortedSet&lt;T&gt; unmodifiableSortedSet(SortedSet&lt;T&gt; s)</code></li></ul></li> <li>synchronized view — synchronized with mutex, instance of inner class in <code>Collections</code> <ul><li><code>static &lt;T&gt; Collection&lt;T&gt; synchronizedCollection(Collection&lt;T&gt; c)</code></li> <li><code>static &lt;T&gt; List&lt;T&gt; synchronizedList(List&lt;T&gt; list)</code></li> <li><code>static &lt;K,V&gt; Map&lt;K,V&gt; synchronizedMap(Map&lt;K,V&gt; m)</code></li> <li><code>static &lt;K,V&gt; NavigableMap&lt;K,V&gt; synchronizedNavigableMap(NavigableMap&lt;K,V&gt; m)</code></li> <li><code>static &lt;T&gt; NavigableSet&lt;T&gt; synchronizedNavigableSet(NavigableSet&lt;T&gt; s)</code></li> <li><code>static &lt;T&gt; Set&lt;T&gt; synchronizedSet(Set&lt;T&gt; s)</code></li> <li><code>static &lt;K,V&gt; SortedMap&lt;K,V&gt; synchronizedSortedMap(SortedMap&lt;K,V&gt; m)</code></li> <li><code>static &lt;T&gt; SortedSet&lt;T&gt; synchronizedSortedSet(SortedSet&lt;T&gt; s)</code></li></ul></li> <li>checked view — throw <code>ClassCastException</code> immediately when heap pollution (detects with <code>Class::isInstance</code>), instance of inner class in <code>Collections</code>, intended as debugging support<div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ArrayList</span> rawList <span class="token operator">=</span> strings<span class="token punctuation">;</span> <span class="token comment">// warning only, not an error, for compatibility with legacy code</span>
rawList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// now strings contains a Date object!</span>
</code></pre></div><ul><li><code>static &lt;E&gt; Collection&lt;E&gt; checkedCollection(Collection&lt;E&gt; c, Class&lt;E&gt; type)</code></li> <li><code>static &lt;E&gt; List&lt;E&gt; checkedList(List&lt;E&gt; list, Class&lt;E&gt; type)</code></li> <li><code>static &lt;K,V&gt; Map&lt;K,V&gt; checkedMap(Map&lt;K,V&gt; m, Class&lt;K&gt; keyType, Class&lt;V&gt; valueType)</code></li> <li><code>static &lt;K,V&gt; NavigableMap&lt;K,V&gt; checkedNavigableMap(NavigableMap&lt;K,V&gt; m, Class&lt;K&gt; keyType, Class&lt;V&gt; valueType)</code></li> <li><code>static &lt;E&gt; NavigableSet&lt;E&gt; checkedNavigableSet(NavigableSet&lt;E&gt; s, Class&lt;E&gt; type)</code></li> <li><code>static &lt;E&gt; Queue&lt;E&gt; checkedQueue(Queue&lt;E&gt; queue, Class&lt;E&gt; type)</code></li> <li><code>static &lt;E&gt; Set&lt;E&gt; checkedSet(Set&lt;E&gt; s, Class&lt;E&gt; type)</code></li> <li><code>static &lt;K,V&gt; SortedMap&lt;K,V&gt; checkedSortedMap(SortedMap&lt;K,V&gt; m, Class&lt;K&gt; keyType, Class&lt;V&gt; valueType)</code></li> <li><code>static &lt;E&gt; SortedSet&lt;E&gt; checkedSortedSet(SortedSet&lt;E&gt; s, Class&lt;E&gt; type)</code></li></ul></li> <li><code>equals</code> and <code>hashCode</code> <ul><li>unmodifiable, synchronized and checked views — returns a collection whose equals method does not invoke the <code>equals</code> method of the underlying collection but <code>Object::equals</code>, same for <code>hashCode</code></li> <li>exception — <code>unmodifiableSet</code> and <code>unmodifiableList</code> methods use the <code>equals</code> and <code>hashCode</code> methods of the underlying collections</li></ul></li></ul></li> <li><p>sub-ranges — views that changes reflect to the original</p> <ul><li><code>List::subList</code></li> <li><code>SortedMap::subMap</code>, <code>SortedMap::headMap</code>, <code>SortedMap::tailMap</code> <ul><li><code>NavigableMap</code> — overrides and has new definitions with inclusion option</li> <li>also for <code>SortedSet</code> and <code>NavigableSet</code></li></ul></li></ul></li></ol> <h3 id="legacy-collections"><a href="#legacy-collections" class="header-anchor">#</a> Legacy Collections</h3> <ol><li><p><code>java.util.Hashtable</code> — synchronized <code>HashMap</code>, use <code>ConcurrentHashMap</code> instead</p></li> <li><p><code>java.util.Properties</code> — for property files</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Properties</span> <span class="token keyword">extends</span> <span class="token class-name">Hashtable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>String</code> keys and values</li> <li>property file syntax — <a href="https://en.wikipedia.org/wiki/.properties" target="_blank" rel="noopener noreferrer">.properties - Wikipedia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>can be saved to a stream or loaded from a stream
<ul><li><code>void store(OutputStream out, String comments)</code></li> <li>more</li></ul></li> <li>can use a secondary <code>Properties</code> for default
<ul><li><code>Properties()</code></li> <li><code>Properties(Properties defaults)</code></li> <li><code>String getProperty(String key)</code></li> <li><code>String getProperty(String key, String defaultValue)</code> — <code>defaultValue</code> only when no secondary <code>Properties</code> and <code>key</code> absent</li></ul></li> <li>system properties — see <code>java</code> in <a href="/notes-of-tan/backend/java/javaBasics.html#CLI">CLI</a>, find accessible names in <code>$JAVA_HOME/conf/security/java.policy</code><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># jshell&gt; System.getProperties().forEach((k, v) -&gt; System.out.printf(&quot;%s=%s\n&quot;, k, v))</span>
$ java -XshowSettings:properties --version
Property settings: <span class="token comment"># only a portion is available on all platforms</span>
    awt.toolkit <span class="token operator">=</span> sun.awt.windows.WToolkit
    file.encoding <span class="token operator">=</span> GBK <span class="token comment"># not an official property, use Charset.defaultCharset() instead</span>
    file.separator <span class="token operator">=</span> <span class="token punctuation">\</span>
    java.awt.graphicsenv <span class="token operator">=</span> sun.awt.Win32GraphicsEnvironment
    java.class.path <span class="token operator">=</span>
    java.class.version <span class="token operator">=</span> <span class="token number">56.0</span>
    java.home <span class="token operator">=</span> C:<span class="token punctuation">\</span>Program Files<span class="token punctuation">\</span>Java<span class="token punctuation">\</span>jdk-12.0.2
    java.io.tmpdir <span class="token operator">=</span> C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>ADMINI~1<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>
    java.library.path <span class="token operator">=</span> <span class="token comment"># JAVA_PATH;C:\Windows\Sun\Java\bin;. for Windows</span>
    java.runtime.name <span class="token operator">=</span> OpenJDK Runtime Environment
    java.runtime.version <span class="token operator">=</span> <span class="token number">12.0</span>.2+10
    java.specification.name <span class="token operator">=</span> Java Platform API Specification
    java.specification.vendor <span class="token operator">=</span> Oracle Corporation
    java.specification.version <span class="token operator">=</span> <span class="token number">12</span>
    java.vendor <span class="token operator">=</span> Oracle Corporation
    java.vendor.url <span class="token operator">=</span> https://java.oracle.com/
    java.vendor.url.bug <span class="token operator">=</span> https://bugreport.java.com/bugreport/
    java.version <span class="token operator">=</span> <span class="token number">12.0</span>.2
    java.version.date <span class="token operator">=</span> <span class="token number">2019</span>-07-16
    java.vm.compressedOopsMode <span class="token operator">=</span> Zero based
    java.vm.info <span class="token operator">=</span> mixed mode, sharing
    java.vm.name <span class="token operator">=</span> OpenJDK <span class="token number">64</span>-Bit Server VM
    java.vm.specification.name <span class="token operator">=</span> Java Virtual Machine Specification
    java.vm.specification.vendor <span class="token operator">=</span> Oracle Corporation
    java.vm.specification.version <span class="token operator">=</span> <span class="token number">12</span>
    java.vm.vendor <span class="token operator">=</span> Oracle Corporation
    java.vm.version <span class="token operator">=</span> <span class="token number">12.0</span>.2+10
    jdk.debug <span class="token operator">=</span> release
    line.separator <span class="token operator">=</span> <span class="token punctuation">\</span>r<span class="token punctuation">\</span>n
    os.arch <span class="token operator">=</span> amd64
    os.name <span class="token operator">=</span> Windows <span class="token number">7</span>
    os.version <span class="token operator">=</span> <span class="token number">6.1</span>
    path.separator <span class="token operator">=</span> <span class="token punctuation">;</span>
    sun.arch.data.model <span class="token operator">=</span> <span class="token number">64</span>
    sun.boot.library.path <span class="token operator">=</span> C:<span class="token punctuation">\</span>Program Files<span class="token punctuation">\</span>Java<span class="token punctuation">\</span>jdk-12.0.2<span class="token punctuation">\</span>bin
    sun.cpu.endian <span class="token operator">=</span> little
    sun.cpu.isalist <span class="token operator">=</span> amd64
    sun.desktop <span class="token operator">=</span> windows
    sun.io.unicode.encoding <span class="token operator">=</span> UnicodeLittle
    sun.java.launcher <span class="token operator">=</span> SUN_STANDARD
    sun.jnu.encoding <span class="token operator">=</span> GBK
    sun.management.compiler <span class="token operator">=</span> HotSpot <span class="token number">64</span>-Bit Tiered Compilers
    sun.os.patch.level <span class="token operator">=</span> Service Pack <span class="token number">1</span>
    sun.stderr.encoding <span class="token operator">=</span> ms936
    sun.stdout.encoding <span class="token operator">=</span> ms936
    user.country <span class="token operator">=</span> CN
    user.dir <span class="token operator">=</span> <span class="token comment"># pwd</span>
    user.home <span class="token operator">=</span> <span class="token comment"># ~</span>
    user.language <span class="token operator">=</span> en
    user.name <span class="token operator">=</span> Administrator
    user.script <span class="token operator">=</span>
    user.variant <span class="token operator">=</span>
</code></pre></div></li></ul></li> <li><p><code>java.util.Enumeration</code> — legacy <code>Iterator</code></p> <ul><li>get <code>Enumeration</code> — use <code>Collections::enumeration</code>, <code>Collections::emptyEnumeration</code> to work with legacy code</li></ul></li> <li><p><code>java.util.Vector</code> — legacy synchronized <code>ArrayList</code></p></li> <li><p><code>java.util.Stack</code> — legacy</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><code>java.util.BitSet</code> — bit vector, no perfect alternative, still in use</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BitSet</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>no boundary check — some methods (such as <code>size()</code>) may overflow</li> <li>creation
<ul><li>constructors</li> <li><code>valueOf</code></li> <li><code>clone</code></li> <li><code>BitSet get(int fromIndex, int toIndex)</code></li></ul></li></ul></li></ol> <h2 id="preferences"><a href="#preferences" class="header-anchor">#</a> Preferences</h2> <ol><li><p>preferences — in <code>java.util.prefs</code></p> <ul><li>disadvantages of property files
<ul><li>no uniform location</li> <li>no standard naming convention, increasing the likelihood of name clashes</li></ul></li> <li>location of preferences — registry in Windows, file system for Linux, implementation hidden from user</li> <li>structure — tree structure, recommended to make the configuration node paths match the package names</li> <li>multiple users — <code>Preferences.userRoot()</code>, <code>Preferences.systemRoot()</code></li></ul></li> <li><p><code>java.util.prefs.Preferences</code> — <code>Map</code> like</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Preferences</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li>move around nodes
<ul><li><code>static Preferences userRoot()</code></li> <li><code>static Preferences userNodeForPackage(Class&lt;?&gt; c)</code></li> <li><code>static Preferences systemRoot()</code></li> <li><code>static Preferences systemNodeForPackage(Class&lt;?&gt; c)</code></li> <li><code>abstract Preferences node(String pathName)</code></li></ul></li> <li>get value from key
<ul><li><code>abstract boolean getBoolean(String key, boolean def)</code></li> <li><code>abstract byte[] getByteArray(String key, byte[] def)</code></li> <li><code>abstract double getDouble(String key, double def)</code></li> <li><code>abstract float getFloat(String key, float def)</code></li> <li><code>abstract int getInt(String key, int def)</code></li> <li><code>abstract long getLong(String key, long def)</code></li></ul></li> <li>put key-value pairs</li> <li>export and import</li> <li>more</li></ul></li></ol> <h2 id="stream"><a href="#stream" class="header-anchor">#</a> Stream</h2> <ol><li><p>stream</p> <ul><li>characteristics
<ul><li>no store — elements stored in an underlying collection or generated on demand, should not mutate upon terminal operation</li> <li>does not mutate source — new stream on every call</li> <li>lazy</li> <li>one-time — may throw <code>IllegalStateException</code> if it detects that the stream is being reused</li> <li>sequential or parallel — in parallel mode when the terminal method executes, all intermediate stream operations will be parallelized, using <code>ForkJoinPool</code></li> <li>ordered or not — streams that arise from ordered collections (arrays and lists), from ranges, generators, and iterators, or from calling <code>Stream::sorted</code> are ordered
<ul><li>order and parallelism — ordering does not preclude efficient parallelism, but some operations can be more effectively parallelized without requiring order</li></ul></li></ul></li> <li>stream creation
<ul><li>from collections and <code>Arrays</code> — <code>Collection::stream</code>, <code>Collection::parallelStream</code>, <code>Arrays::stream</code> <ul><li>under the hood — <code>StreamSupport::stream</code>, which uses <code>Spliterator</code></li></ul></li> <li>static methods in <code>Stream</code></li> <li><code>Pattern::splitAsStream</code></li> <li><code>Files::lines</code>, <code>BufferedReader::lines</code></li> <li><code>Stream.Builder</code></li> <li><code>Random::ints</code>, <code>Random::doubles</code>, <code>Random::longs</code> for primitive variants</li> <li><code>CharSequence::codepoints</code>, <code>CharSequence::chars</code></li></ul></li></ul></li> <li><p><code>java.util.stream.BaseStream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BaseStream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">S</span> <span class="token keyword">extends</span> <span class="token class-name">BaseStream</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">S</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">AutoCloseable</span>
</code></pre></div><ul><li><code>void close()</code></li> <li><code>boolean isParallel()</code></li> <li><code>Iterator &lt;T&gt; iterator()</code></li> <li><code>Spliterator &lt;T&gt; spliterator()</code></li> <li><code>S onClose(Runnable closeHandler)</code></li> <li><code>S parallel()</code></li> <li><code>S sequential()</code></li> <li><code>S unordered()</code></li></ul></li> <li><p><code>java.util.stream.StreamSupport</code> — for library writers presenting stream views of data structures</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">StreamSupport</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div></li> <li><p><code>java.util.stream.IntStream</code>, <code>java.util.stream.LongStream</code>, <code>java.util.stream.DoubleStream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IntStream</span>
<span class="token keyword">extends</span> <span class="token class-name">BaseStream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">IntStream</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>methods like those in <code>Stream</code></li> <li>creation — partial <code>range()</code> in Python
<ul><li><code>static IntStream range(int startInclusive, int endExclusive)</code></li> <li><code>static IntStream rangeClosed(int startInclusive, int endInclusive)</code></li> <li><code>static LongStream range(long startInclusive, long endExclusive)</code></li> <li><code>static LongStream rangeClosed(long startInclusive, long endInclusive)</code></li></ul></li> <li>transformation
<ul><li><code>DoubleStream asDoubleStream()</code><br> <code>LongStream asLongStream()</code></li> <li><code>Stream&lt;Integer&gt; boxed()</code><br> <code>Stream&lt;Double&gt; boxed()</code><br> <code>Stream&lt;Long&gt; boxed()</code></li> <li><code>LongSummaryStatistics summaryStatistics()</code><br> <code>IntSummaryStatistics summaryStatistics()</code><br> <code>DoubleSummaryStatistics summaryStatistics()</code></li></ul></li></ul></li> <li><p><code>java.util.stream.Stream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">BaseStream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">Stream</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>creation
<ul><li><code>static &lt;T&gt; Stream&lt;T&gt; of(T... values)</code><br> <code>static &lt;T&gt; Stream&lt;T&gt; of(T t)</code></li> <li><code>static &lt;T&gt; Stream&lt;T&gt; empty()</code></li> <li><code>static &lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</code> — Returns an infinite sequential unordered stream where each element is generated by the provided Supplier.</li> <li><code>static &lt;T&gt; Stream&lt;T&gt; iterate(T seed, UnaryOperator&lt;T&gt; f)</code> — Returns an infinite sequential ordered Stream produced by iterative application of a function <code>f</code> to an initial element seed, producing a Stream consisting of seed, <code>f(seed)</code>, <code>f(f(seed))</code>, etc.</li> <li><code>static &lt;T&gt; Stream&lt;T&gt; concat(Stream&lt;? extends T&gt; a, Stream&lt;? extends T&gt; b)</code></li> <li><code>static &lt;T&gt; Stream.Builder&lt;T&gt; builder()</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">interface</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token class-name">Builder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>void accept(T t)</code><br> <code>default Stream.Builder&lt;T&gt; add(T t)</code></li> <li><code>Stream&lt;T&gt; build()</code></li></ul></li></ul></li> <li>transformation
<ul><li><code>BaseStream</code> methods</li> <li><code>Stream&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate)</code></li> <li><code>&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper)</code><br> <code>DoubleStream mapToDouble(ToDoubleFunction&lt;? super T&gt; mapper)</code><br> <code>IntStream mapToInt(ToIntFunction&lt;? super T&gt; mapper)</code><br> <code>LongStream mapToLong(ToLongFunction&lt;? super T&gt; mapper)</code></li> <li><code>&lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T,? extends Stream&lt;? extends R&gt;&gt; mapper)</code><br> <code>DoubleStream flatMapToDouble(Function&lt;? super T,? extends DoubleStream&gt; mapper)</code><br> <code>IntStream flatMapToInt(Function&lt;? super T,? extends IntStream&gt; mapper)</code><br> <code>LongStream flatMapToLong(Function&lt;? super T,? extends LongStream&gt; mapper)</code></li></ul></li> <li>query — order matters
<ul><li><code>Stream&lt;T&gt; limit(long maxSize)</code></li> <li><code>Stream&lt;T&gt; skip(long n)</code></li> <li><code>Stream&lt;T&gt; distinct()</code> — uses <code>Object::equals</code>, the first occurrence when ordered</li> <li><code>Stream&lt;T&gt; sorted()</code><br> <code>Stream&lt;T&gt; sorted(Comparator&lt;? super T&gt; comparator)</code></li></ul></li> <li>reduction (terminal operation)
<ul><li><code>Optional&lt;T&gt; max(Comparator&lt;? super T&gt; comparator)</code></li> <li><code>Optional&lt;T&gt; min(Comparator&lt;? super T&gt; comparator)</code></li> <li><code>long count()</code></li> <li><code>Optional&lt;T&gt; findAny()</code> — effective when parallel</li> <li><code>Optional&lt;T&gt; findFirst()</code></li> <li><code>boolean allMatch(Predicate&lt;? super T&gt; predicate)</code></li> <li><code>boolean anyMatch(Predicate&lt;? super T&gt; predicate)</code></li> <li><code>boolean noneMatch(Predicate&lt;? super T&gt; predicate)</code></li> <li><code>T reduce(T identity, BinaryOperator&lt;T&gt; accumulator)</code></li> <li><code>&lt;U&gt; U reduce(U identity, BiFunction&lt;U,? super T,U&gt; accumulator, BinaryOperator&lt;U&gt; combiner)</code></li> <li><code>Collectors::reducing</code></li></ul></li> <li>result (terminal operation)
<ul><li><code>Stream&lt;T&gt; peek(Consumer&lt;? super T&gt; action)</code></li> <li><code>void forEach(Consumer&lt;? super T&gt; action)</code></li> <li><code>void forEachOrdered(Consumer&lt;? super T&gt; action)</code> — when in parallel mode and order matters</li> <li><code>Object[] toArray()</code><br> <code>&lt;A&gt; A[] toArray(IntFunction&lt;A[]&gt; generator)</code></li> <li><code>&lt;R,A&gt; R collect(Collector&lt;? super T,A,R&gt; collector)</code><br> <code>&lt;R&gt; R collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R,? super T&gt; accumulator, BiConsumer&lt;R,R&gt; combiner)</code> — <code>Collector</code> shortcut<div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> asList <span class="token operator">=</span> stringStream<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token class-name">ArrayList</span><span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">,</span>
                                           <span class="token class-name">ArrayList</span><span class="token operator">::</span><span class="token function">addAll</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> concat <span class="token operator">=</span> stringStream<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">StringBuilder</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token class-name">StringBuilder</span><span class="token operator">::</span><span class="token function">append</span><span class="token punctuation">,</span>
                                     <span class="token class-name">StringBuilder</span><span class="token operator">::</span><span class="token function">append</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>iterator methods from <code>BaseStream</code></li></ul></li></ul></li> <li><p><code>java.util.stream.Collector</code> — A mutable reduction operation that accumulates input elements into a mutable result container</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Collector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">A</span><span class="token punctuation">,</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>process
<ul><li>creation of a new result container (<code>Supplier&lt;A&gt; supplier()</code>)</li> <li>incorporating a new data element into a result container (<code>BiConsumer&lt;A,T&gt; accumulator()</code>)</li> <li>combining two result containers into one (<code>BinaryOperator&lt;A&gt; combiner()</code>)</li> <li>performing an optional final transform on the container (<code>Function&lt;A,R&gt; finisher()</code>)</li></ul></li> <li><code>Set&lt;Collector.Characteristics&gt; characteristics()</code></li> <li><code>enum Characteristics</code> <ul><li><code>CONCURRENT</code> — Indicates that this collector is concurrent, meaning that the result container can support the accumulator function being called concurrently with the same result container from multiple threads.</li> <li><code>IDENTITY_FINISH</code> — Indicates that the finisher function is the identity function and can be elided.
<ul><li><code>Function.identity()</code></li></ul></li> <li><code>UNORDERED</code> — Indicates that the collection operation does not commit to preserving the encounter order of input elements.</li></ul></li> <li>creation
<ul><li><code>static &lt;T,A,R&gt; Collector&lt;T,A,R&gt; of(Supplier&lt;A&gt; supplier, BiConsumer&lt;A,T&gt; accumulator, BinaryOperator&lt;A&gt; combiner, Function&lt;A,R&gt; finisher, Collector.Characteristics... characteristics)</code></li> <li><code>static &lt;T,R&gt; Collector&lt;T,R,R&gt; of(Supplier&lt;R&gt; supplier, BiConsumer&lt;R,T&gt; accumulator, BinaryOperator&lt;R&gt; combiner, Collector.Characteristics... characteristics)</code></li> <li>methods in <code>Collectors</code></li></ul></li></ul></li> <li><p><code>java.util.stream.Collectors</code></p> <ul><li>statics
<ul><li><code>static &lt;T&gt; Collector&lt;T,?,Double&gt; averagingDouble(ToDoubleFunction&lt;? super T&gt; mapper)</code><br> <code>static &lt;T&gt; Collector&lt;T,?,Double&gt; averagingInt(ToIntFunction&lt;? super T&gt; mapper)</code><br> <code>static &lt;T&gt; Collector&lt;T,?,Double&gt; averagingLong(ToLongFunction&lt;? super T&gt; mapper)</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,Optional&lt;T&gt;&gt; maxBy(Comparator&lt;? super T&gt; comparator)</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,Optional&lt;T&gt;&gt; minBy(Comparator&lt;? super T&gt; comparator)</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,DoubleSummaryStatistics&gt; summarizingDouble(ToDoubleFunction&lt;? super T&gt; mapper)</code><br> <code>static &lt;T&gt; Collector&lt;T,?,IntSummaryStatistics&gt; summarizingInt(ToIntFunction&lt;? super T&gt; mapper)</code><br> <code>static &lt;T&gt; Collector&lt;T,?,LongSummaryStatistics&gt; summarizingLong(ToLongFunction&lt;? super T&gt; mapper)</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,Long&gt; counting()</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,Double&gt; summingDouble(ToDoubleFunction&lt;? super T&gt; mapper)</code><br> <code>static &lt;T&gt; Collector&lt;T,?,Integer&gt; summingInt(ToIntFunction&lt;? super T&gt; mapper)</code><br> <code>static &lt;T&gt; Collector&lt;T,?,Long&gt; summingLong(ToLongFunction&lt;? super T&gt; mapper)</code></li></ul></li> <li>collector chaining
<ul><li><code>static &lt;T,A,R,RR&gt; Collector&lt;T,A,RR&gt; collectingAndThen(Collector&lt;T,A,R&gt; downstream, Function&lt;R,RR&gt; finisher)</code> — add finisher</li> <li><code>static &lt;T,U,A,R&gt; Collector&lt;T,?,R&gt; mapping(Function&lt;? super T,? extends U&gt; mapper, Collector&lt;? super U,A,R&gt; downstream)</code> — preprocess with <code>T -&gt; U</code> function for collector accepting <code>U</code></li> <li><code>groupingBy</code></li> <li><code>groupingByConcurrent</code></li> <li><code>partitioningBy</code></li></ul></li> <li>group (defaults to using <code>HashMap</code> and <code>ConcurrentHashMap</code>)
<ul><li><code>static &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingBy(Function&lt;? super T,? extends K&gt; classifier)</code><br> <code>static &lt;T,K,A,D&gt; Collector&lt;T,?,Map&lt;K,D&gt;&gt; groupingBy(Function&lt;? super T,? extends K&gt; classifier, Collector&lt;? super T,A,D&gt; downstream)</code><br> <code>static &lt;T,K,D,A,M extends Map&lt;K,D&gt;&gt; Collector&lt;T,?,M&gt; groupingBy(Function&lt;? super T,? extends K&gt; classifier, Supplier&lt;M&gt; mapFactory, Collector&lt;? super T,A,D&gt; downstream)</code></li> <li><code>static &lt;T,K&gt; Collector&lt;T,?,ConcurrentMap&lt;K,List&lt;T&gt;&gt;&gt; groupingByConcurrent(Function&lt;? super T,? extends K&gt; classifier)</code><br> <code>static &lt;T,K,A,D&gt; Collector&lt;T,?,ConcurrentMap&lt;K,D&gt;&gt; groupingByConcurrent(Function&lt;? super T,? extends K&gt; classifier, Collector&lt;? super T,A,D&gt; downstream)</code><br> <code>static &lt;T,K,A,D,M extends ConcurrentMap&lt;K,D&gt;&gt; Collector&lt;T,?,M&gt; groupingByConcurrent(Function&lt;? super T,? extends K&gt; classifier, Supplier&lt;M&gt; mapFactory, Collector&lt;? super T,A,D&gt; downstream)</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,Map&lt;Boolean,List&lt;T&gt;&gt;&gt; partitioningBy(Predicate&lt;? super T&gt; predicate)</code><br> <code>static &lt;T,D,A&gt; Collector&lt;T,?,Map&lt;Boolean,D&gt;&gt; partitioningBy(Predicate&lt;? super T&gt; predicate, Collector&lt;? super T,A,D&gt; downstream)</code></li></ul></li> <li>to map (<code>HashMap</code> and <code>ConcurrentHashMap</code>)
<ul><li><code>static &lt;T,K,U&gt; Collector&lt;T,?,ConcurrentMap&lt;K,U&gt;&gt; toConcurrentMap(Function&lt;? super T,? extends K&gt; keyMapper, Function&lt;? super T,? extends U&gt; valueMapper)</code><br> <code>static &lt;T,K,U&gt; Collector&lt;T,?,ConcurrentMap&lt;K,U&gt;&gt; toConcurrentMap(Function&lt;? super T,? extends K&gt; keyMapper, Function&lt;? super T,? extends U&gt; valueMapper, BinaryOperator&lt;U&gt; mergeFunction)</code><br> <code>static &lt;T,K,U,M extends ConcurrentMap&lt;K,U&gt;&gt; Collector&lt;T,?,M&gt; toConcurrentMap(Function&lt;? super T,? extends K&gt; keyMapper, Function&lt;? super T,? extends U&gt; valueMapper, BinaryOperator&lt;U&gt; mergeFunction, Supplier&lt;M&gt; mapSupplier)</code></li> <li><code>static &lt;T,K,U&gt; Collector&lt;T,?,Map&lt;K,U&gt;&gt; toMap(Function&lt;? super T,? extends K&gt; keyMapper, Function&lt;? super T,? extends U&gt; valueMapper)</code><br> <code>static &lt;T,K,U&gt; Collector&lt;T,?,Map&lt;K,U&gt;&gt; toMap(Function&lt;? super T,? extends K&gt; keyMapper, Function&lt;? super T,? extends U&gt; valueMapper, BinaryOperator&lt;U&gt; mergeFunction)</code><br> <code>static &lt;T,K,U,M extends Map&lt;K,U&gt;&gt; Collector&lt;T,?,M&gt; toMap(Function&lt;? super T,? extends K&gt; keyMapper, Function&lt;? super T,? extends U&gt; valueMapper, BinaryOperator&lt;U&gt; mergeFunction, Supplier&lt;M&gt; mapSupplier)</code></li></ul></li> <li>to collection
<ul><li><code>static &lt;T,C extends Collection&lt;T&gt;&gt; Collector&lt;T,?,C&gt; toCollection(Supplier&lt;C&gt; collectionFactory)</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toList()</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,Set&lt;T&gt;&gt; toSet()</code></li></ul></li> <li>join
<ul><li><code>static Collector&lt;CharSequence,?,String&gt; joining()</code></li> <li><code>static Collector&lt;CharSequence,?,String&gt; joining(CharSequence delimiter)</code></li> <li><code>static Collector&lt;CharSequence,?,String&gt; joining(CharSequence delimiter, CharSequence prefix, CharSequence suffix)</code></li></ul></li> <li>reduce
<ul><li><code>static &lt;T&gt; Collector&lt;T,?,Optional&lt;T&gt;&gt; reducing(BinaryOperator&lt;T&gt; op)</code></li> <li><code>static &lt;T&gt; Collector&lt;T,?,T&gt; reducing(T identity, BinaryOperator&lt;T&gt; op)</code></li> <li><code>static &lt;T,U&gt; Collector&lt;T,?,U&gt; reducing(U identity, Function&lt;? super T,? extends U&gt; mapper, BinaryOperator&lt;U&gt; op)</code></li></ul></li></ul></li></ol> <h2 id="spi-service-loader"><a href="#spi-service-loader" class="header-anchor">#</a> SPI (Service Loader)</h2> <ol><li><p>SPI</p> <ul><li><a href="https://zhuanlan.zhihu.com/p/28909673" target="_blank" rel="noopener noreferrer">zhihu<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>define the interface / superclass, and provide its implementation, no hard code</li> <li>for <code>ServiceLoader</code>, define in <code>META-INF/services/packageName.InterfaceName</code> as a text file with fully qualified implementation name<div class="language- extra-class"><pre class="language-text"><code>implementation.package.name.ImplName1
implementation.package.name.ImplName2
...
</code></pre></div></li> <li>example for <code>ServiceLoader</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Search</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">searchDoc</span><span class="token punctuation">(</span><span class="token class-name">String</span> keyword<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// implementations and configurations omitted</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestCase</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ServiceLoader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Search</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">ServiceLoader</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">Search</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Search</span> search <span class="token operator">:</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            search<span class="token punctuation">.</span><span class="token function">searchDoc</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><code>java.text.spi</code></li></ul></li> <li><p><code>java.util.ServiceLoader</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">ServiceLoader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">S</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">S</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>Iterator&lt;S&gt; iterator()</code> — Lazily loads the available providers of this loader's service.</li> <li><code>static &lt;S&gt; ServiceLoader&lt;S&gt; load(Class&lt;S&gt; service)</code> — Creates a new service loader for the given service type, using the current thread's context class loader.</li></ul></li></ol> <h2 id="other-utils"><a href="#other-utils" class="header-anchor">#</a> Other Utils</h2> <ol><li><p>date and time related — see <a href="/notes-of-tan/backend/java/javaMisc.html#Time">Time</a></p></li> <li><p><code>java.util.PropertyPermission</code> — system property permissions</p></li> <li><p><code>java.util.UUID</code> — an immutable universally unique identifier (UUID). A UUID represents a 128-bit value.</p></li> <li><p><code>java.util.Objects</code> — null-safe</p> <ul><li><code>static &lt;T&gt; int compare(T a, T b, Comparator&lt;? super T&gt; c)</code> — <code>return (a == b) ? 0 : c.compare(a, b);</code></li> <li><code>static boolean deepEquals(Object a, Object b)</code> — Returns <code>true</code> if the arguments are deeply equal to each other and <code>false</code> otherwise.</li> <li><code>static boolean equals(Object a, Object b)</code> — <code>return (a == b) || (a != null &amp;&amp; a.equals(b));</code></li> <li><code>static int hash(Object... values)</code> — <code>return Arrays.hashCode(values);</code></li> <li><code>static int hashCode(Object o)</code> — <code>return o != null ? o.hashCode() : 0;</code></li> <li><code>static boolean isNull(Object obj)</code> — <code>return obj == null;</code></li> <li><code>static boolean nonNull(Object obj)</code> — <code>return obj != null;</code></li> <li><code>static &lt;T&gt; T requireNonNull(T obj)</code><br> <code>static &lt;T&gt; T requireNonNull(T obj, String message)</code><br> <code>static &lt;T&gt; T requireNonNull(T obj, Supplier&lt;String&gt; messageSupplier)</code> — Checks that the specified object reference is not null and throws a customized <code>NullPointerException</code> if it is.</li> <li><code>static String toString(Object o)</code> — <code>return String.valueOf(o);</code> → <code>return (obj == null) ? &quot;null&quot; : obj.toString();</code></li> <li><code>static String toString(Object o, String nullDefault)</code> — <code>return (o != null) ? o.toString() : nullDefault;</code></li> <li>index check methods — since JDK 9</li></ul></li> <li><p><code>java.util.Optional</code> — A container object which may or may not contain a non-null value, a better <code>null</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li>fallback to `null
<ul><li><code>boolean isPresent()</code></li> <li><code>T get()</code></li></ul></li> <li>transformation
<ul><li><code>void ifPresent(Consumer&lt;? super T&gt; consumer)</code></li> <li><code>&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T,? extends U&gt; mapper)</code></li> <li><code>&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T,Optional&lt;U&gt;&gt; mapper)</code></li> <li><code>Optional&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate)</code></li> <li><code>T orElse(T other)</code></li> <li><code>T orElseGet(Supplier&lt;? extends T&gt; other)</code></li> <li><code>&lt;X extends Throwable&gt; T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code></li></ul></li> <li>creation
<ul><li><code>static &lt;T&gt; Optional&lt;T&gt; empty()</code></li> <li><code>static &lt;T&gt; Optional&lt;T&gt; of(T value)</code></li> <li><code>static &lt;T&gt; Optional&lt;T&gt; ofNullable(T value)</code></li></ul></li> <li>variants
<ul><li><code>java.util.OptionalInt</code></li> <li><code>java.util.OptionalDouble</code></li> <li><code>java.util.OptionalLong</code></li></ul></li></ul></li> <li><p><code>java.util.LongSummaryStatistics</code>, <code>java.util.IntSummaryStatistics</code>, <code>java.util.DoubleSummaryStatistics</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LongSummaryStatistics</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">LongConsumer</span><span class="token punctuation">,</span> <span class="token class-name">IntConsumer</span>
</code></pre></div><ul><li>creation
<ul><li><code>Collectors::summarizingLong</code>, <code>Collectors::summarizingDouble</code>, <code>Collectors::summarizingInt</code></li> <li><code>IntSummaryStatistics(long count, int min, int max, long sum)</code></li> <li>with out collector — <code>IntSummaryStatistics()</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">LongSummaryStatistics</span> stats <span class="token operator">=</span> longStream<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">LongSummaryStatistics</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span>
                                                 <span class="token class-name">LongSummaryStatistics</span><span class="token operator">::</span><span class="token function">accept</span><span class="token punctuation">,</span>
                                                 <span class="token class-name">LongSummaryStatistics</span><span class="token operator">::</span><span class="token function">combine</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li>statics
<ul><li><code>double getAverage()</code></li> <li><code>long getCount()</code></li> <li><code>long|int|double getMax()</code></li> <li><code>long|int|double getMin()</code></li> <li><code>long|double getSum()</code></li> <li><code>String toString()</code></li></ul></li></ul></li></ol> <h2 id="zip-checksum-and-encryption"><a href="#zip-checksum-and-encryption" class="header-anchor">#</a> ZIP, Checksum and Encryption</h2> <ol><li><p><code>java.util.Base64</code></p> <ul><li><code>java.util.Base64.Decoder</code></li> <li><code>java.util.Base64.Encoder</code></li></ul></li> <li><p><code>java.util.zip.CRC32</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> CRC32 <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Checksum</span>
</code></pre></div><ul><li><code>interface java.util.zip.Checksum</code></li></ul></li> <li><p>ZIP streams — see <a href="/notes-of-tan/backend/java/javaIO.html#ZIP-Streams">ZIP Streams</a></p></li> <li><p><code>java.security.MessageDigest</code> — MD5, SHA-1, SHA-256, SHA-384, and SHA-512</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token function">bytesToHex</span><span class="token punctuation">(</span><span class="token class-name">MessageDigest</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;SHA-256&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;temp.py&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> HEX_ARRAY <span class="token operator">=</span> <span class="token string">&quot;0123456789ABCDEF&quot;</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">bytesToHex</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hexChars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>bytes<span class="token punctuation">.</span>length <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> v <span class="token operator">=</span> bytes<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span><span class="token punctuation">;</span>
        hexChars<span class="token punctuation">[</span>j <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> HEX_ARRAY<span class="token punctuation">[</span>v <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        hexChars<span class="token punctuation">[</span><span class="token punctuation">(</span>j <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> HEX_ARRAY<span class="token punctuation">[</span>v <span class="token operator">&amp;</span> <span class="token number">0x0F</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>hexChars<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>CLI — <code>keytool</code></li></ul></li> <li><p><code>javax.crypto.Cipher</code> — AES, DES, RSA</p> <ul><li><code>java.security.KeyPairGenerator</code></li></ul></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tangentyh/notes-of-tan/edit/master/docs/backend/java/javaUtils.md" target="_blank" rel="noopener noreferrer">See This Page On GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/29/2020, 5:29:36 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes-of-tan/backend/java/javaMisc.html" class="prev">
        Java Miscellanea
      </a></span> <span class="next"><a href="/notes-of-tan/backend/java/JVM.html">
        JVM
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notes-of-tan/assets/js/app.acedf45c.js" defer></script><script src="/notes-of-tan/assets/js/2.6e9b9b6e.js" defer></script><script src="/notes-of-tan/assets/js/25.5076b5b7.js" defer></script>
  </body>
</html>
