<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>IO | Notes of Tan</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="https://v1.vuepress.vuejs.org/hero.png">
    <meta name="description" content="Tan's notes.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/notes-of-tan/assets/css/0.styles.f8fd4e37.css" as="style"><link rel="preload" href="/notes-of-tan/assets/js/app.54becac1.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/2.33f31c9b.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/24.1ec9070f.js" as="script"><link rel="prefetch" href="/notes-of-tan/assets/js/10.90ccce99.js"><link rel="prefetch" href="/notes-of-tan/assets/js/11.95d04f86.js"><link rel="prefetch" href="/notes-of-tan/assets/js/12.ef1d3621.js"><link rel="prefetch" href="/notes-of-tan/assets/js/13.a4adee88.js"><link rel="prefetch" href="/notes-of-tan/assets/js/14.c09755c2.js"><link rel="prefetch" href="/notes-of-tan/assets/js/15.3733f8dd.js"><link rel="prefetch" href="/notes-of-tan/assets/js/16.45186f0f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/17.8f99a419.js"><link rel="prefetch" href="/notes-of-tan/assets/js/18.e1ed9c54.js"><link rel="prefetch" href="/notes-of-tan/assets/js/19.c704f56e.js"><link rel="prefetch" href="/notes-of-tan/assets/js/20.baa1dedb.js"><link rel="prefetch" href="/notes-of-tan/assets/js/21.5ada412e.js"><link rel="prefetch" href="/notes-of-tan/assets/js/22.7234bd11.js"><link rel="prefetch" href="/notes-of-tan/assets/js/23.da893bd8.js"><link rel="prefetch" href="/notes-of-tan/assets/js/25.c9b3cb0c.js"><link rel="prefetch" href="/notes-of-tan/assets/js/26.6d0133c7.js"><link rel="prefetch" href="/notes-of-tan/assets/js/27.75b7de4a.js"><link rel="prefetch" href="/notes-of-tan/assets/js/28.07d7017e.js"><link rel="prefetch" href="/notes-of-tan/assets/js/29.9de9cb08.js"><link rel="prefetch" href="/notes-of-tan/assets/js/3.f2118d7b.js"><link rel="prefetch" href="/notes-of-tan/assets/js/30.1574681b.js"><link rel="prefetch" href="/notes-of-tan/assets/js/31.97ed5447.js"><link rel="prefetch" href="/notes-of-tan/assets/js/32.061cf937.js"><link rel="prefetch" href="/notes-of-tan/assets/js/33.40fadf29.js"><link rel="prefetch" href="/notes-of-tan/assets/js/34.1cb87aa7.js"><link rel="prefetch" href="/notes-of-tan/assets/js/35.ffb66b35.js"><link rel="prefetch" href="/notes-of-tan/assets/js/36.5b4a09a3.js"><link rel="prefetch" href="/notes-of-tan/assets/js/37.4e57a711.js"><link rel="prefetch" href="/notes-of-tan/assets/js/4.379a9a10.js"><link rel="prefetch" href="/notes-of-tan/assets/js/5.aa92cc60.js"><link rel="prefetch" href="/notes-of-tan/assets/js/6.af6b2951.js"><link rel="prefetch" href="/notes-of-tan/assets/js/7.1140570f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/8.bd5a1ed5.js"><link rel="prefetch" href="/notes-of-tan/assets/js/9.98e24ffb.js">
    <link rel="stylesheet" href="/notes-of-tan/assets/css/0.styles.f8fd4e37.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes-of-tan/" class="home-link router-link-active"><!----> <span class="site-name">Notes of Tan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java Basics
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaUtils.html" class="nav-link">
  Java Utilities
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="nav-link">
  Java Concurrency
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaIO.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaMisc.html" class="nav-link">
  Java Miscellanea
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/JVM.html" class="nav-link">
  Java Virtual Machine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SpringNotes.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/OS-notes.html" class="nav-link">
  OS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/database.html" class="nav-link">
  Database
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SQL_notes.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/distributed.html" class="nav-link">
  Distributed System
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/redis-notes.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/CSS-notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/html-notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/jsNotes.html" class="nav-link">
  JS, TS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/BOM_DOM_notes.html" class="nav-link">
  BOM, DOM, Web API
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/react_notes.html" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/algo_notes.html" class="nav-link">
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/git_notes.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/DesignPatternNotes.html" class="nav-link">
  Design Pattern
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/HTTP.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/mac-notes.html" class="nav-link">
  MacOS
</a></li></ul></div></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java Basics
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaUtils.html" class="nav-link">
  Java Utilities
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="nav-link">
  Java Concurrency
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaIO.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaMisc.html" class="nav-link">
  Java Miscellanea
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/JVM.html" class="nav-link">
  Java Virtual Machine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SpringNotes.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/OS-notes.html" class="nav-link">
  OS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/database.html" class="nav-link">
  Database
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SQL_notes.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/distributed.html" class="nav-link">
  Distributed System
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/redis-notes.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/CSS-notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/html-notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/jsNotes.html" class="nav-link">
  JS, TS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/BOM_DOM_notes.html" class="nav-link">
  BOM, DOM, Web API
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/react_notes.html" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/algo_notes.html" class="nav-link">
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/git_notes.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/DesignPatternNotes.html" class="nav-link">
  Design Pattern
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/HTTP.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/mac-notes.html" class="nav-link">
  MacOS
</a></li></ul></div></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-of-tan/backend/java/javaBasics.html" class="sidebar-link">Java Basics</a></li><li><a href="/notes-of-tan/backend/java/javaUtils.html" class="sidebar-link">Java Utils</a></li><li><a href="/notes-of-tan/backend/java/javaConcurrency.html" class="sidebar-link">Java Concurrency</a></li><li><a href="/notes-of-tan/backend/java/javaIO.html" aria-current="page" class="active sidebar-link">IO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#OS-I-O" class="sidebar-link">OS I/O</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Java-IO" class="sidebar-link">Java IO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Console" class="sidebar-link">Console</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Basic-IO-Stream" class="sidebar-link">Basic IO Stream</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Filter-Stream" class="sidebar-link">Filter Stream</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#ZIP-Streams" class="sidebar-link" style="padding-left:3rem;">ZIP Streams</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Print-Stream" class="sidebar-link">Print Stream</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Other-Streams" class="sidebar-link">Other Streams</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Serialization" class="sidebar-link">Serialization</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Files" class="sidebar-link">Files</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#File-Classes" class="sidebar-link" style="padding-left:3rem;">File Classes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#File-Options-and-Attributes" class="sidebar-link" style="padding-left:3rem;">File Options and Attributes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#File-Stream" class="sidebar-link" style="padding-left:3rem;">File Stream</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#NIO" class="sidebar-link">NIO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#NIO-Buffers" class="sidebar-link">NIO Buffers</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#NIO-Channels" class="sidebar-link">NIO Channels</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Channel-Interfaces" class="sidebar-link" style="padding-left:3rem;">Channel Interfaces</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Selector" class="sidebar-link" style="padding-left:3rem;">Selector</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Channel-Implementations" class="sidebar-link" style="padding-left:3rem;">Channel Implementations</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Network" class="sidebar-link">Network</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Address" class="sidebar-link">Address</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#Sockets" class="sidebar-link">Sockets</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#URI-and-URL" class="sidebar-link">URI and URL</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/backend/java/javaIO.html#HTTP-Cookie" class="sidebar-link" style="padding-left:3rem;">HTTP Cookie</a></li></ul></li></ul></li><li><a href="/notes-of-tan/backend/java/javaMisc.html" class="sidebar-link">Java Miscellanea</a></li><li><a href="/notes-of-tan/backend/java/JVM.html" class="sidebar-link">JVM</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="IO"><a href="#IO" class="header-anchor">#</a> IO</h1> <h2 id="OS-I-O"><a href="#OS-I-O" class="header-anchor">#</a> OS I/O</h2> <ol><li><p>输入操作通常包括两个阶段</p> <ul><li>等待数据 — 等待数据从网络中到达。当所等待数据到达时，它被复制到内核中的某个缓冲区</li> <li>从内核向进程复制数据 — 把数据从内核缓冲区复制到应用进程缓冲区</li></ul></li> <li><p>IO</p> <ul><li>synchronous IO
<ul><li>blocking IO — block for both phases</li> <li>non-blocking IO — polling for the first phase, block for the second phase</li> <li>IO multiplexing, aka event driven IO — <code>select</code> or <code>poll</code>, like <code>java.nio.channels.Selector</code>, block for both phases, but one thread for multiple sockets</li> <li>signal driven IO — <code>sigaction</code>, return immediately for the first phase。内核在数据到达时向应用进程发送 <code>SIGIO</code> 信号, blocking for second phase</li></ul></li> <li>asynchronous IO
<ul><li>asynchronous IO — <code>aio_read</code>, 内核会在所有操作完成之后向应用进程发送信号, non-blocking for both phases</li></ul></li></ul></li> <li><p><code>select</code> — like <code>java.nio.channels.Selector</code>, 监视一组文件描述符，等待一个或者多个描述符成为就绪状态</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">int</span> nfds<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>readfds<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>writefds<span class="token punctuation">,</span>
        fd_set <span class="token operator">*</span>exceptfds<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">timeval</span> <span class="token operator">*</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>nfds</code> — the highest-numbered file descriptor in any of the three sets, plus 1</li> <li><code>fd_set</code> — array based, of size <code>FD_SETSIZE</code> which defaults to 1024</li> <li><code>readset</code>、<code>writeset</code>、<code>exceptset</code> — 分别对应读、写、异常条件的描述符集合, three classes of events on the specified set of file descriptors, can be <code>NULL</code>; upon return, each of the file descriptor sets will be cleared of all file descriptors except for those that are ready / exceptional</li> <li>return — on success, return the number of file descriptors contained in the three returned descriptor sets; 0 on timeout; -1 on error</li></ul></li> <li><p><code>poll</code> — similar to <code>select</code>, but with more event types and no size constraint for array <code>*fds</code></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">pollfd</span> <span class="token operator">*</span>fds<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> nfds<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">pollfd</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span>   fd<span class="token punctuation">;</span>         <span class="token comment">/* file descriptor */</span>
    <span class="token keyword">short</span> events<span class="token punctuation">;</span>     <span class="token comment">/* requested events */</span>
    <span class="token keyword">short</span> revents<span class="token punctuation">;</span>    <span class="token comment">/* returned events */</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>structure reuse<div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">// If we detect the event, zero it out so we can reuse the structure</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> fds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">&amp;</span> POLLIN <span class="token punctuation">)</span>
        fds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>return — on success, returns a nonnegative value which is the number of elements in the <code>pollfds</code> whose <code>revents</code> fields have been set to a nonzero value; 0 on timeout; -1 on error</li></ul></li> <li><p><code>epoll</code> — event poll</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">epoll_create</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">epoll_ctl</span><span class="token punctuation">(</span><span class="token keyword">int</span> epfd<span class="token punctuation">,</span> <span class="token keyword">int</span> op<span class="token punctuation">,</span> <span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> <span class="token operator">*</span>event<span class="token punctuation">)</span>；
<span class="token keyword">int</span> <span class="token function">epoll_wait</span><span class="token punctuation">(</span><span class="token keyword">int</span> epfd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> <span class="token operator">*</span>events<span class="token punctuation">,</span>
               <span class="token keyword">int</span> maxevents<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>epoll_create()</code> — creates a new <code>epoll</code> instance, the <code>size</code> argument is ignored, but must be greater than zero</li> <li><code>epoll_ctl</code> — add, modify, or remove entries in the interest list of the <code>epoll</code> instance referred to by the file descriptor <code>epfd</code>. 已注册的描述符在内核中会被维护在一棵红黑树上
<ul><li><code>op</code>, <code>fd</code> — it requests that the operation <code>op</code> be performed for the target file descriptor, <code>fd</code></li></ul></li> <li><code>epoll_wait</code> — waits for events on the <code>epoll</code> instance referred to by the file descriptor <code>epfd</code>. The buffer pointed to by <code>events</code> is used to return information from the ready list about file descriptors in the interest list that have some events available
<ul><li>return — on success, return the number of file descriptors ready for the requested I/O; 0 on timeout; -1 on error</li></ul></li> <li>mode
<ul><li>LT, level trigger — default, blocking and non-blocking, after <code>epoll_wait</code>, 进程可以不立即处理该事件，下次调用 <code>epoll_wait()</code> 会再次通知进程</li> <li>ET, edge trigger — non-blocking, after <code>epoll_wait</code>, 下次再调用 <code>epoll_wait()</code> 时不会再得到事件到达的通知</li></ul></li></ul></li> <li><p><code>epoll</code> vs <code>poll</code> vs <code>select</code></p> <ul><li><code>epoll</code> 进程不需要通过轮询来获得事件完成的描述符</li> <li><code>epoll</code> 只需要将描述符从进程缓冲区向内核缓冲区拷贝一次
<ul><li><code>select</code> and <code>poll</code>, 每次调用都需要将全部描述符从应用进程缓冲区复制到内核缓冲区</li></ul></li> <li>number and duration of fd — 需要监控的描述符状态变化多，而且都是非常短暂的，也没有必要使用 epoll。因为 epoll 中的所有描述符都存储在内核中，造成每次需要对描述符的状态改变都需要通过 epoll_ctl() 进行系统调用，频繁系统调用降低效率。并且 epoll 的描述符存储在内核，不容易调试。</li> <li>对多线程编程更友好，一个线程调用了 <code>epoll_wait()</code> 另一个线程关闭了同一个描述符也不会产生像 <code>select</code> 和 <code>poll</code> 的不确定情况
<ul><li>如果一个线程对某个描述符调用了 <code>select</code> 或者 <code>poll</code>，另一个线程关闭了该描述符，会导致调用结果不确定</li></ul></li> <li><code>select</code> <code>timeout</code> 参数精度为微秒, 更加适用于实时性要求比较高的场景，而 <code>poll</code> 和 <code>epoll</code> 为毫秒</li></ul></li></ol> <h2 id="Java-IO"><a href="#Java-IO" class="header-anchor">#</a> Java IO</h2> <ol><li><p>Netty 粘包拆包 — distinguish data boundary</p> <ul><li>delimiter
<ul><li><code>DelimiterBasedFrameDecoder</code></li> <li><code>LineBasedFrameDecoder</code></li></ul></li> <li>length
<ul><li><code>FixedLengthFrameDecoder</code></li> <li>length header</li></ul></li></ul></li> <li><p><code>java.io</code> exceptions</p> <ul><li><code>java.io.IOException</code> extends <code>Exception</code> — <code>java.io.CharConversionException</code> - <code>java.io.EOFException</code> - <code>java.io.FileNotFoundException</code> - <code>java.io.InterruptedIOException</code> - <code>java.io.ObjectStreamException</code> - <code>java.io.InvalidClassException</code> - <code>java.io.InvalidObjectException</code> - <code>java.io.NotActiveException</code> - <code>java.io.NotSerializableException</code> - <code>java.io.OptionalDataException</code> - <code>java.io.StreamCorruptedException</code> - <code>java.io.WriteAbortedException</code> - <code>java.io.SyncFailedException</code> - <code>java.io.UnsupportedEncodingException</code> - <code>java.io.UTFDataFormatException</code></li> <li><code>java.io.UncheckedIOException</code> extends <code>RuntimeException</code></li></ul></li></ol> <h3 id="Console"><a href="#Console" class="header-anchor">#</a> Console</h3> <ol><li><p><code>java.io.Console</code> — synchronized</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Console</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Flushable</span>
</code></pre></div><ul><li>creation
<ul><li><code>System.console()</code></li></ul></li> <li>write
<ul><li><code>void flush()</code></li> <li><code>Console format(String fmt, Object... args)</code></li> <li><code>Console printf(String format, Object... args)</code></li></ul></li> <li>read
<ul><li><code>String readLine()</code><br> <code>String readLine(String fmt, Object... args)</code></li> <li><code>char[] readPassword()</code><br> <code>char[] readPassword(String fmt, Object... args)</code></li></ul></li> <li>get underlying stream
<ul><li><code>Reader reader()</code></li> <li><code>PrintWriter writer()</code></li></ul></li></ul></li> <li><p><code>java.util.Scanner</code> — not synchronized</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Scanner</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li>constructors
<ul><li><code>Scanner(File source)</code></li> <li><code>Scanner(File source, String charsetName)</code></li> <li><code>Scanner(InputStream source)</code> — uses <code>InputStreamReader</code> behind the scenes
<ul><li><code>System.in</code> for stdin</li></ul></li> <li><code>Scanner(InputStream source, String charsetName)</code></li> <li><code>Scanner(Path source)</code></li> <li><code>Scanner(Path source, String charsetName)</code></li> <li><code>Scanner(String source)</code></li> <li><code>Scanner(Readable source)</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Scanner</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Scanner(ReadableByteChannel source)</code></li> <li><code>Scanner(ReadableByteChannel source, String charsetName)</code></li></ul></li> <li>settings — delimiter, locale, regex
<ul><li><code>Scanner reset()</code></li> <li><code>Scanner useDelimiter(Pattern pattern)</code></li> <li><code>Scanner useDelimiter(String pattern)</code></li> <li><code>Pattern delimiter()</code></li> <li><code>Scanner useLocale(Locale locale)</code></li> <li><code>Locale locale()</code></li> <li><code>Scanner useRadix(int radix)</code></li> <li><code>int radix()</code></li></ul></li> <li>read
<ul><li><code>String next()</code></li> <li><code>String next(Pattern pattern)</code></li> <li><code>String next(String pattern)</code></li> <li><code>String nextLine()</code></li> <li><code>BigDecimal nextBigDecimal()</code></li> <li><code>BigInteger nextBigInteger()</code></li> <li><code>BigInteger nextBigInteger(int radix)</code></li> <li><code>boolean nextBoolean()</code></li> <li><code>byte nextByte()</code></li> <li><code>byte nextByte(int radix)</code></li> <li><code>double nextDouble()</code></li> <li><code>float nextFloat()</code></li> <li><code>int nextInt()</code></li> <li><code>int nextInt(int radix)</code></li> <li><code>long nextLong()</code></li> <li><code>long nextLong(int radix)</code></li> <li><code>short nextShort()</code></li> <li><code>short nextShort(int radix)</code></li> <li><code>MatchResult match()</code> — the match result of the last scanning operation
<ul><li>peek<div class="language-java extra-class"><pre class="language-java"><code>s<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token string">&quot;.*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;.*&quot; matches anything, similar to hasNext(), but updates the scanner's internal match variable</span>
s<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>​<span class="token punctuation">;</span>​
</code></pre></div></li></ul></li></ul></li> <li>test — <code>has-</code> prefixed version of read methods, <code>hasNext</code></li> <li>find — ignoring delimiters, the scanner returns and advances past the match if found, else returns <code>null</code> with position unchanged
<ul><li><code>String findInLine(Pattern pattern)</code></li> <li><code>String findInLine(String pattern)</code></li> <li><code>String findWithinHorizon(Pattern pattern, int horizon)</code> — will never search more than <code>horizon</code> code points beyond its current position, <code>horizon</code> ignored if it is 0</li> <li><code>String findWithinHorizon(String pattern, int horizon)</code></li></ul></li> <li>skip — ignoring delimiters
<ul><li><code>Scanner skip(Pattern pattern)</code></li> <li><code>Scanner skip(String pattern)</code></li></ul></li> <li><code>IOException ioException()</code> — Returns the <code>IOException</code> last thrown by this Scanner's underlying <code>Readable</code>.</li></ul></li> <li><p><code>java.io.BufferedReader</code> — synchronized</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedReader</span>
<span class="token keyword">extends</span> <span class="token class-name">Reader</span>
</code></pre></div><ul><li><code>Stream&lt;String&gt; lines()</code></li> <li><code>String readLine()</code></li> <li><code>Reader</code> methods</li></ul></li> <li><p>stdin, stdout, stderr</p> <ul><li>see <a href="/notes-of-tan/backend/java/javaBasics.html#System"><code>System</code></a></li> <li>see <code>InputStream</code> (<code>BufferedInputStream</code>) and <code>PrintStream</code></li></ul></li></ol> <h3 id="Basic-IO-Stream"><a href="#Basic-IO-Stream" class="header-anchor">#</a> Basic IO Stream</h3> <ol><li><p>IO streams</p> <ul><li>byte streams, byte oriented — <code>InputStream</code>, <code>OutputStream</code> <ul><li>deal with bytes — <code>FilterInputStream</code>, <code>FilterOutputStream</code> and their derivatives</li> <li>buffer — use <code>BufferedInputStream</code> and <code>BufferedOutputStream</code> as an intermediate stream</li></ul></li> <li><code>char</code> streams, two-byte <code>char</code> values (UTF-16 codepoints) oriented — <code>Reader</code>, <code>Writer</code>, can be converted from byte streams, both have a protected <code>Object</code> field <code>lock</code> for synchronization</li> <li>usage — combination, filter streams as wrappers<div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">DataInputStream</span> din <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;employee.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>IO interfaces</p> <ul><li><code>java.io.Closeable</code> — idempotent variant with <code>IOException</code> compared to <code>AutoCloseable</code> with <code>Exception</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Closeable</span>
<span class="token keyword">extends</span> <span class="token class-name">AutoCloseable</span>
</code></pre></div><ul><li><code>close()</code> when already closed — no effect if already closed, whereas <code>AutoCloseable::close</code> may have side effects</li></ul></li> <li><code>java.io.Flushable</code> — write any buffered output to the underlying stream<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Flushable</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><code>Readable</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Readable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span><span class="token class-name">CharBuffer</span> cb<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><code>Appendable</code> — to which char sequences and values can be appended, must be implemented by any class whose instances are intended to receive formatted output from a <code>java.util.Formatter</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Appendable</span> <span class="token punctuation">{</span>
    <span class="token class-name">Appendable</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    <span class="token class-name">Appendable</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> csq<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    <span class="token class-name">Appendable</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> csq<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p><code>java.io.InputStream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li>lifecycle
<ul><li><code>int available()</code> — an estimate of the number of bytes that can be read (or skipped over) without blocking</li> <li><code>abstract int read()</code> — block if necessary, read next byte (0 ~ 255), <code>-1</code> if at end, used by some other methods so only one method to implementing when inheriting<br> <code>int read(byte[] b)</code><br> <code>int read(byte[] b, int off, int len)</code> — reads up to <code>len</code> bytes of data from the offset into byte buffer <code>b</code></li> <li><code>long skip(long n)</code> — returns the actual number of bytes skipped</li> <li><code>void close()</code></li></ul></li> <li>mark — the stream somehow remembers all the bytes read after the call to <code>mark</code> and stands ready to supply those same bytes again if and whenever the method <code>reset</code> is called, as long as within <code>readlimit</code> <ul><li><code>boolean markSupported()</code></li> <li><code>void mark(int readlimit)</code></li> <li><code>void reset()</code></li></ul></li> <li>read all to <code>String</code> — see <a href="https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java" target="_blank" rel="noopener noreferrer">stack overflow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">inputStreamToString</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> inputStream<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">ByteArrayOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    inputStream<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>bos<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> bos<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>public long transferTo(OutputStream out)</code> — since JDK 9<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span> out<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span> <span class="token string">&quot;out&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> transferred <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>DEFAULT_BUFFER_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 8192</span>
    <span class="token keyword">int</span> read<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>read <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> DEFAULT_BUFFER_SIZE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> read<span class="token punctuation">)</span><span class="token punctuation">;</span>
        transferred <span class="token operator">+=</span> read<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> transferred<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></li> <li><p><code>java.io.OutputStream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">OutputStream</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Closeable</span><span class="token punctuation">,</span> <span class="token class-name">Flushable</span>
</code></pre></div><ul><li><code>abstract void write(int b)</code> — block if necessary<br> <code>void write(byte[] b)</code><br> <code>void write(byte[] b, int off, int len)</code></li> <li><code>void flush()</code></li> <li><code>void close()</code> — automatically <code>flush()</code> before close</li></ul></li> <li><p><code>java.io.Reader</code> — see <code>InputStream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Reader</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Readable</span><span class="token punctuation">,</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li>lifecycle
<ul><li><code>boolean ready()</code></li> <li><code>abstract int read(char[] cbuf, int off, int len)</code> — 0 ~ 65535 or -1<br> <code>int read()</code><br> <code>int read(char[] cbuf)</code><br> <code>int read(CharBuffer target)</code></li> <li><code>long skip(long n)</code></li> <li><code>abstract void close()</code></li></ul></li> <li>mark
<ul><li><code>boolean markSupported()</code></li> <li><code>void mark(int readAheadLimit)</code></li> <li><code>void reset()</code></li></ul></li></ul></li> <li><p><code>java.io.Writer</code> — see <code>OutputStream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Writer</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Appendable</span><span class="token punctuation">,</span> <span class="token class-name">Closeable</span><span class="token punctuation">,</span> <span class="token class-name">Flushable</span>
</code></pre></div><ul><li><code>Writer append(char c)</code><br> <code>Writer append(CharSequence csq)</code><br> <code>Writer append(CharSequence csq, int start, int end)</code></li> <li><code>abstract void write(char[] cbuf, int off, int len)</code><br> <code>void write(char[] cbuf)</code><br> <code>void write(int c)</code><br> <code>void write(String str)</code><br> <code>void write(String str, int off, int len)</code></li> <li><code>abstract void flush()</code></li> <li><code>abstract void close()</code></li></ul></li> <li><p>convert stream to reader or writer, uses <code>Charset.defaultCharset()</code> if not specified</p> <ul><li><code>java.io.InputStreamReader</code> — used by <code>Scanner</code> behind the scenes<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InputStreamReader</span>
<span class="token keyword">extends</span> <span class="token class-name">Reader</span>
</code></pre></div><ul><li>constructors
<ul><li><code>InputStreamReader(InputStream in)</code></li> <li><code>InputStreamReader(InputStream in, Charset cs)</code></li> <li><code>InputStreamReader(InputStream in, CharsetDecoder dec)</code></li> <li><code>InputStreamReader(InputStream in, String charsetName)</code></li></ul></li> <li><code>String getEncoding()</code></li></ul></li> <li><code>java.io.OutputStreamWriter</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OutputStreamWriter</span>
<span class="token keyword">extends</span> <span class="token class-name">Writer</span>
</code></pre></div><ul><li>constructors
<ul><li><code>OutputStreamWriter(OutputStream out)</code></li> <li><code>OutputStreamWriter(OutputStream out, Charset cs)</code></li> <li><code>OutputStreamWriter(OutputStream out, CharsetEncoder enc)</code></li> <li><code>OutputStreamWriter(OutputStream out, String charsetName)</code></li></ul></li> <li><code>String getEncoding()</code></li></ul></li></ul></li></ol> <h3 id="Filter-Stream"><a href="#Filter-Stream" class="header-anchor">#</a> Filter Stream</h3> <ol><li><p>filter stream — contains some other stream, which it uses as its basic source or sink of data, possibly transforming the data along the way or providing additional functionality</p> <ul><li><code>java.io.FilterInputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">InputStream</span>
</code></pre></div><ul><li>constructor — <code>protected FilterInputStream(InputStream in)</code></li></ul></li> <li><code>java.io.FilterOutputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterOutputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">OutputStream</span>
</code></pre></div><ul><li>constructor — <code>FilterOutputStream(OutputStream out)</code></li></ul></li> <li><code>java.io.FilterReader</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FilterReader</span>
<span class="token keyword">extends</span> <span class="token class-name">Reader</span>
</code></pre></div></li> <li><code>java.io.FilterWriter</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FilterWriter</span>
<span class="token keyword">extends</span> <span class="token class-name">Writer</span>
</code></pre></div></li></ul></li> <li><p>buffer streams — the ability to buffer the input and to support the mark and reset methods</p> <ul><li><code>java.io.BufferedInputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterInputStream</span>
</code></pre></div><ul><li>constructors
<ul><li><code>BufferedInputStream(InputStream in)</code></li> <li><code>BufferedInputStream(InputStream in, int size)</code></li></ul></li></ul></li> <li><code>java.io.BufferedOutputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedOutputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterOutputStream</span>
</code></pre></div><ul><li>constructors
<ul><li><code>BufferedOutputStream(OutputStream out)</code></li> <li><code>BufferedOutputStream(OutputStream out, int size)</code></li></ul></li></ul></li> <li><code>java.io.BufferedReader</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedReader</span>
<span class="token keyword">extends</span> <span class="token class-name">Reader</span>
</code></pre></div></li> <li><code>java.io.BufferedWriter</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedWriter</span>
<span class="token keyword">extends</span> <span class="token class-name">Writer</span>
</code></pre></div></li></ul></li> <li><p>data input — conversion between bytes from a binary stream and Java data types, big endian</p> <ul><li><a href="https://docs.oracle.com/javase/8/docs/api/java/io/DataInput.html#modified-utf-8" target="_blank" rel="noopener noreferrer">modified UTF-8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> — UTF-8 encoded UTF-16</li> <li><code>java.io.DataInput</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DataInput</span>
</code></pre></div><ul><li><code>void readFully(byte[] b)</code></li> <li><code>void readFully(byte[] b, int off, int len)</code></li> <li><code>boolean readBoolean()</code></li> <li><code>byte readByte()</code></li> <li><code>char readChar()</code></li> <li><code>double readDouble()</code></li> <li><code>float readFloat()</code></li> <li><code>int readInt()</code></li> <li><code>String readLine()</code></li> <li><code>long readLong()</code></li> <li><code>short readShort()</code></li> <li><code>int readUnsignedByte()</code> — 0 ~ 255</li> <li><code>int readUnsignedShort()</code> — 0 ~ 65535</li> <li><code>String readUTF()</code> — modified UTF-8 encoded string</li> <li><code>int skipBytes(int n)</code></li></ul></li> <li><code>java.io.DataOutput</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DataOutput</span>
</code></pre></div></li> <li><code>java.io.DataInputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterInputStream</span>
<span class="token keyword">implements</span> <span class="token class-name">DataInput</span>
</code></pre></div><ul><li>constructor — <code>DataInputStream(InputStream in)</code></li></ul></li> <li><code>java.io.DataOutputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataOutputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterOutputStream</span>
<span class="token keyword">implements</span> <span class="token class-name">DataOutput</span>
</code></pre></div><ul><li>constructor — <code>DataOutputStream(OutputStream out)</code></li></ul></li></ul></li> <li><p>peek — push back stream</p> <ul><li><code>java.io.PushbackInputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PushbackInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterInputStream</span>
</code></pre></div><ul><li>constructors
<ul><li><code>PushbackInputStream(InputStream in)</code></li> <li><code>PushbackInputStream(InputStream in, int size)</code></li></ul></li> <li>push back
<ul><li><code>void unread(byte[] b)</code></li> <li><code>void unread(byte[] b, int off, int len)</code></li> <li><code>void unread(int b)</code></li></ul></li></ul></li> <li><code>java.io.PushbackReader</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PushbackReader</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterReader</span>
</code></pre></div></li></ul></li></ol> <h4 id="ZIP-Streams"><a href="#ZIP-Streams" class="header-anchor">#</a> ZIP Streams</h4> <ol><li><p>inflate and deflate</p> <ul><li><code>java.util.zip.InflaterInputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InflaterInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterInputStream</span>
</code></pre></div></li> <li><code>java.util.zip.DeflaterOutputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeflaterOutputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterOutputStream</span>
</code></pre></div></li></ul></li> <li><p>ZIP stream</p> <ul><li><code>java.util.zip.ZipInputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZipInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">InflaterInputStream</span>
</code></pre></div></li> <li><code>java.util.zip.ZipOutputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZipOutputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">DeflaterOutputStream</span>
</code></pre></div></li></ul></li> <li><p>ZIP file system — <code>FileSystems.newFileSystem(Paths.get(zipname), null)</code></p></li></ol> <h3 id="Print-Stream"><a href="#Print-Stream" class="header-anchor">#</a> Print Stream</h3> <ol><li><p>print streams — add the ability to print representations of various data values conveniently</p> <ul><li>never throws an <code>IOException</code> — only <code>checkError()</code></li> <li>auto flush — support auto flush, defaults to <code>false</code> <ul><li>for <code>PrintStream</code> — after a byte array is written, or a <code>\n</code> is written</li> <li>for <code>PrintWriter</code> — after the invoke of <code>println</code>, <code>printf</code>, or <code>format</code></li></ul></li> <li><code>printf</code> — <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#syntax" target="_blank" rel="noopener noreferrer">formats<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><code>java.io.PrintStream</code> — print into bytes</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintStream</span>
<span class="token keyword">extends</span> <span class="token class-name">FilterOutputStream</span>
<span class="token keyword">implements</span> <span class="token class-name">Appendable</span><span class="token punctuation">,</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li>constructors
<ul><li><code>PrintStream(File file)</code></li> <li><code>PrintStream(File file, String csn)</code></li> <li><code>PrintStream(OutputStream out)</code></li> <li><code>PrintStream(OutputStream out, boolean autoFlush)</code></li> <li><code>PrintStream(OutputStream out, boolean autoFlush, String encoding)</code></li> <li><code>PrintStream(String fileName)</code></li> <li><code>PrintStream(String fileName, String csn)</code></li></ul></li> <li><code>print</code> and <code>println</code> methods — <code>void</code>, supports primitive types, <code>char[]</code> and <code>Object</code></li> <li><code>printf</code> <ul><li><code>PrintStream printf(Locale l, String format, Object... args)</code></li> <li><code>PrintStream printf(String format, Object... args)</code></li></ul></li> <li><code>boolean checkError()</code></li></ul></li> <li><p><code>java.io.PrintWriter</code> — print into text (chars)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintWriter</span>
<span class="token keyword">extends</span> <span class="token class-name">Writer</span>
</code></pre></div><ul><li>constructors
<ul><li><code>PrintWriter(File file)</code></li> <li><code>PrintWriter(File file, String csn)</code></li> <li><code>PrintWriter(OutputStream out)</code></li> <li><code>PrintWriter(OutputStream out, boolean autoFlush)</code></li> <li><code>PrintWriter(String fileName)</code></li> <li><code>PrintWriter(String fileName, String csn)</code></li> <li><code>PrintWriter(Writer out)</code></li> <li><code>PrintWriter(Writer out, boolean autoFlush)</code></li></ul></li> <li>methods — see <code>PrintStream</code> <ul><li>difference — <code>PrintStream::write</code> methods allow <code>int</code> and <code>byte[]</code></li></ul></li></ul></li></ol> <h3 id="Other-Streams"><a href="#Other-Streams" class="header-anchor">#</a> Other Streams</h3> <ol><li>externally buffered streams — save the data in an internal buffer (byte array, etc.), no effect for <code>close()</code> and no <code>IOException</code> afterwards
<ul><li><code>java.io.ByteArrayInputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ByteArrayInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">InputStream</span>
</code></pre></div></li> <li><code>java.io.ByteArrayOutputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ByteArrayOutputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">OutputStream</span>
</code></pre></div></li> <li><code>java.io.StringReader</code> — read from <code>String</code>: <code>StringReader(String s)</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringReader</span>
<span class="token keyword">extends</span> <span class="token class-name">Reader</span>
</code></pre></div></li> <li><code>java.io.StringWriter</code> — uses <code>StringBuffer</code> as buffer<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringWriter</span>
<span class="token keyword">extends</span> <span class="token class-name">Writer</span>
</code></pre></div></li></ul></li></ol> <h3 id="Serialization"><a href="#Serialization" class="header-anchor">#</a> Serialization</h3> <ol><li><p><code>transient</code> — mark fields not part of the persistent state, which is skipped in serialization</p></li> <li><p><code>interface java.io.Serializable</code> — mark only data fields serializable, superclass data or any other class information not included</p> <ul><li>deserialize fields of classes not <code>Serializable</code> — initialized using the public or protected no-arg constructor</li> <li>serialize subclasses whose parents are not <code>Serializable</code> — serialize the super types only when they have accessible no-arg constructor</li> <li>serialization and deserialization control — override default read and write behavior, special handling during the serialization and deserialization, by implementing methods below<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">writeObject</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token class-name">ObjectOutputStream</span> out<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">readObject</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token class-name">ObjectInputStream</span> in<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">readObjectNoData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ObjectStreamException</span>
</code></pre></div></li> <li>version ID — used during deserialization to verify that the sender and receiver of a serialized object have loaded classes compatible with serialization, <code>InvalidClassException</code> if no match
<ul><li>declare explicitly<div class="language-java extra-class"><pre class="language-java"><code>MODIFIER <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">42L</span><span class="token punctuation">;</span> <span class="token comment">// private is recommended</span>
</code></pre></div></li> <li>generate by default, not recommended — the serialization runtime will calculate a default <code>serialVersionUID</code> value for that class based on various aspects of the class (fingerprint), which may vary depending on compiler implementations</li> <li>not applicable to array classes — cannot declare explicitly, and the requirement for matching <code>serialVersionUID</code> values is waived for array classes</li> <li>get version ID via CLI — <code>serialver ClassName</code></li> <li>auto conversion when version ID match — for data fields, skip when type is different, ignore additional, set absent to default</li></ul></li> <li>write or read with another object
<ul><li>when writing to stream — implement <code>writeReplace</code><div class="language-java extra-class"><pre class="language-java"><code>MODIFIER <span class="token class-name">Object</span> <span class="token function">writeReplace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ObjectStreamException</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>when reading from stream — implement <code>readResolve</code><div class="language-java extra-class"><pre class="language-java"><code>MODIFIER <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ObjectStreamException</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li>serial number — when serializing, associate the object a number in encounter order and save or read the object data when first encounter, only save the serial number or read the object reference when encountered afterwards</li> <li>file structure
<ul><li>magic number — <code>ACED</code></li> <li>version number of the object serialization format — <code>0005</code> for JDK 8</li> <li>object sequences
<ul><li>strings saved in modified UTF-8</li> <li>fingerprint stored in class — first 8 bytes of SHA</li></ul></li> <li>more</li></ul></li></ul></li> <li><p><code>java.io.Externalizable</code> — complete control over the format and contents of the stream for an object and its superclasses</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Externalizable</span>
<span class="token keyword">extends</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>taking precedence and mechanism — If the object supports <code>Externalizable</code>, the <code>writeExternal</code> method is called. If the object does not support <code>Externalizable</code> and does implement <code>Serializable</code>, the object is saved using <code>ObjectOutputStream</code></li> <li>no-arg constructor when reconstructing — when reading, creates an object with the no-argument constructor and then calls the <code>readExternal</code> method</li> <li>use another object — support <code>writeReplace</code> and <code>readResolve</code> methods</li> <li><code>void readExternal(ObjectInputStream in) throws IOException, ClassNotFoundException</code></li> <li><code>void writeExternal(ObjectOutputStream out) throws IOException</code></li></ul></li> <li><p>interfaces for object streams</p> <ul><li><code>interface java.io.ObjectStreamConstants</code> — Constants written into the Object Serialization Stream</li> <li><code>java.io.ObjectOutput</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ObjectOutput</span>
<span class="token keyword">extends</span> <span class="token class-name">DataOutput</span><span class="token punctuation">,</span> <span class="token class-name">AutoCloseable</span>
</code></pre></div><ul><li>inherited methods</li> <li><code>void flush()</code></li> <li><code>void writeObject(Object obj)</code></li></ul></li> <li><code>java.io.ObjectInput</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ObjectInput</span>
<span class="token keyword">extends</span> <span class="token class-name">DataInput</span><span class="token punctuation">,</span> <span class="token class-name">AutoCloseable</span>
</code></pre></div><ul><li>inherited methods</li> <li><code>int available()</code></li> <li><code>int read()</code><br> <code>int read(byte[] b)</code><br> <code>int read(byte[] b, int off, int len)</code></li> <li><code>Object readObject()</code></li> <li><code>long skip(long n)</code></li></ul></li></ul></li> <li><p><code>java.io.ObjectInputStream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">InputStream</span>
<span class="token keyword">implements</span> <span class="token class-name">ObjectInput</span><span class="token punctuation">,</span> <span class="token class-name">ObjectStreamConstants</span>
</code></pre></div><ul><li>constructor — <code>ObjectInputStream(InputStream in)</code></li> <li><code>void defaultReadObject()</code></li></ul></li> <li><p><code>java.io.ObjectOutputStream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectOutputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">OutputStream</span>
<span class="token keyword">implements</span> <span class="token class-name">ObjectOutput</span><span class="token punctuation">,</span> <span class="token class-name">ObjectStreamConstants</span>
</code></pre></div><ul><li>constructor — <code>ObjectOutputStream(OutputStream out)</code></li> <li><code>void defaultWriteObject()</code></li></ul></li></ol> <h3 id="Files"><a href="#Files" class="header-anchor">#</a> Files</h3> <h4 id="File-Classes"><a href="#File-Classes" class="header-anchor">#</a> File Classes</h4> <ol><li><p><code>java.io.File</code> — an abstract representation of file and directory pathnames, the old school way</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">File</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">,</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">File</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>separators — <code>System.getProperty(&quot;file.separator&quot;)</code>, <code>System.getProperty(&quot;path.separator&quot;)</code> <ul><li><code>static String separator</code></li> <li><code>static char separatorChar</code></li> <li><code>static String pathSeparator</code></li> <li><code>static char pathSeparatorChar</code></li></ul></li> <li>permissions
<ul><li><code>boolean canExecute()</code></li> <li><code>boolean canRead()</code></li> <li><code>boolean canWrite()</code></li> <li><code>boolean isHidden()</code></li> <li>`boolean setExecutable(boolean executable)</li> <li>`boolean setExecutable(boolean executable, boolean ownerOnly)</li> <li>`boolean setReadable(boolean readable)</li> <li>`boolean setReadable(boolean readable, boolean ownerOnly)</li> <li>`boolean setReadOnly()</li> <li>`boolean setWritable(boolean writable)</li> <li>`boolean setWritable(boolean writable, boolean ownerOnly)</li></ul></li> <li>inherited
<ul><li><code>int compareTo(File pathname)</code> — lexicographically</li></ul></li> <li>CRUD
<ul><li><code>static File createTempFile(String prefix, String suffix)</code></li> <li><code>static File createTempFile(String prefix, String suffix, File directory)</code></li> <li><code>boolean createNewFile()</code></li> <li><code>boolean mkdir()</code></li> <li><code>boolean mkdirs()</code></li> <li><code>boolean delete()</code></li> <li><code>void deleteOnExit()</code></li> <li><code>boolean exists()</code></li> <li><code>boolean renameTo(File dest)</code></li></ul></li> <li>metadata and list
<ul><li><code>boolean isDirectory()</code></li> <li><code>boolean isFile()</code></li> <li><code>long lastModified()</code></li> <li><code>boolean setLastModified(long time)</code></li> <li><code>long length()</code></li> <li><code>String[] list()</code><br> <code>String[] list(FilenameFilter filter)</code></li> <li><code>File[] listFiles()</code><br> <code>File[] listFiles(FileFilter filter)</code><br> <code>File[] listFiles(FilenameFilter filter)</code></li> <li><code>static File[] listRoots()</code></li></ul></li> <li>path
<ul><li><code>File getAbsoluteFile()</code></li> <li><code>String getAbsolutePath()</code></li> <li><code>File getCanonicalFile()</code></li> <li><code>String getCanonicalPath()</code></li> <li><code>String getName()</code></li> <li><code>String getParent()</code></li> <li><code>File getParentFile()</code></li> <li><code>String getPath()</code></li> <li><code>boolean isAbsolute()</code></li> <li><code>String toString()</code></li> <li><code>Path toPath()</code></li> <li><code>URI toURI()</code></li></ul></li> <li>space — the partition named by this abstract pathname
<ul><li><code>long getFreeSpace()</code></li> <li><code>long getTotalSpace()</code></li> <li><code>long getUsableSpace()</code></li></ul></li> <li>file filters
<ul><li><code>java.io.FilenameFilter</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">FilenameFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">File</span> dir<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><code>java.io.FileFilter</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">FileFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">File</span> pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><code>java.io.FileDescriptor</code> — used in file streams<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">FileDescriptor</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
``

</code></pre></div></li></ul></li> <li><p><code>java.nio.file.Path</code> — represents a system dependent file path, immutable</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Path</span>
<span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Watchable</span>
</code></pre></div><ul><li>creation
<ul><li><code>java.nio.file.Paths</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Paths</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li><code>static Path get(String first, String... more)</code> — join</li> <li><code>static Path get(URI uri)</code></li></ul></li> <li><code>File::toPath</code></li></ul></li> <li>components methods</li> <li>relative, absolute, real path methods</li> <li><code>File toFile()</code></li> <li><code>URI toUri()</code></li> <li>inherited methods</li> <li>example: three ways to <code>pwd</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCanonicalPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.dir&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p><code>java.nio.file.Files</code> — static methods take <code>Path</code> as arguments, operate its underlying files, usually atomically</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Files</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li>limit — some read / write methods are intended for text files of moderate length, use stream methods such as <code>newInputStream</code> for large or binary files</li> <li>glop pattern — extended syntax, extended <code>**</code>, see <a href="https://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#glob" target="_blank" rel="noopener noreferrer">File Operations (The Java™ Tutorials &gt; Essential Classes &gt; Basic I/O)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystem.html#getPathMatcher-java.lang.String-" target="_blank" rel="noopener noreferrer"><code>FileSystem::getPathMatcher</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>readAllBytes</code>, <code>readAllLines</code>, etc.</li></ul></li> <li><p>utility classes</p> <ul><li><code>java.nio.file.DirectoryStream</code> — an object to iterate over the entries in a directory, supports only a single <code>Iterator</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DirectoryStream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">extends</span> <span class="token class-name">Closeable</span><span class="token punctuation">,</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><code>java.nio.file.SimpleFileVisitor</code> — a simple visitor of files with default behavior to visit all files and to re-throw I/O errors<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleFileVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">FileVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>public interface java.nio.file.FileVisitor&lt;T&gt;</code></li> <li>prevent termination by exceptions — override <code>postVisitDirectory</code> to return <code>FileVisitResult.CONTINUE</code> and <code>visitFileFailed</code> to return <code>FileVisitResult.SKIP_SUBTREE</code></li></ul></li> <li><code>java.nio.file.PathMatcher</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PathMatcher</span>
</code></pre></div></li></ul></li> <li><p><code>java.nio.file.FileStore</code> — a storage pool, device, partition, volume, concrete file system or other implementation specific means of file storage</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FileStore</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div></li> <li><p><code>java.nio.file.FileSystem</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FileSystem</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li><code>abstract Path getPath(String first, String... more)</code></li> <li><code>abstract Iterable&lt;Path&gt; getRootDirectories()</code></li> <li><code>abstract boolean isOpen()</code></li> <li><code>abstract boolean isReadOnly()</code></li> <li><code>abstract Iterable&lt;FileStore&gt; getFileStores()</code></li> <li><code>abstract PathMatcher getPathMatcher(String syntaxAndPattern)</code></li> <li><code>abstract String getSeparator()</code></li> <li><code>abstract UserPrincipalLookupService getUserPrincipalLookupService()</code></li> <li><code>abstract WatchService newWatchService()</code></li> <li><code>abstract FileSystemProvider provider()</code></li> <li><code>abstract Set&lt;String&gt; supportedFileAttributeViews()</code></li> <li>creation — <code>FileSystems</code></li></ul></li> <li><p><code>java.nio.file.FileSystems</code> — factory methods for file systems</p> <ul><li>initialization — The first invocation of any of the methods defined by this class causes the default <code>FileSystemProvider</code> to be loaded. The default provider, identified by the URI scheme &quot;file&quot;, creates the <code>FileSystem</code> that provides access to the file systems accessible to the JVM</li> <li><code>static FileSystem getDefault()</code></li> <li><code>static FileSystem getFileSystem(URI uri)</code></li> <li><code>static FileSystem newFileSystem(Path path, ClassLoader loader)</code> — constructs a new <code>FileSystem</code> to access the contents of a file as a file system, supports ZIP files</li> <li><code>static FileSystem newFileSystem(URI uri, Map&lt;String,?&gt; env)</code></li> <li><code>static FileSystem newFileSystem(URI uri, Map&lt;String,?&gt; env, ClassLoader loader)</code></li></ul></li> <li><p><code>java.nio.file.spi.FileSystemProvider</code> — file system service provider, methods in <code>Files</code> under the hood</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FileSystemProvider</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div></li> <li><p><code>java.nio.channels.FileChannel</code> — reading, writing, mapping, locking, transferring and manipulating a file</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FileChannel</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractInterruptibleChannel</span>
<span class="token keyword">implements</span> <span class="token class-name">SeekableByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">GatheringByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">ScatteringByteChannel</span>
</code></pre></div><ul><li>creation
<ul><li><code>static FileChannel open(Path path, OpenOption... options)</code></li> <li><code>static FileChannel open(Path path, Set&lt;? extends OpenOption&gt; options, FileAttribute&lt;?&gt;... attrs)</code></li> <li><code>FileInputStream::getChannel</code>, <code>FileOutputStream::getChannel</code>, <code>RandomAccessFile::getChannel</code></li></ul></li> <li><code>abstract MappedByteBuffer map(FileChannel.MapMode mode, long position, long size)</code> — maps a region of this channel's file directly into memory, recommended only for large files</li> <li>lock — lock the given region of this channel's file
<ul><li><code>FileLock lock()</code> — blocks, equivalent to <code>lock(0L, Long.MAX_VALUE, false)</code><br> <code>abstract FileLock lock(long position, long size, boolean shared)</code></li> <li><code>FileLock tryLock()</code> — <code>null</code> if not available, equivalent to <code>tryLock(0L, Long.MAX_VALUE, false)</code><br> <code>abstract FileLock tryLock(long position, long size, boolean shared)</code></li></ul></li> <li>AIO — <code>java.nio.channels.AsynchronousFileChannel</code></li></ul></li> <li><p><code>java.nio.channels.FileLock</code> — a lock on a region of a file, on behalf of the JVM</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FileLock</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">AutoCloseable</span>
</code></pre></div><ul><li>region is fixed — the region stays fixed, the file can have uncovered portion or can grow beyond the region
<ul><li><code>boolean overlaps(long position, long size)</code></li> <li><code>long position()</code></li> <li><code>long size()</code></li></ul></li> <li>lock on behalf of the JVM — not for multithreading, but for multiprocessing</li> <li>shared lock — allow other programs to acquire overlapping shared locks while not allowing exclusive locks
<ul><li><code>shared</code> for read, exclusive for write — <code>true</code> to request a shared lock, in which case this channel must be open for reading (and possibly writing); <code>false</code> to request an exclusive lock, in which case this channel must be open for writing (and possibly reading)</li></ul></li> <li>OS dependent
<ul><li>lock support — On some systems, file locking is merely advisory</li> <li>shared support — a request for a shared lock is automatically converted into a request for an exclusive lock if not supported</li> <li>memory map support — on some systems, you cannot simultaneously lock a file and map it into memory</li> <li>avoid multiple channels on the same locked file — on some systems, closing a channel releases all locks on the underlying file</li> <li>avoid locking files on a networked file system</li></ul></li> <li><code>abstract void release()</code><br> <code>void close()</code></li></ul></li></ol> <h4 id="File-Options-and-Attributes"><a href="#File-Options-and-Attributes" class="header-anchor">#</a> File Options and Attributes</h4> <ol><li><p>options</p> <ul><li><code>interface java.nio.file.OpenOption</code> — mark interface</li> <li><code>interface java.nio.file.CopyOption</code> — mark interface</li> <li><code>java.nio.file.LinkOption.NOFOLLOW_LINKS</code> — Do not follow symbolic links<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">LinkOption</span> <span class="token keyword">extends</span> <span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LinkOption</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">OpenOption</span><span class="token punctuation">,</span> <span class="token class-name">CopyOption</span>
</code></pre></div></li> <li><code>java.nio.file.StandardOpenOption</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">StandardOpenOption</span> <span class="token keyword">extends</span> <span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StandardOpenOption</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">OpenOption</span>
</code></pre></div><ul><li><code>READ</code></li> <li><code>CREATE</code></li> <li><code>CREATE_NEW</code></li> <li><code>DELETE_ON_CLOSE</code></li> <li><code>SPARSE</code> — a hint to the file system that this file will be sparse</li> <li><code>SYNC</code>, <code>DSYNC</code></li> <li><code>WRITE</code></li> <li><code>APPEND</code></li> <li><code>TRUNCATE_EXISTING</code></li></ul></li> <li><code>java.nio.file.StandardCopyOption</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">StandardCopyOption</span> <span class="token keyword">extends</span> <span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StandardCopyOption</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">implements</span> <span class="token class-name">CopyOption</span>
</code></pre></div><ul><li><code>ATOMIC_MOVE</code></li> <li><code>COPY_ATTRIBUTES</code></li> <li><code>REPLACE_EXISTING</code></li></ul></li> <li><code>java.nio.file.FileVisitOption.FOLLOW_LINKS</code> — Follow symbolic links, neither <code>OpenOption</code> nor <code>CopyOption</code></li></ul></li> <li><p>file attributes — <code>java.nio.file.attribute</code></p> <ul><li><code>java.nio.file.attribute.UserPrincipal</code> — a Principal representing an identity used to determine access rights to objects in a file system<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserPrincipal</span> <span class="token keyword">extends</span> <span class="token class-name">Principal</span>
</code></pre></div></li> <li><code>interface java.nio.file.attribute.BasicFileAttributes</code> — basic file attributes, including times, file or dir or link, size, file key
<ul><li>file key — an object of some class, specific to the file system, that may or may not uniquely identify a file</li> <li>read attributes — <code>Files::readAttributes</code></li> <li>sub-interfaces
<ul><li><code>java.nio.file.attribute.DosFileAttributes</code></li> <li><code>java.nio.file.attribute.PosixFileAttributes</code></li></ul></li></ul></li> <li><code>java.nio.file.attribute.FileTime</code> — a file's time stamp attribute<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">FileTime</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FileTime</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ol> <h4 id="File-Stream"><a href="#File-Stream" class="header-anchor">#</a> File Stream</h4> <p>Use new classes in <code>java.nio</code> like <code>Files</code>, <code>Paths</code> instead when possible.</p> <ol><li><p>file streams</p> <ul><li><code>java.io.FileInputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileInputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">InputStream</span>
</code></pre></div><ul><li>constructors
<ul><li><code>FileInputStream(File file)</code></li> <li><code>FileInputStream(FileDescriptor fdObj)</code></li> <li><code>FileInputStream(String name)</code></li></ul></li> <li>methods beyond <code>InputStream</code> <ul><li><code>protected void finalize()</code> — ensures that the close method of this file input stream is called when there are no more references to it</li> <li><code>FileChannel getChannel()</code></li> <li><code>FileDescriptor getFD()</code></li></ul></li></ul></li> <li><code>java.io.FileOutputStream</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileOutputStream</span>
<span class="token keyword">extends</span> <span class="token class-name">OutputStream</span>
</code></pre></div><ul><li>constructors
<ul><li><code>FileOutputStream(File file)</code></li> <li><code>FileOutputStream(File file, boolean append)</code></li> <li><code>FileOutputStream(FileDescriptor fdObj)</code></li> <li><code>FileOutputStream(String name)</code></li> <li><code>FileOutputStream(String name, boolean append)</code></li></ul></li> <li>see <code>FileInputStream</code></li></ul></li> <li>print streams</li> <li><code>Scanner</code>, <code>BufferedReader</code></li> <li><code>java.io.RandomAccessFile</code> — both reading and writing to a random access file, which has a file pointer, suitable for small and moderate files<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomAccessFile</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">DataOutput</span><span class="token punctuation">,</span> <span class="token class-name">DataInput</span><span class="token punctuation">,</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li>mode — <code>&quot;r&quot;</code>, <code>&quot;rw&quot;</code>, <code>&quot;rws&quot;</code> (file content or metadata synchronized with storage), or <code>&quot;rwd&quot;</code> (only file content synchronized)</li> <li>constructors
<ul><li><code>RandomAccessFile(File file, String mode)</code></li> <li><code>RandomAccessFile(String name, String mode)</code></li></ul></li> <li>file info
<ul><li><code>FileChannel getChannel()</code></li> <li><code>FileDescriptor getFD()</code></li> <li><code>long length()</code></li></ul></li> <li>file pointer — cursor for read / write
<ul><li><code>long getFilePointer()</code></li> <li><code>void seek(long pos)</code> — Sets the file-pointer offset, measured from the beginning of this file, at which the next read or write occurs.</li> <li><code>void setLength(long newLength)</code></li> <li><code>int skipBytes(int n)</code></li></ul></li> <li>read
<ul><li><code>int read()</code></li> <li><code>int read(byte[] b)</code></li> <li><code>int read(byte[] b, int off, int len)</code></li> <li><code>DataInput</code> methods</li></ul></li> <li>write — <code>DataOutput</code> methods</li></ul></li></ul></li> <li><p>char based file streams — default encoding as <code>InputStreamReader</code>, <code>OutputStreamWriter</code></p> <ul><li><code>java.io.FileReader</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileReader</span>
<span class="token keyword">extends</span> <span class="token class-name">InputStreamReader</span>
</code></pre></div><ul><li>constructors
<ul><li><code>FileReader(File file)</code></li> <li><code>FileReader(FileDescriptor fd)</code></li> <li><code>FileReader(String fileName)</code></li></ul></li></ul></li> <li><code>java.io.FileWriter</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileWriter</span>
<span class="token keyword">extends</span> <span class="token class-name">OutputStreamWriter</span>
</code></pre></div><ul><li>constructors
<ul><li><code>FileWriter(File file)</code></li> <li><code>FileWriter(File file, boolean append)</code></li> <li><code>FileWriter(FileDescriptor fd)</code></li> <li><code>FileWriter(String fileName)</code></li> <li><code>FileWriter(String fileName, boolean append)</code></li></ul></li></ul></li> <li>print streams</li></ul></li></ol> <h2 id="NIO"><a href="#NIO" class="header-anchor">#</a> NIO</h2> <ol><li>file related — see <a href="#File-Classes">File Classes</a></li></ol> <h3 id="NIO-Buffers"><a href="#NIO-Buffers" class="header-anchor">#</a> NIO Buffers</h3> <ol><li><p><code>java.nio</code></p> <ul><li><code>ByteOrder</code></li> <li><code>Buffer</code> — a container for a fixed amount of data of a specific primitive type
<ul><li><code>ByteBuffer</code> — can be direct, can be mapped to memory, content can be heterogeneous or homogeneous, big-endian or little-endian
<ul><li><code>MappedByteBuffer</code></li></ul></li> <li><code>CharBuffer</code></li> <li><code>DoubleBuffer</code>, <code>FloatBuffer</code>, <code>IntBuffer</code>, <code>LongBuffer</code>, <code>ShortBuffer</code></li></ul></li> <li>runtime exceptions
<ul><li><code>java.nio.BufferOverflowException</code></li> <li><code>java.nio.BufferUnderflowException</code></li> <li><code>java.lang.IllegalStateException</code> <ul><li><code>java.nio.InvalidMarkException</code></li></ul></li> <li><code>java.lang.UnsupportedOperationException</code> <ul><li><code>java.nio.ReadOnlyBufferException</code></li></ul></li></ul></li></ul></li> <li><p><code>java.nio.ByteOrder</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">ByteOrder</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li><code>static ByteOrder BIG_ENDIAN</code></li> <li><code>static ByteOrder LITTLE_ENDIAN</code></li> <li><code>static ByteOrder nativeOrder()</code> — the native byte order of the underlying platform</li> <li>for buffers — <code>ByteBuffer::order</code></li></ul></li> <li><p><code>java.nio.Buffer</code> — finite sequence of elements, not thread-safe</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Buffer</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li>underlying array
<ul><li><code>abstract Object array()</code> — Returns the array that backs this buffer (optional operation)</li> <li><code>abstract int arrayOffset()</code> — Returns the offset within this buffer's backing array of the first element of the buffer (optional operation)</li> <li><code>abstract boolean hasArray()</code></li></ul></li> <li>indices
<ul><li><code>int capacity()</code></li> <li><code>int limit()</code> — the index of the first element that should not be read or written</li> <li><code>int position()</code> — the index of the next element to be read or written</li> <li>relative operations — from position</li> <li>absolute operations — from explicit index</li></ul></li> <li>change indices
<ul><li><code>Buffer clear()</code> — for <code>put</code> or related, sets the limit to the capacity and the position to zero</li> <li><code>Buffer flip()</code> — for <code>get</code> or related, sets the limit to the current position and then sets the position to zero</li> <li><code>Buffer rewind()</code> — for re-read, sets the position to zero</li> <li><code>Buffer limit(int newLimit)</code></li> <li><code>Buffer position(int newPosition)</code></li> <li>mark and reset
<ul><li><code>Buffer mark()</code> — set the current as the index to which its position will be set when <code>reset()</code>, otherwise <code>InvalidMarkException</code></li> <li><code>Buffer reset()</code></li></ul></li></ul></li> <li>remaining
<ul><li><code>int remaining()</code> — from position to limit</li> <li><code>boolean hasRemaining()</code></li></ul></li> <li>attributes
<ul><li><code>abstract boolean isDirect()</code></li> <li><code>abstract boolean isReadOnly()</code></li></ul></li></ul></li> <li><p><code>java.nio.ByteBuffer</code> — byte buffer with absolute and relative, bulk and not bulk <code>get</code> and <code>put</code>, not bulk <code>get</code> and <code>put</code> with other types, as well as views and other manipulating</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">ByteBuffer</span>
<span class="token keyword">extends</span> <span class="token class-name">Buffer</span>
<span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ByteBuffer</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>view buffers — another buffer whose content is backed by the byte buffer, changes on either one will be reflected on both</li> <li>get and put methods — content can be heterogeneous or homogeneous, big-endian or little-endian</li> <li>creation
<ul><li><code>static ByteBuffer allocate(int capacity)</code></li> <li><code>static ByteBuffer allocateDirect(int capacity)</code></li> <li><code>static ByteBuffer wrap(byte[] array)</code></li> <li><code>static ByteBuffer wrap(byte[] array, int offset, int length)</code></li></ul></li> <li>manipulate
<ul><li><code>abstract ByteBuffer compact()</code></li> <li><code>abstract ByteBuffer duplicate()</code></li> <li><code>abstract ByteBuffer slice()</code></li></ul></li> <li><code>java.nio.MappedByteBuffer</code> — a direct byte buffer whose content is a memory-mapped region of a file<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MappedByteBuffer</span>
<span class="token keyword">extends</span> <span class="token class-name">ByteBuffer</span>
</code></pre></div><ul><li><code>FileChannel::map</code></li></ul></li> <li>attributes
<ul><li>direct buffers
<ul><li>no intermediate buffer — JVM will attempt to avoid copying the buffer's content to (or from) an intermediate buffer before (or after) each invocation of one of the underlying operating system's native I/O operations</li> <li>higher overhead — have somewhat higher allocation and deallocation costs than non-direct buffers</li> <li>gc problems — the contents of direct buffers may reside outside of the normal garbage-collected heap</li> <li>usage — best to allocate direct buffers only when they yield a measurable gain in program performance</li> <li>creation — <code>ByteBuffer::allocateDirect</code>, <code>FileChannel::map</code>, view buffers on direct buffers</li></ul></li> <li><code>abstract boolean isDirect()</code></li> <li><code>abstract boolean isReadOnly()</code></li></ul></li></ul></li> <li><p><code>java.nio.CharBuffer</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CharBuffer</span>
<span class="token keyword">extends</span> <span class="token class-name">Buffer</span>
<span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CharBuffer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Appendable</span><span class="token punctuation">,</span> <span class="token class-name">CharSequence</span><span class="token punctuation">,</span> <span class="token class-name">Readable</span>
</code></pre></div></li> <li><p><code>java.nio.ShortBuffer</code>, <code>java.nio.LongBuffer</code>, <code>java.nio.IntBuffer</code>, <code>java.nio.FloatBuffer</code>, <code>java.nio.DoubleBuffer</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">DoubleBuffer</span>
<span class="token keyword">extends</span> <span class="token class-name">Buffer</span>
<span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DoubleBuffer</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="NIO-Channels"><a href="#NIO-Channels" class="header-anchor">#</a> NIO Channels</h3> <ol><li><p>exceptions in <code>java.nio.channels</code></p> <ul><li><code>IOException</code> <ul><li><code>java.nio.channels.ClosedChannelException</code> <ul><li><code>java.nio.channels.AsynchronousCloseException</code> <ul><li><code>java.nio.channels.ClosedByInterruptException</code></li></ul></li></ul></li> <li><code>java.nio.channels.FileLockInterruptionException</code></li> <li><code>java.nio.channels.InterruptedByTimeoutException</code></li></ul></li> <li><code>RuntimeException</code> <ul><li><code>IllegalArgumentException</code> — <code>java.nio.channels.IllegalChannelGroupException</code> - <code>java.nio.channels.IllegalSelectorException</code> - <code>java.nio.channels.UnresolvedAddressException</code> - <code>java.nio.channels.UnsupportedAddressTypeException</code></li> <li><code>IllegalStateException</code> — <code>java.nio.channels.AcceptPendingException</code> - <code>java.nio.channels.AlreadyBoundException</code> - <code>java.nio.channels.AlreadyConnectedException</code> - <code>java.nio.channels.CancelledKeyException</code> - <code>java.nio.channels.ClosedSelectorException</code> - <code>java.nio.channels.ConnectionPendingException</code> - <code>java.nio.channels.IllegalBlockingModeException</code> - <code>java.nio.channels.NoConnectionPendingException</code> - <code>java.nio.channels.NonReadableChannelException</code> - <code>java.nio.channels.NonWritableChannelException</code> - <code>java.nio.channels.NotYetBoundException</code> - <code>java.nio.channels.NotYetConnectedException</code> - <code>java.nio.channels.OverlappingFileLockException</code> - <code>java.nio.channels.ReadPendingException</code> - <code>java.nio.channels.ShutdownChannelGroupException</code> - <code>java.nio.channels.WritePendingException</code></li></ul></li></ul></li> <li><p>conversion between stream and channel — constructors of stream based classes and <code>java.nio.channels.Channels</code> methods</p> <ul><li>channel to stream
<ul><li><code>Scanner(ReadableByteChannel source)</code><br> <code>Scanner(ReadableByteChannel source, String charsetName)</code></li> <li><code>Channels::newOutputStream</code></li> <li>more</li></ul></li> <li>stream to channel
<ul><li><code>Channels::newChannel</code></li> <li><code>getChannel</code> methods in stream based classes</li></ul></li></ul></li> <li><p><code>java.nio.channels.Pipe</code> — a pair of channels that implements a unidirectional pipe</p></li></ol> <h4 id="Channel-Interfaces"><a href="#Channel-Interfaces" class="header-anchor">#</a> Channel Interfaces</h4> <ol><li><p><code>java.nio.channels</code></p> <ul><li><code>Channel</code> <ul><li>read and write channels</li> <li><code>AsynchronousChannel</code> — supports asynchronous I/O operations</li> <li><code>NetworkChannel</code> — to a network socket</li></ul></li> <li><code>Channels</code> — utility methods for channel/stream interoperation</li></ul></li> <li><p><code>java.nio.channels.Channel</code> — a nexus for I/O operations</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Channel</span> <span class="token keyword">extends</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li><code>void close()</code></li> <li><code>boolean isOpen()</code> — avoid <code>ClosedChannelException</code></li></ul></li> <li><p>read and write channels</p> <ul><li><code>java.nio.channels.ReadableByteChannel</code> — only one read operation upon a readable channel may be in progress at any given time
<ul><li><code>int read(ByteBuffer dst)</code> — read into given buffer</li> <li><code>java.nio.channels.ScatteringByteChannel</code> <ul><li><code>long read(ByteBuffer[] dsts)</code></li> <li><code>long read(ByteBuffer[] dsts, int offset, int length)</code></li></ul></li></ul></li> <li><code>java.nio.channels.WritableByteChannel</code> — only one write operation upon a writable channel may be in progress at any given time
<ul><li><code>int write(ByteBuffer src)</code></li> <li><code>java.nio.channels.GatheringByteChannel</code> — write version of <code>ScatteringByteChannel</code></li></ul></li> <li><code>java.nio.channels.ByteChannel</code> — read and write bytes<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ByteChannel</span>
<span class="token keyword">extends</span> <span class="token class-name">ReadableByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">WritableByteChannel</span>
</code></pre></div><ul><li><code>java.nio.channels.SeekableByteChannel</code> — a byte channel that maintains a current position and allows the position to be changed</li></ul></li> <li><code>java.nio.channels.InterruptibleChannel</code> — a channel that can be asynchronously closed and interrupted</li></ul></li> <li><p>network channels</p> <ul><li><code>java.nio.channels.NetworkChannel</code> — <code>NetworkChannel bind(SocketAddress local)</code> <ul><li><code>java.nio.channels.MulticastChannel</code> — a network channel that supports Internet Protocol (IP) multicasting</li></ul></li></ul></li> <li><p>async channels — <code>java.nio.channels.AsynchronousChannel</code></p> <ul><li><code>java.nio.channels.AsynchronousByteChannel</code> <ul><li>read
<ul><li><code>Future&lt;Integer&gt; read(ByteBuffer dst)</code></li> <li><code>&lt;A&gt; void read(ByteBuffer dst, A attachment, CompletionHandler&lt;Integer,? super A&gt; handler)</code></li></ul></li> <li>write
<ul><li><code>Future&lt;Integer&gt; write(ByteBuffer src)</code></li> <li><code>&lt;A&gt; void write(ByteBuffer src, A attachment, CompletionHandler&lt;Integer,? super A&gt; handler)</code></li></ul></li> <li><code>java.nio.channels.CompletionHandler</code> — callback when <code>completed</code> or <code>failed</code></li> <li><code>java.nio.channels.AsynchronousSocketChannel</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AsynchronousSocketChannel</span>
<span class="token keyword">implements</span> <span class="token class-name">AsynchronousByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">NetworkChannel</span>
</code></pre></div></li></ul></li> <li><code>java.nio.channels.AsynchronousServerSocketChannel</code><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AsynchronousServerSocketChannel</span>
<span class="token keyword">implements</span> <span class="token class-name">AsynchronousChannel</span><span class="token punctuation">,</span> <span class="token class-name">NetworkChannel</span>
</code></pre></div></li> <li><code>AsynchronousFileChannel</code></li></ul></li></ol> <h4 id="Selector"><a href="#Selector" class="header-anchor">#</a> Selector</h4> <ol><li><p><code>java.nio.channels.spi.AbstractInterruptibleChannel</code> — base implementation class for interruptible channels</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractInterruptibleChannel</span>
<span class="token keyword">implements</span> <span class="token class-name">Channel</span><span class="token punctuation">,</span> <span class="token class-name">InterruptibleChannel</span>
</code></pre></div></li> <li><p><code>java.nio.channels.SelectableChannel</code> — a channel that can be multiplexed via a <code>Selector</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">SelectableChannel</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractInterruptibleChannel</span>
<span class="token keyword">implements</span> <span class="token class-name">Channel</span>
</code></pre></div><ul><li>blocking mode or in non-blocking mode — defaults to blocking mode, must be placed into non-blocking mode before being registered and when registered
<ul><li><code>abstract SelectableChannel configureBlocking(boolean block)</code></li> <li><code>abstract boolean isBlocking()</code></li></ul></li> <li>register — one or more selectors, at most once for each
<ul><li><code>SelectionKey register(Selector sel, int ops)</code></li> <li><code>abstract SelectionKey register(Selector sel, int ops, Object att)</code></li> <li><code>abstract boolean isRegistered()</code></li> <li><code>abstract SelectionKey keyFor(Selector sel)</code></li> <li><code>abstract int validOps()</code></li></ul></li> <li>deregister — <code>SelectionKey::cancel</code>, <code>close()</code> or interrupted</li></ul></li> <li><p><code>java.nio.channels.Selector</code> — a multiplexer of <code>SelectableChannel</code> objects</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Selector</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li>creation
<ul><li><code>static Selector open()</code> — created by <code>SelectorProvider::openSelector</code></li> <li><code>abstract boolean isOpen()</code></li> <li><code>abstract SelectorProvider provider()</code></li></ul></li> <li>registration key sets
<ul><li><code>abstract Set&lt;SelectionKey&gt; keys()</code> — channel registrations</li> <li><code>abstract Set&lt;SelectionKey&gt; selectedKeys()</code> — keys such that each key's channel was detected to be ready for at least one of the operations identified in the key's interest set during a prior selection operation; keys are removed by the <code>Set</code> removal methods</li> <li>cancelled-key set — the set of keys that have been cancelled (<code>SelectableChannel::close</code> or <code>SelectionKey::cancel</code>) but whose channels have not yet been deregistered, not directly accessible; removed from the key set during selection operations</li></ul></li> <li>selection — during which keys may be added to and removed from a selector's selected-key set and may be removed from its key and cancelled-key sets
<ul><li>step
<ol><li>empty cancelled-key set, itself and from key set</li> <li>OS queried for an update as to the readiness of each remaining channel, if ready, add to selected-key set and its ready-operation set overwritten if newly add otherwise merged</li> <li>keys added to the cancelled-key set during the process are as step 1</li></ol></li> <li><code>abstract int select()</code> — blocking</li> <li><code>abstract int select(long timeout)</code></li> <li><code>abstract int selectNow()</code> — non-blocking, clears <code>wakeup()</code></li> <li><code>abstract Selector wakeup()</code> — blocked <code>select</code> will return immediately, or next <code>select</code> will return immediately if none currently; also invoked after <code>Thread::interrupt</code></li></ul></li> <li>concurrency — thread-safe, but not the key sets</li></ul></li> <li><p><code>java.nio.channels.SelectionKey</code> — a token representing the registration of a <code>SelectableChannel</code> with a <code>Selector</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">SelectionKey</span>
</code></pre></div><ul><li>operation bit vector, support depends on the underlying channel
<ul><li><code>static int OP_ACCEPT</code> — operation-set bit for socket-accept operations</li> <li><code>static int OP_CONNECT</code> — operation-set bit for socket-connect operations</li> <li><code>static int OP_READ</code></li> <li><code>static int OP_WRITE</code></li></ul></li> <li>cancel
<ul><li><code>abstract void cancel()</code></li> <li><code>abstract boolean isValid()</code></li></ul></li> <li><code>abstract int interestOps()</code> — the interest set, which operation categories will be tested for readiness
<ul><li><code>abstract SelectionKey interestOps(int ops)</code> — set to given value</li></ul></li> <li><code>abstract int readyOps()</code> — the ready set, the operation categories for which the key's channel has been detected to be ready by the key's selector
<ul><li><code>boolean isAcceptable()</code></li> <li><code>boolean isConnectable()</code></li> <li><code>boolean isReadable()</code></li> <li><code>boolean isWritable()</code></li></ul></li> <li>binding
<ul><li><code>abstract SelectableChannel channel()</code></li> <li><code>abstract Selector selector()</code></li></ul></li> <li>concurrency — thread-safe</li></ul></li> <li><p>Reactor 模型 — 一个线程 Thread 使用一个选择器 Selector 通过轮询的方式去监听多个通道 Channel 上的事件，从而让一个线程就可以处理多个事件</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    selector<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SelectionKey</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">selectedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SelectionKey</span><span class="token punctuation">&gt;</span></span> keyIterator <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>keyIterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SelectionKey</span> key <span class="token operator">=</span> keyIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">isAcceptable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ServerSocketChannel</span> ssChannel1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ServerSocketChannel</span><span class="token punctuation">)</span> key<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 服务器会为每个新连接创建一个 SocketChannel</span>
            <span class="token class-name">SocketChannel</span> sChannel <span class="token operator">=</span> ssChannel1<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sChannel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 这个新连接主要用于从客户端读取数据</span>
            sChannel<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token class-name">SelectionKey</span><span class="token punctuation">.</span>OP_READ<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">isReadable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">SocketChannel</span> sChannel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SocketChannel</span><span class="token punctuation">)</span> key<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">readDataFromSocketChannel</span><span class="token punctuation">(</span>sChannel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        keyIterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="Channel-Implementations"><a href="#Channel-Implementations" class="header-anchor">#</a> Channel Implementations</h4> <ol><li><p><code>FileChannel</code> — see <a href="#File-Classes">File Classes</a>, extends <code>AbstractInterruptibleChannel</code> but not <code>AbstractSelectableChannel</code></p></li> <li><p><code>java.nio.channels.SocketChannel</code> — like <code>Socket</code>, but a selectable channel</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">SocketChannel</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractSelectableChannel</span>
<span class="token keyword">implements</span> <span class="token class-name">ByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">ScatteringByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">GatheringByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">NetworkChannel</span>
</code></pre></div><ul><li>creation
<ul><li><code>static SocketChannel open()</code></li> <li><code>static SocketChannel open(SocketAddress remote)</code></li></ul></li></ul></li> <li><p><code>java.nio.channels.DatagramChannel</code> — like <code>DatagramSocket</code>, but a selectable channel</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">DatagramChannel</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractSelectableChannel</span>
<span class="token keyword">implements</span> <span class="token class-name">ByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">ScatteringByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">GatheringByteChannel</span><span class="token punctuation">,</span> <span class="token class-name">MulticastChannel</span>
</code></pre></div></li> <li><p><code>java.nio.channels.ServerSocketChannel</code> — like <code>ServerSocket</code>, but a selectable channel</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">ServerSocketChannel</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractSelectableChannel</span>
<span class="token keyword">implements</span> <span class="token class-name">NetworkChannel</span>
</code></pre></div></li> <li><p>more</p></li></ol> <h2 id="Network"><a href="#Network" class="header-anchor">#</a> Network</h2> <ol><li><p><code>java.net</code> — networking like working with files</p> <ul><li>low level API
<ul><li>addresses — <code>Inet4Address</code>, <code>Inet6Address</code>, <code>InetSocketAddress</code></li> <li>sockets
<ul><li><code>Socket</code> — a TCP client</li> <li><code>ServerSocket</code> — a TCP server</li> <li><code>DatagramSocket</code> — a UDP endpoint API and is used to send and receive <code>DatagramPacket</code> <ul><li><code>MulticastSocket</code> — a subclass of <code>DatagramSocket</code> used when dealing with multicast groups</li></ul></li></ul></li> <li>interfaces
<ul><li><code>NetworkInterface</code> — a network interface (e.g. ethernet connection or PPP endpoint) made up of a name, and a list of IP addresses assigned to this interface</li></ul></li></ul></li> <li>high level API
<ul><li>URI</li> <li>URL</li> <li>connections</li></ul></li></ul></li> <li><p>network exceptions</p> <ul><li><code>IOException</code> <ul><li><code>java.net.HttpRetryException</code></li> <li><code>java.io.InterruptedIOException</code> <ul><li><code>java.net.SocketTimeoutException</code></li></ul></li> <li><code>java.net.MalformedURLException</code></li> <li><code>java.net.ProtocolException</code></li> <li><code>java.net.SocketException</code> <ul><li><code>java.net.BindException</code></li> <li><code>java.net.ConnectException</code></li> <li><code>java.net.NoRouteToHostException</code></li> <li><code>java.net.PortUnreachableException</code></li></ul></li> <li><code>java.net.UnknownHostException</code> — <code>String host</code></li> <li><code>java.net.UnknownServiceException</code></li></ul></li> <li><code>java.net.URISyntaxException</code></li></ul></li></ol> <h3 id="Address"><a href="#Address" class="header-anchor">#</a> Address</h3> <ol><li><p><code>java.net.InetAddress</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InetAddress</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>address types — unicast, multicast</li> <li>IP address scope
<ul><li>Link-local addresses — designed to be used for addressing on a single link for purposes such as auto-address configuration, neighbor discovery, or when no routers are present.</li> <li>Site-local addresses — designed to be used for addressing inside of a site without the need for a global prefix.</li> <li>Global addresses — unique across the internet.</li></ul></li> <li>host name resolution — a combination of local configuration and network naming services such as, DNS and NIS</li> <li>caching — <code>InetAddress</code> stores successful as well as unsuccessful host name resolutions
<ul><li>property <code>networkaddress.cache.ttl</code> — TTL for successful name lookups</li> <li>property <code>networkaddress.cache.negative.ttl</code> — TTL for unsuccessful name lookups</li></ul></li> <li>creation
<ul><li><code>static InetAddress[] getAllByName(String host)</code></li> <li><code>static InetAddress getByAddress(byte[] addr)</code></li> <li><code>static InetAddress getByAddress(String host, byte[] addr)</code></li> <li><code>static InetAddress getByName(String host)</code></li> <li><code>static InetAddress getLocalHost()</code></li> <li><code>static InetAddress getLoopbackAddress()</code></li></ul></li></ul></li> <li><p><code>java.net.Inet4Address</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Inet4Address</span>
<span class="token keyword">extends</span> <span class="token class-name">InetAddress</span>
</code></pre></div></li> <li><p><code>java.net.Inet6Address</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Inet6Address</span>
<span class="token keyword">extends</span> <span class="token class-name">InetAddress</span>
</code></pre></div></li> <li><p><code>java.net.InetSocketAddress</code> — IP Socket Address (IP address + port number), can also be a pair (hostname + port number)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InetSocketAddress</span>
<span class="token keyword">extends</span> <span class="token class-name">SocketAddress</span>
</code></pre></div><ul><li>wildcard address — means &quot;any&quot; and can only be used for <code>bind</code> operations, created with <code>null</code> or omitted <code>InetAddress</code></li> <li><code>java.net.SocketAddress</code> — for extending<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">SocketAddress</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Serializable</span>
</code></pre></div></li></ul></li></ol> <h3 id="Sockets"><a href="#Sockets" class="header-anchor">#</a> Sockets</h3> <ol><li><p><code>java.net.SocketImplFactory</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">SocketImplFactory</span> <span class="token punctuation">{</span>
    <span class="token class-name">SocketImpl</span> <span class="token function">createSocketImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>java.net.SocketImpl</code> — a common superclass for socket implementations</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">SocketImpl</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">SocketOptions</span>
</code></pre></div></li> <li><p><code>interface java.net.SocketOptions</code> — socket options and get/set methods</p></li> <li><p><code>java.net.Socket</code> — TCP client</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Socket</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li>use — read/write is blocking and can not be interrupted
<ul><li><code>SocketChannel getChannel()</code> — a socket will have a channel iff the channel itself was created via the <code>SocketChannel::open</code> or <code>ServerSocketChannel::accept</code> methods</li> <li><code>InputStream getInputStream()</code></li> <li><code>OutputStream getOutputStream()</code></li></ul></li> <li>timeout
<ul><li><code>int getSoTimeout()</code></li> <li><code>void setSoTimeout(int timeout)</code></li></ul></li> <li>connect
<ul><li>blocking constructors</li> <li><code>void connect(SocketAddress endpoint)</code> — blocking and cannot be interrupted</li> <li><code>void connect(SocketAddress endpoint, int timeout)</code></li> <li><code>boolean isConnected()</code></li></ul></li> <li>half-close — one end of a socket connection to terminate its output while still receiving data from the other end
<ul><li><code>void shutdownInput()</code></li> <li><code>void shutdownOutput()</code></li> <li><code>boolean isInputShutdown()</code></li> <li><code>boolean isOutputShutdown()</code></li></ul></li> <li>implementation — defaults to an instance of package-visible class inheriting <code>SocketImpl</code> <ul><li><code>static void setSocketImplFactory(SocketImplFactory fac)</code></li></ul></li> <li>more</li></ul></li> <li><p><code>java.net.ServerSocket</code> — TCP server</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerSocket</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Closeable</span>
</code></pre></div><ul><li>similar methods in <code>Socket</code></li> <li><code>Socket accept()</code> — wait indefinitely until a client connects to that port and then return the connection as <code>Socket</code></li> <li><code>void setSoTimeout(int timeout)</code></li> <li>bind to local port
<ul><li>constructors</li> <li><code>void bind(SocketAddress endpoint)</code></li> <li><code>void bind(SocketAddress endpoint, int backlog)</code></li></ul></li></ul></li></ol> <h3 id="URI-and-URL"><a href="#URI-and-URL" class="header-anchor">#</a> URI and URL</h3> <ol><li><p><code>java.net.URI</code> — uniform resource identifiers, to parsing, stringify, componentize, and process</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> URI <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span>URI<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li><code>URL toURL()</code></li></ul></li> <li><p>encoder and decoder — for <code>application/x-www-form-urlencoded</code></p> <ul><li><code>java.net.URLEncoder</code> — <code>static String encode(String s, String enc)</code></li> <li><code>java.net.URLDecoder</code> — <code>static String decode(String s, String enc)</code></li></ul></li> <li><p><code>java.net.URLStreamHandler</code> — the common superclass for all stream protocol handlers, for making a connection for a particular protocol type</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">URLStreamHandler</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li>cache — automatically loaded when first encounter, and stored in a hash table</li> <li>protected methods for interacting with <code>URL</code> and open connection</li></ul></li> <li><p><code>java.net.URL</code> — uniform resource locators, can open connections (locate resource), a special kind of URI, which is not URN (uniform resource name); supports common protocols (schemas) and <code>jar:</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> URL <span class="token keyword">extends</span> <span class="token class-name">Object</span>
<span class="token keyword">implements</span> <span class="token class-name">Serializable</span>
</code></pre></div><ul><li>URL escaping — not handled, it is the responsibility of the caller to encode and decode, recommended to use <code>URI</code> to manage</li> <li>creation
<ul><li>constructors — take string URL, string URL components, or <code>URL</code>, and optionally <code>URLStreamHandler</code> as arguments</li></ul></li> <li>URL component get methods</li> <li>use
<ul><li><code>URLConnection openConnection()</code> — uses <code>URLStreamHandler::openConnection</code>, establishes connection only after <code>URLConnection::connect</code> or <code>URLConnection::getInputStream</code>, etc.</li> <li><code>URLConnection openConnection(Proxy proxy)</code></li> <li><code>InputStream openStream()</code> — <code>openConnection().getInputStream()</code></li> <li><code>Object getContent()</code> — <code>openConnection().getContent()</code>, see blow<br> <code>Object getContent(Class[] classes)</code></li></ul></li> <li>conversion
<ul><li><code>String toExternalForm()</code> — uses underlying <code>URLStreamHandler::toExternalForm</code></li> <li><code>String toString()</code></li> <li><code>URI toURI()</code></li></ul></li></ul></li> <li><p><code>java.net.URLConnection</code> — URL connection</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">URLConnection</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li>establish connections
<ul><li><code>abstract void connect()</code></li> <li>get methods</li></ul></li> <li>get methods — get settings and results, some will open connections implicitly
<ul><li><code>static void setContentHandlerFactory(ContentHandlerFactory fac)</code></li> <li><code>Object getContent()</code> — not very useful, <code>sun.net.www.content.&lt;contentType&gt;</code> is used if no custom content handler by <code>ContentHandlerFactory</code><br> <code>Object getContent(Class[] classes)</code> — <code>null</code> if all <code>Class::isInstance</code> fails</li> <li><code>InputStream getInputStream()</code></li> <li>more</li></ul></li> <li>set methods
<ul><li><code>void addRequestProperty(String key, String value)</code></li> <li><code>void setDoOutput(boolean dooutput)</code> — set <code>doOutput</code> (defaults to <code>false</code>) field to <code>true</code> to write to the URL connection
<ul><li><code>doInput</code> defaults to <code>true</code></li></ul></li> <li><code>OutputStream getOutputStream()</code></li> <li>set methods for applets only</li> <li>more</li></ul></li> <li><code>java.net.JarURLConnection</code> — use cast from <code>URLConnection</code> for creation, for URLs like <code>jar:&lt;url&gt;!/{entry}</code>, for example<div class="language- extra-class"><pre class="language-text"><code>jar:http://www.foo.com/bar/baz.jar!/COM/foo/Quux.class
jar:file:/home/duke/duke.jar!/
</code></pre></div></li> <li><code>java.net.HttpURLConnection</code> — use cast from <code>URLConnection</code> for creation<div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">HttpURLConnection</span>
<span class="token keyword">extends</span> <span class="token class-name">URLConnection</span>
</code></pre></div><ul><li><code>static int</code> HTTP status codes</li> <li><code>InputStream getErrorStream()</code> — 404 will throw <code>FileNotFoundException</code>, but response data can be also useful</li> <li>cookies — see <a href="#HTTP-Cookie">HTTP Cookie</a></li></ul></li></ul></li></ol> <h4 id="HTTP-Cookie"><a href="#HTTP-Cookie" class="header-anchor">#</a> HTTP Cookie</h4> <ol><li><p>hierarchy of HTTP cookie classes</p> <div class="language- extra-class"><pre class="language-text"><code>                 use
CookieHandler &lt;------- HttpURLConnection
      ^
      | impl
      |         use
CookieManager -------&gt; CookiePolicy
            |   use
            |--------&gt; HttpCookie
            |              ^
            |              | use
            |   use        |
            |--------&gt; CookieStore
                           ^
                           | impl
                           |
                 Internal in-memory implementation
</code></pre></div></li> <li><p><code>java.net.CookieHandler</code> — provides a callback mechanism to hook up a HTTP state management policy implementation into the HTTP protocol handler</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CookieHandler</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
</code></pre></div><ul><li><code>static void setDefault(CookieHandler cHandler)</code></li></ul></li> <li><p><code>java.net.CookieManager</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookieManager</span>
<span class="token keyword">extends</span> <span class="token class-name">CookieHandler</span>
</code></pre></div><ul><li>creation
<ul><li><code>CookieManager(CookieStore store, CookiePolicy cookiePolicy)</code> — <code>null</code> parameters means default value</li></ul></li></ul></li> <li><p><code>interface java.net.CookieStore</code> — store and retrieve cookies, and remove when expired</p></li> <li><p><code>interface java.net.CookiePolicy</code></p> <ul><li>predefined
<ul><li><code>static CookiePolicy ACCEPT_ALL</code></li> <li><code>static CookiePolicy ACCEPT_NONE</code></li> <li><code>static CookiePolicy ACCEPT_ORIGINAL_SERVER</code></li></ul></li> <li><code>boolean shouldAccept(URI uri, HttpCookie cookie)</code></li></ul></li> <li><p><code>java.net.HttpCookie</code> — key-value pair with information like <code>isHttpOnly()</code>, <code>getMaxAge()</code></p></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tangentyh/notes-of-tan/edit/master/docs/backend/java/javaIO.md" target="_blank" rel="noopener noreferrer">Edit This Page On GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/26/2020, 3:30:10 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="prev">
        Java Concurrency
      </a></span> <span class="next"><a href="/notes-of-tan/backend/java/javaMisc.html">
        Java Miscellanea
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div class="vuepress-eqn"></div><span class="vuepress-eq"></span></div></div>
    <script src="/notes-of-tan/assets/js/app.54becac1.js" defer></script><script src="/notes-of-tan/assets/js/2.33f31c9b.js" defer></script><script src="/notes-of-tan/assets/js/24.1ec9070f.js" defer></script>
  </body>
</html>
