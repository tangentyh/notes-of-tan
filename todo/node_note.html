<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Miscellanea | Notes of Tan</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="https://v1.vuepress.vuejs.org/hero.png">
    <meta name="description" content="Tan's notes.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/notes-of-tan/assets/css/0.styles.f8fd4e37.css" as="style"><link rel="preload" href="/notes-of-tan/assets/js/app.7f7a0f8e.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/2.33f31c9b.js" as="script"><link rel="preload" href="/notes-of-tan/assets/js/35.f39fc11f.js" as="script"><link rel="prefetch" href="/notes-of-tan/assets/js/10.8424b434.js"><link rel="prefetch" href="/notes-of-tan/assets/js/11.95d04f86.js"><link rel="prefetch" href="/notes-of-tan/assets/js/12.ef1d3621.js"><link rel="prefetch" href="/notes-of-tan/assets/js/13.a4adee88.js"><link rel="prefetch" href="/notes-of-tan/assets/js/14.c09755c2.js"><link rel="prefetch" href="/notes-of-tan/assets/js/15.bb96039e.js"><link rel="prefetch" href="/notes-of-tan/assets/js/16.45186f0f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/17.8f99a419.js"><link rel="prefetch" href="/notes-of-tan/assets/js/18.e1ed9c54.js"><link rel="prefetch" href="/notes-of-tan/assets/js/19.8b9c6341.js"><link rel="prefetch" href="/notes-of-tan/assets/js/20.9c61711f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/21.5ada412e.js"><link rel="prefetch" href="/notes-of-tan/assets/js/22.03a525b9.js"><link rel="prefetch" href="/notes-of-tan/assets/js/23.c9a64e75.js"><link rel="prefetch" href="/notes-of-tan/assets/js/24.d1810bb5.js"><link rel="prefetch" href="/notes-of-tan/assets/js/25.9aa43795.js"><link rel="prefetch" href="/notes-of-tan/assets/js/26.821df66a.js"><link rel="prefetch" href="/notes-of-tan/assets/js/27.04d884b9.js"><link rel="prefetch" href="/notes-of-tan/assets/js/28.5c34d3eb.js"><link rel="prefetch" href="/notes-of-tan/assets/js/29.0ce4a6af.js"><link rel="prefetch" href="/notes-of-tan/assets/js/3.f2118d7b.js"><link rel="prefetch" href="/notes-of-tan/assets/js/30.2c2a11bf.js"><link rel="prefetch" href="/notes-of-tan/assets/js/31.a7201012.js"><link rel="prefetch" href="/notes-of-tan/assets/js/32.c3b24f07.js"><link rel="prefetch" href="/notes-of-tan/assets/js/33.d9e9cccd.js"><link rel="prefetch" href="/notes-of-tan/assets/js/34.1a9ee54b.js"><link rel="prefetch" href="/notes-of-tan/assets/js/36.41441941.js"><link rel="prefetch" href="/notes-of-tan/assets/js/37.04556f78.js"><link rel="prefetch" href="/notes-of-tan/assets/js/4.e7403943.js"><link rel="prefetch" href="/notes-of-tan/assets/js/5.aa92cc60.js"><link rel="prefetch" href="/notes-of-tan/assets/js/6.af6b2951.js"><link rel="prefetch" href="/notes-of-tan/assets/js/7.1140570f.js"><link rel="prefetch" href="/notes-of-tan/assets/js/8.bd5a1ed5.js"><link rel="prefetch" href="/notes-of-tan/assets/js/9.98e24ffb.js">
    <link rel="stylesheet" href="/notes-of-tan/assets/css/0.styles.f8fd4e37.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes-of-tan/" class="home-link router-link-active"><!----> <span class="site-name">Notes of Tan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java Basics
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaUtils.html" class="nav-link">
  Java Utilities
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="nav-link">
  Java Concurrency
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaIO.html" class="nav-link">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaMisc.html" class="nav-link">
  Java Miscellanea
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/JVM.html" class="nav-link">
  Java Virtual Machine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SpringNotes.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/OS-Notes.html" class="nav-link">
  OS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/database.html" class="nav-link">
  Database
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SQL_notes.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/distributed.html" class="nav-link">
  Distributed System
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/redis-notes.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/CSS-notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/html-notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/jsNotes.html" class="nav-link">
  JS, TS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/BOM_DOM_notes.html" class="nav-link">
  BOM, DOM, Web API
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/react_notes.html" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/algo_notes.html" class="nav-link">
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/git_notes.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/DesignPatternNotes.html" class="nav-link">
  Design Pattern
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/HTTP.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/mac-notes.html" class="nav-link">
  MacOS
</a></li></ul></div></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaBasics.html" class="nav-link">
  Java Basics
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaUtils.html" class="nav-link">
  Java Utilities
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaConcurrency.html" class="nav-link">
  Java Concurrency
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaIO.html" class="nav-link">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/javaMisc.html" class="nav-link">
  Java Miscellanea
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/java/JVM.html" class="nav-link">
  Java Virtual Machine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SpringNotes.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/OS-Notes.html" class="nav-link">
  OS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/database.html" class="nav-link">
  Database
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/SQL_notes.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/distributed.html" class="nav-link">
  Distributed System
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/backend/redis-notes.html" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/CSS-notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/html-notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/jsNotes.html" class="nav-link">
  JS, TS
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/BOM_DOM_notes.html" class="nav-link">
  BOM, DOM, Web API
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/react_notes.html" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes-of-tan/algo_notes.html" class="nav-link">
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/git_notes.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/DesignPatternNotes.html" class="nav-link">
  Design Pattern
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/HTTP.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes-of-tan/todo/mac-notes.html" class="nav-link">
  MacOS
</a></li></ul></div></div> <a href="https://github.com/tangentyh/notes-of-tan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Miscellanea</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes-of-tan/todo/node_note.html#Cornerstone" class="sidebar-link">Cornerstone</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/todo/node_note.html#debug" class="sidebar-link">debug</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/todo/node_note.html#net" class="sidebar-link">net</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/todo/node_note.html#Runtime-service" class="sidebar-link">Runtime service</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/todo/node_note.html#System-and-OS" class="sidebar-link">System and OS</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/todo/node_note.html#Node-js-utilities" class="sidebar-link">Node.js utilities</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes-of-tan/todo/node_note.html#Koa" class="sidebar-link">Koa</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="Miscellanea"><a href="#Miscellanea" class="header-anchor">#</a> Miscellanea</h1> <ol><li><p>docs</p> <ul><li><a href="https://nodejs.org/en/docs/" target="_blank" rel="noopener noreferrer">official<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://nodejs.org/en/docs/guides/" target="_blank" rel="noopener noreferrer">guides<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>to learn</p> <ul><li><a href="https://github.com/nswbmw/node-in-debugging" target="_blank" rel="noopener noreferrer">nswbmw/node-in-debugging: 《Node.js 调试指南》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ol> <h1 id="Event-Loop"><a href="#Event-Loop" class="header-anchor">#</a> Event Loop</h1> <ol><li><a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick" target="_blank" rel="noopener noreferrer">official<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h1 id="Command-Line-Options"><a href="#Command-Line-Options" class="header-anchor">#</a> Command Line Options</h1> <ol><li><p>Synopsis</p> <div class="language-shell extra-class"><pre class="language-shell"><code>node <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>V8 options<span class="token punctuation">]</span> <span class="token punctuation">[</span>script.js <span class="token operator">|</span> -e <span class="token string">&quot;script&quot;</span> <span class="token operator">|</span> -<span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token punctuation">]</span> <span class="token punctuation">[</span>arguments<span class="token punctuation">]</span>
node debug <span class="token punctuation">[</span>script.js <span class="token operator">|</span> -e <span class="token string">&quot;script&quot;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>host<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span><span class="token punctuation">]</span> …
node --v8-options
node
</code></pre></div><ul><li>options
<ul><li><code>-v, --version</code></li> <li><code>-h, --help</code></li> <li><code>-e, --eval &quot;script&quot;</code> — Evaluate the following argument as JavaScript. The modules which are predefined in the REPL can also be used in script</li> <li><code>-p, --print &quot;script&quot;</code> — Identical to <code>-e</code> but prints the result</li> <li>more</li></ul></li></ul></li> <li><p>more on <a href="https://nodejs.org/dist/latest-v10.x/docs/api/cli.html" target="_blank" rel="noopener noreferrer">official<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ol> <h1 id="Modules"><a href="#Modules" class="header-anchor">#</a> Modules</h1> <h2 id="Cornerstone"><a href="#Cornerstone" class="header-anchor">#</a> Cornerstone</h2> <ol><li><p><code>buffer</code></p> <ul><li>enable interaction with octet streams in TCP streams, file system operations, and other contexts</li> <li>the <code>Buffer</code> class implements the <code>Uint8Array</code></li> <li>The <code>Buffer</code> class is a global within Node.js, no need for <code>require('buffer').Buffer</code></li> <li>Instances of the <code>Buffer</code> class are similar to arrays of integers but correspond to fixed-sized, raw memory allocations outside the V8 heap</li> <li>The size of the <code>Buffer</code> is established when it is created and cannot be resized</li> <li><code>buffer.Buffer</code> <ul><li><code>from(arrayBuffer: ArrayBuffer | SharedArrayBuffer, byteOffset?: number, length?: number): Buffer</code><br> <code>from(data: any[]): Buffer</code><br> <code>from(data: Uint8Array): Buffer</code><br> <code>from(str: string, encoding?: string): Buffer</code></li> <li><code>toString(encoding?: string, start?: number, end?: number): string</code> <ul><li>encoding — <code>'uft8'</code> (default), <code>'ascii'</code>, <code>'base64'</code>, <code>'binary'</code>, <code>'hex'</code>, more</li></ul></li></ul></li></ul></li> <li><p><code>string_decoder</code> — decoding <code>Buffer</code> with care to multi-byte UTF-8 and UTF-16 characters</p> <ul><li>constructor <code>string_decoder.StringDecoder(encoding?: string): NodeStringDecoder</code> <ul><li><code>encoding</code> defaults to <code>utf8</code></li></ul></li> <li><code>NodeStringDecoder.write(buffer: Buffer): string</code> — Returns a decoded string, ensuring that any incomplete multibyte characters at the end of the Buffer are omitted from the returned string and stored in an internal buffer for the next call to <code>write()</code> or <code>end()</code></li> <li><code>NodeStringDecoder.end(buffer?: Buffer): string</code> — Returns any remaining input stored in the internal buffer
<ul><li>if argument provided, one final call to <code>write()</code> is performed before returning the remaining input</li></ul></li></ul></li> <li><p><code>stream</code> — an abstract interface for working with streaming data</p> <ul><li>Object Mode
<ul><li>All streams created by Node.js APIs operate exclusively on strings and <code>Buffer</code> (or <code>Uint8Array</code>) objects</li> <li>stream implementations can work with other types of JavaScript values with the exception of <code>null</code></li></ul></li> <li>Buffering
<ul><li>get — <code>Writable._writableState.getBuffer()</code> or <code>Readable._readableState.buffer</code></li> <li>amount — determined by <code>Stream.highWaterMark: number</code>, defaults to a total number of bites</li> <li>buffering — Once the total size of the internal read buffer reaches the threshold specified by <code>highWaterMark</code>, the stream will temporarily stop reading data from the underlying resource until the data currently buffered can be consumed</li> <li>duplex — Duplex and Transform streams are both Readable and Writable, each maintain two separate internal buffers used for reading and writing</li></ul></li> <li>Writable Streams — <code>stream.Writeable</code> <ul><li>implementations (some are Duplex streams that implement the Writable interface)
<ul><li>HTTP requests, on the client</li> <li>HTTP responses, on the server</li> <li><code>fs</code> write streams</li> <li><code>zlib</code> streams</li> <li><code>crypto</code> streams</li> <li>TCP sockets</li> <li>child process stdin</li> <li><code>process.stdout</code>, <code>process.stderr</code></li></ul></li> <li><code>readonly</code> <ul><li><code>writableHighWaterMark: number</code></li> <li><code>writableLength: number</code></li></ul></li> <li>events
<ul><li><code>'close'</code> (not all will emit this event, such as <code>process.stderr</code>)</li> <li><code>'drain'</code> — If a call to <code>stream.write(chunk)</code> returns <code>false</code>, the <code>'drain'</code> event will be emitted when it is appropriate to resume writing data to the stream</li> <li><code>'finish'</code> — after the <code>stream.end()</code> method has been called, and all data has been flushed to the underlying system</li> <li><code>on(event: &quot;error&quot;, listener: (err: Error) =&gt; void): this</code> — an error occurred while writing or piping data (the stream is not closed)</li> <li><code>on(event: &quot;pipe&quot;, listener: (src: Readable) =&gt; void): this</code> — emitted when the <code>stream.pipe()</code> method is called on a readable stream, adding this writable to its set of destinations</li> <li><code>on(event: &quot;unpipe&quot;, listener: (src: Readable) =&gt; void): this</code> — emitted when the <code>stream.unpipe()</code> method is called on a Readable stream, removing this Writable from its set of destinations, also emitted in case this Writable stream emits an error when a Readable stream pipes into it</li></ul></li> <li><code>write(chunk: any, cb?: (error: Error | null | undefined) =&gt; void): boolean</code><br> <code>write(chunk: any, encoding?: string, cb?: (error: Error | null | undefined) =&gt; void): boolean</code> <ul><li>writes some data to the stream, and calls the supplied callback once the data has been fully handled</li> <li>If an error occurs, the callback may or may not be called with the error as its first argument. To reliably detect write errors, add a listener for the <code>'error'</code> event</li> <li>return <code>true</code> when the internal buffer is less than the <code>highWaterMark</code> after admitting</li> <li>If <code>false</code> is returned, further attempts to write data to the stream should stop until the <code>'drain'</code> event is emitted</li> <li>While calling <code>write()</code> on a stream that is not draining is allowed, Node.js will buffer all written chunks until maximum memory usage occurs, at which point it will abort unconditionally. Even before it aborts, high memory usage will cause poor garbage collector performance and high RSS (Resident set size)</li></ul></li> <li><code>setDefaultEncoding(encoding: string): this</code> <ul><li>in object mode will always ignore the <code>encoding</code> argument</li></ul></li> <li><code>end(cb?: () =&gt; void): void</code><br> <code>end(chunk: any, cb?: () =&gt; void): void</code><br> <code>end(chunk: any, encoding?: string, cb?: () =&gt; void): void</code> <ul><li>the optional callback function is attached as a listener for the <code>'finish'</code> event</li></ul></li> <li><code>cork(): void</code> — forces all written data to be buffered in memory, The buffered data will be flushed when <code>end()</code> or <code>uncork()</code></li> <li><code>uncork(): void</code> — flushes all data buffered since <code>stream.cork()</code> was called
<ul><li>it is recommended that calls to <code>uncork()</code> be deferred using <code>process.nextTick()</code>. Doing so allows batching of all <code>write()</code> calls that occur within a given Node.js event loop phase</li> <li>If the <code>cork()</code> method is called multiple times on a stream, the same number of calls to <code>uncork()</code> must be called to flush the buffered data</li></ul></li> <li><code>destroy(error?: Error): void</code> — Destroy the stream, and emit <code>'error'</code></li></ul></li> <li>Readable Streams — <code>stream.Readable</code> <ul><li>implementations
<ul><li>HTTP responses, on the client</li> <li>HTTP requests, on the server</li> <li><code>fs</code> read streams</li> <li><code>zlib</code> streams</li> <li><code>crypto</code> streams</li> <li>TCP sockets</li> <li>child process stdout and stderr</li> <li><code>process.stdin</code></li></ul></li> <li>two modes
<ul><li>flowing mode, data is read from the underlying system automatically and provided to an application as quickly as possible using events via the <code>EventEmitter</code> interface</li> <li>paused mode, the <code>stream.read()</code> method must be called explicitly to read chunks of data from the stream</li> <li>if in flowing mode and there are no consumers available to handle the data, that data will be lost</li> <li>switch to flowing mode
<ul><li>Adding a <code>'data'</code> event handler</li> <li>Calling the <code>stream.resume()</code> method</li> <li>Calling the <code>stream.pipe()</code> method to send the data to a Writable</li></ul></li> <li>switch to pause mode
<ul><li>If there are no pipe destinations, by calling the <code>stream.pause()</code> method</li> <li>If there are pipe destinations, by removing all pipe destinations. Multiple pipe destinations may be removed by calling the <code>stream.unpipe()</code> method</li> <li>removing <code>'data'</code> handler is no use for backwards compatibility</li></ul></li></ul></li> <li>three states
<ul><li><code>readable._readableState.flowing = null</code></li> <li><code>readable._readableState.flowing = false</code></li> <li><code>readable._readableState.flowing = true</code></li></ul></li> <li>use one — In general, developers should choose one of the methods of consuming data and should never use multiple methods to consume data from a single stream</li> <li><code>readonly</code> <ul><li><code>readableHighWaterMark: number</code></li> <li><code>readableLength: number</code></li></ul></li> <li>events
<ul><li><code>'close'</code></li> <li><code>on(event: &quot;data&quot;, listener: (chunk: any) =&gt; void): this</code> — emitted whenever the stream is relinquishing ownership of a chunk of data to a consumer</li> <li><code>'end'</code> — emitted when there is no more data to be consumed from the stream</li> <li><code>on(event: &quot;error&quot;, listener: (err: Error) =&gt; void): this</code></li> <li><code>'readable'</code> — emitted when there is data available to be read from the stream, or the end of the stream data has been reached (<code>read()</code> returns <code>null</code>) but before the <code>'end'</code> event is emitted</li></ul></li> <li><code>read(size?: number): any</code> <ul><li>If <code>size</code> bytes are not available to be read, <code>null</code> will be returned unless the stream has ended, in which case all of the data remaining in the internal buffer will be returned</li> <li>only be called on Readable streams operating in paused mode, called automatically in flowing mode</li> <li>if returns a chunk of data, a <code>'data'</code> event will also be emitted</li> <li>consider <code>readline</code> module</li></ul></li> <li><code>setEncoding(encoding: string): this</code> — Setting an encoding causes the stream data to be returned as <code>string</code>s of the specified encoding rather than as <code>Buffer</code> objects when not in object mode
<ul><li>will properly handle multi-byte characters</li></ul></li> <li><code>pause(): this</code> — cause a stream in flowing mode to stop emitting <code>'data'</code> events, switching out of flowing mode</li> <li><code>isPaused(): boolean</code></li> <li><code>resume(): this</code> — switch to flowing mode</li> <li><code>pipe&lt;T extends NodeJS.WritableStream&gt;(destination: T, options?: { end?: boolean; }): T</code> — switch automatically into flowing mode and push all of its data to the attached Writable
<ul><li><code>options.end</code> — defaults to <code>true</code>, whether end the writer when the reader ends (not <code>process.stderr</code> and <code>process.stdout</code>)</li> <li>if the Readable stream emits an error during processing, the Writable destination is not closed automatically</li> <li>possible to attach multiple Writable streams to a single Readable stream</li></ul></li> <li><code>unpipe(destination?: NodeJS.WritableStream): this</code> — detaches a Writable stream previously attached</li> <li><code>unshift(chunk: any): void</code> — pushes a chunk of data back into the internal buffer
<ul><li>cannot be called after the <code>'end'</code> event has been emitted or a runtime error will be thrown</li> <li>Developers using <code>stream.unshift()</code> often should consider switching to use of a Transform stream instead</li> <li>best to simply avoid calling while in the process of performing a read</li></ul></li> <li><code>destroy(error?: Error): void</code> — Destroy the stream, and emit <code>'error'</code></li> <li><code>push(chunk: any, encoding?: string): boolean</code> — for implementers</li> <li><code>[Symbol.asyncIterator](): AsyncIterableIterator&lt;any&gt;</code></li></ul></li> <li>Duplex and Transform Streams
<ul><li><code>stream.Duplex</code> — streams that implement both the Readable and Writable interfaces
<ul><li>TCP sockets</li> <li><code>zlib</code> streams</li> <li><code>crypto</code> streams</li></ul></li> <li><code>stream.Transform</code> — Duplex streams where the output is in some way related to the input (Operate on written data, then read the result)
<ul><li><code>zlib</code> streams</li> <li><code>crypto</code> streams</li></ul></li></ul></li> <li><code>stream.finished(stream: NodeJS.ReadableStream | NodeJS.WritableStream | NodeJS.ReadWriteStream, callback: (err?: NodeJS.ErrnoException) =&gt; void): () =&gt; void</code> — get notified when a stream is no longer readable, writable or has experienced an error or a premature close event
<ul><li>Especially useful in error handling scenarios where a stream is destroyed prematurely (like an aborted HTTP request), and will not emit <code>'end'</code> or <code>'finish'</code></li></ul></li> <li><code>stream.pipeline(...streams: Array&lt;NodeJS.ReadWriteStream | NodeJS.WritableStream&gt;, callback?: (err: NodeJS.ErrnoException) =&gt; void): NodeJS.WritableStream</code> — pipe between streams forwarding errors and properly cleaning up and provide a callback when the pipeline is complete
<ul><li>only the first stream can be <code>ReadableStream</code></li></ul></li></ul></li> <li><p><code>readline</code> — provides an interface for reading data from a <code>Readable</code> stream one line at a time</p> <ul><li>synchronous version<div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span> input<span class="token operator">:</span> process<span class="token punctuation">.</span>stdin <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">noerr_promisify</span><span class="token punctuation">(</span><span class="token parameter">fun<span class="token punctuation">,</span> <span class="token operator">...</span>defaults</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fun</span><span class="token punctuation">(</span><span class="token operator">...</span>defaults<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">,</span> <span class="token parameter">ans</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">noerr_promisify</span><span class="token punctuation">(</span>rl<span class="token punctuation">.</span><span class="token function">question</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>rl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">q</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">resolved: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>input<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">q</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rl<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p><code>events</code></p> <ul><li>intro — Much of the Node.js core API is built around an idiomatic asynchronous event-driven architecture in which certain kinds of objects (called &quot;emitters&quot;) periodically emit named events that cause Function objects (&quot;listeners&quot;) to be called</li> <li>Synchronous — all of the functions attached to a specific event are called synchronously when an event is emitted
<ul><li>switch to an asynchronous — <code>setImmediate()</code> or <code>process.nextTick()</code></li></ul></li> <li><code>EventEmitter</code> — All objects that emit events are instances of the <code>EventEmitter</code> class</li> <li>add a listener
<ul><li><code>EventEmitter.on(event: string | symbol, listener: (...args: any[]) =&gt; void): this</code> — allows one or more functions to be attached to named events emitted by the object
<ul><li>Any values returned by the called listeners are ignored and will be discarded</li> <li>alias — <code>EventEmitter.addListener()</code></li></ul></li> <li><code>EventEmitter.prependListener(event, listener): this</code> — add to the beginning of the listeners array</li> <li>disposable — <code>EventEmitter.once(event: string | symbol, listener: (...args: any[]) =&gt; void): this</code></li> <li>disposable and beginning — <code>EventEmitter.prependOnceListener(event, listener): this</code></li></ul></li> <li>remove a listener
<ul><li><code>EventEmitter.off(...): this</code> — alias of <code>EventEmitter.removeListener()</code></li> <li><code>EventEmitter.removeListener(event: string | symbol, listener: (...args: any[]) =&gt; void): this</code> — remove, at most, one instance of a listener from the listener array
<ul><li>need to remove multiple times if registered multiple times to completely remove</li></ul></li> <li><code>EventEmitter.removeAllListeners(event?: string | symbol): this</code> — Removes all listeners, or those of the specified</li></ul></li> <li>emit an event — <code>EventEmitter.emit(event: string | symbol, ...args: any[]): boolean</code> — allows an arbitrary set of arguments to be passed to the listener functions
<ul><li><code>function</code> callbacks — <code>this</code> is intentionally set to reference the <code>EventEmitter</code> to which the listener is attached</li> <li>array function callbacks — <code>this</code> is <code>{}</code> (to be verified)</li></ul></li> <li>listener event — All EventEmitters emit the event <code>'newListener'</code> when new listeners are added and <code>'removeListener'</code> when existing listeners are removed
<ul><li><code>'newListener'</code> — before a listener is added to its internal array of listeners</li> <li>The <code>'removeListener'</code> event is emitted after the listener is removed</li> <li>callback arg — <code>(eventName: string | symbol, listener: Function)</code></li></ul></li> <li>maximum number of listeners
<ul><li>not a hard limit. The <code>EventEmitter</code> instance will allow more listeners to be added but will output a trace warning to stderr indicating that a &quot;possible EventEmitter memory leak&quot; has been detected
<ul><li>The <code>--trace-warnings</code> command line flag can be used to display the stack trace for such warnings</li> <li>The emitted warning can be inspected with <code>process.on('warning')</code></li></ul></li> <li><code>EventEmitter.defaultMaxListeners</code> — default maximum number of events can be registered for any single event, defaults to 10</li> <li><code>EventEmitter.setMaxListeners(n: number): this</code> — set maximum number of events for individual <code>EventEmitter</code> instance</li> <li><code>EventEmitter.getMaxListeners(): number</code> — for individual instance</li></ul></li> <li>infomation about registered events
<ul><li><code>EventEmitter.eventNames(): Array&lt;string | symbol&gt;</code> — listing the events for which the emitter has registered listeners</li> <li><code>EventEmitter.listenerCount(type: string | symbol): number</code> — the number of listeners listening to a specific event</li> <li><code>EventEmitter.listeners(event: string | symbol): Function[]</code> — a copy of the array of listeners for a specific event</li> <li><code>EventEmitter.rawListeners(event: string | symbol): Function[]</code> — a copy of the array of listeners for the event named <code>eventName</code>, including any wrappers (such as those created by <code>.once()</code>)</li></ul></li></ul></li> <li><p>module system</p> <ul><li>each file is treated as a separate module</li> <li>Variables local to the module will be private, because the module is wrapped in a function<div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> __dirname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// Module code actually lives in here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>When a file is run directly from Node.js, <code>require.main === module</code> <ul><li>the entry point of the current application — <code>require.main.filename</code> (<code>__filename</code>)</li></ul></li> <li>extension — <code>.js</code>, <code>.json</code>, <code>.node</code> (binary)</li> <li>Folders as Modules
<ul><li><code>package.json</code> — <code>&quot;name&quot;</code> for package name, <code>&quot;main&quot;</code> for package entry point</li> <li><code>index.js</code> or <code>index.node</code> will be attempted to load without <code>package.json</code></li></ul></li> <li>module scope
<ul><li><code>__dirname</code> — <code>path.dirname(__filename)</code></li> <li><code>__filename</code> — absolute path of the current module file</li> <li><code>exports</code> — <code>module.exports</code> reference</li> <li><code>module</code> <ul><li><code>module.children</code> — The module objects required by this one</li> <li><code>module.filename</code></li> <li><code>module.id</code></li> <li><code>module.loaded</code></li> <li><code>module.parent</code></li> <li><code>module.paths</code> — The search paths for the module</li> <li><code>module.require()</code> — provides a way to load a module as if <code>require()</code> was called from the original module</li></ul></li> <li><code>require()</code></li> <li><code>require.cache</code> — Modules are cached in this object when they are required. By deleting a key value from this object, the next <code>require</code> will reload the module. Note that this does not apply to native addons, for which reloading will result in an Error</li> <li><code>require.resolve()</code> — resolve a module in a specified array of paths</li> <li><code>require.resolve.paths(request: string): string[]</code> — Returns an array containing the paths searched during resolution of <code>request</code> or <code>null</code> if the <code>request</code> string references a core module, for example <code>http</code> or <code>fs</code></li></ul></li> <li><code>require('module').builtinModules: string[]</code> — A list of the names of all modules provided by Node.js. Can be used to verify if a module is maintained by a third-party module or not</li></ul></li> <li><p>Global Objects</p> <ul><li>The following variables may appear to be global but are not. They exist only in the scope of modules
<ul><li><code>__dirname</code></li> <li><code>__filename</code></li> <li><code>exports</code></li> <li><code>module</code></li> <li><code>require()</code></li></ul></li> <li><code>Buffer</code>, <code>clearImmediate()</code>, <code>clearInterval()</code>, <code>clearTimeout()</code>, <code>console</code>, <code>process</code>, <code>setImmediate()</code>, <code>setInterval()</code>, <code>setTimeout()</code>, <code>URL</code>, <code>URLSearchParams</code></li> <li><code>global</code> — The global namespace object
<ul><li>The top-level scope is not the global scope</li> <li><code>var something</code> inside a Node.js module will be local to that module</li></ul></li></ul></li> <li><p>Timers — globals</p> <ul><li><code>setTimeout(callback: (...args: any[]) =&gt; void, ms: number, ...args: any[]): NodeJS.Timeout</code> — timers phase
<ul><li>Technically, the poll phase controls when timers are executed</li></ul></li> <li><code>setInterval(callback: (...args: any[]) =&gt; void, ms: number, ...args: any[]): NodeJS.Timeout</code> — timers phase</li> <li><code>NodeJS.Timeout</code> <ul><li><code>ref(): NodeJS.Timeout</code> — requests that the Node.js event loop not exit so long as the <code>Timeout</code> is active, done by default</li> <li><code>unref(): NodeJS.Timeout</code> — the active <code>Timeout</code> object will not require the Node.js event loop to remain active. If there is no other activity keeping the event loop running, the process may exit before the <code>Timeout</code> object's callback is invoked
<ul><li>creates an internal timer that will wake the Node.js event loop. Creating too many of these can adversely impact performance</li></ul></li> <li><code>refresh(): NodeJS.Timeout</code> — Sets the timer's start time to the current time, and reschedules the timer</li></ul></li> <li><code>setImmediate(callback: (...args: any[]) =&gt; void, ...args: any[]): NodeJS.Immediate</code> — execute once the pull phase completes (check phase)
<ul><li><code>process.nextTick()</code> — processed after the current operation completes, regardless of the current phase of the event loop</li> <li>can <code>ref()</code> and <code>unref()</code></li></ul></li> <li>Cancelling Timers — <code>clearTimeout(timeoutId: NodeJS.Timeout): void</code>, <code>clearInterval(intervalId: NodeJS.Timeout): void</code>, <code>clearImmediate(immediateId: NodeJS.Immediate): void</code> <ul><li>not possible to cancel timers that were created using the promisified variants</li></ul></li></ul></li></ol> <h2 id="debug"><a href="#debug" class="header-anchor">#</a> debug</h2> <ol><li><p><code>assert</code></p> <ul><li>use <code>const assert = require('assert').strict;</code> for strict mode — legacy mode without <code>.strict</code> is deprecated</li> <li><code>assert(value: any, message?: string, ...optionalParams: any[]): void</code> <ul><li>alias of <code>assert.ok()</code></li></ul></li></ul></li> <li><p><code>console</code> — as in browsers</p> <ul><li>A global <code>console</code> instance configured to write to <code>process.stdout</code> and <code>process.stderr</code></li> <li><code>console.Console</code> — class with methods can be used to write to any Node.js stream
<ul><li><code>const { Console } = require('console');</code> or <code>const { Console } = console;</code></li> <li>constructor: <code>Console(stdout: WriteableStream, stderr?: WriteableStream)</code></li> <li>logging</li></ul></li></ul></li> <li><p>Errors</p> <ul><li>types — standard JavaScript errors, system errors, user-defined errors, assertions</li> <li>all inherits global object <code>Error</code>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Class: System Error — typically generated at the syscall level, occur when an application violates an operating system constraint such as attempting to read a file that does not exist or when the user does not have sufficient permissions
<ul><li><code>error.code: string</code></li> <li><code>error.errno: number | string</code></li> <li><code>error.syscall: string</code></li> <li><code>error.path: string</code></li> <li><code>error.address: string</code></li> <li><code>error.port: string</code></li></ul></li></ul></li> <li><p><code>inspector</code> — for debug</p></li> <li><p>debugger</p> <ul><li>Inserting the statement <code>debugger;</code> into the source code of a script will enable a breakpoint at that position in the code</li> <li>debug commands — <code>help</code></li> <li>watchers command — <code>watch('my_expression')</code>, <code>unwatch('my_expression')</code></li></ul></li> <li><p><code>trace_event</code> — provides a mechanism to centralize tracing information generated by V8, Node core, and userspace code</p></li></ol> <h2 id="net"><a href="#net" class="header-anchor">#</a> net</h2> <ol><li><p><code>net</code> — creating stream-based TCP or IPC servers and clients</p> <ul><li><code>createServer(connectionListener?: (socket: Socket) =&gt; void): Server</code></li> <li><code>createServer(options?: { allowHalfOpen?: boolean, pauseOnConnect?: boolean }, connectionListener?: (socket: Socket) =&gt; void): Server</code></li> <li><code>net.Server</code> <ul><li>events
<ul><li><code>on(event: &quot;close&quot;, listener: () =&gt; void): this</code></li> <li><code>on(event: &quot;connection&quot;, listener: (socket: Socket) =&gt; void): this</code></li> <li><code>on(event: &quot;error&quot;, listener: (err: Error) =&gt; void): this</code></li> <li><code>on(event: &quot;listening&quot;, listener: () =&gt; void): this</code></li></ul></li> <li><code>listen(port?: number, hostname?: string, backlog?: number, listeningListener?: Function): this</code> — TCP server<br> <code>listen(path: string, backlog?: number, listeningListener?: Function): this</code> — IPC server<br> <code>listen(options: ListenOptions, listeningListener?: Function): this</code><br> <code>listen(handle: any, backlog?: number, listeningListener?: Function): this</code></li></ul></li> <li><code>createConnection(options: NetConnectOpts, connectionListener?: Function): Socket</code><br> <code>createConnection(port: number, host?: string, connectionListener?: Function): Socket</code><br> <code>createConnection(path: string, connectionListener?: Function): Socket</code> <ul><li>alias — <code>net.connect()</code></li> <li>equivalent — <code>(new net.Server(...)).connect(...)</code></li></ul></li> <li><code>net.Socket extends stream.Duplex</code> <ul><li>events
<ul><li><code>on(event: &quot;close&quot;, listener: (had_error: boolean) =&gt; void): this</code></li> <li><code>on(event: &quot;connect&quot;, listener: () =&gt; void): this</code></li> <li><code>on(event: &quot;data&quot;, listener: (data: Buffer) =&gt; void): this</code></li> <li><code>on(event: &quot;drain&quot;, listener: () =&gt; void): this</code></li> <li><code>on(event: &quot;end&quot;, listener: () =&gt; void): this</code></li> <li><code>on(event: &quot;error&quot;, listener: (err: Error) =&gt; void): this</code></li> <li><code>on(event: &quot;lookup&quot;, listener: (err: Error, address: string, family: string | number, host: string) =&gt; void): this</code></li> <li><code>on(event: &quot;timeout&quot;, listener: () =&gt; void): this</code></li></ul></li> <li><code>readonly bufferSize: number</code></li> <li><code>readonly bytesRead: number</code></li> <li><code>readonly bytesWritten: number</code></li> <li><code>readonly connecting: boolean</code></li> <li><code>readonly destroyed: boolean</code></li> <li><code>readonly localAddress: string</code></li> <li><code>readonly localPort: number</code></li> <li><code>readonly remoteAddress?: string</code></li> <li><code>readonly remoteFamily?: string</code></li> <li><code>readonly remotePort?: number</code></li></ul></li></ul></li> <li><p><code>http</code></p> <ul><li>The interface is careful to never buffer entire requests or responses — the user is able to stream data</li> <li>Keys are lowercased</li> <li><code>http.METHODS: string[]</code> — A list of the HTTP methods that are supported by the parser</li> <li><code>http.STATUS_CODES: { [errorCode: number]: string | undefined; [errorCode: string]: string | undefined; }</code> — <code>http.STATUS_CODES[404] === 'Not Found'</code></li> <li><code>http.createServer(requestListener?: (request: IncomingMessage, response: ServerResponse) =&gt; void): Server</code><br> <code>http.createServer(options: ServerOptions, requestListener?: (req: http.IncomingMessage, res: http.ServerResponse) =&gt; void): Server</code> <ul><li>the <code>requestListener</code> is registered to the <code>'request'</code> event</li> <li><code>ServerOptions</code> for extend <code>res</code> and <code>req</code></li></ul></li> <li><code>class Server extends net.Server</code> <ul><li><code>setTimeout(msecs?: number, callback?: () =&gt; void): this</code><br> <code>setTimeout(callback: () =&gt; void): this</code> — Sets the timeout value for sockets</li> <li><code>maxHeadersCount: number</code></li> <li><code>timeout: number</code></li> <li><code>keepAliveTimeout: number</code></li></ul></li> <li><code>class ServerResponse extends OutgoingMessage</code> <ul><li><code>statusCode: number</code></li> <li><code>statusMessage: string</code></li> <li><code>assignSocket(socket: net.Socket): void</code></li> <li><code>detachSocket(socket: net.Socket): void</code></li> <li><code>writeContinue(callback?: () =&gt; void): void</code></li> <li><code>writeHead(statusCode: number, headers?: OutgoingHttpHeaders): void</code><br> <code>writeHead(statusCode: number, reasonPhrase?: string, headers?: OutgoingHttpHeaders): void</code></li></ul></li> <li><code>OutgoingMessage extends stream.Writable</code> <ul><li><code>upgrading: boolean</code></li> <li><code>chunkedEncoding: boolean</code></li> <li><code>shouldKeepAlive: boolean</code></li> <li><code>useChunkedEncodingByDefault: boolean</code></li> <li><code>sendDate: boolean</code></li> <li><code>finished: boolean</code></li> <li><code>headersSent: boolean</code></li> <li><code>connection: net.Socket</code></li> <li><code>setTimeout(msecs: number, callback?: () =&gt; void): this</code></li> <li><code>setHeader(name: string, value: number | string | string[]): void</code></li> <li><code>getHeader(name: string): number | string | string[] | undefined</code></li> <li><code>getHeaders(): OutgoingHttpHeaders</code></li> <li><code>getHeaderNames(): string[]</code></li> <li><code>hasHeader(name: string): boolean</code></li> <li><code>removeHeader(name: string): void</code></li> <li><code>addTrailers(headers: OutgoingHttpHeaders | Array&lt;[string, string]&gt;): void</code></li> <li><code>flushHeaders(): void</code></li></ul></li> <li><code>class IncomingMessage extends stream.Readable</code> <ul><li><code>httpVersion: string</code></li> <li><code>httpVersionMajor: number</code></li> <li><code>httpVersionMinor: number</code></li> <li><code>connection: net.Socket</code></li> <li><code>headers: IncomingHttpHeaders</code> — <code>{[header: string]: string | string[] | undefined}</code></li> <li><code>rawHeaders: string[]</code></li> <li><code>trailers: { [key: string]: string | undefined }</code></li> <li><code>rawTrailers: string[]</code></li> <li><code>method?: string</code></li> <li><code>url?: string</code></li> <li><code>statusCode?: number</code></li> <li><code>statusMessage?: string</code></li> <li><code>socket: net.Socket</code></li> <li>more</li></ul></li> <li><code>http.request(options: RequestOptions | string | URL, callback?: (res: IncomingMessage) =&gt; void): ClientRequest</code><br> <code>http.request(url: string | URL, options: RequestOptions, callback?: (res: IncomingMessage) =&gt; void): ClientRequest</code> — HTTP requests from the client agent</li> <li><code>http.get(options: RequestOptions | string | URL, callback?: (res: IncomingMessage) =&gt; void): ClientRequest</code><br> <code>http.get(url: string | URL, options: RequestOptions, callback?: (res: IncomingMessage) =&gt; void): ClientRequest</code> — sets the method to GET and calls <code>req.end()</code> automatically, Since most requests are GET requests without bodies</li> <li><code>let globalAgent: Agent</code></li> <li><code>class http.Agent</code> — managing connection persistence and reuse for HTTP clients
<ul><li>maintains a pool of connection sockets, provide <code>{agent: false}</code> to use a new agent for request</li> <li>tbc</li></ul></li> <li><code>class http.ClientRequest</code> — represents an in-progress request whose header has already been queue, return by <code>http.request()</code>, <code>http.get()</code></li> <li><code>interface RequestOptions extends ClientRequestArgs { }</code><div class="language-TypeScript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ClientRequestArgs</span> <span class="token punctuation">{</span>
    protocol<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    host<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    hostname<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    family<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    port<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    defaultPort<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    localAddress<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    socketPath<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    method<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    path<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    headers<span class="token operator">?</span><span class="token operator">:</span> OutgoingHttpHeaders<span class="token punctuation">;</span>
    auth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    agent<span class="token operator">?</span><span class="token operator">:</span> Agent <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    _defaultAgent<span class="token operator">?</span><span class="token operator">:</span> Agent<span class="token punctuation">;</span>
    timeout<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// https://github.com/nodejs/node/blob/master/lib/_http_client.js#L278</span>
    createConnection<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> ClientRequestArgs<span class="token punctuation">,</span> <span class="token function-variable function">oncreate</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> Error<span class="token punctuation">,</span> socket<span class="token operator">:</span> net<span class="token punctuation">.</span>Socket<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> net<span class="token punctuation">.</span>Socket<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p><code>http2</code> — tbc</p></li> <li><p><code>dgram</code> — an implementation of UDP Datagram sockets</p> <ul><li><code>createSocket(type: &quot;udp4&quot; | &quot;udp6&quot;, callback?: (msg: Buffer, rinfo: RemoteInfo) =&gt; void): Socket</code></li> <li><code>createSocket(options: SocketOptions, callback?: (msg: Buffer, rinfo: RemoteInfo) =&gt; void): Socket</code></li> <li><code>dgram.Socket</code> <ul><li>events
<ul><li><code>on(event: &quot;close&quot;, listener: () =&gt; void): this</code></li> <li><code>on(event: &quot;error&quot;, listener: (err: Error) =&gt; void): this</code></li> <li><code>on(event: &quot;listening&quot;, listener: () =&gt; void): this</code></li> <li><code>on(event: &quot;message&quot;, listener: (msg: Buffer, rinfo: AddressInfo) =&gt; void): this</code></li></ul></li> <li><code>send(msg: Buffer | string | Uint8Array | any[], port: number, address?: string, callback?: (error: Error | null, bytes: number) =&gt; void): void</code><br> <code>send(msg: Buffer | string | Uint8Array, offset: number, length: number, port, address?, callback?): void</code></li> <li><code>bind(...): void</code> — listen for datagram messages on a named port and optional address</li></ul></li></ul></li> <li><p><code>dns</code></p> <ul><li><code>dns.lookup(hostname: string, options?, callback)</code> — use the underlying operating system facilities to perform name resolution
<ul><li>connect to an actual DNS server to perform name resolution, and that always use the network to perform DNS queries</li></ul></li> <li><code>dns.resolve(hostname: string, callback: (err: NodeJS.ErrnoException, addresses: string[]) =&gt; void): void</code> — Uses the DNS protocol to resolve a hostname into an array of the resource records</li></ul></li> <li><p><code>https</code> — similar to <code>http</code></p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'test/fixtures/keys/agent2-key.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'test/fixtures/keys/agent2-cert.pem'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
https<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'hello world\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">443</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Binding to any port less than 1024 requires root privilege</span>
</code></pre></div><ul><li><code>https.Server</code> — a subclass of <code>tls.Server</code> and emits events same as <code>http.Server</code></li></ul></li> <li><p><code>crypto</code> — provides cryptographic functionality that includes a set of wrappers for OpenSSL's hash, HMAC, cipher, decipher, sign, and verify functions</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> salt <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> salted <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">'sha512'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>salt <span class="token operator">+</span> password<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>crypto.getHashes(): string[]</code></li> <li><code>createHash(algorithm: string, options?: stream.TransformOptions): Hash</code></li> <li><code>Hash extends NodeJS.ReadWriteStream</code> <ul><li><code>update(data: string | Buffer | NodeJS.TypedArray | DataView): Hash</code><br> <code>update(data: string, input_encoding: Utf8AsciiLatin1Encoding): Hash</code></li> <li><code>digest(): Buffer</code><br> <code>digest(encoding: HexBase64Latin1Encoding): string</code> — The <code>Hash</code> object can not be used again</li></ul></li></ul></li> <li><p><code>tls</code> — an implementation of the Transport Layer Security (TLS) and Secure Socket Layer (SSL) protocols that is built on top of OpenSSL</p> <ul><li>self-signed certificate — <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Lets Encrypt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="/notes-of-tan/todo/SSL.html">SSL.md</a>, OpenSSL</li></ul></li> <li><p><code>zlib</code> — provides compression functionality implemented using Gzip and Deflate/Inflate</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> compress <span class="token operator">=</span> zlib<span class="token punctuation">.</span><span class="token function">createDeflate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// also zlib.createGzip();</span>
fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>compress<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>more</li></ul></li> <li><p><code>querystring</code> — similar to <code>URLSearchParams</code> in browsers but more general as it allows the customization of delimiter</p> <ul><li><code>stringify(obj?: {}, sep?: string, eq?: string, options?: StringifyOptions): string</code> — produces a URL query string from a given obj by iterating through the object's &quot;own properties&quot;</li> <li><code>parse(str: string, sep?: string, eq?: string, options?: ParseOptions): ParsedUrlQuery</code> —  parses a URL query string (<code>str</code>) into a collection of key and value pairs
<ul><li><code>interface ParsedUrlQuery { [key: string]: string | string[]; }</code></li></ul></li> <li><code>escape(str: string): string</code> — default <code>StringifyOptions.encodeURIComponent</code></li> <li><code>unescape(str: string): string</code> — default <code>ParseOptions.decodeURIComponent</code></li> <li><code>sp</code>: <code>&amp;</code>, <code>eq</code>: <code>=</code></li> <li><code>interface StringifyOptions { encodeURIComponent?: Function; }</code></li> <li><code>interface ParseOptions { maxKeys?: number; decodeURIComponent?: Function; }</code></li></ul></li> <li><p><code>url</code> — <code>url.URL</code> and <code>url.URLSearchParams</code> is similar to that in browsers</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;  https:   //    user   :   pass   @ sub.host.com : 8080   /p/a/t/h  ?  query=string   #hash &quot;
│          │  │          │          │   hostname   │ port │          │                │       │
│          │  │          │          ├──────────────┴──────┤          │                │       │
│ protocol │  │ username │ password │        host         │          │                │       │
├──────────┴──┼──────────┴──────────┼─────────────────────┤          │                │       │
│   origin    │                     │       origin        │ pathname │     search     │ hash  │
├─────────────┴─────────────────────┴─────────────────────┴──────────┴────────────────┴───────┤
│                                            href                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
(all spaces in the &quot;&quot; line should be ignored — they are purely for formatting)
</code></pre></div><ul><li><code>url.format(URL: URL, options?: URLFormatOptions): string</code> — a customizable serialization of a URL String representation of a WHATWG URL object</li> <li><code>url.domainToASCII(domain: string): string</code> — Returns the Punycode ASCII serialization of the domain. If domain is an invalid domain, the empty string is returned</li> <li><code>url.domainToUnicode(domain: string): string</code> — Returns the Unicode serialization of the domain. If domain is an invalid domain, the empty string is returned</li> <li><code>url.URL</code> — added to global since v10
<ul><li><code>constructor(input: string, base?: string | URL)</code> — Creates a new <code>URL</code> object by parsing the <code>input</code> relative to the <code>base</code></li> <li><code>protocol: string</code></li> <li><code>readonly origin: string</code></li> <li><code>username: string</code></li> <li><code>password: string</code></li> <li><code>host: string</code></li> <li><code>hostname: string</code></li> <li><code>port: string</code></li> <li><code>pathname: string</code></li> <li><code>search: string</code> — Gets and sets the serialized query portion of the URL, will be percent-encoded</li> <li><code>hash: string</code></li> <li><code>readonly searchParams: URLSearchParams</code> — the query parameters of the URL</li> <li><code>href: string</code> — equivalent to <code>URL.toString()</code> and <code>URL.toJSON()</code></li> <li><code>toString(): string</code> — equivalent to that of <code>URL.href</code> and <code>URL.toJSON()</code></li> <li><code>toJSON(): string</code> — equivalent to that of <code>URL.href</code> and <code>URL.toString()</code></li></ul></li> <li><code>URLSearchParams</code> — container mixin, added to global since v10
<ul><li>the purpose of the <code>querystring</code> module is more general, as it allows the customization of delimiter characters (&amp; and =)</li> <li><code>constructor()</code><br> <code>constructor(init?: URLSearchParams)</code><br> <code>constructor(init?: string)</code> — leading <code>?</code> is ignored<br> <code>constructor(init?: { [key: string]: string | string[] | undefined })</code><br> <code>constructor(init?: Iterable&lt;[string, string]&gt; | Array&lt;[string, string]&gt;)</code></li> <li><code>append(name: string, value: string): void</code></li> <li><code>delete(name: string): void</code></li> <li><code>entries(): IterableIterator&lt;[string, string]&gt;</code></li> <li><code>forEach(callback: (value: string, name: string, searchParams: this) =&gt; void): void</code></li> <li><code>get(name: string): string | null</code></li> <li><code>getAll(name: string): string[]</code></li> <li><code>has(name: string): boolean</code></li> <li><code>keys(): IterableIterator&lt;string&gt;</code></li> <li><code>set(name: string, value: string): void</code></li> <li><code>sort(): void</code></li> <li><code>toString(): string</code></li> <li><code>values(): IterableIterator&lt;string&gt;</code></li> <li><code>[Symbol.iterator](): IterableIterator&lt;[string, string]&gt;</code></li></ul></li></ul></li></ol> <h2 id="Runtime-service"><a href="#Runtime-service" class="header-anchor">#</a> Runtime service</h2> <ol><li><p><code>process</code> — a <code>global</code> that provides information about, and control over, the current Node.js process</p> <ul><li>I/O
<ul><li>used internally in <code>console</code></li> <li>Writes may be synchronous depending on what the stream is connected to and whether the system is Windows or POSIX</li> <li><code>process.stderr: Stream</code> — <code>fd</code> 2</li> <li><code>process.stdin: Stream</code> — <code>fd</code> 0</li> <li><code>process.stdout: Stream</code> — <code>fd</code> 1</li></ul></li> <li>environment
<ul><li><code>process.argv: string[]</code> — <code>process.execPath</code>, then the executed file, then other arguments</li> <li><code>process.argv0: string</code> — original value of <code>process.argv[0]</code></li> <li><code>process.chdir(directory: string): void</code></li> <li><code>process.cwd(): string</code></li> <li><code>process.env</code> — an object containing the user environment</li> <li><code>process.execArgv</code> — the set of Node.js-specific command-line options passed when the Node.js process was launched</li> <li><code>process.execPath</code> — the absolute pathname of the executable</li> <li><code>process.version: string</code></li> <li><code>process.versions: ProcessVersions</code> — version strings of Node.js and its dependencies</li></ul></li> <li>runtime
<ul><li><code>process.exit(code?: number): never</code></li></ul></li> <li>more</li></ul></li> <li><p><code>perf_hooks</code> (experimental) — as <code>Performance</code> in browsers</p></li> <li><p><code>child_process</code> — spawn child processes in a manner that is similar to <code>popen(3)</code></p> <ul><li><a href="https://www.perkin.org.uk/posts/how-to-fix-stdio-buffering.html" target="_blank" rel="noopener noreferrer">“How to fix stdio buffering”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and its companion piece <a href="http://www.pixelbeat.org/programming/stdio_buffering/" target="_blank" rel="noopener noreferrer">“Buffering in standard streams”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>child_process.spawn(command: string, args?: ReadonlyArray&lt;string&gt;, options?: SpawnOptions): ChildProcess</code> <ul><li>command — console command</li> <li>Pipes are established between the parent application and the child process</li></ul></li></ul></li> <li><p><code>cluster</code> — allows easy creation of child processes that all share server ports</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> cluster <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cluster'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> numCPUs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cpus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>cluster<span class="token punctuation">.</span>isMaster<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Master </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>pid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is running</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Fork workers.</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numCPUs<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cluster<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  cluster<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'exit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">worker<span class="token punctuation">,</span> code<span class="token punctuation">,</span> signal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">worker </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>worker<span class="token punctuation">.</span>process<span class="token punctuation">.</span>pid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> died</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// Workers can share any TCP connection</span>
  <span class="token comment">// In this case it is an HTTP server</span>
  http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'hello world\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Worker </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>pid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> started</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>A single instance of Node.js runs in a single thread. To take advantage of multi-core systems, the user will sometimes want to launch a cluster of Node.js processes to handle the load</li> <li>The worker processes are spawned using the <code>child_process.fork()</code> method, so that they can communicate with the parent via IPC and pass server handles back and forth</li></ul></li> <li><p><code>worker_threads</code> — provides a way to create multiple environments running on independent threads, and to create message channels between them</p> <ul><li><code>--experimental-worker</code> flag</li> <li>useful for performing CPU-intensive JavaScript operations; do not use them for I/O</li> <li>unlike child processes or when using the <code>cluster</code> module, can also share memory efficiently by transferring <code>ArrayBuffer</code> instances or sharing <code>SharedArrayBuffer</code> instances between them</li></ul></li></ol> <h2 id="System-and-OS"><a href="#System-and-OS" class="header-anchor">#</a> System and OS</h2> <ol><li><p><code>fs</code> — file system</p> <ul><li><p>Promises API — <code>require('fs').promises</code>, refer to docs for methods</p></li> <li><p>All the methods have asynchronous and synchronous forms</p> <ul><li>The asynchronous form always takes a completion callback as its last argument
<ul><li>no guaranteed ordering when called — chain the callbacks, or <code>await</code></li> <li>the first and typically only argument of a callback is always reserved for an exception, <code>null</code> or <code>undefined</code> when resolved</li></ul></li> <li>the synchronous form any exceptions are immediately thrown
<ul><li>Exceptions may be handled using <code>try/catch,</code> or they may be allowed to bubble up.</li></ul></li></ul></li> <li><p>While it is not recommended, most fs functions allow the callback argument to be omitted, in which case a default callback is used that rethrows errors</p> <ul><li>To get a trace to the original call site, set the <code>NODE_DEBUG</code> environment variable</li></ul></li> <li><p>hidden file on windows</p> <ul><li>On Windows, opening an existing hidden file using the <code>w</code> flag (either through <code>fs.open</code> or <code>fs.writeFile</code>) will fail with <code>EPERM</code></li> <li>Existing hidden files can be opened for writing with the <code>r+</code> flag</li></ul></li> <li><p><code>type PathLike = string | Buffer | URL</code></p> <ul><li>WHATWG <code>URL</code> object support experimental — <code>file:</code> protocol, tbc</li></ul></li> <li><p><code>fd: number</code> — file descriptor, returned by <code>fs.open()</code></p></li> <li><p>watch for changes on a file or a director — <code>fs.watch()</code></p> <div class="language-TypeScript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">watch</span><span class="token punctuation">(</span>
    filename<span class="token operator">:</span> PathLike<span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span> encoding<span class="token operator">?</span><span class="token operator">:</span> BufferEncoding <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> persistent<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> recursive<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span> <span class="token operator">|</span> BufferEncoding <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    listener<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> filename<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> FSWatcher
</code></pre></div><ul><li>listener will be attached to the <code>'change'</code> event of the returned <code>FSWatcher</code></li> <li>less efficient — <code>fs.watchFile(...): void</code>, <code>fs.unwatchFile(...): void</code></li> <li><code>fs.FSWatcher extends events.EventEmitter</code> <ul><li>event <code>'change'</code> — Emitted when something changes in a watched directory or file: callback — <code>(eventType: string, filename: string | Buffer)</code> — <code>eventType</code> can be <code>change</code> or <code>rename</code></li> <li>event <code>'error'</code> — callback — <code>(error: Error)</code></li> <li><code>FSWatcher.close(): void</code></li></ul></li></ul></li> <li><p><code>fs.access(...): void</code> — Tests a user's permissions for the file or directory</p> <ul><li><code>fs.accessSync(...): void</code></li> <li>Using <code>fs.access()</code> to check for the accessibility of a file before calling other <code>fs</code> methods is not recommended — introduces a race condition</li> <li>should open/read/write the file directly and handle the error raised if the file is not accessible</li></ul></li> <li><p>rename — <a href="http://man7.org/linux/man-pages/man2/rename.2.html" target="_blank" rel="noopener noreferrer">rename(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>fs.rename(oldPath: PathLike, newPath: PathLike, callback: (err: NodeJS.ErrnoException) =&gt; void): void</code></li> <li><code>fs.renameSync(oldPath: PathLike, newPath: PathLike): void</code></li></ul></li> <li><p>truncate — <a href="http://man7.org/linux/man-pages/man2/truncate.2.html" target="_blank" rel="noopener noreferrer">truncate(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>fs.truncate(path: PathLike, len?: number | undefined | null, callback): void</code> — Truncate a file to a specified length, <code>truncate(2)</code></li> <li><code>fs.ftruncate(fd: number, len: number | undefined | null, callback): void</code> — ftruncate(2) - Truncate a file to a specified length</li> <li><code>fs.ftruncateSync(fd: number, len?: number | null): void</code></li> <li><code>fs.truncateSync(path: PathLike, len?: number | null): void</code></li> <li>extend with null bytes when large <code>len</code>, <code>len</code> default to 0</li></ul></li> <li><p>Change ownership — <a href="http://man7.org/linux/man-pages/man2/chown.2.html" target="_blank" rel="noopener noreferrer">chown(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>fs.chown(path: PathLike, uid: number, gid: number, callback): void</code></li> <li><code>fs.chownSync(path: PathLike, uid: number, gid: number): void</code></li> <li><code>fs.fchown(fd: number, uid: number, gid: number, callback): void</code></li> <li><code>fs.fchownSync(fd: number, uid: number, gid: number): void</code></li> <li><code>fs.lchown(path: PathLike, uid: number, gid: number, callback): void</code></li></ul></li> <li><p>Change permissions — <a href="http://man7.org/linux/man-pages/man2/chmod.2.html" target="_blank" rel="noopener noreferrer">chmod(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><a href="https://nodejs.org/dist/latest-v8.x/docs/api/fs.html#fs_file_modes" target="_blank" rel="noopener noreferrer">modes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>fs.chmod(path: PathLike, mode: string | number, callback): void</code></li> <li><code>fs.chmodSync(path: PathLike, mode: string | number): void</code></li> <li><code>fs.fchmod(fd: number, mode: string | number, callback): void</code></li> <li><code>fs.fchmodSync(fd: number, mode: string | number): void</code></li> <li><code>fs.lchmod(path: PathLike, mode: string | number, callback): void</code> — BSD variant, Does not dereference symbolic links</li> <li><code>fs.lchmodSync(path: PathLike, mode: string | number): void</code></li></ul></li> <li><p>get file status — <a href="http://man7.org/linux/man-pages/man2/stat.2.html" target="_blank" rel="noopener noreferrer">stat(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>fs.stat(path: PathLike, callback: (err: NodeJS.ErrnoException, stats: Stats) =&gt; void): void</code></li> <li><code>fs.statSync(path: PathLike): Stats</code></li> <li><code>fs.fstat(fd: number, callback: (err: NodeJS.ErrnoException, stats: Stats) =&gt; void): void</code></li> <li><code>fs.fstatSync(fd: number): Stats</code></li> <li><code>fs.lstat(path: PathLike, callback: (err: NodeJS.ErrnoException, stats: Stats) =&gt; void): void</code></li> <li><code>fs.lstatSync(path: PathLike): Stats</code></li> <li><code>class Stats</code> <ul><li><code>isFile(): boolean</code></li> <li><code>isDirectory(): boolean</code></li> <li><code>isBlockDevice(): boolean</code></li> <li><code>isCharacterDevice(): boolean</code></li> <li><code>isSymbolicLink(): boolean</code> (only valid with fs.lstat())</li> <li><code>isFIFO(): boolean</code></li> <li><code>isSocket(): boolean</code></li> <li>coordination — <code>util.inspect(stats)</code> — <code>dev: number</code> <code>ino: number</code> <code>mode: number</code> <code>nlink: number</code> <code>uid: number</code> <code>gid: number</code> <code>rdev: number</code> <code>size: number</code> <code>blksize: number</code> <code>blocks: number</code> <code>atimeMs: number</code> <code>mtimeMs: number</code> <code>ctimeMs: number</code> <code>birthtimeMs: number</code> <code>atime: Date</code> <code>mtime: Date</code> <code>ctime: Date</code> <code>birthtime: Date</code></li> <li>a: access, m: modified, c: change</li></ul></li></ul></li> <li><p>link — <a href="http://man7.org/linux/man-pages/man2/link.2.html" target="_blank" rel="noopener noreferrer">link(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="http://man7.org/linux/man-pages/man2/symlink.2.html" target="_blank" rel="noopener noreferrer">symlink(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="http://man7.org/linux/man-pages/man2/readlink.2.html" target="_blank" rel="noopener noreferrer">readlink(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="http://man7.org/linux/man-pages/man2/unlink.2.html" target="_blank" rel="noopener noreferrer">unlink(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>fs.link(existingPath: PathLike, newPath: PathLike, callback): void</code></li> <li><code>fs.linkSync(existingPath: PathLike, newPath: PathLike): void</code></li> <li><code>fs.symlink(target: PathLike, path: PathLike, callback): void</code><br> <code>fs.symlink(target: PathLike, path: PathLike, type: symlink.Type | null, callback): void</code></li> <li><code>fs.symlinkSync(target: PathLike, path: PathLike, type?: symlink.Type | null): void</code></li> <li><code>symlink.Type = &quot;dir&quot; | &quot;file&quot; | &quot;junction&quot;</code> — only available on Windows (ignored on other platforms), defaults to <code>'file'</code></li> <li><code>fs.readlink(...): void</code></li> <li><code>fs.readlinkSync(...): string | Buffer</code></li> <li><code>fs.unlink(path: PathLike, callback): void</code></li> <li><code>fs.unlinkSync(path: PathLike): void</code></li></ul></li> <li><p>path — <a href="http://man7.org/linux/man-pages/man3/realpath.3.html" target="_blank" rel="noopener noreferrer">path(3)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>fs.realpath(path: PathLike, callback: (err: NodeJS.ErrnoException, resolvedPath: string) =&gt; void): void</code><br>
buffer overload</li> <li><code>fs.realpath.native(...): void</code></li> <li><code>fs.realpathSync(path: PathLike, options?): string | Buffer</code></li> <li><code>fs.realpathSync(...): ...</code></li></ul></li> <li><p>dir — <a href="http://man7.org/linux/man-pages/man2/rmdir.2.html" target="_blank" rel="noopener noreferrer">rmdir(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="http://man7.org/linux/man-pages/man2/mkdir.2.html" target="_blank" rel="noopener noreferrer">mkdir(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <code>mkdtemp</code>, <a href="http://man7.org/linux/man-pages/man3/readdir.3.html" target="_blank" rel="noopener noreferrer">readdir(3)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><code>fs.rmdir(path: PathLike, callback): void</code></li> <li><code>fs.rmdirSync(path: PathLike): void</code></li> <li><code>fs.mkdir(path: PathLike, mode: number | string | MakeDirectoryOptions | undefined | null, callback): void</code></li> <li><code>fs.mkdirSync(path: PathLike, mode?: number | string | MakeDirectoryOptions | null): void</code></li> <li><code>fs.mkdtemp(...)</code></li> <li><code>fs.mkdtempSync(...)</code></li> <li><code>fs.readdir(path, options?, callback: (err, files: string[] | Buffer[]) =&gt; void): void</code></li> <li><code>fs.readdirSync(path, options?): string[] | Buffer[]</code></li></ul></li> <li><p>open and close — <a href="http://man7.org/linux/man-pages/man2/open.2.html" target="_blank" rel="noopener noreferrer">open(2)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, [close(2)]</p> <ul><li><code>fs.close(fd: number, callback): void</code></li> <li><code>fs.closeSync(fd: number): void</code></li> <li><code>fs.open(path: PathLike, flags: string | number, mode: string | number | undefined | null, callback: (err: NodeJS.ErrnoException, fd: number) =&gt; void): void</code> <ul><li><code>flags</code> — <code>r</code>, <code>w</code>, <code>x</code>, <code>+</code>, <code>a</code></li></ul></li> <li><code>fs.openSync(path: PathLike, flags: string | number, mode?: string | number | null): number</code></li></ul></li> <li><p>modify — change timestamps</p> <ul><li><code>fs.utimes(path: PathLike, atime: string | number | Date, mtime: string | number | Date, callback): void</code></li> <li><code>fs.utimesSync(path: PathLike, atime: string | number | Date, mtime: string | number | Date): void</code></li> <li><code>fs.futimes(fd: number, atime: string | number | Date, mtime: string | number | Date, callback): void</code></li> <li><code>fs.futimesSync(fd: number, atime: string | number | Date, mtime: string | number | Date): void</code></li></ul></li> <li><p>write and read</p> <div class="language-TypeScript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">write</span><span class="token generic class-name"><span class="token operator">&lt;</span>TBuffer <span class="token keyword">extends</span> BinaryData<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
    fd<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    buffer<span class="token operator">:</span> TBuffer<span class="token punctuation">,</span>
    offset<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    position<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>ErrnoException<span class="token punctuation">,</span> written<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> buffer<span class="token operator">:</span> TBuffer<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">writeSync</span><span class="token punctuation">(</span>fd<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> buffer<span class="token operator">:</span> BinaryData<span class="token punctuation">,</span> offset<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> length<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> position<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token operator">:</span> PathLike <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> options<span class="token operator">:</span> WriteFileOptions<span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>ErrnoException<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token operator">:</span> PathLike <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>ErrnoException<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token comment">///////////////////</span>
<span class="token keyword">function</span> <span class="token function">appendFile</span><span class="token punctuation">(</span>file<span class="token operator">:</span> PathLike <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> options<span class="token operator">:</span> WriteFileOptions<span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>ErrnoException<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">appendFile</span><span class="token punctuation">(</span>file<span class="token operator">:</span> PathLike <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>ErrnoException<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">appendFileSync</span><span class="token punctuation">(</span>file<span class="token operator">:</span> PathLike <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> WriteFileOptions<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token comment">///////////////////</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">read</span><span class="token generic class-name"><span class="token operator">&lt;</span>TBuffer <span class="token keyword">extends</span> BinaryData<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
    fd<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    buffer<span class="token operator">:</span> TBuffer<span class="token punctuation">,</span>
    offset<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    position<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    callback<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>ErrnoException<span class="token punctuation">,</span> bytesRead<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> buffer<span class="token operator">:</span> TBuffer<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">readSync</span><span class="token punctuation">(</span>fd<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> buffer<span class="token operator">:</span> BinaryData<span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> position<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">readFile</span><span class="token punctuation">(</span>
    path<span class="token operator">:</span> PathLike <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span> encoding<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span> flag<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>ErrnoException<span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> Buffer<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token operator">:</span> PathLike <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> encoding<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span> flag<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> Buffer<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>read and write stream</p> <div class="language-TypeScript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">createReadStream</span><span class="token punctuation">(</span>path<span class="token operator">:</span> PathLike<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">{</span>
    flags<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    encoding<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    fd<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    mode<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    autoClose<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    start<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    end<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    highWaterMark<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> ReadStream<span class="token punctuation">;</span>
<span class="token comment">/////////////</span>
<span class="token keyword">function</span> <span class="token function">createWriteStream</span><span class="token punctuation">(</span>path<span class="token operator">:</span> PathLike<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">{</span>
    flags<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    encoding<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    fd<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    mode<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    autoClose<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    start<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> WriteStream<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>ReadStream extends stream.Readable</code> <ul><li>event
<ul><li><code>(event: &quot;open&quot;, listener: (fd: number) =&gt; void): this</code></li> <li><code>(event: &quot;close&quot;, listener: () =&gt; void): this</code></li> <li><code>(event: &quot;ready&quot;, listener: () =&gt; void): this</code> — ready to be used. Fires immediately after <code>'open'</code></li></ul></li> <li><code>ReadStream.bytesRead: number</code> — The number of bytes read so far</li> <li><code>ReadStream.path: string | Buffer</code></li></ul></li> <li><code>WriteStream extends stream.Writable</code> <ul><li>event — as <code>ReadStream</code></li> <li><code>WriteStream.bytesRead: number</code></li> <li><code>WriteStream.path: string | Buffer</code></li></ul></li></ul></li> <li><p>copy file</p> <ul><li><code>fs.copyFile(src: PathLike, dest: PathLike, callback): void</code><br> <code>fs.copyFile(src: PathLike, dest: PathLike, flags: number, callback): void</code></li> <li><code>fs.copyFileSync(src: PathLike, dest: PathLike, flags?: number): void</code></li></ul></li> <li><p>more tbc</p></li></ul></li> <li><p><code>os</code> — provides a number of operating system-related utility methods</p> <ul><li><code>hostname(): string</code></li> <li><code>loadavg(): number[]</code></li> <li><code>uptime(): number</code></li> <li><code>freemem(): number</code></li> <li><code>totalmem(): number</code></li> <li><code>cpus(): CpuInfo[]</code></li> <li><code>type(): string</code></li> <li><code>release(): string</code></li> <li><code>networkInterfaces(): { [index: string]: NetworkInterfaceInfo[] }</code></li> <li><code>homedir(): string</code></li> <li><code>userInfo(options?: { encoding: string }): { username: string, uid: number, gid: number, shell: any, homedir: string }</code></li> <li><code>arch(): string</code></li> <li><code>platform(): NodeJS.Platform</code></li> <li><code>tmpdir(): string</code></li> <li><code>endianness(): &quot;BE&quot; | &quot;LE&quot;</code></li> <li><code>const EOL: string</code></li> <li><code>more</code></li></ul></li> <li><p><code>path</code> — utilities for working with file and directory paths</p> <div class="language- extra-class"><pre class="language-text"><code>┌─────────────────────┬────────────┐
│          dir        │    base    │
├──────┬              ├──────┬─────┤
│ root │              │ name │ ext │
&quot;  /    home/user/dir / file  .txt &quot;
└──────┴──────────────┴──────┴─────┘
┌─────────────────────┬────────────┐
│          dir        │    base    │
├──────┬              ├──────┬─────┤
│ root │              │ name │ ext │
&quot; C:\      path\dir   \ file  .txt &quot;
└──────┴──────────────┴──────┴─────┘
</code></pre></div><ul><li>when working with Windows file paths — <code>path.win32</code></li> <li>working with POSIX file paths — <code>path.posix</code></li> <li><code>path.normalize(p: string): string</code> — normalizes the given path, resolving <code>'..'</code> and <code>'.'</code> segments, normalize <code>path.delimiter</code></li> <li><code>path.join(...paths: string[]): string</code> — Join all arguments together and normalize the resulting path</li> <li><code>isAbsolute(path: string): boolean</code></li> <li><code>relative(from: string, to: string): string</code></li> <li><code>dirname(p: string): string</code></li> <li><code>basename(p: string, ext?: string): string</code></li> <li><code>extname(p: string): string</code></li> <li><code>parse(pathString: string): ParsedPath</code> — get root, dir, base, name, and ext</li> <li><code>format(pathObject: FormatInputPathObject): string</code> — reverse of <code>parse()</code></li> <li><code>const sep: '\\' | '/'</code></li> <li><code>const delimiter: ';' | ':'</code></li> <li>more</li></ul></li> <li><p><code>tty</code> — provides the <code>tty.ReadStream</code> and <code>tty.WriteStream</code> classes</p> <ul><li><p>When Node.js detects that it is being run with a text terminal (&quot;TTY&quot;) attached, <code>process.stdin</code> will, by default, be initialized as an instance of <code>tty.ReadStream</code> and both <code>process.stdout</code> and <code>process.stderr</code> will, by default be instances of <code>tty.WriteStream</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ node -p -e <span class="token string">&quot;Boolean(process.stdout.isTTY)&quot;</span>
<span class="token boolean">true</span>
$ node -p -e <span class="token string">&quot;Boolean(process.stdout.isTTY)&quot;</span> <span class="token operator">|</span> <span class="token function">cat</span>
<span class="token boolean">false</span>
</code></pre></div></li> <li><p>more</p></li></ul></li></ol> <h2 id="Node-js-utilities"><a href="#Node-js-utilities" class="header-anchor">#</a> Node.js utilities</h2> <ol><li><p><code>repl</code> — provides a Read-Eval-Print-Loop (REPL) implementation that is available both as a standalone program or includible in other applications</p> <ul><li>Design and Features — <code>repl.start(...)</code> creates <code>repl.REPLServer</code>, which will act as REPL
<ul><li>input and output may be connected to any <code>Stream</code></li> <li>evaluation can be overridden by passing in an alternative evaluation function when the <code>repl.REPLServer</code> instance is created</li> <li>possible to expose a variable to the REPL explicitly by assigning it to the <code>REPLServer.context</code> object</li></ul></li> <li>Commands in REPL — <code>.</code>, <code>.help</code> <ul><li><code>.break</code> — When in the process of inputting a multi-line expression, entering the .break command (or pressing the <code>&lt;ctrl&gt;-C</code> key combination) will abort further input or processing of that expression</li> <li><code>.clear</code> — Resets the REPL context to an empty object and clears any multi-line expression currently being input</li> <li><code>.exit</code> — Close the I/O stream, causing the REPL to exit</li> <li><code>.help</code> — Show this list of special commands</li> <li><code>.save</code> — Save the current REPL session to a file: <code>&gt; .save ./file/to/save.js</code></li> <li><code>.load</code> — Load a file into the current REPL session. <code>&gt; .load ./file/to/load.js</code></li> <li><code>.editor</code> — Enter editor mode (<code>&lt;ctrl&gt;-D</code> to finish, <code>&lt;ctrl&gt;-C</code> to cancel)</li></ul></li> <li>Special keys
<ul><li><code>&lt;ctrl&gt;-C</code> — When pressed once, has the same effect as the <code>.break</code> command. When pressed twice on a blank line, has the same effect as the <code>.exit</code> command</li> <li><code>&lt;ctrl&gt;-D</code> — Has the same effect as the <code>.exit</code> command</li> <li><code>&lt;tab&gt;</code> — When pressed on a blank line, displays global and local(scope) variables. When pressed while entering other input, displays relevant autocompletion options</li></ul></li> <li>variables
<ul><li>modules available as module name</li> <li><code>_</code> — ans</li></ul></li> <li><code>--experimental-repl-await</code> — Enable experimental top-level <code>await</code> keyword support in REPL</li> <li>more</li></ul></li> <li><p><code>async_hooks</code> experimental</p> <ul><li>provides an API to register callbacks tracking the lifetime of asynchronous resources created inside a Node.js application</li></ul></li> <li><p>ECMAScript Modules — <code>--experimental-modules</code></p></li> <li><p><code>util</code></p> <ul><li><p><code>util.format(format: any, ...param: any[]): string</code> — <code>printf</code>-like</p> <ul><li><code>%s</code> - String</li> <li><code>%d</code> - Number (integer or floating point value)</li> <li><code>%i</code> - Integer</li> <li><code>%f</code> - Floating point value</li> <li><code>%j</code> - JSON. Replaced with the string <code>'[Circular]'</code> if the argument contains circular references</li> <li><code>%o</code> - Object. A string representation of an object with generic JavaScript object formatting. Similar to <code>util.inspect()</code> with options <code>{ showHidden: true, depth: 4, showProxy: true }</code>. This will show the full object including non-enumerable symbols and properties</li> <li><code>%O</code> - Object. A string representation of an object with generic JavaScript object formatting. Similar to <code>util.inspect()</code> without options. This will show the full object not including non-enumerable symbols and properties</li> <li><code>%%</code> - single percent sign ('%'). This does not consume an argument</li></ul></li> <li><p><code>util.callbackify(...): Function</code> — Takes an <code>async</code> function (or a function that returns a Promise) and returns a function following the error-first callback style</p></li> <li><p><code>util.promisify(...): Promise</code> — Takes a function following the common error-first callback style, i.e. take callback as the last argument, and returns a version that returns promises</p> <ul><li><code>this</code> is lost if not bound</li></ul></li> <li><p><code>util.debuglog(key: string): (msg: string, ...param: any[]) =&gt; void</code> — create a <code>console.error()</code> like function that conditionally writes debug messages to <code>stderr</code> based on the existence of the <code>NODE_DEBUG</code> environment variable</p></li> <li><p><code>util.deprecate&lt;T extends Function&gt;(fn: T, message: string): T</code> — wraps the given function or class in such a way that it is marked as deprecated</p> <ul><li>emit a <code>DeprecationWarning</code> using the <code>process.on('warning')</code> event</li> <li>By default, this warning will be emitted and printed to <code>stderr</code> exactly once, the first time it is called</li> <li>behavior controlled by command line flags and <code>process</code> properties</li></ul></li> <li><p><code>util.getSystemErrorName(err: number): string</code> — Returns the string name for a numeric error code that comes from a Node.js API</p> <ul><li><a href="https://nodejs.org/dist/latest-v8.x/docs/api/errors.html#errors_common_system_errors" target="_blank" rel="noopener noreferrer">Common System Errors<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>typically <code>Error.errno: number</code> as parameter</li></ul></li> <li><p><code>util.inspect(...): string</code> — returns a string representation of object that is primarily useful for debugging. Additional options may be passed that alter certain aspects of the formatted string</p></li> <li><p><code>util.isDeepStrictEqual(val1: any, val2: any): boolean</code></p></li> <li><p><code>util.TextDecoder</code> — An implementation of the WHATWG Encoding Standard, support some encodings using the full <a href="https://en.wikipedia.org/wiki/International_Components_for_Unicode" target="_blank" rel="noopener noreferrer">ICU<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> data</p> <div class="language-TypeScript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">TextDecoder</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> encoding<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// defaults to 'utf-8'</span>
    <span class="token keyword">readonly</span> fatal<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// defaults to false</span>
    <span class="token keyword">readonly</span> ignoreBOM<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// byte order mark, defaults to `false`</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>
      encoding<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
      options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> fatal<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> ignoreBOM<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">decode</span><span class="token punctuation">(</span>
      input<span class="token operator">?</span><span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>TypedArray <span class="token operator">|</span> DataView <span class="token operator">|</span> ArrayBuffer <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> stream<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span> <span class="token comment">// true if additional chunks are expected, defaults to false</span>
    <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>encodings — <code>utf-8</code>, <code>utf-16</code>, more</li></ul></li> <li><p><code>util.TextEncoder</code> — An implementation of the WHATWG Encoding Standard, only support UTF-8 encoding</p> <div class="language-TypeScript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">TextEncoder</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> encoding<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">encode</span><span class="token punctuation">(</span>input<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Uint8Array<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>util.types</code> — type checks for different kinds of built-in objects, usually have the overhead of calling into C++, primarily useful for addon developers who prefer to do type checking in JavaScript</p> <ul><li><code>util.types.isXxx(...): boolean</code></li></ul></li></ul></li> <li><p><code>v8</code> — exposes APIs that are specific to the version of V8 built into the Node.js binary</p></li> <li><p><code>vm</code> — provides APIs for compiling and running code within V8 Virtual Machine contexts</p></li> <li><p>C++ addons</p></li> <li><p>N-API — Application Binary Interface (ABI) stable across versions of Node.js</p></li></ol> <h1 id="npm"><a href="#npm" class="header-anchor">#</a> npm</h1> <ol><li><p>docs</p> <ul><li><a href="https://docs.npmjs.com/" target="_blank" rel="noopener noreferrer">official site<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://docs.npmjs.com/all" target="_blank" rel="noopener noreferrer">official site<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>npm help npm</code></li> <li><code>npm help &lt;term&gt;</code></li> <li>package search — <a href="https://npms.io/" target="_blank" rel="noopener noreferrer">npms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://www.npmjs.com/search?q=" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <code>npm search</code></li></ul></li> <li><p><code>npm help &lt;term&gt; [&lt;terms..&gt;]</code></p></li> <li><p><code>npm install</code>, <code>npm i</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm install (with no args, in package dir)
npm install [&lt;@scope&gt;/]&lt;name&gt;
npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;tag&gt;
npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;version&gt;
npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;version range&gt;
npm install &lt;git-host&gt;:&lt;git-user&gt;/&lt;repo-name&gt;
npm install &lt;git repo url&gt;
npm install &lt;tarball file&gt;
npm install &lt;tarball url&gt;
npm install &lt;folder&gt;
</code></pre></div><ul><li>common options
<ul><li><code>[-P|--save-prod|-D|--save-dev|-O|--save-optional]</code></li> <li><code>[-E|--save-exact]</code></li> <li><code>[-B|--save-bundle]</code></li> <li><code>[--no-save]</code></li> <li><code>[--dry-run]</code></li></ul></li> <li>With the <code>--production</code> flag (or when the <code>NODE_ENV</code> environment variable is set to production), npm will not install modules listed in <code>devDependencies</code></li> <li>scope — a way of grouping related packages together, and also affect a few things about the way npm treats the package
<ul><li><code>@types</code></li></ul></li> <li>more</li></ul></li> <li><p><code>npm uninstall ...</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm uninstall [&lt;@scope&gt;/]&lt;pkg&gt;[@&lt;version&gt;]... [-S|--save|-D|--save-dev|-O|--save-optional|--no-save]
aliases: remove, rm, r, un, unlink
</code></pre></div><ul><li>options correspond to <code>dependencies</code>, <code>devDependencies</code>, <code>optionalDependencies</code></li></ul></li> <li><p><code>npm update [...]</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm update [-g] [&lt;pkg&gt;...]
aliases: up, upgrade
</code></pre></div><ul><li>update npm — <code>npm install npm -g</code>, <code>npm install npm@latest -g</code></li></ul></li> <li><p><code>npm outdated</code> — check the registry to see if any (or, specific) installed packages are currently outdated</p> <div class="language- extra-class"><pre class="language-text"><code>npm outdated [[&lt;@scope&gt;/]&lt;pkg&gt; ...]
</code></pre></div></li> <li><p><code>npm list</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm ls [[&lt;@scope&gt;/]&lt;pkg&gt; ...]
aliases: list, la, ll
</code></pre></div></li> <li><p><code>npm config</code>, <code>npm c</code> — gets its config settings from the command line, environment variables, <code>npmrc</code> files, and in some cases, the <code>package.json</code> file</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token punctuation">[</span>-g<span class="token operator">|</span>--global<span class="token punctuation">]</span> <span class="token comment"># value defaults to true</span>
<span class="token function">npm</span> config get <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
<span class="token function">npm</span> config delete <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
<span class="token function">npm</span> config list <span class="token punctuation">[</span>-l<span class="token punctuation">]</span> <span class="token punctuation">[</span>--json<span class="token punctuation">]</span> <span class="token comment"># Show all the config settings, -l also show defaults</span>
<span class="token comment">############################### --json show the settings in json format</span>
<span class="token function">npm</span> config edit <span class="token comment"># --global flag to edit the global config</span>
<span class="token function">npm</span> get <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
<span class="token function">npm</span> <span class="token builtin class-name">set</span> <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token punctuation">[</span>-g<span class="token operator">|</span>--global<span class="token punctuation">]</span>
</code></pre></div><ul><li><code>npmrc</code> <ul><li>four
<ul><li>per-project config file (/path/to/my/project/.npmrc)</li> <li>per-user config file (~/.npmrc)</li> <li>global config file ($PREFIX/etc/npmrc)</li> <li>npm builtin config file (/path/to/npm/npmrc)</li></ul></li> <li><code>key = value</code></li> <li>Environment variables — <code>prefix = ${HOME}/.npm-packages</code></li> <li>array values — <code>key[] = &quot;first value&quot;</code>, <code>key[] = &quot;second value&quot;</code></li> <li>line comment — <code>;</code>, <code>#</code></li></ul></li></ul></li> <li><p><code>npm link</code>, <code>npm ln</code> — Symlink a package folder</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">link</span> <span class="token punctuation">(</span>in package <span class="token function">dir</span><span class="token punctuation">)</span> <span class="token comment"># creates global link</span>
<span class="token function">npm</span> <span class="token function">link</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token comment"># link-install the package</span>
</code></pre></div><ul><li>two step
<ul><li>First, <code>npm link</code> in a package folder will create a symlink in the global folder that links to the package where the <code>npm link</code> command was executed</li> <li>Next, in some other location, create a symbolic link from globally-installed <code>package-name</code> to <code>node_modules/</code> of the current folder</li></ul></li> <li>two step in one — specify the package to link-install as a path can be resolved<div class="language- extra-class"><pre class="language-text"><code>npm link ../node-redis
</code></pre></div></li></ul></li> <li><p><code>npm init</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm init [--force|-f|--yes|-y|--scope]
npm init &lt;@scope&gt; (same as `npx &lt;@scope&gt;/create`)
npm init [&lt;@scope&gt;/]&lt;name&gt; (same as `npx [&lt;@scope&gt;/]create-&lt;name&gt;`)
</code></pre></div></li> <li><p><code>package.json</code></p> <ul><li><a href="https://docs.npmjs.com/files/package.json" target="_blank" rel="noopener noreferrer">npm doc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://wiki.commonjs.org/wiki/Packages/1.0#Package_Descriptor_File" target="_blank" rel="noopener noreferrer">based on the CommonJS module system recommendations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>name</code> — The name of the package—required</li> <li><code>version</code> — The current version conforming to semantic version requirements—required</li> <li><code>description</code> — The package description</li> <li><code>keywords</code> — An array of search terms</li> <li><code>maintainers</code> — An array of package maintainers (includes name, email, and website)</li> <li><code>contributors</code> — An array of package contributors (includes name, email, and website)</li> <li><code>bugs</code> — The URL where bugs can be submitted</li> <li><code>licenses</code> — An array of licenses</li> <li><code>repository</code> — The package repository</li> <li><code>dependencies</code> — Prerequisite packages and their version numbers</li></ul></li> <li><p>publish</p> <ul><li><p><a href="https://docs.npmjs.com/misc/developers" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>a <code>directories</code> field in <code>package.json</code></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;directories&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token property">&quot;doc&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;test&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;example&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;examples&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>npm adduser</code></p></li> <li><p><code>npm publish</code></p></li></ul></li></ol> <h1 id="Popular-Node-Modules"><a href="#Popular-Node-Modules" class="header-anchor">#</a> Popular Node Modules</h1> <ol><li><p><code>async</code> — collections and flow control</p> <ul><li><a href="https://github.com/caolan/async" target="_blank" rel="noopener noreferrer">github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><code>commander</code> — Command-Line Magic</p></li> <li><p><code>underscore</code> or <code>lodash</code></p></li> <li><p>unit test</p> <ul><li><code>mocha</code></li> <li><code>tape</code></li> <li><code>jest</code>, <code>ts-jest</code></li> <li><code>alsatian</code></li> <li><code>chai-immutable</code></li></ul></li> <li><p><code>forever</code> — restarts if crashed</p></li> <li><p><code>loadtest</code></p></li></ol> <h2 id="Koa"><a href="#Koa" class="header-anchor">#</a> Koa</h2> <ol><li><p>philosophy — middleware</p> <ul><li>A Koa application is an object containing an array of middleware functions</li> <li>executed in a stack-like manner upon request</li></ul></li> <li><p>hello world</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>cascading</p> <ul><li>downstream</li> <li>upstream — <code>await next()</code></li></ul></li> <li><p>settings</p> <ul><li><code>app.env</code> defaulting to the NODE_ENV or &quot;development&quot;</li> <li><code>app.proxy</code> when true proxy header fields will be trusted</li> <li><code>app.subdomainOffset</code> offset of .subdomains to ignore [2]</li></ul></li> <li><p><code>class Application</code></p> <ul><li><code>Application.listen()</code> — <code>http.Server.listen()</code><br> <code>Application.callback()</code> — return callback functions<div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'https'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// equivalent to app.listen(3000)</span>
https<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Application.use()</code> — Add the given middleware function to this application
<ul><li><a href="https://github.com/koajs/koa/wiki#middleware" target="_blank" rel="noopener noreferrer">middleware<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><code>Application.key: KeyGrip | string[]</code> — set signed cookie keys, used when signing cookies with<div class="language-JavaScript extra-class"><pre class="language-javascript"><code>ctx<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'tobi'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> signed<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Application.context</code> — the prototype from which <code>ctx</code> is created, may add additional properties</li> <li>error handling
<ul><li>outputs all errors to <code>stderr</code> unless <code>app.silent</code> is <code>true</code>, except when <code>err.status</code> is 404 or <code>err.expose</code> is <code>true</code></li> <li>custom error-handling<div class="language-JavaScript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'server error'</span><span class="token punctuation">,</span> err<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>if an error is in the req/res cycle and it is not possible to respond to the client, the <code>Context</code> instance is also passed</li></ul></li></ul></li> <li><p>context</p> <ul><li><code>Context.req</code> — <code>http.IncomingMessage</code> — request in <code>http</code></li> <li><code>Context.res</code> — <code>http.ServerResponse</code> — response in <code>http</code> <ul><li>Bypassing Koa's response handling is not supported. Avoid using the following node properties:
<ul><li><code>res.statusCode</code></li> <li><code>res.writeHead()</code></li> <li><code>res.write()</code></li> <li><code>res.end()</code></li></ul></li></ul></li> <li><code>Context.state</code> — for frontend use</li> <li><code>Context.app</code> — Application instance reference</li> <li><code>ctx.cookies.get(name, [options])</code></li> <li><code>ctx.cookies.set(name, value, [options])</code></li></ul></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tangentyh/notes-of-tan/edit/master/docs/todo/node_note.md" target="_blank" rel="noopener noreferrer">Edit This Page On GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/9/2020, 3:53:24 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><div class="vuepress-eqn"></div><span class="vuepress-eq"></span></div></div>
    <script src="/notes-of-tan/assets/js/app.7f7a0f8e.js" defer></script><script src="/notes-of-tan/assets/js/2.33f31c9b.js" defer></script><script src="/notes-of-tan/assets/js/35.f39fc11f.js" defer></script>
  </body>
</html>
